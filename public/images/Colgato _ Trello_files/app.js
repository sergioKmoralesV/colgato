window.siteDomain=location.origin||/^[^/]+?[/]{2}[^/]+/.exec(location.href)[0];var t=[],e=function(e){t.push(e)},r=window;!function t(e,r,n){function o(s,a){if(!r[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[s]={exports:{}};e[s][0].call(l.exports,function(t){var r=e[s][1][t];return o(r?r:t)},l,l.exports,t,e,r,n)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(t,r,n){var o,i,s,a,u,c,l,d,p,h,m,f,g;s=void 0,e(function(){return s=t(318)}),a=void 0,e(function(){return a=t(355)}),u=void 0,e(function(){return u=t(432)}),c=void 0,e(function(){return c=t(27)}),l=t("bluebird"),o=t("jquery"),h=t("moment"),g=t(34),m=t(102),d=t(197),i=t(179),f=function(t){var e;return e=parseInt(t,10),isNaN(e)?void 0:e},p=function(t,e){return null!=e?t(e):void 0},r.exports={routes:[["board/*path","oldBoardView"],["b/:shortLink(/*path)","boardView"],["card/board/(:slug/):idBoard/:cardComponent","oldCardView"],["card/(:slug/):idBoard/:cardComponent","oldCardView"],["c/:id(/*path)","cardView"]],boardView:function(t,e){var r,n,o,i,s,a,u,c;return null==e&&(e=""),i=e.split("/"),u=i[0],s=i[1],c=i[2],o=i[3],n=i[4],a={idBoard:t},"calendar"===s&&(r=h().startOf("day"),r.year(f(c)),r.month(p(d.sub(1),f(o))),r.date(f(n)),r.isValid()&&(a.calendarDate=r.toDate())),"member"===s&&null!=c&&(a.usernameBoardProfile=c),this.displayBoard(a).done()},oldBoardView:function(t){var e,r;return r={},e=t.split("/"),1===e.length?r.idBoard=e[0]:r.idBoard=e[1],3===e.length?r.section=e[2]:4===e.length&&(r.usernameBoardProfile=e[3]),this.displayBoard(r).done()},cardView:function(t,e){return this.displayBoard({idCard:t}).done()},oldCardView:function(t,e,r){var n,o;return o=function(t){return/^\d+$/.test(t)},n=o(r)?c.loadCardId(e,r).catch(i,function(){return null}):l.resolve(r),n.then(function(t){return function(r){return t.displayBoard({idBoard:e,idCard:r})}}(this)).done()},showCardDetail:function(t,e,r){var n,i,c,l;if(null!=t){if(!this.onBoardView(null!=(c=t.getBoard())?c.id:void 0)||t.modelCache!==this.getCurrentModelCache())return void this.navigate(this.getCardUrl(t),{trigger:!0});g("Card Front","Open Card Detail"),i=new a({modelCache:this.getCurrentModelCache(),model:t}),n=t.getBoard(),l=this.showingCalendar(t.getBoard()&&this.applicationView.existingSubviewOrUndefined(s,t.getBoard())),u.show({view:i,hide:function(t){return function(e){return o(".attachment-viewer").remove(),e?void 0:(t.setBoardLocation(n.id,l?"calendar":void 0),t.title(n.get("name")))}}(this),isNavigating:r}),this.waitForId(t,function(e){return function(){return e.navigate(e.getCardUrl(t),{replace:e.onCardView(),trigger:!1})}}(this)),null!=e&&i[e]()}}}},{}],2:[function(t,r,n){var o,i,s,a,u;i=void 0,e(function(){return i=t(27)}),s=t("underscore"),a=t(76),o=t(22),u=t(639),r.exports={routes:[["*splat","displayErrorPage"]],displayErrorPage:function(t){var e;return e=s.extend({errorType:"notFound"},t,{url:location.pathname,isLoggedIn:o.isLoggedIn()}),this.staticView({title:a("error"),template:u,templateData:e,viewType:"error"})}}},{}],3:[function(t,r,n){var o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,B,M,T,O;a=t(22),i=t(429),u=void 0,e(function(){return u=t(125)}),c=void 0,e(function(){return c=t(318)}),d=t(23),h=void 0,e(function(){return h=t(27)}),p=void 0,e(function(){return p=t(26)}),m=t(436),f=t("bluebird"),g=t(99),B=t(31),v=t("underscore"),o=t("jquery"),y=t(57),T=t("moment"),w=t(197),O=t(102),M=t(77),s=t(179),l=M("DisplayBoard",["ConfirmToView","CardNotFound","CardNotFoundOnThisBoard","BoardNotFound"]),k=function(t,e){var r;return r=d.getBoardIdForCard(t),null!=r?f.resolve(r):e(t).call("get","idBoard")},b=function(t){return"board_"+t},j=function(t){var e,r;return r=d.getBoardId(t),null==r?null:(e=p.get("Board",r),null==e?null:e.isUpToDate?e:null)},_=function(t){t.waitForId(t,function(){return h.loadBoardSecondary(t.id).done()})},S=function(t){var e;return null!=(e=j(t))?f.resolve(e):h.loadCurrentBoardData(t).catch(s.Unconfirmed,function(){return f.reject(l.ConfirmToView())}).catch(s,function(){return f.reject(l.BoardNotFound())}).tap(_)},x=function(){return m.hold(),f.resolve().disposer(function(){return m.release()})},C=function(t){return _(t),f.resolve(t)},r.exports={showCardOnBoard:function(t,e,r){var n,o;return o=null!=(n=e.getCard(t))?f.resolve(n):r(t).tap(function(t){return t.get("idBoard")!==e.id?f.reject(l.CardNotFoundOnThisBoard("",{idBoard:e.id})):null}),o.then(w(this,"showCardDetail"))},showBoardDetailView:function(t,e){return f.try(function(r){return function(){var n,o,i,s;return n=e.model,null!=(i=t.idCard)?r.showCardOnBoard(i,n,t.loadCardData):t.usernameBoardProfile&&null!=(s=n.modelCache.findOne("Member","username",t.usernameBoardProfile))?e.showMemberProfile(s):null!=(o=t.calendarDate)?e.showCalendar(o):(t.newBoard&&e.openListComposer(),r.setBoardLocation(n.id))}}(this))},renderBoard:function(t){var e;return f.resolve(this.onBoardView(t.id)?(e=this.existingTopLevelView(c,t),e.closeDetailView(),e):(this.clearPreviousView(),this.setViewType(t),this.showHeader(),e=this.topLevelView(c,t,{modelCache:t.modelCache}),o("#content").html(e.render().el),o("body").addClass("body-board-view"),e))},displayBoard:function(t){var e,r,n,o,u,c,d,m;return B("controller",["boardView",t.idBoard]),m=t.newBoard,o=t.idBoard,c=t.idCard,y(m||o||c,"Illegal invocation of displayBoard: requires one of newBoard, idBoard, or idCard"),y(null==o||g.checkId(o)||g.isShortLink(o),'Illegal invocation of displayBoard: idBoard must be a board ID or a short link (got "'+o+'")'),y(null==c||g.checkId(c)||g.isShortLink(c),'Illegal invocation of displayBoard: idCard must be a card ID or a short link (got "'+c+'")'),d=v.once(function(t){return h.loadCardData(t).catch(s,function(){return f.reject(l.CardNotFound())})}),r=null!=m?C(m):(u=null!=o?f.resolve(o):k(c,d),u.then(S)),e=function(t){return function(e){var r;return r=e.model,new f(function(e){return t.waitForId(r,e)})}}(this),n=v.extend({loadCardData:d},t),f.using(this.getSpinner(),function(t){return function(){return r.then(function(r){return f.using(x(),function(){return t.renderBoard(r).tap(e).then(w(t,"showBoardDetailView",n))})}).catch(l.ConfirmToView,function(){return y(a.isLoggedIn(),"Got 401: 'Confirm to view' while not logged in"),O(p,"waitFor","Member",a.myId()).then(function(){return t.displayErrorPage(v.extend({errorType:"unconfirmedBoardNotFound"},a.me().toJSON()))})}).catch(l.CardNotFound,function(){return t.displayErrorPage({errorType:"cardNotFound"})}).catch(l.BoardNotFound,function(){return t.displayErrorPage({errorType:"boardNotFound"})}).catch(l.CardNotFoundOnThisBoard,function(e){var r;return r=e.idBoard,i.show("card does not exist","warning","doesnotexist",5e3),t.setBoardLocation(r)})}}(this))}}},{}],4:[function(t,r,n){var o,i,s,a,u,c,l,d,p,h,m,f,g,v,y;i=t(22),s=void 0,e(function(){return s=t(333)}),a=void 0,e(function(){return a=t(374)}),u=void 0,e(function(){return u=t(376)}),c=void 0,e(function(){return c=t(379)}),l=void 0,e(function(){return l=t(381)}),d=void 0,e(function(){return d=t(382)}),p=void 0,e(function(){return p=t(26)}),h=t(384),m=void 0,e(function(){return m=t(385)}),f=void 0,e(function(){return f=t(546)}),g=void 0,e(function(){return g=t(386)}),v=t(99),o=t("jquery"),y=t(418),r.exports={showHeader:function(t){var e,r;null==t&&(t={}),o("#header .header-user").remove(),o("#header .header-boards-button").remove(),o("#header #header-search").parent().remove(),o("#header-search").empty(),o(".header-banner").remove(),o("#header nav").remove(),o("#boards-drawer").empty(),r=i.me(),e=p,o("#header").empty().prepend(y.fill("header_logo")),t.promo||!i.isLoggedIn()?o("#header").append(y.fill("header_promo_nav")):(o("#header").append(this.topLevelView(u,r,{modelCache:e}).render().el),t.noSearch||o("#header").append(this.topLevelView(f,r,{modelCache:e}).render().el),o("#header .header-woof").parent().remove(),o("#header").append(this.topLevelView(l,r,{modelCache:e}).render().el),o("#boards-drawer").append(this.topLevelView(s,r,{modelCache:e}).render().el)),o("#header").append(this.topLevelView(c,r,{modelCache:e}).render(t.promo).el),null!=this.currentModel.get()&&v.hasValidInviteTokenFor(this.currentModel.get())?(t={modelCache:this.getCurrentModelCache()},this.onAnyBoardView()?t.idBoard=this.currentModel.get().id:this.onAnyOrganizationView()&&(t.idOrganization=this.currentModel.get().id),o("#header").after(this.topLevelView(d,r,t,this.currentModel.get().id).render().el)):i.isLoggedIn()&&!i.confirmed()?o("#header").after(this.topLevelView(a,r,{modelCache:e}).render().el):i.isLoggedIn()&&!i.canLogIn()?o("#header").after(this.topLevelView(g,r,{modelCache:e}).render().el):i.isLoggedIn()&&i.me().shouldShowNewLanguageBannerFor("de")?o("#header").after(this.topLevelView(h,r,{modelCache:e,locale:"de"}).render().el):i.isLoggedIn()&&i.me().shouldShowNewLanguageBannerFor("pt-BR")?o("#header").after(this.topLevelView(h,r,{modelCache:e,locale:"pt-BR"}).render().el):i.isLoggedIn()&&i.me().shouldShowNewLanguageBannerFor("es")?o("#header").after(this.topLevelView(h,r,{modelCache:e,locale:"es"}).render().el):i.isLoggedIn()&&i.me().shouldShowNewLanguageBannerFor("fr")?o("#header").after(this.topLevelView(h,r,{modelCache:e,locale:"fr"}).render().el):!i.isLoggedIn()&&this.onAnyBoardView()&&this.currentModel.get().isPublic()&&o("#header").after(this.topLevelView(m,this.currentModel.get(),{modelCache:this.getCurrentModelCache()}).render().el),r.checkColorBlindMode()}}},{}],5:[function(t,r,n){var o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,B,M,T,O,L,P,A,E,D,V,I,N,$,z,F,R,U,q,H,K,W,J=function(t,e){function r(){this.constructor=t}for(var n in e)G.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},G={}.hasOwnProperty;o=t("jquery"),i=void 0,e(function(){return i=t(429)}),a=void 0,e(function(){return a=t(240)}),u=t(22),c=t(193),l=void 0,e(function(){return l=t(125)}),d=void 0,e(function(){return d=t(318)}),h=void 0,e(function(){return h=t(432)}),m=t(64),f=void 0,e(function(){return f=t(65)}),g=t("hearsay"),v=t(14),y=void 0,e(function(){return y=t(166)}),b=void 0,e(function(){return b=t(26)}),w=void 0,e(function(){return w=t(27)}),_=void 0,e(function(){return _=t(168)}),k=void 0,e(function(){return k=t(170)}),C=void 0,e(function(){return C=t(435)}),x=t("bluebird"),j=void 0,e(function(){return j=t(227)}),S=void 0,e(function(){return S=t(228)}),M=t(99),B=t(419),T=t("underscore"),$=t(81),H=t(418),N=t(76),O=t(57),P=t(197),s=t(179),W=t("xtend"),D=t(29),U=function(t){return RegExp("^/"+M.escapeForRegex(t)+"/([a-zA-Z0-9]{8})(/|$)")},E=function(t){var e;return null!=(e=U("c").exec(t))?e[1]:void 0},A=function(t){var e;return null!=(e=U("b").exec(t))?e[1]:void 0},F=function(t,e){return t&&e&&t===e},I=function(t,e){var r,n,o,i;return o=E(t),i=E(e),F(o,i)?!0:(r=A(t),n=A(e),F(r,n)?!0:!1)},V=function(t,e){var r;return r=u.isLoggedIn()?w[t]():x.resolve(null),r.then(function(){return w.triggerWaits(e)}).done()},$(m,p=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return J(e,t),e.prototype.initialize=function(){return this._savedTitle="",this.currentModel=new g.Slot(null),this.currentModel.use()},e.prototype.start=function(){return V("loadHeaderData","headerData"),setTimeout(P(V,"loadBoardsMenuData","boardsData"),500),B.addHandler({shortcut:function(t){return function(e){return e===v.QuestionMark?(t.navigate("shortcuts"),t.shortcutsView(),"Shortcuts page"):void 0}}(this)},{scope:"global"})},e.prototype.viewType="none",e.prototype.topLevelView=function(t,e,r){return null==this.applicationView&&(this.applicationView=new a),null==r&&(r={}),null==r.modelCache&&(r.modelCache=this.getCurrentModelCache()),this.applicationView.subview(t,e,r)},e.prototype.existingTopLevelView=function(t,e){return this.applicationView.existingSubview(t,e)},e.prototype.existingTopLevelViewOrUndefined=function(t,e){var r;return null!=(r=this.applicationView)?r.existingSubviewOrUndefined(t,e):void 0},e.prototype.title=function(t){var e,r,n,o,i;return null!=t&&(this._savedTitle=t),o=_.unreadCount(b),i=o?"("+o+") ":"",e=i,(null!=(r=this._savedTitle)?r.length:void 0)>0&&(e+=this._savedTitle+" | "),e+="Trello",null!=(n=window.fluid)&&(n.dockBadge=o?o:null),f.setNotifications(o>0),document.title=e},e.prototype.setLocation=function(t){var e,r,n;n=t.title,e=t.location,r=t.options,null!=n&&this.title(n),e&&(/^#/.test(e)&&(e=e.substr(1)),this.navigate(e,r),this.location=e)},e.prototype.showingCalendar=function(t){return(null!=t?t.$(".calendar-wrapper").length:void 0)>0},e.prototype.setBoardLocation=function(t,e,r,n){var o;null==e&&(e=""),null==r&&(r=[]),o=b.get("Board",t).get("name"),this.setLocation({title:o,location:this.getBoardUrl(t,e,r),options:n})},e.prototype.saveMemberBoardProfileLocation=function(t,e){return this.setLocation({title:t.get("fullName"),location:this.getMemberBoardProfileUrl(t.get("username"),e)})},e.prototype.isOnSearchPage=function(){return"search"===this.currentPage},e.prototype.onAnyOrganizationView=function(){return this.currentModel.get()instanceof k},e.prototype.onOrganizationView=function(t){return this.onAnyOrganizationView()&&this.currentModel.get().id===t},e.prototype.onAnyBoardView=function(){return this.currentModel.get()instanceof l},e.prototype.onBoardView=function(t){return this.onAnyBoardView()?M.checkId(t)?this.currentModel.get().id===t:M.isShortLink(t)?this.currentModel.get().get("shortLink")===t:void 0:!1},e.prototype.getCurrentBoardView=function(){return this.existingTopLevelViewOrUndefined(d,this.getCurrentBoard())},e.prototype.getCurrentBoard=function(){return this.onAnyBoardView()?this.currentModel.get():null},e.prototype.getCurrentModelCache=function(){return this.currentModelCache},e.prototype.saveBoardsView=function(){null==this.savedBoardViewInformation&&this.onAnyBoardView()&&(this.savedBoardViewInformation={idBoard:this.currentModel.get().id,path:/\/b\/[^\/]*\/(.*)/.exec(this.location)[1]})},e.prototype.loadBoardsView=function(){var t,e,r;if(this.savedBoardViewInformation)return r=this.savedBoardViewInformation,t=r.idBoard,e=r.path,this.boardView(t,e),delete this.savedBoardViewInformation},e.prototype.clearPreviousView=function(){var t;this.overBoardsPage&&(this.overBoardsPage=!1),j.setQuery(""),null!=(t=this.applicationView)&&t.remove(),delete this.applicationView,C.hide(),h.isVisible&&h.hide(!0),o("#content").html(""),o("body").scrollTop("0").removeClass("single-column tabbed-page search-page body-board-view body-custom-board-background body-custom-board-background-tiled body-light-board-background body-dark-board-background body-default-header").css({"background-image":"","background-color":""}),o(".attachment-viewer").remove()},e.prototype.setViewType=function(t){var e;this.currentModel.get()instanceof l&&this.currentModel.get().markAsViewed(),T.isString(t)?(this.currentModelCache=b,this.currentModel.set(null)):(this.currentModelCache=t.modelCache,this.currentModel.set(t)),this.currentPage=t,this.currentModel.get()instanceof l?(e=this.currentModel.get(),this.waitForId(e,function(){return e.markAsViewed(),S.pushBoard(e.id)})):f.setBackground({useDefault:!0})},e.prototype.onCardView=function(){return/^c\/[a-zA-Z0-9]{8}(\/[^\/]+)?/.test(c.history.fragment)},e.prototype.organizationById=function(t){return w.loadOrgNameById(t).then(function(t){return function(e){return t.organizationBoardsView(e)}}(this)).catch(s,function(t){return function(){return t.displayErrorPage()}}(this)).done()},e.prototype.getSpinner=function(){return o(".header-logo").addClass("is-throbbing"),x.resolve().disposer(function(){o(".header-logo").removeClass("is-throbbing")})},e.prototype.syncError=function(){return i.showHtml(H.fill("sync_error"),"error","modelSync")},e}(c.Router)),z=c.History.prototype.navigate,K=function(t){return""===t&&(t="boards"),"function"==typeof window.ga&&window.ga("send","pageview","/"+t),"function"==typeof window.sp?window.sp("trackPageView",null,D()):void 0},T.extend(c.History.prototype,{navigate:function(t,e){I(t,this.location.pathname)&&(e=W(e,{replace:!0})),z.call(this,t,e),K(t)}}),L=[t(3),t(9),t(4),t(8),t(10),t(1),t(6),t(7),t(2)],R=T.chain(L).map(function(t){return T.extend(p.prototype,t),delete p.prototype.routes,t.routes}).compact().flatten(!0).value().reverse(),q=new p,R.forEach(function(t){var e,r;return r=t[0],e=t[1],q.route(r,e)}),r.exports=q},{}],6:[function(t,r,n){var o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_;s=t(22),a=void 0,e(function(){return a=t(432)}),u=void 0,e(function(){return u=t(166)}),c=void 0,e(function(){return c=t(461)}),l=void 0,e(function(){return l=t(464)}),d=void 0,e(function(){return d=t(466)}),p=void 0,e(function(){return p=t(471)}),h=void 0,e(function(){return h=t(475)}),m=void 0,e(function(){return m=t(476)}),f=void 0,e(function(){return f=t(26)}),g=void 0,e(function(){return g=t(27)}),v=t("bluebird"),_=t(92),o=t("jquery"),w=t(31),y=t("underscore"),b=t(57),i=t(179),r.exports={routes:[["","memberBoardsView"],[":username/cards","memberCardsView"],[":username/boards","memberBoardsView"],[":username/notifications","memberNotificationsView"]],displayMemberPage:function(t){var e,r,n,u,c,l,d,p,h;return p=t.username,c=t.loadFn,h=t.viewClass,n=t.getLocation,e=t.bodyClass,u=t.inDialogIfOnBoard,l=t.maxDialogWidth,d=t.product,null==p&&(p=s.myUsername()),r=this.onAnyBoardView()&&u||this.overBoardsPage,w("controller",["memberBoardsView"]),v.using(this.getSpinner(),function(u){return function(){return g[c](p).then(function(i){var c,l,p,m;r&&u.saveBoardsView(),r||u.clearPreviousView(),u.setViewType(i),p={product:d,modelCache:f},r?(l=new h(y.extend({model:i},p)),c=null,null!=t.maxDialogWidth&&(c=t.maxDialogWidth),a.show({isNavigating:!0,view:l,maxWidth:c,hide:function(t){return t?void 0:u.loadBoardsView()}})):(l=u.topLevelView(h,i,p),u.showHeader(),e?o("body").addClass(e):o("body").addClass("tabbed-page"),o("#content").html(l.render().el)),m=s.isMe(i)?"":i.get("fullName")+" ("+i.get("username")+")",u.setLocation({title:m,location:n.call(u,i.get("username"),d),options:{replace:!0}})}).catch(i,function(){u.displayErrorPage()})}}(this))},memberBoardsView:function(t,e){var r;return null==t&&(t="me"),r=y.extend({username:t,loadFn:"loadMemberBoardsData",viewClass:d,getLocation:this.getMemberBoardsUrl},e),this.displayMemberPage(r).then(_).done()},memberNotificationsView:function(t){return null==t&&(t="me"),s.isLoggedIn()?(t="me",this.displayMemberPage({username:t,loadFn:"loadNotificationData",viewClass:h,inDialogIfOnBoard:!0,maxDialogWidth:530,getLocation:this.getMemberNotificationsUrl}).done()):this.displayErrorPage()},memberProfileView:function(t){return null==t&&(t="me"),this.displayMemberPage({username:t,loadFn:"loadMemberProfileData",viewClass:m,getLocation:this.getMemberProfileUrl}).done()},memberCardsView:function(t,e){var r;return null==t&&(t="me"),r=y.extend({username:t,loadFn:"loadMemberCardsData",viewClass:p,getLocation:this.getMemberCardsUrl},e),this.displayMemberPage(r).done()},memberAccountView:function(t){return t="me",this.displayMemberPage({username:t,loadFn:"loadMemberAccountData",viewClass:c,getLocation:this.getMemberAccountUrl}).done()},memberBillingView:function(t){return t="me",this.displayMemberPage({username:t,loadFn:"loadMemberAccountData",viewClass:l,getLocation:this.getMemberBillingUrl}).done()}}},{}],7:[function(t,r,n){var o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C;s=t(22),a=void 0,e(function(){return a=t(432)}),u=void 0,e(function(){return u=t(166)}),c=void 0,e(function(){return c=t(26)}),l=void 0,e(function(){return l=t(27)}),d=void 0,e(function(){return d=t(170)}),p=void 0,e(function(){return p=t(502)}),h=void 0,e(function(){return h=t(504)}),m=void 0,e(function(){return m=t(508)}),f=void 0,e(function(){return f=t(509)}),g=void 0,e(function(){return g=t(513)}),v=void 0,e(function(){return v=t(515)}),o=t("jquery"),_=t(31),b=t("underscore"),w=t(197),y=t("bluebird"),k=t(102),i=t(179),C=t("xtend"),r.exports={routes:[["org/:id","organizationById"],[":name/members","organizationMembersView"],[":name/:username/cards","organizationMemberCardsView"],[":name/export","organizationExportView"]],organizationBoardsView:function(t){return this.displayOrganizationPage({orgname:t,loadFn:"loadOrganizationBoardsData",additionalFns:{members:"loadOrganizationMemberGhost"},viewClass:m,getLocation:this.getOrganizationUrl}).done()},organizationMembersView:function(t){return this.displayOrganizationPage({orgname:t,loadFn:"loadOrganizationMembersData",viewClass:v,getLocation:this.getOrganizationMembersUrl}).get("id").then(w(l,"loadOrganizationMembersExtraData")).done()},organizationMemberCardsView:function(t,e){return this.displayOrganizationPage({orgname:t,username:e,loadFn:"loadOrganizationMinimal",additionalFns:{cards:"loadOrgMemberCardData",members:"loadOrganizationMemberMinimal"},viewClass:g,getLocation:this.getOrganizationMemberCardsUrl}).done()},organizationAccountView:function(t){return this.displayOrganizationPage({orgname:t,loadFn:"loadOrganizationData",viewClass:p,getLocation:this.getOrganizationAccountUrl,membersOnly:!0}).done()},organizationExportView:function(t){return this.displayOrganizationPage({orgname:t,loadFn:"loadOrganizationExportData",viewClass:f,getLocation:this.getOrganizationExportUrl,adminOnly:!0}).done()},organizationBillingView:function(t){return this.displayOrganizationPage({orgname:t,loadFn:"loadOrganizationData",viewClass:h,getLocation:this.getOrganizationBillingUrl,adminOnly:!0}).done()},displayOrganizationPage:function(t){var e,r,n,d;return r=t.orgname,d=t.username,n=t.product,e=this.onAnyBoardView()&&t.inDialogIfOnBoard||this.overBoardsPage,_("controller",["organization"]),y.using(this.getSpinner(),function(p){return function(){return l[t.loadFn](r).tap(function(e){var r;return y.all(b.values(null!=(r=t.additionalFns)?r:{}).map(function(t){return l[t](e.id,d)}))}).then(function(i){var l,h,m,f,g,v;return m=c.findOne(u,"username",d),!i.owned()&&t.adminOnly||!i.isMember(s.me())&&t.membersOnly||null!=t.businessClass&&!i.isFeatureEnabled(t.businessClass)?(p.organizationBoardsView(r),i):(e?p.saveBoardsView():p.clearPreviousView(),p.setViewType(i),f={},m&&(f.member=m),null!=n&&(f.product=n),f.modelCache=p.getCurrentModelCache(),e?(h=null,null!=t.maxDialogWidth&&(h=t.maxDialogWidth),g=new t.viewClass(b.extend({model:i},f)),a.show({isNavigating:!0,view:g,maxWidth:h,hide:function(t){return t?void 0:p.loadBoardsView()}})):(g=p.topLevelView(t.viewClass,i,f),p.showHeader(),o("body").addClass("tabbed-page"),o("#content").html(g.render().el)),v=i.get("displayName")+" ("+i.get("name")+")",l=t.getLocation.apply(p,m?[i.get("name"),m.get("username")]:n?[i.get("name"),n]:[i.get("name")]),p.setLocation({title:v,location:l}),i)}).catch(i.Unconfirmed,function(){return k(c,"waitFor","Member",s.myId()).then(function(){return p.displayErrorPage(b.extend({errorType:"unconfirmedOrgNotFound"},s.me().toJSON()))})}).catch(i,function(){return p.displayErrorPage()})}}(this))}}},{}],8:[function(t,r,n){var o,i,s,a,u,c,l,d,p,h,m,f,g,v,y;i=t(22),s=void 0,e(function(){return s=t(495)}),a=void 0,e(function(){return a=t(432)}),u=void 0,e(function(){return u=t(166)}),c=void 0,e(function(){return c=t(26)}),l=void 0,e(function(){return l=t(27)}),d=t("bluebird"),p=void 0,e(function(){return p=t(546)}),h=void 0,e(function(){return h=t(227)}),m=t(99),o=t("jquery"),g=t(76),v=t(31),f=t("underscore"),y=t(418),r.exports={routes:[["shortcuts","shortcutsView"],["blank","blankView"],["select-org-to-upgrade","businessClassSelectOrgView"],["select-team-to-upgrade","businessClassSelectTeamView"],["search(?*query)","searchView"]],businessClassSelectOrgView:function(){this.navigate("/select-team-to-upgrade",{replace:!0,trigger:!0})},businessClassSelectTeamView:function(){var t;return t="/select-team-to-upgrade",i.isLoggedIn()?d.using(this.getSpinner(),function(e){return function(){return l.loadMyOrganizations().then(function(r){var n,i;return e.setViewType("select-org"),n=f.filter(r.organizationList.models,function(t){return!t.isPremium()}),1===n.length?void e.navigate("/"+n[0].get("name")+"/billing",{trigger:!0}):(e.setLocation({title:g("select organization to upgrade to business class"),location:t}),e.clearPreviousView(),i=e.topLevelView(s,r),e.showHeader(),o("#content").html(i.render().el))})}}(this)).done():void(window.location="/login?returnUrl="+t)},searchView:function(){return v("controller",["searchView"]),d.using(this.getSpinner(),function(t){return function(){return l.await("headerData").then(function(){var e,r,n,s,a;t.setViewType("search"),t.clearPreviousView(),n=i.me(),e=c,s=m.getQueryParameter("q",""),r=t.topLevelView(p,n,{modelCache:e}),a=r.getResultsView(),h.setQuery(s),a.update(),t.showHeader({noSearch:!0}),o("body").addClass("search-page"),o("#content").append(r.render().el).append(a.render().el),f.defer(function(){return r.focusInput()})})}}(this)).done()},blankView:function(){return d.using(this.getSpinner(),function(t){return function(){return l.await("headerData").then(function(){t.setViewType("blank"),t.clearPreviousView(),t.showHeader()})}}(this)).done()},shortcutsView:function(){l.waitFor("headerData",function(t){return function(){var e,r;return r=g("keyboard shortcuts"),e="shortcuts",t.onAnyBoardView()||t.overBoardsPage?(t.saveBoardsView(),a.show({html:y.fill("shortcuts"),maxWidth:550,hide:function(e){return e?void 0:t.loadBoardsView()}}),t.setLocation(r,e)):t.staticView({title:r,location:e,bodyClass:"single-column",template:function(){return y.fill("shortcuts")}})}}(this))},staticView:function(t){var e,r,n,i,s,a,u;return a=t.title,n=t.location,i=t.template,s=t.templateData,e=t.bodyClass,u=t.viewType,r=t.headerOpts,v("controller",[n+"View"]),d.using(this.getSpinner(),function(t){return function(){return l.await("headerData").then(function(){return t.setViewType(null!=u?u:n),t.clearPreviousView(),t.showHeader(r),i(s)}).then(function(r){return o("body").addClass(e),o("#content").html(r),t.setLocation({title:a,location:n})})}}(this)).done()}}},{}],9:[function(t,r,n){var o,i,s,a;o=t(22),i=void 0,e(function(){return i=t(26)}),s=t(99),a=t("underscore"),r.exports={getSearchUrl:function(t){return"/search?q="+encodeURIComponent(t)},getOrganizationUrl:function(t){var e;return e=a.isString(t)?t:t.get("name"),"/"+e},_orgUrl:function(t,e){return""+this.getOrganizationUrl(t)+e},getOrganizationMemberCardsUrl:function(t,e){return this._orgUrl(t,"/"+e+"/cards")},getOrganizationAccountUrl:function(t){return this._orgUrl(t,"/account")},getOrganizationBillingUrl:function(t){return this._orgUrl(t,"/billing")},getOrganizationExportUrl:function(t){return this._orgUrl(t,"/export")},getOrganizationMembersUrl:function(t){return this._orgUrl(t,"/members")},getBoardUrl:function(t,e,r){var n,o,a,u,c,l,d;for(null==r&&(r=[]),null!=(null!=t?t.id:void 0)&&(t=t.id),o=i.get("Board",t),null!=(d=null!=o?o.get("url"):void 0)?n=s.relativeUrl(d):(c=null!=o?o.get("name"):void 0,n=c?"/board/"+s.makeSlug(c)+"/"+t:"/board/"+t),e&&(n+="/"+e),a=0,u=r.length;u>a;a++)l=r[a],n+="/"+l;return n},getBoardShortUrl:function(t,e){var r,n,o,a;return null!=(null!=t?t.id:void 0)&&(t=t.id),n=i.get("Board",t),null!=(a=null!=n?n.get("shortUrl"):void 0)?r=s.relativeUrl(a):(o=null!=n?n.get("shortLink"):void 0,r="/b/"+o),e&&(r+="/"+e),r},getMemberBoardProfileUrl:function(t,e){return[this.getBoardUrl(e),"member",t].join("/")},getMemberProfileUrl:function(t){return null==t&&(t=o.myUsername()),"/"+t},getMemberNotificationsUrl:function(t){return null==t&&(t=o.myUsername()),"/"+t+"/notifications"},getMemberBoardsUrl:function(t){return null==t&&(t=o.myUsername()),t===o.myUsername()?"/":"/"+t+"/boards"},getMemberCardsUrl:function(t){return null==t&&(t=o.myUsername()),"/"+t+"/cards"},getMemberAccountUrl:function(t){return null==t&&(t=o.myUsername()),"/"+t+"/account"},getMemberBillingUrl:function(t){return null==t&&(t=o.myUsername()),"/"+t+"/billing"},getCardUrl:function(t){var e,r,n;return null!=(n=t.get("url"))?s.relativeUrl(n):(e=t.get("name"),this.getCardUrlWithoutModels(t.get("idBoard"),null!=(r=t.get("idShort"))?r:t.id,e))},getCardUrlWithoutModels:function(t,e,r){return null==e?null:s.isShortId(e)?"/card/"+s.makeSlug(r)+"/"+t+"/"+e:"/card/board/"+s.makeSlug(r)+"/"+t+"/"+e}}},{}],10:[function(t,r,n){var o,i,s,a,u,c,l,d;o=t("jquery"),i=t(179),s=void 0,e(function(){return s=t(180)}),a=t("bluebird"),u=t(86),c=t("underscore"),d=t(197),l=t(57),r.exports={routes:[[":name/account","userOrOrgAccountView"],[":name/billing","userOrOrgBillingView"],[":name/billing/card","userOrOrgBillingCardView"],[":name/billing/card/:product","userOrOrgBillingCardView"],[":name(/)","userOrOrgProfileView"]],userOrOrgProfileView:function(t){null==t&&(t="me"),this.userOrOrgView(t,this.memberProfileView,this.organizationBoardsView)},userOrOrgAccountView:function(t){null==t&&(t="me"),this.userOrOrgView(t,this.memberAccountView,this.organizationAccountView)},userOrOrgBillingView:function(t){null==t&&(t="me"),this.userOrOrgView(t,this.memberBillingView,this.organizationBillingView)},userOrOrgBillingCardView:function(t,e){null==t&&(t="me"),this.navigate([t,"billing"].join("/"),{replace:!0,trigger:!0})},getViewData:function(t){var e,r;return e="typeof_"+t,null!=(r=u.get(e))?a.resolve(r):s({url:"/1/types/"+t}).tap(d(u,"set",e))},userOrOrgView:function(t,e,r){return this.getViewData(t).then(function(n){return function(o){var i;return i=function(){switch(o.type){case"member":return e;case"organization":return r}}(),l(null!=i,"/1/types/"+t+" resolved to "+o.type),i.call(n,t)}}(this)).catch(i.NotFound,function(t){return function(){return t.displayErrorPage()}}(this)).done()}}},{}],11:[function(t,e,r){var n,o;o="http://creativecommons.org/licenses/by/2.0/deed.en",n={photos:{name:"Photos"},patterns:{name:"Patterns and Textures"}},e.exports={blue:{type:"default",brightness:"dark",color:"#0079BF"},orange:{type:"default",brightness:"dark",color:"#D29034"},green:{type:"default",brightness:"dark",color:"#519839"},red:{type:"default",brightness:"dark",color:"#B04632"},purple:{type:"default",brightness:"dark",color:"#89609E"},pink:{type:"default",brightness:"dark",color:"#CD5A91"},lime:{type:"default",brightness:"dark",color:"#4BBF6B"},sky:{type:"default",brightness:"dark",color:"#00AECC"},grey:{type:"default",brightness:"dark",color:"#838C91"},mountain:{type:"premium",pack:n.photos,brightness:"light",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/mountain/171b0c9aea08e21f0020f359408b73e4/full.jpg",scaled:[{width:2400,height:1696,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/mountain/46616ebeae7245d4a16cf00cf1e21e86/large.jpg"},{width:1024,height:724,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/mountain/07627e0760eb74e7109a82057ac86881/medium.jpg"},{width:320,height:227,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/mountain/da8d70dd70d666361767b9e30acdba65/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/62681247@N00/6575973407/",name:"jqmj (Queralt)",license:o}},cosmos:{type:"premium",pack:n.photos,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/cosmos/92448e055514fdc92923c9b591aa31df/full.jpg",scaled:[{width:2047,height:1638,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/cosmos/be5121d350dd3e3ac97e209c3a7fce58/large.jpg"},{width:1600,height:1280,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/cosmos/f95acce485fc44f9a07853aa15965f90/medium.jpg"},{width:320,height:256,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/cosmos/0646808c900b7409dbeb96d36f55e980/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/gsfc/6945160410/",name:"NASA Goddard Space Flight Center",license:o}},rain:{type:"premium",pack:n.photos,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/rain/2e8209ee9f21d7147a24cac28ea61358/full.jpg",scaled:[{width:2400,height:1600,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/rain/9de9b88a694019ab77d129f1729b05b7/large.jpg"},{width:1024,height:683,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/rain/b8ac88f9c4e8097c1ef8cc269d66e089/medium.jpg"},{width:320,height:213,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/rain/e9147244c93e3990f361bc8123cacca9/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/vinothchandar/5243641910/",name:"Vinoth Chandar",license:o}},dew:{type:"premium",pack:n.photos,brightness:"light",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/dew/1d638bc56d179d5a8c35177305d4ea09/full.jpg",scaled:[{width:2400,height:1594,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/dew/5b5f4c5cd0d7e144e40168345c8c6075/large.jpg"},{width:1024,height:680,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/dew/3c8daf991e3132f453ad0c822175b34d/medium.jpg"},{width:320,height:212,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/dew/71633df28ad4038a6fb6f647c1b29b27/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/jenny-pics/5584430423/",name:"Jenny Downing",
license:o}},"snow-bokeh":{type:"premium",pack:n.photos,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/snow-bokeh/75b2ce11e6652e76ad0d3629d9886ca5/full.jpg",scaled:[{width:2400,height:1596,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/snow-bokeh/11fc1afae97ec97b3b46b149d701e180/large.jpg"},{width:1024,height:681,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/snow-bokeh/9f4c60883dec8b5aa5bc949607081505/medium.jpg"},{width:320,height:213,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/snow-bokeh/d74c2d921e28c822e92b881b3e2cb10b/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/tabor-roeder/5337595458/",name:"Phil Roeder",license:o}},city:{type:"premium",pack:n.photos,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/city/1bbbf09d491d444d207e5d8b792a86ba/full.jpg",scaled:[{width:2400,height:1594,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/city/d23508735801f1190b365330eb8ec0a5/large.jpg"},{width:1024,height:680,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/city/a7eea5e35c08388ec3da7dbc814f1da2/medium.jpg"},{width:320,height:212,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/city/27e00a7bee7a783ae7568a819fa9bb97/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/nosha/2907855809/",name:"Nathan Siemers",license:o}},canyon:{type:"premium",pack:n.photos,brightness:"light",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/canyon/0c35d8049641c307de51cac7d449bf4e/full.jpg",scaled:[{width:2400,height:1596,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/canyon/ee79179217e377e332d217cbe10405b4/large.jpg"},{width:1024,height:681,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/canyon/976ada2d506ebb7c2f8708f2ccc47192/medium.jpg"},{width:320,height:213,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/canyon/1478a9382a5ab8c493685223ff36e6f7/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/wolfgangstaudt/2252688630/",name:"Wolfgang Staudt",license:o}},ocean:{type:"premium",pack:n.photos,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/ocean/4ce437330ab9d2fe40dd3d8504a143e6/full.jpg",scaled:[{width:2400,height:1600,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/ocean/ede6927e92b4515102b2d86e919c77fa/large.jpg"},{width:1024,height:683,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/ocean/c8a238f606e3288c461fc7ea3daa36d9/medium.jpg"},{width:320,height:213,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/ocean/2de3527d131722c66ec5315205d64104/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/mattphipps/4635112852/",name:"MattJP",license:o}},river:{type:"premium",pack:n.photos,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/river/b031ec422c9048f4b6fb3b53f80eba3c/full.jpg",scaled:[{width:2400,height:1600,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/river/801d937c765a9996d4eccf4aee6bfc36/large.jpg"},{width:1024,height:683,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/river/67c2c39a74a32f383ffd10dc53ffb535/medium.jpg"},{width:320,height:213,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/river/15967f866d002762d13d20d258140418/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/22746515@N02/3114276532/",name:"Bert Kaufmann",license:o}},fall:{type:"premium",pack:n.photos,discontinued:!0,fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/fall/72c32b15d265b78e7058896d4bc85c3b/full.jpg",scaled:[{width:2400,height:1596,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/fall/a42f50fe10ff082519a499a2e86be1dc/large.jpg"},{width:1024,height:681,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/fall/a999e10749c6db57a5acd9960324ed6f/medium.jpg"},{width:320,height:213,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/fall/8c8e3c5c5eebeac446c7e19ee36d23ae/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/mendhak/4107993637/",name:"mendhak",license:o}},snow:{type:"premium",pack:n.photos,discontinued:!0,fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/snow/d5dd0a98d6b0a7ebcaff02dad1535fab/full.jpg",scaled:[{width:2400,height:1600,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/snow/149d6adb0c746612aa21ec3c46455583/large.jpg"},{width:1024,height:683,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/snow/147471be1b6fa8858c40febf9702795b/medium.jpg"},{width:320,height:213,url:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/snow/da5f83eace8c3f4e13f1287cefd07956/small.jpg"}],attribution:{url:"http://www.flickr.com/photos/zachd1_618/5386165480/",name:"Zach Dischner",license:o}},purty_wood_dark:{type:"premium",pack:n.patterns,tile:!0,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/7a14a57fef9435b0def0f613d0114334/purty_wood_dark.png",attribution:{url:"http://subtlepatterns.com/purty-wood/",name:"Richard Tabor",license:o}},"subtle-irongrip":{type:"premium",pack:n.patterns,tile:!0,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/c9f15836db29df79c2a0092a6758d81e/subtle-irongrip.png",attribution:{url:"http://subtlepatterns.com/iron-grip/",name:"Tony Kinard",license:o}},"red-sweater":{type:"premium",pack:n.patterns,tile:!0,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/17d3a6bc27bdcd05caeae11f67fa46d6/red-sweater.png",attribution:{url:"http://subtlepatterns.com/wild-oliva/",name:"Badhon Ebrahim",license:o}},hex:{type:"premium",pack:n.patterns,tile:!0,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/2e2cb18ce229869faec815b4d8fe2770/hex.png"},wave:{type:"premium",pack:n.patterns,tile:!0,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/bb289a4f00f13e8ca52e67afd11c1648/wave.png"},bricks:{type:"premium",pack:n.patterns,tile:!0,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/5e21dfb838e99d8a7c540a2b90d36f29/bricks.png"},"purple-blur":{type:"premium",pack:n.patterns,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/3a02eab932195316109bd905d3341323/purple-blur.png"},"orange-blur":{type:"premium",pack:n.patterns,brightness:"dark",fullSizeUrl:"https://d78fikflryjgj.cloudfront.net/images/backgrounds/07a3436eabfd187ee94ae8c578584d07/orange-blur.png"}}},{}],12:[function(t,e,r){var n,o,i,s,a,u,c;for(e.exports=n={},c="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),i=0,s=c.length;s>i;i++)o=c[i],n[o.toLowerCase().charCodeAt(0)]=o;u={" ":"Space","?":"QuestionMark",",":"Comma",".":"Period","/":"ForwardSlash","<":"AngleLeft",">":"AngleRight"};for(o in u)a=u[o],n[o.charCodeAt(0)]=a},{}],13:[function(t,e,r){var n;e.exports=n={8:"Backspace",9:"Tab",10:"LineFeed",13:"Enter",27:"Escape",46:"Delete",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown"}},{}],14:[function(t,e,r){var n,o,i,s,a,u,c,l,d;n=t(12),o=t(13),e.exports=i={Unknown:"Unknown"};for(d in n)c=n[d],i[c]=c;for(d in o)c=o[d],i[c]=c;for(l="0123456789".split(""),a=0,u=l.length;u>a;a++)s=l[a],i["_"+s]=i[s]},{}],15:[function(t,e,r){var n,o,i,s,a,u=[].slice;n=t(66),a=["additionalStickers","customStickers","additionalBoardBackgrounds","customBoardBackgrounds","largeAttachments","customEmoji","savedSearches"],s=u.call(a).concat(["crown"]),i={10:{shortName:"trelloGoldFromBC",name:"Trello Gold from BC",features:a},37:{shortName:"trelloGoldMonthly",name:"Trello Gold",interval:"monthly",price:5,features:s},38:{shortName:"trelloGoldYearly",name:"Trello Gold",interval:"yearly",price:45,features:s}},o={currentProducts:{monthly:"trelloGoldMonthly",yearly:"trelloGoldYearly"},extras:{currentPriceObjectForModel:function(t){var e,r;return e=this.currentProducts.monthly,r=this.currentProducts.yearly,{monthly:{productNumber:this.getProductNumber(e),price:this.getPrice(e),monthlyPrice:this.getPrice(e)},yearly:{productNumber:this.getProductNumber(r),price:this.getPrice(r),monthlyPrice:this.getPrice(r)/12,savePercent:this.getYearlyDiscountPercent(r,e)},billingStrategy:{flatRate:!0}}}}},e.exports=new n(i,o)},{}],16:[function(t,e,r){var n,o,i,s,a,u,c=[].slice;n=t(66),o=["export","logo","observers","removal","activity","deactivated","orgCards","googleApps","orgMembersPage","superAdmins","prefs","inviteOrg","restrictVis","disableExternalMembers"],i=c.call(o).concat(["goldMembers"],["csvExport"],["shortExportHistory"]),s=c.call(i).concat(["tags"],["plugins"]),u={35:{shortName:"businessClassMonthly",name:"Business Class",interval:"monthly",price:25,features:o,hidden:!0,prebill:!1},36:{shortName:"businessClassYearly",name:"Business Class",interval:"yearly",price:200,features:o,hidden:!0},39:{shortName:"businessClassMonthly",name:"Business Class",interval:"monthly",price:50,features:o,hidden:!0},40:{shortName:"businessClassYearly",name:"Business Class",interval:"yearly",price:500,features:o,hidden:!0},96:{shortName:"businessClassMonthly",name:"Business Class",interval:"monthly",price:5,features:i,perUser:!0},97:{shortName:"businessClassYearly",name:"Business Class",interval:"yearly",price:45,features:i,perUser:!0},98:{shortName:"businessClass3Monthly",name:"Business Class",interval:"monthly",price:10,features:s,perUser:!0,perActiveUser:!0},99:{shortName:"businessClass3Yearly",name:"Business Class",interval:"yearly",price:100,features:s,perUser:!0,perActiveUser:!0}},a={globalFeatures:["logo"],currentProducts:{monthly:"businessClass3Monthly",yearly:"businessClass3Yearly"},extras:{BC1Products:[35,36,39,40],currentPriceObjectForModel:function(t){var e,r;return e=this.currentProducts.monthly,r=this.currentProducts.yearly,{monthly:{productNumber:this.getProductNumber(e),price:this.getPrice(e),totalPrice:t.totalPerUserPrice(e),monthlyPrice:this.getPrice(e),totalMonthlyPrice:t.totalPerUserPrice(e)},yearly:{productNumber:this.getProductNumber(r),price:this.getPrice(r),totalPrice:t.totalPerUserPrice(r),monthlyPrice:this.getPrice(r)/12,totalMonthlyPrice:t.totalPerUserPrice(r)/12,savePercent:this.getYearlyDiscountPercent(r,e)},billingStrategy:t.getBillingStrategy(r)}}}},e.exports=new n(u,a)},{}],17:[function(t,e,r){var n,o,i,s;n={"й":"Q","ц":"W","у":"E","к":"R","е":"T","н":"Y","г":"U","ш":"I","щ":"O","з":"P","ф":"A","ы":"S","в":"D","а":"F","п":"G","р":"H","о":"J","л":"K","д":"L","я":"Z","ч":"X","с":"C","м":"V","и":"B","т":"N","ь":"M","б":"Comma","ю":"Period"},i={};for(o in n)s=n[o],i[o.charCodeAt(0)]=s;e.exports=i},{}],18:[function(t,e,r){e.exports=10},{}],19:[function(t,e,r){e.exports=80},{}],20:[function(t,e,r){e.exports={standard:{premium:!1,stickers:[{image:"check",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/90e26477b42f93cf816eecc39c9a7067/check.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/90e26477b42f93cf816eecc39c9a7067/check.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/5168d92437a5fc166632f0006879d5ea/check%402x.png"}]},{image:"heart",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/cc9d955a9ae38ff99b641f8e0ab719ed/heart.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/cc9d955a9ae38ff99b641f8e0ab719ed/heart.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/51a19b35bc5092e9e2761b479ce6105d/heart%402x.png"}]},{image:"warning",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/f8832dabce0aabd9a3b550c6f571bbab/warning.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/f8832dabce0aabd9a3b550c6f571bbab/warning.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/e0197b2fb0cbd4a389d4ab5de9e1193a/warning%402x.png"}]},{image:"clock",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/5bd7338f370c3fd7238d40410f200736/clock.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/5bd7338f370c3fd7238d40410f200736/clock.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/b678287abafc2d8c99f3dfa9b8e7a30c/clock%402x.png"}]},{image:"smile",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/90a8856b7465d57b1ac30925181198b4/smile.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/90a8856b7465d57b1ac30925181198b4/smile.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/fa6754c4dd9625bdce765781c5c69635/smile%402x.png"}]},{image:"laugh",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/31ce444242a6f930b52180a2a0d27813/laugh.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/31ce444242a6f930b52180a2a0d27813/laugh.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/6a4570e57d1e3df870143fc016ed2f7d/laugh%402x.png"}]},{image:"huh",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/405fd9e6997ac365e4da29d6e550cd3e/huh.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/405fd9e6997ac365e4da29d6e550cd3e/huh.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/4a513d5705f0f89b365f27ec05784147/huh%402x.png"}]},{image:"frown",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/49afc75f79a5719a3871b3640a4d1e70/frown.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/49afc75f79a5719a3871b3640a4d1e70/frown.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/c414ef32894f9c9873142fc964ec4e08/frown%402x.png"}]},{image:"thumbsup",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/ebab8d33a9e50bfb92724e51254be4fa/thumbsup.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/ebab8d33a9e50bfb92724e51254be4fa/thumbsup.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/6f6cea3566b6fbbc0067561b53f4048a/thumbsup%402x.png"}]},{image:"thumbsdown",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/8accff79fb0229cb8940be8c35aa1838/thumbsdown.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/8accff79fb0229cb8940be8c35aa1838/thumbsdown.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/79d155c5163ee1a67509b789f98a858b/thumbsdown%402x.png"}]},{image:"star",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/4c68ea50e4ffeeb97df52f7849f00845/star.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/4c68ea50e4ffeeb97df52f7849f00845/star.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/27460fa90f9753396db36bf60815e93a/star%402x.png"}]},{image:"rocketship",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/484099c2f7dfcfe5fef9c4245fa2802a/rocketship.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/484099c2f7dfcfe5fef9c4245fa2802a/rocketship.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/5bd888e40e6e27bd733d37015857b218/rocketship%402x.png"}]}]},taco:{premium:!0,stickers:[{image:"taco-love",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/c17c5bf93797d71527ee91494fc85e2c/taco-love.png",scaled:[{width:140,height:140,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/c17c5bf93797d71527ee91494fc85e2c/taco-love.png"},{width:280,height:280,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/06ddf78e10598774b89e3264d8e414da/taco-love%402x.png"}]},{image:"taco-confused",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/511723ee0c932684ca39cdec005bc2c5/taco-confused.png",scaled:[{width:140,height:140,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/511723ee0c932684ca39cdec005bc2c5/taco-confused.png"},{width:280,height:280,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/06668f130b632bf4ba0dc7f492628e00/taco-confused%402x.png"}]},{image:"taco-cool",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/f41573409925dd066cb509a465f4b3af/taco-cool.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/f41573409925dd066cb509a465f4b3af/taco-cool.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/8f4ac7820629d5aac2e2faca5b013e4c/taco-cool%402x.png"}]},{image:"taco-angry",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/0787bf33623b40f2263dd9b0194c0066/taco-angry.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/0787bf33623b40f2263dd9b0194c0066/taco-angry.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/88141aecd4c8fbdc3ff11ef292b4526f/taco-angry%402x.png"}]},{image:"taco-celebrate",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/20b0c2f6c78ca34d7c3d00b658f3b3df/taco-celebrate.png",scaled:[{width:140,height:140,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/20b0c2f6c78ca34d7c3d00b658f3b3df/taco-celebrate.png"},{width:280,height:280,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/905a89b9fb1f867747130360e6cbb4d4/taco-celebrate%402x.png"}]},{image:"taco-robot",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/c695266748c83f796b9a56ea36f5c2de/taco-robot.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/c695266748c83f796b9a56ea36f5c2de/taco-robot.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/e1ac5a98088053a8b1ae90cd8f3f056e/taco-robot%402x.png"}]},{image:"taco-alert",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/ccbcd6ce73f50359e71ad36316c3bcfb/taco-alert.png",scaled:[{width:140,height:140,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/ccbcd6ce73f50359e71ad36316c3bcfb/taco-alert.png"},{width:280,height:280,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/60cf2c2b89c387f8c1ed92f301492b28/taco-alert%402x.png"}]},{image:"taco-active",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/e027fa08f49b43a503a1e1dea1b854ea/taco-active.png",scaled:[{width:140,height:140,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/e027fa08f49b43a503a1e1dea1b854ea/taco-active.png"},{width:280,height:280,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/afe6f31288619ede4f82d516cad6a11e/taco-active%402x.png"}]},{image:"taco-money",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/60cee75a249b578892938a6a491031e6/taco-money.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/60cee75a249b578892938a6a491031e6/taco-money.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/f0130dd81ed48f6e4626cbdc233b2fda/taco-money%402x.png"}]},{image:"taco-reading",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/d38e25e615cbc0d15bea3fe3277e4a83/taco-reading.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/d38e25e615cbc0d15bea3fe3277e4a83/taco-reading.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/0c3110a4622a680fd4a9b63de14521da/taco-reading%402x.png"}]},{image:"taco-trophy",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/77785938bb3566b20d1eccb83001dddc/taco-trophy.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/77785938bb3566b20d1eccb83001dddc/taco-trophy.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/9143546ce5c8a3e43736be79803ead39/taco-trophy%402x.png"}]},{image:"taco-sleeping",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/42698e61c8b85ce46dd08774536b820e/taco-sleeping.png",scaled:[{width:140,height:140,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/42698e61c8b85ce46dd08774536b820e/taco-sleeping.png"},{width:280,height:280,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/9a51d634e8521dc0e19c09db4df95d8e/taco-sleeping%402x.png"}]},{image:"taco-pixel",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/9044b8e8153407d9c35176baf4c41780/taco-pixel.png",scaled:[{width:140,height:140,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/9044b8e8153407d9c35176baf4c41780/taco-pixel.png"},{width:280,height:280,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/3751a48869a42911093b6eae9d0a7f8c/taco-pixel%402x.png"}]},{image:"taco-proto",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/2e050937d34005636192c415252f1b91/taco-proto.png",scaled:[{width:140,height:140,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/2e050937d34005636192c415252f1b91/taco-proto.png"},{width:280,height:280,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/51def85cdcf3c1a58cb1ab2ac3749251/taco-proto%402x.png"}]},{image:"taco-embarrassed",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/b84cc7c1ff4c870a78afff5645449883/taco-embarrassed.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/b84cc7c1ff4c870a78afff5645449883/taco-embarrassed.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/02663f87e33a2c79828098d1f2d9a086/taco-embarrassed%402x.png"}]},{image:"taco-clean",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/e6462e51e766dbf494e304ea843856d9/taco-clean.png",scaled:[{width:140,height:140,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/e6462e51e766dbf494e304ea843856d9/taco-clean.png"},{width:280,height:280,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/7c593a77fe481b61a2cad4b74b2f8c1c/taco-clean%402x.png"}]}]},pete:{premium:!0,stickers:[{image:"pete-happy",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/ad61d60483a6bdbea53237330ea1183b/pete-happy.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/ad61d60483a6bdbea53237330ea1183b/pete-happy.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/0663bc183a0cf0d039498cd8c5db8043/pete-happy%402x.png"}]},{image:"pete-love",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/e226d3edc2bc1c9439bc812f96527218/pete-love.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/e226d3edc2bc1c9439bc812f96527218/pete-love.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/6e461f2c1917d10063fb169a33bb1191/pete-love%402x.png"}]},{image:"pete-broken",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/e0c1fadd8cdf3173a4cf9bc93da81d97/pete-broken.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/e0c1fadd8cdf3173a4cf9bc93da81d97/pete-broken.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/6d84909328bf960bdfcab760e46c886f/pete-broken%402x.png"}]},{image:"pete-alert",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/90e3c39fb39d5d79e8e2310406620f59/pete-alert.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/90e3c39fb39d5d79e8e2310406620f59/pete-alert.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/3453c1a26ddd1187e56431940c7aedfc/pete-alert%402x.png"}]},{image:"pete-talk",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/ca098514ef3b83d1e5a736817d3a132b/pete-talk.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/ca098514ef3b83d1e5a736817d3a132b/pete-talk.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/217a5d2b04a6dea23726a7949dae9ac7/pete-talk%402x.png"}]},{image:"pete-vacation",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/c50c5371bb78862a587a93df287459c0/pete-vacation.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/c50c5371bb78862a587a93df287459c0/pete-vacation.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/060295310e437200bf334ff7322eede1/pete-vacation%402x.png"}]},{image:"pete-confused",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/0d52a88328d4c0196564b207560e953e/pete-confused.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/0d52a88328d4c0196564b207560e953e/pete-confused.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/7ff61659ad2cd4837aacd999aedcd233/pete-confused%402x.png"}]},{image:"pete-shipped",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/13b817ebec2282c5a7abb849056edfff/pete-shipped.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/13b817ebec2282c5a7abb849056edfff/pete-shipped.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/0d9ff936d513aae5a67c8f9653a5c49e/pete-shipped%402x.png"}]},{image:"pete-busy",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/ef0eb59b05378f25bb0cfae516b0615d/pete-busy.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/ef0eb59b05378f25bb0cfae516b0615d/pete-busy.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/35503951628d67da2c8aaabd49aaf769/pete-busy%402x.png"}]},{image:"pete-completed",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/213df9ec14509a7f06281bba7482ae61/pete-completed.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/213df9ec14509a7f06281bba7482ae61/pete-completed.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/3197b9305f52b722df47abdb84c063f8/pete-completed%402x.png"}]},{image:"pete-space",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/ee70c40e8a7906f3adf2323d774e8320/pete-space.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/ee70c40e8a7906f3adf2323d774e8320/pete-space.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/aa9cb8354739fb355a4abd1c977d975a/pete-space%402x.png"}]},{image:"pete-sketch",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/6e17baf06870f4bd1c301ede21bc5add/pete-sketch.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/6e17baf06870f4bd1c301ede21bc5add/pete-sketch.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/3808b148cca5b1ed3da001b7c13d5110/pete-sketch%402x.png"}]},{image:"pete-ghost",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/fcb349d429bbaaf873eef3ea64eb570c/pete-ghost.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/fcb349d429bbaaf873eef3ea64eb570c/pete-ghost.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/4a28ad313694864c5a661b964a9510ff/pete-ghost%402x.png"}]},{image:"pete-award",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/eb0782174fdd08d4c76a587db6bc7caf/pete-award.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/eb0782174fdd08d4c76a587db6bc7caf/pete-award.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/43dd35d5e48a876a50fc6c63f53f005e/pete-award%402x.png"}]},{image:"pete-music",url:"https://d78fikflryjgj.cloudfront.net/images/stickers/49ddddf5af19ae49ccc9c7aa9517ba62/pete-music.png",scaled:[{width:100,height:100,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/49ddddf5af19ae49ccc9c7aa9517ba62/pete-music.png"},{width:200,height:200,url:"https://d78fikflryjgj.cloudfront.net/images/stickers/df6a7a7b952e8826916f00e69b503af1/pete-music%402x.png"}]}]}}},{}],21:[function(t,e,r){e.exports=[{code:"en",name:"English"},{code:"es",name:"Español"},{code:"de",name:"Deutsch"},{code:"pt-BR",name:"Português (Brasil)"},{code:"fr",name:"Français"}]},{}],22:[function(t,r,n){var o,i,s,a;o=t("jquery"),i=void 0,e(function(){return i=t(166)}),s=void 0,e(function(){return s=t(26)}),a=t("underscore"),r.exports=new(function(){function t(){this.updateToken()}var e,r,n,u;return e="notLoggedIn",r=null,n=null,u="token"+window.location.port,t.prototype.isLoggedIn=function(){return r!==e},t.prototype.myId=function(){return r},t.prototype.myUsername=function(){var t;return null!=(t=this.me())?t.get("username"):void 0},t.prototype.myToken=function(){return n},t.prototype.me=function(){var t;return t=s.get("Member",r),null!=t||this.isLoggedIn()||(t=new i({id:e,notLoggedIn:!0},{modelCache:s}),s.add(t)),t},t.prototype.isMe=function(t){return(null!=t?t.id:void 0)?this.isMe(t.id):t===r},t.prototype.confirmed=function(){return this.me().get("confirmed")},t.prototype.canLogIn=function(){var t,e;return!a.isEmpty(null!=(t=null!=(e=this.me())?e.get("loginTypes"):void 0)?t:[])},t.prototype.updateToken=function(){return n=o.cookie(u)||"",r=n.split("/")[0]||e},t.prototype.logoutPost=function(){return o("<form>").attr({method:"post",action:"/logout"}).append('<input name="dsc" value="'+o.cookie("dsc")+'">').css({display:"none"}).appendTo("body").submit()},t}())},{}],23:[function(t,e,r){var n;n=t(99),e.exports=window.IdCache=new(function(){function t(){this._shortLinkToId={Card:{},Board:{}},this._idCardToIdBoard={}}return t.prototype.getId=function(t,e){if(n.checkId(e))return e;if(n.isShortLink(e))return this._shortLinkToId[t][e];throw new Error("Not a shortLink or id: "+e)},t.prototype.setId=function(t,e,r){if(!n.checkId(r))throw new Error("Not an id: "+r);if(!n.isShortLink(e))throw new Error("Not a shortLink: "+e);return this._shortLinkToId[t][e]=r},t.prototype.setCardId=function(t,e){return this.setId("Card",t,e)},t.prototype.setBoardId=function(t,e){return this.setId("Board",t,e)},t.prototype.setBoardIdForCard=function(t,e){return this._idCardToIdBoard[this.getCardId(t)]=this.getBoardId(e)},t.prototype.getCardId=function(t){return this.getId("Card",t)},t.prototype.getBoardId=function(t){return this.getId("Board",t)},t.prototype.getBoardIdForCard=function(t){return this._idCardToIdBoard[this.getCardId(t)]},t}())},{}],24:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g=[].slice;n=t("jquery"),i=t(23),s=t(27),a=t("bluebird"),u=t("trello-markdown"),c=t(99),l=t("underscore"),m=t(418),p=t(76),h=t(216),f=t("xtend"),o=t(179),d=function(t,e){var r,n,o,i,s;if(null==e)return null;i=h(e),o=[e];for(r in t)if(n=t[r],l.isString(n)){if(n!==i[r])return null}else{if(!l.isRegExp(n))throw Error("invalid specification");if(null==(s=n.exec(i[r])))return null;o=o.concat(s.slice(1))}return o},e.exports=new(function(){function t(){}return t.prototype._knownUrls=[{key:"trello board",match:{protocol:location.protocol,host:location.host,pathname:/^\/b\/([a-zA-Z0-9]{8})(?:$|\/.*)/},previewClass:"attachment-thumbnail-preview-trello-logo",icon:"https://d78fikflryjgj.cloudfront.net/images/services/e1b7406bd79656fdd26ca46dc8963bee/trello.png",getText:function(t,e){var r,n,a,u;return r=t[0],u=t[1],null!=(n=null!=(a=e.get("Board",i.getBoardId(u)))?a.get("name"):void 0)?n:s.loadBoardName(u).catch(o.NotFound,o.Unauthorized,function(){return r})}},{key:"trello card",match:{protocol:location.protocol,host:location.host,pathname:/^\/c\/([a-zA-Z0-9]{8})(?:$|\/.*)/},previewClass:"attachment-thumbnail-preview-trello-logo",icon:"https://d78fikflryjgj.cloudfront.net/images/services/e1b7406bd79656fdd26ca46dc8963bee/trello.png",getText:function(t,e){var r,n,a,u;return r=t[0],u=t[1],null!=(n=null!=(a=e.get("Card",i.getCardId(u)))?a.get("name"):void 0)?n:s.loadCardName(u).catch(o.NotFound,o.Unauthorized,function(){return r})}},{key:"fogbugz case",match:{protocol:/^https?:$/,host:/^([^\.]+)\.fogbugz\.com$/,pathname:/^\/f\/cases\/([\d]+)/},previewClass:"attachment-thumbnail-preview-fogbugz-logo",icon:"https://d78fikflryjgj.cloudfront.net/images/services/a1385c9ce999f8389ec7dc43c1b24b2c/fogbugz.png",getArgs:function(t){var e,r,n;return e=t[0],n=t[1],r=t[2],{caseNumber:r}}},{key:"kiln commit",match:{protocol:/^https?:$/,host:/^([^\.]+)\.(?:fogbugz\.com\/kiln|kilnhg\.com)$/,pathname:/^\/Code\/([^\/]+)\/([^\/]+)\/([^\/]+)\/History\/([^\/]+)/},previewClass:"attachment-thumbnail-preview-kiln-logo",icon:"https://d78fikflryjgj.cloudfront.net/images/services/6c1d65d72873b01d740adfbb9de22234/kiln.png",getText:function(t){var e,r,n,o,i,s;return e=t[0],s=t[1],o=t[2],i=t[3],r=t[4],n=t[5],"Group"===i?o+" » "+r+": "+n:o+" » "+i+" » "+r+": "+n},dataUrl:function(t){return t.replace(/\/Code\//,"/trello/Code/")},_processJSON:function(t,e){var r,n,o,i,s;if(null!=e.reviews)for(i=e.reviews,r=0,o=i.length;o>r;r++)s=i[r],s.status=p(["known services","kiln commit","status",s.sStatus]),s.url=t.replace(/\/Code\/.*$/,"/Review/"+s.sReview);return e.sAuthor&&(e.author=e.sAuthor.replace(/\s<.*$/,"")),e.hash&&(e.shortHash=e.hash.substr(0,6)),e.sDescription&&(n=new u({restrict:{block:["paragraph","newline"],inline:["break","email","emoji","url"]}}),e.shortCommitMessage=e.sDescription.split("\n")[0],e.commitMessageHtml=n.format(e.sDescription).output),e.url=t,e},previewHtml:function(t,e){return m.fill("kiln_changeset_preview",this._processJSON(t,e))},previewHtmlError:function(t,e){var r;return/unable to access/i.test(e)?(t=null!=(r=/^https?:\/\/[-a-z0-9\.]+(\/kiln)?/.exec(t))?r[0]:void 0,{login:p("known services.kiln commit.error")}):null},thumbnailHtml:function(t,e,r){return m.fill("kiln_changeset_thumbnail",f(this._processJSON(t,e),r))}},{key:"github commit",match:{protocol:"https:",host:"github.com",pathname:/^\/([^\/]+)\/([^\/]+)\/commit\/([^\/]{7,40})$/},previewClass:"attachment-thumbnail-preview-github-logo",icon:"https://d78fikflryjgj.cloudfront.net/images/services/8cab38550d1f23032facde191031d024/github.png",getText:function(t){var e,r,n,o;return e=t[0],o=t[1],n=t[2],r=t[3],o+"/"+n+": "+r.substr(0,7)}},{key:"github issue",match:{protocol:"https:",host:"github.com",pathname:/^\/([^\/]+)\/([^\/]+)\/issues\/(\d+)$/},previewClass:"attachment-thumbnail-preview-github-logo",icon:"https://d78fikflryjgj.cloudfront.net/images/services/8cab38550d1f23032facde191031d024/github.png",getArgs:function(t){var e,r,n,o;return e=t[0],o=t[1],n=t[2],r=t[3],{user:o,repo:n,number:r}}},{key:"github pull request",match:{protocol:"https:",host:"github.com",pathname:/^\/([^\/]+)\/([^\/]+)\/pull\/(\d+)$/},previewClass:"attachment-thumbnail-preview-github-logo",icon:"https://d78fikflryjgj.cloudfront.net/images/services/8cab38550d1f23032facde191031d024/github.png",getArgs:function(t){var e,r,n,o;return e=t[0],o=t[1],n=t[2],r=t[3],{user:o,repo:n,number:r}}}],t.prototype.interpret=function(t,e){var r,n,o,i,s,u,c,l,h,m,f,g,v,y,b;for(g=this._knownUrls,i=0,c=g.length;c>i;i++)if(v=g[i],u=v.key,o=v.getText,n=v.getArgs,l=v.match,f=v.previewClass,s=v.icon,null!=(m=d(l,t)))return b=null!=o?o(m,e):(r=null!=(y="function"==typeof n?n(m,e):void 0)?y:{},p(["known services",u,"text"],r)),h=p(["known services",u,"name"]),a.props({name:h,previewClass:f,icon:s,text:b});return a.resolve()},t.prototype._runHandler=function(){var t,e,r,o,i,s,a,u,c,l,p;for(u=arguments[0],p=arguments[1],t=4<=arguments.length?g.call(arguments,2,r=arguments.length-1):(r=2,[]),c=arguments[r++],l=this._knownUrls,o=0,s=l.length;s>o;o++)if(i=l[o],null!=d(i.match,p)&&null!=i[u])return a=i.match,e=i.dataUrl,void n.ajax({url:e(p),xhrFields:{withCredentials:!0},headers:{"X-Trello":"Is it me you're looking for?"},success:function(e){return c(null,i[u].apply(i,[p,e].concat(g.call(t))))},error:function(e,r,n){var o,s;return o=u+"Error",s="function"==typeof i[o]?i[o].apply(i,[p,n].concat(g.call(t))):void 0,c(null!=s?s:"could not load")}});c()},t.prototype.previewHtml=function(t,e){return this._runHandler("previewHtml",t,e)},t.prototype.thumbnailHtml=function(t,e,r){return this._runHandler("thumbnailHtml",t,e,r)},t}())},{}],25:[function(t,e,r){var n;n=t(22),e.exports={locales:[window.locale,"en-GB"]}},{}],26:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,B=[].slice,M=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};o=t(22),i=t(193),n=t(116),u=t(126),c=t(128),s=t(125),a=t(123),l=t(64),d=t(163),p=t(164),h=t(166),f=t(168),g=t(170),v=t(172),y=t(171),b=t("bluebird"),w=t(99),_=t("underscore"),j=t(31),S=t(81),x=t(197),k=t(57),C={Action:{type:n,test:x.eq("actions")},Card:{type:u,test:x.eq("cards")},Checklist:{type:c,test:x.eq("checklists")},Board:{type:s,test:function(t){return/^board($|s)/.test(t)}},BoardPlugin:{type:a,test:x.eq("boardPlugins")},Label:{type:d,test:x.eq("labels")},List:{type:p,test:function(t){return/^lists?/.test(t)}},Member:{type:h,test:function(t){return/^member/.test(t)&&"memberships"!==t&&"memberType"!==t&&"membershipCounts"!==t}},Notification:{type:f,test:x.eq("notifications")},Organization:{type:g,test:function(t){return/^organization/.test(t)}},Plugin:{type:v,test:function(t){return/^plugins?$/.test(t)}},PluginData:{type:y,test:x.eq("pluginData")}},S(l,m=function(){function t(){var t;this._cache={},this._locked=[],this._lockIndex=0,this._deltaQueue=[],this.uniqueId=_.uniqueId("mc");for(t in C)this._cache[t]={}}return t.prototype.get=function(t,e){var r;return _.isArray(e)?e.map(x(this,"get",t)):w.isShortLink(e)?this.findOne(t,"shortLink",e):(_.isString(t)||(t=t.prototype.typeName),null!=(r=this._cache[t])?r[e]:void 0)},t.prototype.find=function(){var t,e,r,n,o;return r=arguments[0],t=2<=arguments.length?B.call(arguments,1):[],1===t.length?(n=t[0],_.filter(this.all(r),n)):(e=t[0],o=t[1],this.find(r,function(t){return t.get(e)===o}))},t.prototype.findOne=function(){var t;return t=1<=arguments.length?B.call(arguments,0):[],_.first(this.find.apply(this,t))},t.prototype.waitFor=function(t,e,r){var n;return n=this.get(t,e),null!=n?r(null,n):this.once("add:"+t+":"+e,function(n){return function(){return n.waitFor(t,e,r)}}(this))},t.prototype.all=function(t){return _.isString(t)||(t=t.prototype.typeName),_.values(this._cache[t])},t.prototype.add=function(t){var e;t.id&&null!=this.get(t.typeName,t.id)||null!=C[t.typeName]&&(e=t.id?t.id:t.cid,this._cache[t.typeName][e]=t,this.stopListening(t),this.listenTo(t,"change",this.onModelChange),this.listenTo(t,"destroy",this.remove),this.waitForId(t,function(e){return function(r){return delete e._cache[t.typeName][t.cid],e._cache[t.typeName][r]=t,e.trigger("add:"+t.typeName+":"+r,t),"function"==typeof t.triggerCacheEvents?t.triggerCacheEvents(e,"add",t):void 0}}(this)),this.trigger("add:"+t.typeName,t))},t.prototype.onModelChange=function(t){var e,r,n;"function"==typeof t.triggerCacheEvents&&t.triggerCacheEvents(this,"change",t),this.trigger("change:"+t.typeName,t),r=t.changedAttributes();for(e in r)n=r[e],this.trigger("change:"+t.typeName+":"+e,t)},t.prototype.remove=function(t){var e,r,n,o;if(null!=t){if(t instanceof u)for(o=t.actionList.models,r=0,n=o.length;n>r;r++)e=o[r],this.remove(e);return delete this._cache[t.typeName][t.id],delete this._cache[t.typeName][t.cid],this.trigger("remove:"+t.typeName,t),null!=t.id&&this.trigger("remove:"+t.typeName+":"+t.id,t),"function"==typeof t.triggerCacheEvents&&t.triggerCacheEvents(this,"remove",t),this.stopListening(t),t.destructor()}},t.prototype._update=function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f;if(null==r&&(r={}),_.isArray(e))return e.map(function(e){return function(n){return e._update(t,n,r)}}(this));if(e.deleted)return void this.remove(this.get(t,e.id));d=_.clone(e),u=function(){var t;t=[];for(a in r)s=r[a],a in d&&(o=d[a],delete d[a],t.push(x(s,o)));return t}();for(n in C){l=C[n],h=l.type,p=l.test;for(a in e)f=e[a],p(a)&&(this._update(n,f,r),delete d[a])}return i=_.isString(t)?this.get(t,e.id):t,null!=i?(i.set(d),u.forEach(function(t){return t(i)}),i):(m=C[t])?(c=new m.type(d,{modelCache:this}),u.forEach(function(t){return t(c)}),c):e},t.prototype.lock=function(t){var e;return e=this._lockIndex++,j("MC",t+" took lock "+e),this._locked.push(e),e},t.prototype.locked=function(){return!_.isEmpty(this._locked)},t.prototype.unlock=function(t){return M.call(this._locked,t)>=0?(j("MC","gave lock "+t),this._locked=_.without(this._locked,t),this.locked()||this.processDeltas(),!0):!1},t.prototype.getLock=function(){return b.resolve(this.lock()).disposer(function(t){return function(e){return t.unlock(e)}}(this))},t.prototype.enqueueDelta=function(t,e,r,n){null==r&&(r={}),null==n&&(n=function(){}),_.isFunction(r)&&(n=r,r={}),j("MC","got an update for "+(_.isString(t)?t:t.typeName)),this.locked()?this._deltaQueue.push({modelOrType:t,delta:e,mappingRules:r,next:n}):n(null,this._update(t,e,r))},t.prototype.processDeltas=function(){var t,e,r,n,o,i,s,a,u,c,l,d,p;for(u=this._deltaQueue,this._deltaQueue=[],p=function(t){return!_.isString(t)&&null==t.id},j("MC","Running "+u.length+" updates"),e=0,n=u.length;n>e;e++)c=u[e],s=c.modelOrType,t=c.delta,i=c.mappingRules,a=c.next,p(s)&&a(null,this._update(s,t,i));for(d=[],r=0,o=u.length;o>r;r++)l=u[r],s=l.modelOrType,t=l.delta,i=l.mappingRules,a=l.next,p(s)||d.push(a(null,this._update(s,t,i)));return d},t}()),_.extend(m.prototype,i.Events),e.exports=window.ModelCache=new m},{}],27:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,B,M,T,O,L,P,A=[].slice;n=t("jquery"),o=t(116),s=t(125),a=t(126),u=t(164),c=t(166),l=t(26),p=t(168),h=t(170),f=t(172),m=t(185),g=t("bluebird"),v=t(89),O=t(36),y=t(99),b=t("underscore"),S=t("moment"),B=t(102),P=t("xtend"),x=t(197),B=t(102),k=t(57),i=t(179),C=function(t,e){var r,n;return n=t.query,r=t.mappingRules,{query:P(n,e),mappingRules:r}},M={},T=function(t){var e;return e=M,g.fromNode(function(r){return e=QuickLoad.load(t,r)}).catch(function(t){var e,r;return r=t[0],e=t[1],g.reject(i.fromResponse(r,e))}).tap(function(){return k(e!==M,"Promises resolved synchronously; didn't get preload information from QuickLoad")}).spread(function(t,r){return[t,r,e]})},j=function(t){var e;null!=t&&(e=Date.now()-t.start,O("quickload use",t.url,{int_key_1:"time saved",int_val_1:e}))},L=function(t){var e;null!=(e=t.getResponseHeader("X-Server-Time"))&&v.updateServerTime(parseInt(e,10))},_={},w={},e.exports=d={_loadApiData:function(){var t,e,r,o,i,s,a,u,c,p,h;return s=arguments[0],e=arguments[1],u=arguments[2],t=4<=arguments.length?A.call(arguments,3):[],a=t[0],o=t[1],c=u.query,i=null!=(p=u.mappingRules)?p:{},b.isString(s)||(s=s.prototype.typeName),null==a&&(a=y.pluralize(s)+"/"+e),r=y.invitationTokens().join(","),b.isEmpty(r)||(c=b.extend({invitationTokens:r},c)),h="/1/"+a+"?"+n.param(c),T(h).spread(function(t,e,r){return L(e),j(r),t}).tap(function(){return o?void 0:new g(function(t){return d.waitFor("headerData",t)})}).then(function(t){return function(t){return B(l,"enqueueDelta",s,t,i)}}(this))},loadHeaderData:function(){return this._loadApiData(c,"me",m.memberHeader,void 0,!0).then(function(t){return["Member",t,m.memberHeader.mappingRules]})},loadBoardsMenuData:function(){return this._loadApiData(c,"me",m.boardsMenuMinimal).then(function(t){return["Member",t,m.boardsMenuMinimal.mappingRules]})},loadBoardData:function(t,e){return this._loadApiData(s,t,e)},loadCardData:function(){var t,e,r,n;return t=2<=arguments.length?A.call(arguments,0,e=arguments.length-1):(e=0,[]),n=arguments[e++],r=t[0],null!=r?this._loadApiData(a,n,m.card,"boards/"+r+"/cards/"+n):this._loadApiData(a,n,m.card)},loadCardName:function(t){return this._loadApiData(a,t,{query:{fields:"name"}}).call("get","name")},loadCardId:function(t,e){return this._loadApiData(a,e,m.idCard,"boards/"+t+"/cards/"+e).get("id")},loadCardDetails:function(t,e){return this._loadApiData(a,t,C(m.cardDetails,{actions_limit:e}),"cards/"+t)},loadCardVoters:function(t){
return this._loadApiData(a,t,m.cardVoters,"cards/"+t)},loadCardCopyData:function(t,e){return this._loadApiData(a,e,m.cardCopy,"boards/"+t+"/cards/"+e)},loadCardList:function(t){return this._loadApiData(u,t,m.cardList,"cards/"+t+"/list")},loadNotification:function(t){return this._loadApiData(p,t,{query:{fields:"all"}})},loadNotificationData:function(t){return this._loadApiData(c,t,m.memberNotifications)},loadMoreNotificationData:function(t,e){var r,n;return n={filter:"all",limit:10,display:!0,page:e},r="members/"+t+"/notifications",this._loadApiData(p,null,{query:n},r)},loadMemberBoardsData:function(t){return this._loadApiData(c,t,m.memberBoards)},loadMemberCardsData:function(t){return this._loadApiData(c,t,m.memberCards)},loadMemberEmail:function(t){return this._loadApiData(c,t,{query:{fields:"email",invitationTokens:y.invitationTokens().join(",")}})},loadOrganizationMemberGhost:function(t,e){var r,n,o;return r=null!=(o=y.inviteTokenFor(t))?o.split("-")[0]:void 0,null==r?g.resolve({}):(n={fields:m.memberFields,invitationTokens:y.invitationTokens().join(",")},this._loadApiData(c,r,{query:n}).catch(i,function(){return{}}))},loadMyBoardsUnreadData:function(){return this._loadApiData(c,"me",m.memberUnreadBoards)},loadMoreActionData:function(){var t,e,r,n,i,s,a,u;return s=arguments[0],n=arguments[1],a=arguments[2],i=arguments[3],t=5<=arguments.length?A.call(arguments,4):[],r=t[0],e=t[1],u={filter:"all",limit:i,page:a,display:!0},null!=r&&(u.idModels=r.join(",")),null!=e&&(u.filter=e),this._loadApiData(o,n,{query:u},s+"s/"+n+"/actions")},loadClosedCards:function(t,e){var r,n,o;return n=e.limit,r=e.before,o={stickers:!0,attachments:"cover"},null!=n&&(o.limit=n),null!=r&&(o.before=r),this._loadApiData(a,t,{query:o},"boards/"+t+"/cards/closed")},loadClosedBoards:function(){return this._loadApiData(s,null,{query:{filter:"closed"}},"members/me/boards")},loadArchivedLists:function(t){return this._loadApiData(s,t,m.archivedLists)},loadMemberPaidAccount:function(t){return this._loadApiData(c,t,m.memberPaidAccount)},loadMemberAccountData:function(t){return this._loadApiData(c,t,m.memberAccount)},loadMemberProfileData:function(t){var e,r;return r=m.memberProfile,e=m.memberProfile_daysBack,r.action_since=S().subtract(e,"days").toString(),this._loadApiData(c,t,m.memberProfile)},loadMemberCustomBackgrounds:function(t){return this._loadApiData(c,t,{query:{fields:"",boardBackgrounds:"custom"}})},loadMemberCustomStickers:function(t){return this._loadApiData(c,t,{query:{fields:"",customStickers:"all"}})},loadMemberCustomEmoji:function(t){return this._loadApiData(c,t,{query:{fields:"",customEmoji:"all"}})},_loadOrganizationPayload:function(t,e){return this._loadApiData(h,e,t)},loadOrganizationData:function(t){return this._loadOrganizationPayload(m.organization,t)},loadOrganizationBoardsData:function(t){return this._loadOrganizationPayload(m.organizationBoardsPage,t)},loadOrganizationPaidAccount:function(t){return this._loadOrganizationPayload(m.organizationPaidAccount,t)},loadOrganizationMinimal:function(t){return this._loadOrganizationPayload(m.organizationMinimal,t)},loadOrganizationMembersData:function(t){return this._loadOrganizationPayload(m.organizationMembers,t)},loadOrganizationMembersExtraData:function(t){return this._loadOrganizationPayload(m.organizationMembersExtra,t)},loadOrganizationMembersMinimal:function(t){return this._loadOrganizationPayload(m.organizationMembersMinimal,t)},loadOrganizationExportData:function(t){return this._loadOrganizationPayload(m.organizationExports,t)},loadOrganizationMemberMinimal:function(t,e){return this._loadApiData(c,e,m.memberMinimal)},loadOrganizationPluginData:function(t){return this._loadOrganizationPayload(m.organizationPluginData,t)},loadOrgMemberCardData:function(t,e){var r;return r="organization/"+t+"/members/"+e+"/cards",this._loadApiData(a,t,m.orgMemberCards,r)},loadOrgNameById:function(t){var e;return e={fields:"name"},this._loadApiData(h,t,{query:e}).call("get","name")},loadCurrentBoardData:function(t){return this.loadBoardData(t,m.currentBoardMinimal)},loadBoardSecondary:function(t){return this._loadApiData(s,t,m.currentBoardSecondary)},loadBoardName:function(t){var e;return e={fields:["name","closed"].join(",")},this._loadApiData(s,t,{query:e}).call("get","name")},loadBoardPluginData:function(t){return this._loadApiData(s,t,m.boardPluginData)},loadMyOrganizations:function(){return this.loadMemberOrganizations("me")},loadMemberOrganizations:function(t){return this._loadApiData(c,t,m.organizations)},loadSearchData:function(t){return this._loadApiData("search",null,{query:t},"search")},loadModel:function(t,e,r){return this._loadApiData(t,e,r)},loadBoardAvailablePlugins:function(t){return this._loadApiData(f,null,{query:{filter:"available"}},"boards/"+t+"/plugins")},triggerWaits:function(t){var e,r,n,o,i;for(_[t]=!0,i=null!=(o=w[t])?o:[],r=0,n=i.length;n>r;r++)(e=i[r])();return delete w[t]},waitFor:function(t,e){return _[t]?e():(null!=w[t]?w[t]:w[t]=[]).push(e)},await:function(t){return new g(function(e){return function(r){return e.waitFor(t,r)}}(this))}}},{}],28:[function(t,e,r){var n,o,i,s;n=t("jquery"),o=t(22),s=t(114),e.exports=i={version:new s.Client(window.clientVersion),server:{version:"0.0.0",environment:"dev"},setServerVersion:function(t){var e,r;e=!1;for(r in this.server)this.server[r]!==t[r]&&(e=!0,this.server[r]=t[r]);return e?n(this).triggerHandler("change:serverVersion"):void 0},setServerVersionFromResponse:function(t){var e,r;return r=t.getResponseHeader("X-Trello-Version"),e=t.getResponseHeader("X-Trello-Environment"),null!=r&&(this.server.version=r),null!=e?this.server.environment=e:void 0}},Object.defineProperty(window,"TrelloVersion",{get:function(){return"Server: "+i.server.version+" ("+i.server.environment+")\nClient: "+i.version+" ("+o.me().get("channels").active+")"}})},{}],29:[function(t,e,r){var n,o,i;n=t(28),i=t(25).locales,o=i[0],e.exports=function(){return[{schema:"iglu:com.trello/web-context/jsonschema/1-0-4",data:{client_version:n.version.toString(),client_locale:o}}]}},{}],30:[function(t,e,r){var n,o,i;n=t("jquery"),o=t(22),i=t(60),e.exports=function(t,e,r,s){var a,u,c,l,d,p,h;d=window.clientVersion.split("-"),l=d[0],h=d[1],h=parseInt(h,10),a={head:l,version:h,patch:0},u={name:t.name,msg:t.message,url:e,line:r,col:s,stack:t.stack,ua:navigator.userAgent,browser:i.asString,language:null!=(p=navigator.language)?p:navigator.browserLanguage,clientVersion:a},o.isLoggedIn()&&(u.idMember=o.myId());try{n.post("/err",{errors:[u]})}catch(t){c=t}}},{}],31:[function(t,e,r){var n;n=t(32),e.exports=n.log.bind(n)},{}],32:[function(t,e,r){var n,o,i,s=[].slice;n=t("jquery"),o=t(88),i=t("underscore"),e.exports=window.Logger=new(function(){function t(){var t;this.enabled=null!=(t=o.get("loggers"))?t:{},this.historyMap={},this.logHistory=!1,this.timeSpent={},this.timing={}}return t.prototype.log=function(){var t,e,r,o;o=arguments[0],t=2<=arguments.length?s.call(arguments,1):[],("undefined"!=typeof console&&null!==console?console.log:void 0)&&(r=!1,0===t.length?(r=!0,t.push(o),o="all"):r=this.enabled.all||this.enabled[o],r&&(1===t.length&&i.isArray(t[0])&&(t=t[0]),t.unshift(o),n("body").is(".chrome")?console.log(t):console.dir(t)),this.logHistory&&(null==(e=this.historyMap)[o]&&(e[o]=[]),this.historyMap[o].push(t)))},t.prototype.enable=function(t){null==t&&(t="all"),this.enabled[t]=!0,this.save()},t.prototype.disable=function(t){null==t&&(t="all"),delete this.enabled[t],this.save()},t.prototype.disableAll=function(){this.enabled={},this.save()},t.prototype.enableAll=function(){this.enabled.all=!0,this.save()},t.prototype.history=function(t){var e,r,n,o;if(t in this.historyMap)for(o=this.historyMap[t],r=0,n=o.length;n>r;r++)e=o[r],"undefined"!=typeof console&&null!==console&&"function"==typeof console.log&&console.log(e)},t.prototype.list=function(){"undefined"!=typeof console&&null!==console&&"function"==typeof console.log&&console.log(i.keys(this.historyMap))},t.prototype.save=function(){o.set("loggers",this.enabled)},t.prototype.time=function(t){return this.timing[t]=performance.now()},t.prototype.endTime=function(t){var e,r;return r=performance.now()-this.timing[t],null==(e=this.timeSpent)[t]&&(e[t]=0),this.timeSpent[t]+=r},t}())},{}],33:[function(t,e,r){var n,o,i,s;n=t(22),o=t(16),i=t(99),s=t("moment"),e.exports=function(t,e,r){var a,u,c,l,d,p,h,m,f,g,v,y,b;return null==e&&(e="not specified"),r||(r="none given"),p=t.toJSON(),d=n.me().toJSON(),h=null!=(m=p.paidAccount)&&null!=(f=m.products)?f[0]:void 0,u={},u.ID=p.id,(null!=(g=p.paidAccount)?g.ixSubscriber:void 0)&&(u.ixSubscriber=null!=(v=p.paidAccount)?v.ixSubscriber:void 0),p.displayName&&(u["Organization Display Name"]=p.displayName),p.name&&(u["Organization Name"]=p.name),p.fullName?u["Full Name"]=p.fullName:u["Full Name"]=d.fullName,p.username?u.Username=p.username:u.Username=d.username,p.idBoards&&(u["# Boards"]=p.idBoards.length),p.memberships&&(u["# Members"]=p.memberships.length),null!=h&&(u["Next Billing Date"]=(c=null!=(y=p.paidAccount.billingDates)?y[h]:void 0)?s(c).locale("en").format("LL"):"",o.isYearly(h)?u.Interval="Yearly":u.Interval="Monthly",u.Price=o.getPrice(h)),u["Trello Version"]=window.TrelloVersion.replace(/\s+/g," "),a=function(){var t;t=[];for(l in u)b=u[l],t.push(l+": "+b);return t}().join("\n"),i.bugzscout({me:d,project:"Sales",area:"Cancellations",forceNew:1,description:"Cancelled Business Class - "+u.Interval+"\n",extra:a+"\n\nReason: "+e+"\n\nDetails:\n\n"+r})}},{}],34:[function(t,e,r){var n;n=t(29),e.exports=function(t,e,r,o){return"function"==typeof window.ga&&window.ga("send","event",t,e,r,o),"function"==typeof window.sp?window.sp("trackStructEvent",t,e,r,"",o,n()):void 0}},{}],35:[function(t,e,r){e.exports=function(t){return"function"==typeof window.sp?window.sp("trackUnstructEvent",{schema:"iglu:com.trello/debug-event/jsonschema/1-0-1",data:t}):void 0}},{}],36:[function(t,e,r){var n,o,i,s;n=t("underscore"),s=t(35),i=t(216),o=t(80),e.exports=function(t,e,r){var a,u,c;return u=i(e),a=/^\/1\/([^\/]*)\//.exec(u.pathname)[1],c=u.query.slice(1),s(n.extend({debug_event_type:t,debug_action:a,string_key_1:"query 1",string_val_1:c.slice(0,255),string_key_2:"query 2",string_val_2:c.slice(255,510),string_key_3:"md5 query",string_val_3:o(c)},r))}},{}],37:[function(t,e,r){var n;n=t("promise-queue"),n.configure(t("bluebird"))},{}],38:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w={}.hasOwnProperty;n=t("jquery"),o=t(429),i=t(178),s=t(22),a=t(60),u=t(5),c=t(432),l=t(73),d=t(14),p=t(434),h=t(435),m=t(228),f=t(99),g=t("underscore"),v=t(402),b=t(34),y=function(){var t,e,r,n;e={},n=null,t=0,r=function(){var t,r;for(r in e)w.call(e,r)&&(t=e[r])();n=null,e={}},window.requestAnimationFrame=function(o){var i;return i=t++,null==n&&(n=setTimeout(r)),e[i]=o,i},window.cancelAnimationFrame=function(t){delete e[t]}},n(document).ready(function(){var t,e;return n("meta[name=apple-itunes-app]").attr("content","app-id=461504587, app-argument="+location.href),"requestAnimationFrame"in window||y(),window.orientationchange=function(){return c.calcPos()},a.detectCustomWebkitScrollbars(),n.event.props.push("dataTransfer"),n.event.props.push("detail"),e=function(t,e,r,o){return n(document).on("click",t,function(t){var n,i;return n=function(){var n,s,a,u;for(a=[e,r,o],u=[],n=0,s=a.length;s>n;n++)i=a[n],null!=i&&(g.isFunction(i)?u.push(i.call(this,t)):u.push(i));return u}.call(this),b.apply(null,n)})},e(".js-home-via-logo","Header","Logo","Home"),e(".header-signup","Header","Sign Up"),n(document).on("click",".js-resend-confirmation-email",g.throttle(function(t){return function(){return i({type:"POST",url:"/resendValidate",data:{email:s.me().get("email")},success:function(){return o.flash("email sent","confirm")}})}}(this),6e4)),t=n(".window-overlay"),t.click(function(e){var r;if(!(e.button>0)){if(r=n(e.target).closest("a"),r.length>0&&"#"===r.attr("href"))return void f.stopPropagation(e);if(!n(e.target).is("a.focus-dummy")&&!n(e.target).hasClass("checkbox"))return h.isVisible?void h.hide():p.isEditing()?void p.cancelEdits():void(e.target===t[0]&&c.hide())}}),n("#surface").click(function(t){return n(t.target).closest(".boards-drawer, .js-react-root").length?void 0:v(t)}),n(document).on("click","a[href=#]",function(t){return f.preventDefault(t)}),n(document).keyup(function(t){var e,r;return r=l.getKey(t),r===d.Escape?(t.preventDefault(),e=u.getCurrentBoard(),m.getShowSidebar()&&!m.getPinSidebar()?m.hideSidebar():p.isEditing()?p.cancelEdits():n(".new-comment").hasClass("focus")?n(".new-comment").removeClass("focus").find("textarea").blur():(n("input").blur(),n("textarea").blur())):void 0}),n(document).bind("dragstart",function(t){return n(t.target).closest(".ui-draggable").length>0}),null!=window.fluid?b("FluidApp"):void 0})},{}],39:[function(t,e,r){var n,o,i,s,a,u,c;n=t(179),u=t(30),i=t(63),o=t("underscore"),s=t(197),a=function(t){return t instanceof n.Other||!(t instanceof n)},c=[],i.subscribe(o.debounce(function(t){var e,r,n,i,l;return 10===c.length?!1:(r=t.error,l=t.url,i=t.line,e=t.col,a(r)&&RegExp("https?://("+location.host+"|[a-z0-9]+\\.cloudfront\\.net|a.trellocdn.com)/").test(l)?(n=[r.message,l,i,e],o.any(c,s(o.isEqual,n))?!1:(u(r,l,i,e),c.push(n),!1)):!1)},1e3,!0))},{}],40:[function(t,e,r){window.testThatErrorReportingStillWorks=function(){return setTimeout(function(){throw new Error("Error reporting still works!")},1e3)}},{}],41:[function(t,e,r){var n;n=t(22),"function"==typeof window.sp&&window.sp("newTracker","cf",window.snowplowCloudfrontServer,{appId:"web",cookieDomain:".trello.com",respectDoNotTrack:!0}),n.isLoggedIn()&&"function"==typeof window.sp&&window.sp("setUserId",n.myId())},{}],42:[function(t,e,r){var n;n=t("intl"),n.__addLocaleData(t("intl-locale-data"))},{}],43:[function(t,e,r){var n,o,i,s,a,u,c,l=[].slice;n=t(26),u=t(189),i=t(57),o=t("underscore"),s=function(t,e,r){var n,a,u;return i(e.length>=1),n=e[0],u=2<=e.length?l.call(e,1):[],a=null!=t?o.clone(t):{},a[n]=0===u.length?r:s(a[n],u,r),a},c=function(t){var e,r,i;return null!=t.display?t:null==(e=n.get("Action",t.id))?t:"commentCard"!==e.get("type")?t:(r=null!=(i=t.data)?i.text:void 0,null==r?t:(t=o.clone(t),t.display=s(e.get("display"),["entities","comment","text"],r),t))},a=function(t){return null==t._id?t:(t=o.clone(t),null==t.id&&(t.id=t._id),delete t._id,t)},u.on("updateModels",function(t){var e,r,o,i,s;for(s=t.typeName,r=t.deltas,r=r.map(a),"Action"===s&&(r=r.map(c)),o=0,i=r.length;i>o;o++)e=r[o],n.enqueueDelta(s,e)}),u.on("deleteModels",function(t){var e,r,o,i,s,u;for(u=t.typeName,e=t.deltas,s=e.map(a),r=0,i=s.length;i>r;r++)o=s[r].id,n.enqueueDelta(u,{id:o,deleted:!0})})},{}],44:[function(t,e,r){var n,o;n=t("jquery"),o=t(72),n.getScript("https://apis.google.com/js/api.js",function(){return o.loadedAuth()})},{}],45:[function(t,e,r){window.knowsHowToLoadChannels=!0},{}],46:[function(t,e,r){var n,o,i,s,a,u;n=t("jquery"),o=t(60),i=t(73),s=t(14),a=t(99),"safari"===(u=o.browserStr)&&n(document).on("keydown",function(t){var e,r,o,u,c,l,d,p,h;h=i.getKey(t),h!==s.Tab||t.metaKey||t.shiftKey||t.ctrlKey||(c=n(t.target),c.attr("tabindex")&&(p=parseInt(c.attr("tabindex"),10),u=c.closest("body,.js-tab-parent"),o=u.find("[tabindex]"),e=null,r=null,l=1/0,d=1/0,o.each(function(){var t,o;return o=parseInt(n(this).attr("tabindex"),10),o>p&&l>o&&(l=o,e=n(this),t=!0),null==e&&d>o?(d=o,r=n(this)):void 0}),null==e&&(e=r),null!=e&&(a.stop(t),e.focus())))})},{}],47:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y;n=t(22),o=t(193),i=t(125),a=t(5),u=t(64),c=t(170),f=t(81),g=t(189),d=t("underscore"),v=function(t,e){var r;return t.length===(r=e.length)&&r===d.union(t,e).length},s=function(){function t(t){this.maxLength=t,this.contents=[]}return t.prototype.pushift=function(t){return this.contents=d.without(this.contents,t),this.contents.push(t),this.contents.length>this.maxLength?this.contents.shift():null},t.prototype.map=function(t){return this.contents.map(t)},t}(),h=function(){return n.isLoggedIn()?[{modelType:"Member",idModel:n.myId(),tags:["messages","updates"]}]:[]},m=function(t){return[{modelType:"Organization",idModel:t.id,tags:["allActions","updates"]}]},p=function(t){var e;return[{modelType:"Board",idModel:t.id,tags:["clientActions","updates"]}].concat(null!=(e=t.getOrganization())?m(e):[])},f(u,l=function(){function t(){this.boards=new s(5),this.orgs=new s(1)}return d.extend(t.prototype,o.Events),t.prototype.addModel=function(t){this.waitForId(t,function(e){return function(){return t.isUpToDate=!0,t instanceof i&&e.syncBoard(t),t instanceof c&&e.syncOrg(t),e.ensureSubscriptions()}}(this))},t.prototype.syncBoard=function(t){var e;null!=(e=this.boards.pushift(t))&&(this.stopListening(e),e.isUpToDate=!1),this.listenTo(t,"change:idOrganization",this.ensureSubscriptions)},t.prototype.syncOrg=function(t){var e;null!=(e=this.orgs.pushift(t))&&(e.isUpToDate=!1)},t.prototype.ensureSubscriptions=function(){var t,e,r,n,o,i,s,a,u,c,l,f,y,b,w;for(t=d.flatten([h(),this.boards.map(p),this.orgs.map(m)]),b={},r=0,o=t.length;o>r;r++)s=t[r],i=s.modelType,n=s.idModel,w=s.tags,null==b[n]&&(b[n]={tags:[],modelType:i}),(a=b[n].tags).push.apply(a,w);u=g.currentSubscriptions;for(n in u)i=u[n].modelType,null==b[n]&&g.unsubscribe(i,n);c=g.currentSubscriptions;for(n in c)l=c[n],y=l.tags,i=l.modelType,null!=b[n]&&(e=b[n].tags,v(y,e)||g.unsubscribe(i,n));for(n in b)f=b[n],w=f.tags,i=f.modelType,null==g.currentSubscriptions[n]&&g.subscribe(i,n,w)},t}()),y=new l,a.currentModel.subscribe(function(t){null!=t?y.addModel(t):y.ensureSubscriptions()})},{}],48:[function(t,e,r){var n,o,i,s,a;o=t(22),n=t(179),s=t(63),s.subscribe(function(t){var e;e=t.error,e instanceof n.Unauthenticated&&o.logoutPost()}),a=o.updateToken(),i=setInterval(function(){var t;return t=o.updateToken(),t!==a&&window.location.reload(),a=t},3e3),window.addEventListener("beforeunload",function(){clearInterval(i)})},{}],49:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b;n=t("jquery"),o=t(22),i=t(193),s=t(28),a=t(5),u=t(61),d=t(490),c=t(26),l=t(82),h=t(191),p=t(435),b=t(36),m=t(99),f=t(115),y=t(418),v=t(104),g=t(30),n(function(){var t;return"Production"===s.server.environment&&"trello.com"!==location.hostname&&g(Error("Site proxied as "+location.hostname)),setInterval(function(){u.update("body"),d.updateRelDates("body"),u.trigger("renderInterval")},1e4),h.start(),l.init(),a.start(),i.history.start({pushState:!0}),f.ensureRun(),t=function(t){var e,r;if(t=t.replace(/[\?\#].*$/,""),/\.[a-z]+$/i.test(t))return!1;if(/^([bc]|board|card|org)\//.test(t))return!0;if(/^search(\/|$)/.test(t))return!0;if(o.isLoggedIn()){if(RegExp("^"+o.myUsername()+"(/|$)").test(t))return!0;if("/"===t)return!0}if(/^shortcuts\/?$/.test(t))return!0;if(e=null!=(r=/^[^\/]+/.exec(t))?r[0]:void 0,"me"===e||"my"===e||"you"===e||"your"===e||"username"===e)return!0;if(/^[a-z0-9_]{3,}$/.test(e)){if(null!=c.findOne("Member","username",e))return!0;if(null!=c.findOne("Organization","name",e))return!0}return!1},n(document).delegate("a[href^='/'],a[href^='"+siteDomain+"/']","click",function(e){var r,o;if(!n(e.target).closest(".js-react-root").length&&v(e))return o=n(this).attr("href").replace(RegExp("^"+siteDomain),"").replace(/^\/(?=.)/,""),r=o!==location.pathname.slice(1),r&&p.hide(),t(o)&&null==n(this).attr("target")&&(m.preventDefault(e),r)?a.navigate(o,{trigger:!0}):void 0}),QuickLoad.onRemove(function(t){return t.used?void 0:b("quickload unused",t.url)})})},{}],50:[function(t,e,r){var n,o,i,s;n=t("jquery"),o=t(119),i=t(99),s=t("underscore"),s.defer(function(){var t,e,r,s;return r=i.getMs({minutes:10+5*Math.random()}),s=null,e=("function"==typeof document.hasFocus?document.hasFocus():void 0)||!0,t=function(){return e&&(null==s||Date.now()-s>r)?(o.fetch(),s=Date.now()):void 0},n(window).on("focus",function(r){return e=!0,t()}),n(window).on("blur",function(t){return e=!1}),setInterval(t,r/4),t()})},{}],51:[function(t,e,r){var n;n=t("underscore"),n.mixin({mapObj:n.compose(n.object,n.map),count:function(t,e){var r,n,o,i;for(null==e&&(e=function(){return!0}),r=0,n=0,o=t.length;o>n;n++)i=t[n],e(i)&&r++;return r}})},{}],52:[function(t,e,r){var n,o;n=t("jquery"),o=t(115),n(function(){var t;return o.calc(),t=null,n(window).resize(function(){clearTimeout(t),t=setTimeout(function(){return o.calc()},200)})})},{}],53:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};o=t("underscore"),d={none:-1,new:0,processing:1,denied:2,good:3,overdue:4,disabled:5,cancelled:6,"change processing":7,"change denied":8,"change finished":9,authorizing:10,"product specific processing":11,"free trial":12,"pending product specific processing":13,"pending authorizing":14,deleted:15},l=o.invert(d),i=[3,4,7,8,9,11,12,13,14],c=[1,7,10,11,13,14],u=[4],a=[2,5],s=[6],e.exports=n={hasAccount:function(t){return null!=t&&t!==d.none},isActive:function(t){var e;return null!=t&&(e=Number(t.standing),p.call(i,e)>=0)&&!o.isEmpty(t.products)},isProcessing:function(t){var e;return n.hasAccount(t)&&(e=Number(t),p.call(c,e)>=0)},isProblem:function(t){return t===d.overdue},isCancelled:function(t){var e;return null==t?!1:(e=Number(t.standing),n.hasAccount(t.standing)&&(p.call(s,e)>=0||p.call(i,e)>=0&&p.call(c,e)<0&&o.isEmpty(t.products)))},willExpire:function(t){var e,r;return(null!=(e=t.products)?e[0]:void 0)in(null!=(r=t.expirationDates)?r:{})},needsCC:function(t){var e;return e=Number(t),p.call(a,e)>=0},isInactive:function(t){return n.hasAccount(t)&&!n.isActive(t)},standingName:function(t){return l[t]}}},{}],54:[function(t,e,r){var n,o,i,s,a,u;u=t(215),a=null,s=null,n=function(t){return"function"==typeof t?t():t},o=function(t,e){var r,n,o,i,s;if("."===t)return{val:e};if("object"!=typeof e||null===e)return{};for(s=e,i=t.split("."),r=0,o=i.length;o>r;r++){if(n=i[r],!(n in s))return{};s=s[n]}return{val:s}},i={mustacheRender:function(t,e,r){if(null==r&&(r={}),null!=a)throw new Error("Cannot nest calls to mustacheRender");return u.render(function(){s=r,a=[e];try{t()}finally{a=null,s=null}})},mustacheVar:function(t){var e,r,i;if(null==a)throw new Error("Attempt to render a mustache template outside of a mustacheRender");for(e=a.length-1;e>=0;e+=-1)if(i=a[e],r=o(t,i),r.hasOwnProperty("val"))return n(r.val);return""},mustachePartial:function(t){if(null==s)throw new Error("Attempt to render a mustache template outside of a mustacheRender");if(!(t in s))throw new Error("Unregistered partial "+t);return s[t]()},mustacheBlock:function(t,e){var r,n,o,i,s;if(s=this.mustacheVar(t),!s)return"";if(i=void 0,Array.isArray(s))for(r=0,n=s.length;n>r;r++)o=s[r],a.push(o),e(),a.pop();else"object"==typeof s?(a.push(s),i=e(),a.pop()):i=e();return i},mustacheBlockInverted:function(t,e){var r;return r=this.mustacheVar(t),r?"":e()}},e.exports=t(214)(u,i)},{}],55:[function(t,e,r){var n,o=function(t,e){function r(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},i={}.hasOwnProperty;e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e}(Error)},{}],56:[function(t,e,r){e.exports=function(t){return function(e,r){if(null==r&&(r="assertion failed"),!e)throw new t(r)}}},{}],57:[function(t,e,r){e.exports=t(56)(t(55))},{}],58:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v=[].slice;a=t(197),s=t(57),f=t(209),i=t("underscore"),c=function(t,e){var r,n,o,i;for(r=t,n=0,i=e.length;i>n;n++){if(o=e[n],!r.hasOwnProperty(o))return void 0;r=r[o]}return r},l=function(t,e){var r;return r=c(t,e),null==r?void 0:(s("string"==typeof r,"key "+e.join(".")+" did not resolve to a string"),r)},n=function(){function t(t){this.key=t}return t}(),o=function(){function t(t){this.value=t}return t}(),m=function(t){return t.split(/(\{[^{}]+\})/).map(function(t){return 0===t.length?null:"{"===t[0]?new n(t.substr(1,t.length-2)):new o(t)}).filter(a.id)},h=f(function(t){return t([String],a.method("split",".")),t([Array],a.id)}),u=function(t,e,r){var n;return e=h(e),n=l(t,e),null==n?void 0:m(n)},p=function(t,e){return t.map(a.choke(1,e))},d=function(t,e){return function(){var r,i;return i=arguments[0],r=2<=arguments.length?v.call(arguments,1):[],p(i,f(function(i){return i([n],function(t){var n;return n=t.key,e.apply(null,[n].concat(v.call(r)))}),i([o],function(e){var n;return n=e.value,t.apply(null,[n].concat(v.call(r)))})}))}},g=function(){var t,e,r,n,o;return n=arguments[0],r=arguments[1],o=arguments[2],t=4<=arguments.length?v.call(arguments,3):[],e=u(n,r),null==e?void 0:o.apply(null,[e].concat(v.call(t)))},e.exports={normalizeKeyPath:h,lookup:u,makeVisitor:d,visit:g}},{}],59:[function(t,e,r){var n;n=function(){function t(){this.browser=this.searchString(this.dataBrowser)||"unknown-browser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"unknown-browser-version",this.OS=this.searchString(this.dataOS)||"unknown-os"}return t.prototype.searchString=function(t){var e,r,n;for(r=0,n=t.length;n>r;r++)if(e=t[r],this.versionSearchString=e.versionSearch||e.identity,e.string&&-1!==e.string.indexOf(e.subString)||e.prop)return e.identity},t.prototype.searchVersion=function(t){var e;return e=t.indexOf(this.versionSearchString),-1!==e?parseFloat(t.substring(e+this.versionSearchString.length+1)):void 0},t.prototype.dataBrowser=[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Trident/7",identity:"Explorer",versionSearch:"rv"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],t.prototype.dataOS=[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone"},{string:navigator.userAgent,subString:"iPod",identity:"iPod"},{string:navigator.userAgent,subString:"iPad",identity:"iPad"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.platform,subString:"Linux",identity:"Linux"}],t}(),e.exports=new n},{}],60:[function(t,e,r){var n,o;n=t("jquery"),o=t(59),e.exports=new(function(){function t(){this.browserStr=o.browser.toLowerCase(),this.browserVersionStr=(o.browser+"-"+o.version).toLowerCase(),this.osStr=o.OS.toLowerCase(),this.asString=this.browserStr+" "+this.browserVersionStr+" "+this.osStr,n(function(t){return function(){return n("body").addClass(t.asString)}}(this))}return t.prototype.isTouch=function(){var t;return"ipad"===(t=this.osStr)||"iphone"===t||"android"===t},t.prototype.isHighDPI=function(){return window.devicePixelRatio>1},t.prototype.allowsDynamicFavicon=function(){var t;return"chrome"===(t=this.browserStr)||"firefox"===t},t.prototype.respectsCrossDomainDownloadAttribute=function(){var t;return"chrome"===(t=this.browserStr)||"opera"===t},t.prototype.detectCustomWebkitScrollbars=function(){var t;try{return n("::-webkit-scrollbar"),t="body-webkit-scrollbars"}catch(e){return t="body-no-webkit-scrollbars"}finally{n("body").addClass(t)}},t}())},{}],61:[function(t,e,r){var n,o,i,s,a,u,c,l,d;n=t("jquery"),o=t(193),s=t(74),a=t(89),u=t(99),c=t("underscore"),d=t("moment"),l=t(76),e.exports=i={objToDate:function(t,e,r){var n;return c.isObject(t)&&(n=t,t=n.year,e=n.month,r=n.day),new Date(t,e-1,r)},dateToObj:function(t){return{year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()}},getStartOfWeek:function(t){return d(t).startOf("week").toDate()},getEndOfWeek:function(t){return d(t).endOf("week").toDate()},getDaysOfWeek:function(t){var e;return e=d(t).startOf("week"),[0,1,2,3,4,5,6].map(function(t){return e.clone().add(t,"days").toDate()})},getMidnightInt:function(t){return d(t).startOf("day").valueOf()},getFirstOfMonth:function(t){return d(t).startOf("month").toDate()},getLastOfMonth:function(t){return d(t).endOf("month").toDate()},isFirstOfMonth:function(t){return d(t).isSame(d(t).startOf("month"),"day")},isLastOfMonth:function(t){return d(t).isSame(d(t).endOf("month"),"day")},getDateDeltaString:function(t,e){return t=d(t),e=d(e),t.isSame(e,"day")?Math.abs(e.diff(t,"seconds"))<10?l("just now"):t.from(e):t.calendar(e)},getDateWithSpecificTime:function(t,e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),t.getHours(),t.getMinutes(),t.getSeconds())},update:function(t){var e;e=new Date,n(t).find(".date[dt]").each(function(){var t,r;t=n(this),r=t.data("date"),null==r&&(r=i.parse(t.attr("dt")),r=a.serverToClient(r),t.data("date",r)),t.text(i.getDateDeltaString(r,e)),t.is("[title]")||t.attr("title",d(r).format("LLL"))})},parse:function(t){return null==t&&(t=""),d(t).toDate()},toDateString:function(t){var e,r,n;return t=d(t),n=d(),r=Math.abs(n.diff(t,"months"))>9,e=t.isSame(n,"year")&&!r,t.format(e?"llll":"ll")},validDate:function(t){return c.isDate(t)&&!isNaN(t.getTime())}},c.extend(i,o.Events)},{}],62:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y=[].slice;i=t("underscore"),n=t(61),u=t(58),l=t(197),a=t(57),h=t(30),g={action:t("locale").actions,notification:t("locale").notifications},p=t(110),d=t(111),m=function(t,e,r){return null==r&&(r=!1),{type:"text",text:t,hideIfContext:r,idContext:e}},c=u.makeVisitor(m,function(t,e){return e.entities[t]}),f=u.makeVisitor(l.id,function(t,e){return e.hasOwnProperty(t)?e[t]:(h(new Error("substitution key "+t+" not found!")),"")}),v=function(t){var e,r,n,o;switch(e=i.clone(t),e.type){case"card":e.url=siteDomain+"/c/"+(null!=(r=e.shortLink)?r:e.id);break;case"board":e.url=siteDomain+"/b/"+(null!=(n=e.shortLink)?n:e.id);break;case"organization":e.url=siteDomain+"/"+(null!=(o=e.name)?o:e.id);break;case"attachment":null!=e.url&&(e.isTrelloAttachment=p(e.url),e.isTrello=d(e.url))}return e},s=function(t,e){return function(r){return r.type===t?e(r):r}},e.exports=o=function(){function t(t){this.visit=l(u.visit,g[t])}var e;return e=function(t,e){var r,n,o;return o=[t.translationKey],null==e?o:(r=i.find(i.pairs(t.entities),function(t){var r,n;return n=t[0],r=t[1],r.id===e}),null!=r?(n=r[0],[[t.translationKey,n].join("@")].concat(y.call(o))):o)},t.prototype.getEntities=function(t,r){var n;return"unknown"===t.translationKey?[]:(n=i.chain(e(t,r)).map(function(e){return function(r){return e.visit(r,c,t)}}(this)).compact().first().value(),null==n?(h(new Error("display key '"+t.translationKey+"' not found!")),[]):n.map(s("translatable",this._textFromTranslatable.bind(this))).map(s("relDate",this._localizedRelDate.bind(this))).map(v))},t.prototype._format=function(t,e){return null==e&&(e={}),this.visit(t,f,e).join("")},t.prototype._textFromTranslatable=function(t){var e;return e=this._format(t.translationKey),m(e,t.idContext,t.hideIfContext)},t.prototype._localizedRelDate=function(t){return i.defaults({current:this.relDateText(t.date)},t)},t.prototype.relDateText=function(t,e){var r,o,i;return null==e&&(e=new Date),r=new Date(t),o=n.getDateDeltaString(r,e),i=r>e?"notification_is_due":"notification_was_due",this._format(i,{period:o})},t}()},{}],63:[function(t,e,r){var n,o,i,s,a;o=t("hearsay"),i=t("bluebird"),s=t(57),a=new o.Emitter,a.use(),n=function(){function t(t,e,r,n){this.error=t,this.url=null!=e?e:document.location.href,this.line=null!=r?r:0,this.col=null!=n?n:0,s(null!=this.error)}return t}(),window.onerror=function(t,e,r,o,i){return null==i&&(i=new Error(t)),a.send(new n(i,e,r,o))},i.onPossiblyUnhandledRejection(function(t){
return a.send(new n(t))}),e.exports=a},{}],64:[function(t,e,r){var n,o,i,s;o=t("bluebird"),i=t("underscore"),s=t(57),e.exports=n=function(){function t(){}return t.prototype.listenToOnce=function(t,e,r){var n,o;return o=null,n=function(){return r.apply(this,arguments),o()},o=function(r){return function(){return r.stopListening(t,e,n)}}(this),this.listenTo(t,e,n)},t.prototype.waitForId=function(t,e){return this.waitForAttr(t,"id",e)},t.prototype.waitForAttr=function(t,e,r){var n;if(3!==arguments.length)throw new Error("Wrong number of arguments to waitForAttr");null!=(n=t.get(e))?r(n):this.listenToOnce(t,"change:"+e,function(n){return function(){return n.waitForAttr(t,e,r)}}(this))},t.prototype.waitForAttrs=function(t,e,r){var n;if(3!==arguments.length)throw new Error("Wrong number of arguments to waitForAttrs");return n=e.map(function(e){return function(r){return new o(function(n){return e.waitForAttr(t,r,n)})}}(this)),o.all(n).then(function(t){return i.object(i.zip(e,t))}).tap(r).done()},t}()},{}],65:[function(t,e,r){var n,o,i,s,a,u,c;n=t("jquery"),o=t(11),i=t(60),a=t(99),u=t("underscore"),c=t(80),s=t("bluebird"),e.exports=new(function(){function t(){this.settings={},this._update=u.debounce(this._update,100).bind(this),this._hasher=u.memoize(c)}var e,r;return r=function(t,e,r,n,o,i,s,a){return null==a&&(a=!0),null==i&&(i=5),t.beginPath(),t.moveTo(e+i,r),t.lineTo(e+n-i,r),t.quadraticCurveTo(e+n,r,e+n,r+i),t.lineTo(e+n,r+o-i),t.quadraticCurveTo(e+n,r+o,e+n-i,r+o),t.lineTo(e+i,r+o),t.quadraticCurveTo(e,r+o,e,r+o-i),t.lineTo(e,r+i),t.quadraticCurveTo(e,r,e+i,r),t.closePath(),a&&t.stroke(),s?t.fill():void 0},t.prototype.drawFavicon=function(){var t,e,n,i,s;if(t=document.createElement("canvas"),t.width=t.height=64,null==(e="function"==typeof t.getContext?t.getContext("2d"):void 0))throw Error("Can't render to the canvas!");return e.save(),this.settings.useDefault?(n=e.createLinearGradient(0,0,0,32),n.addColorStop(0,"#298FCA"),n.addColorStop(1,"#0079BF"),e.fillStyle=n):e.fillStyle=null!=(s=this.settings.color)?s:o.blue.color,r(e,0,0,64,64,12,!0),e.fillStyle="#fff",r(e,9,9,19,44,6,!0),r(e,36,9,19,29,6,!0),e.restore(),this.settings.hasNotifications&&(i=15,e.beginPath(),e.arc(64-i,i,i,0,2*Math.PI,!1),e.fillStyle="#EB5A46",e.fill(),e.lineWidth=4,e.strokeStyle="#FFFFFF",e.stroke(),e.closePath()),t.toDataURL("image/png")},e=function(t){return new s(function(e,r){a.waitForImageLoad(t,function(){return e(t)},r)})},t.prototype._update=function(){var t,r,o;if(i.allowsDynamicFavicon())return o=null!=this.settings.url?(r=this._hasher(this.settings.hasNotifications+"-"+this.settings.tiled+"-"+this.settings.url),t=window.backgroundDomain+"/favicon/"+r+".png",e(t)):s.reject(),o.catch(function(t){return function(){return null!=t.settings.url?"/dynamic-favicon?background="+t.settings.url+"&tiled="+(t.settings.tiled?"1":"0")+"&unread="+(t.settings.hasNotifications?"1":"0"):t.drawFavicon()}}(this)).then(function(t){return function(t){return n("#favicon").remove(),n("<link>").attr({id:"favicon",rel:"icon",type:"image/png",sizes:"64x64",href:t}).appendTo("head")}}(this)).catch(function(){}).done()},t.prototype.setNotifications=function(t){return this.settings.hasNotifications=t,this._update()},t.prototype.setBackground=function(t){var e,r,n,o;return n=t.url,r=t.tiled,e=t.color,o=t.useDefault,this.settings.url=n,this.settings.tiled=r,this.settings.color=e,this.settings.useDefault=o,this._update()},t}())},{}],66:[function(t,e,r){var n,o,i,s,a=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};o=t("underscore"),i=t(57),s=t(197),e.exports=n=function(){function t(t,e){var r,n,s,a;null==e&&(e={}),this.products={},this.prices={},this.intervals={},this.productShortNames={},this.prebilledProducts={},this.productFeatures={},this.perUserProducts={},this.perActiveUserProducts={},this.globalFeatures=null!=(s=e.globalFeatures)?s:[],i(e.currentProducts),this.currentProducts=e.currentProducts,o.extend(this,e.extras);for(r in t)a=t[r],n=parseInt(r,10),a=o.extend({interval:"monthly",hidden:!1,prebill:!0,perUser:!1,features:[]},a),this.products[n]=a.name,a.hidden||(this.productShortNames[a.shortName]=n),this.prebilledProducts[n]=a.prebill,this.perUserProducts[n]=a.perUser,this.perActiveUserProducts[n]=a.perActiveUser,this.productFeatures[n]=a.features,this.prices[n]=a.price,this.intervals[n]=a.interval}return t.prototype._convertToId=function(t){return o.isString(t)?/^\d+$/.test(t)?parseInt(t,10):this.productShortNames[t]:t},t.prototype.getProductNumber=function(t){return this._convertToId(t)},t.prototype.getPrice=function(t){return this.prices[this._convertToId(t)]},t.prototype.getInterval=function(t){return this.intervals[this._convertToId(t)]},t.prototype.isMonthly=function(t){return"monthly"===this.getInterval(t)},t.prototype.isYearly=function(t){return"yearly"===this.getInterval(t)},t.prototype.isPerActiveUser=function(t){return this.perActiveUserProducts[this._convertToId(t)]},t.prototype.isPerUser=function(t){return this.perUserProducts[this._convertToId(t)]},t.prototype.isPrebilled=function(t){return this.prebilledProducts[this._convertToId(t)]},t.prototype.getYearlyDiscountPercent=function(t,e){var r,n;return n=this.getPrice(t),r=12*this.getPrice(e),Math.round(100*(r-n)/r)},t.prototype.features=function(t){return null==t&&(t=[]),o.chain(t).map(s.lookup(this.productFeatures)).tap(function(e){return i(o.all(e,s.id),"FeatureSet::features called on an unrecognized product: "+t)}).flatten().unique().value()},t.prototype.hasProduct=function(t){return null==t&&(t=[]),o.any(t,function(t){return function(e){return e in t.products}}(this))},t.prototype.isFeatureEnabled=function(t,e){return a.call(this.globalFeatures,t)>=0||a.call(this.features(e),t)>=0},t}()},{}],67:[function(t,e,r){e.exports={number:t(69),taxRate:t(71),percentage:t(70),money:t(68)}},{}],68:[function(t,e,r){var n,o,i;n=t("intl"),i=t(25).locales,o=null,e.exports=function(t){return null==o&&(o=new n.NumberFormat(i[0],{minimumFractionDigits:2,maximumFractionDigits:2})),o.format(t)}},{}],69:[function(t,e,r){var n,o,i;n=t("intl"),i=t(25).locales,o=null,e.exports=function(t){return null==o&&(o=new n.NumberFormat(i[0])),o.format(t)}},{}],70:[function(t,e,r){var n,o,i;n=t("intl"),i=t(25).locales,o=null,e.exports=function(t){return null==o&&(o=new n.NumberFormat(i[0],{style:"percent"})),o.format(t)}},{}],71:[function(t,e,r){var n,o,i;n=t("intl"),i=t(25).locales,o=null,e.exports=function(t){return null==o&&(o=new n.NumberFormat(i[0],{style:"percent",minimumFractionDigits:4,maximumFractionDigits:4})),o.format(t)}},{}],72:[function(t,e,r){var n,o,i,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=t("jquery"),o=t(193),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.loadedAuth=function(){var t;return null!=(t=window.gapi)?t.load("auth",function(t){return function(){return t.loaded=!0,t.trigger("loaded"),t.authorize(!0)}}(this)):void 0},e.authorize=function(t,e){return this.validToken()?"function"==typeof e?e(null,this.oauthToken.access_token):void 0:gapi.auth.authorize({client_id:window.googleDriveClientId,scope:"https://www.googleapis.com/auth/drive.readonly",immediate:t},function(t){return function(r){var n;return!r||r.error?(t.oauthToken=null,"function"==typeof e?e(null!=(n=null!=r?r.error:void 0)?n:Error("Failed to request token")):void 0):(t.oauthToken=r,"function"==typeof e?e(null,t.oauthToken.access_token):void 0)}}(this))},e.validToken=function(){var t;return(null!=(t=this.oauthToken)?t.access_token:void 0)&&Date.now()/1e3<parseInt(this.oauthToken.expires_at)},e}(o.Events)},{}],73:[function(t,e,r){var n,o,i,s;i=t(14),n=t(12),o=t(13),s=t(17),e.exports={getKey:function(t){var e,r,a;switch(t.type){case"keydown":case"keyup":return null!=(r=o[t.which])?i[r]:i.Unknown;case"keypress":return null!=(e=null!=(a=n[t.which])?a:s[t.which])?i[e]:i.Unknown;default:throw Error("Can't getKey for this event")}},isArrow:function(t){return t===i.ArrowLeft||t===i.ArrowRight||t===i.ArrowUp||t===i.ArrowDown},isSubmitEvent:function(t){var e;if("keydown"!==t.type)throw Error("Checking for submit only works on keydown");return(e=this.getKey(t))===i.Enter||e===i.LineFeed},isForceSubmitEvent:function(t){return this.isSubmitEvent(t)&&(t.ctrlKey||t.metaKey)&&!t.shiftKey}}},{}],74:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g=[].slice;n=t("jquery"),o=t("underscore"),i=t(197),a=function(t){return t.toLowerCase().split("-")},c=function(t,e){var r,n;return r=a(t),n=a(e),o.all(n,function(t,e){return r[e]===t})},l=function(t){var e,r,n,o;return t=t.split("@")[0],t=t.split(".")[0],e=t.split(/[-_]/),1===e.length?e[0]:(r=e[0],n=e[1],o=3<=e.length?g.call(e,2):[],[r,n.toUpperCase()].concat(g.call(o)).join("-"))},u=function(t,e){return t?e(t):null},f=function(t){return t.replace(/-$/,"")},s=function(t){return"-Infinity"===t?"en":t},h=i.compose(s,f),m=u(n.cookie("lang"),h),d=o.chain([m,navigator.language].concat(g.call(null!=(p=navigator.languages)?p:[]),[navigator.userLanguage],[navigator.browserLanguage],["en-GB"])).compact().map(function(t){return l(t)}).unique().value(),e.exports={preferred:d,matches:c,normalizeLocale:l,is:function(t){return c(d[0],t)},mostPreferred:function(t,e){return o.chain(t).map(function(t){return o.find(e,i(c,t))}).compact().first().value()}}},{}],75:[function(t,e,r){var n,o,i;i=t(91),o=t(76),n=t("underscore"),e.exports=function(t,e,r){var s,a;return null==r&&(r={}),s=n.extend({count:String(e)},r),null!=(a=i(["counts",t,String(e)],s))?a:o(["counts",t,"else"],s)}},{}],76:[function(t,e,r){var n,o;o=t(91),n=t(57),e.exports=function(t,e){var r;return r=o(t,e),n("string"==typeof r,"babble: key "+t+" not found"),r}},{}],77:[function(t,e,r){var n,o,i,s;i=t(205),n=t("underscore"),o=t(57),s="Error",e.exports=function(t,e){var r,n,a,u;for(r=i([t,s].join("::")),n=0,a=e.length;a>n;n++)u=e[n],o(u!==s,u+" is the reserved base name!"),o(!(u in r),"You can't use "+u+" as the name of a custom error"),r[u]=i([t,u].join("::"),{},r);return r}},{}],78:[function(t,e,r){var n;n=t(79),e.exports=new(function(){function t(){}return t.prototype.markdownAsHtml=function(t,e){return null==e&&(e={}),null==t&&(t=""),""===t?t:n.description.format(t,e).output},t.prototype.bytes=function(t){var e,r,n,o,i,s,a;if(null==t)return"Unknown Size";for(a=["B","KB","MB","GB"],e=t,n=r=0,o=a.length;o>r;n=++r){if(s=a[n],1024>e||n===a.length-1)return i=Math.round(100*e)/100,i+" "+s;e/=1024}return"unknown"},t}())},{}],79:[function(t,e,r){var n,o,i,s,a,u,c,l;n=t(22),o=t(126),i=t(5),s=t(26),u=t("trello-markdown"),c=t(99),l=t("underscore"),a=t("emoji-map"),e.exports=window.TFM=new(function(){function t(){var t;t={lookupEmoji:this.lookupEmoji,lookupCardInfo:this.lookupCardInfo,lookupMember:this.lookupMember},t.shouldOpenLinkInNewTab=c.isExternalURL,this.description=new u(t),this.comments=new u(l.extend({restrict:{block:["blockquote","code","fencedCode","hr","list","newline","paragraph"],inline:["atMention","autolink","cardReference","break","code","em","email","emailLink","emoji","link","strong","strikethrough","url"]}},t)),this.checkItems=new u(l.extend({inlineOnly:!0,restrict:{inline:["atMention","autolink","cardReference","code","em","email","emailLink","emoji","link","strong","strikethrough","url"]}},t))}return t.prototype.lookupEmoji=function(t,e){var r,n,o;return t=t.toLowerCase(),null!=(r=null!=(n=e.textData)&&null!=(o=n.emoji)?o[t]:void 0)?r:a[t]},t.prototype.lookupMember=function(t,e){var r;return r=s.findOne("Member",function(e){return e.hasAtMe("@"+t)}),null!=r?[r.get("fullName"),n.isMe(r)]:[null,!1]},t.prototype.lookupCardInfo=function(t,e){var r,n,o,a,u;return t=parseInt(t,10),a=null!=e&&null!=(u=e.board)?u.id:void 0,null==a&&null!=(o=i.getCurrentBoard())&&(a=o.id),r=s.findOne("Card",function(e){return e.get("idBoard")===a&&e.get("idShort")===t}),null!=r?{title:r.get("name"),url:i.getCardUrl(r)}:(n="Card "+t,{title:n,url:i.getCardUrlWithoutModels(a,t,n)})},t}())},{}],80:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v;a=0,s=function(t){return m(f(v(t)))},f=function(t){return n(o(h(t),8*t.length))},m=function(t){var e,r,n,o,i;try{}catch(t){e=t,a=0}for(r=a?"0123456789ABCDEF":"0123456789abcdef",o="",i=void 0,n=0;n<t.length;)i=t.charCodeAt(n),o+=r.charAt(i>>>4&15)+r.charAt(15&i),n++;return o},v=function(t){var e,r,n,o;for(r="",e=-1,n=void 0,o=void 0;++e<t.length;)n=t.charCodeAt(e),o=e+1<t.length?t.charCodeAt(e+1):0,n>=55296&&56319>=n&&o>=56320&&57343>=o&&(n=65536+((1023&n)<<10)+(1023&o),e++),127>=n?r+=String.fromCharCode(n):2047>=n?r+=String.fromCharCode(192|n>>>6&31,128|63&n):65535>=n?r+=String.fromCharCode(224|n>>>12&15,128|n>>>6&63,128|63&n):2097151>=n&&(r+=String.fromCharCode(240|n>>>18&7,128|n>>>12&63,128|n>>>6&63,128|63&n));return r},h=function(t){var e,r;for(r=Array(t.length>>2),e=0;e<r.length;)r[e]=0,e++;for(e=0;e<8*t.length;)r[e>>5]|=(255&t.charCodeAt(e/8))<<e%32,e+=8;return r},n=function(t){var e,r;for(r="",e=0;e<32*t.length;)r+=String.fromCharCode(t[e>>5]>>>e%32&255),e+=8;return r},o=function(t,e){var r,n,o,i,s,a,u,h,m;for(t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e,r=1732584193,n=-271733879,o=-1732584194,i=271733878,s=0;s<t.length;)a=r,u=n,h=o,m=i,r=c(r,n,o,i,t[s+0],7,-680876936),i=c(i,r,n,o,t[s+1],12,-389564586),o=c(o,i,r,n,t[s+2],17,606105819),n=c(n,o,i,r,t[s+3],22,-1044525330),r=c(r,n,o,i,t[s+4],7,-176418897),i=c(i,r,n,o,t[s+5],12,1200080426),o=c(o,i,r,n,t[s+6],17,-1473231341),n=c(n,o,i,r,t[s+7],22,-45705983),r=c(r,n,o,i,t[s+8],7,1770035416),i=c(i,r,n,o,t[s+9],12,-1958414417),o=c(o,i,r,n,t[s+10],17,-42063),n=c(n,o,i,r,t[s+11],22,-1990404162),r=c(r,n,o,i,t[s+12],7,1804603682),i=c(i,r,n,o,t[s+13],12,-40341101),o=c(o,i,r,n,t[s+14],17,-1502002290),n=c(n,o,i,r,t[s+15],22,1236535329),r=l(r,n,o,i,t[s+1],5,-165796510),i=l(i,r,n,o,t[s+6],9,-1069501632),o=l(o,i,r,n,t[s+11],14,643717713),n=l(n,o,i,r,t[s+0],20,-373897302),r=l(r,n,o,i,t[s+5],5,-701558691),i=l(i,r,n,o,t[s+10],9,38016083),o=l(o,i,r,n,t[s+15],14,-660478335),n=l(n,o,i,r,t[s+4],20,-405537848),r=l(r,n,o,i,t[s+9],5,568446438),i=l(i,r,n,o,t[s+14],9,-1019803690),o=l(o,i,r,n,t[s+3],14,-187363961),n=l(n,o,i,r,t[s+8],20,1163531501),r=l(r,n,o,i,t[s+13],5,-1444681467),i=l(i,r,n,o,t[s+2],9,-51403784),o=l(o,i,r,n,t[s+7],14,1735328473),n=l(n,o,i,r,t[s+12],20,-1926607734),r=d(r,n,o,i,t[s+5],4,-378558),i=d(i,r,n,o,t[s+8],11,-2022574463),o=d(o,i,r,n,t[s+11],16,1839030562),n=d(n,o,i,r,t[s+14],23,-35309556),r=d(r,n,o,i,t[s+1],4,-1530992060),i=d(i,r,n,o,t[s+4],11,1272893353),o=d(o,i,r,n,t[s+7],16,-155497632),n=d(n,o,i,r,t[s+10],23,-1094730640),r=d(r,n,o,i,t[s+13],4,681279174),i=d(i,r,n,o,t[s+0],11,-358537222),o=d(o,i,r,n,t[s+3],16,-722521979),n=d(n,o,i,r,t[s+6],23,76029189),r=d(r,n,o,i,t[s+9],4,-640364487),i=d(i,r,n,o,t[s+12],11,-421815835),o=d(o,i,r,n,t[s+15],16,530742520),n=d(n,o,i,r,t[s+2],23,-995338651),r=p(r,n,o,i,t[s+0],6,-198630844),i=p(i,r,n,o,t[s+7],10,1126891415),o=p(o,i,r,n,t[s+14],15,-1416354905),n=p(n,o,i,r,t[s+5],21,-57434055),r=p(r,n,o,i,t[s+12],6,1700485571),i=p(i,r,n,o,t[s+3],10,-1894986606),o=p(o,i,r,n,t[s+10],15,-1051523),n=p(n,o,i,r,t[s+1],21,-2054922799),r=p(r,n,o,i,t[s+8],6,1873313359),i=p(i,r,n,o,t[s+15],10,-30611744),o=p(o,i,r,n,t[s+6],15,-1560198380),n=p(n,o,i,r,t[s+13],21,1309151649),r=p(r,n,o,i,t[s+4],6,-145523070),i=p(i,r,n,o,t[s+11],10,-1120210379),o=p(o,i,r,n,t[s+2],15,718787259),n=p(n,o,i,r,t[s+9],21,-343485551),r=g(r,a),n=g(n,u),o=g(o,h),i=g(i,m),s+=16;return Array(r,n,o,i)},u=function(t,e,r,n,o,s){return g(i(g(g(e,t),g(n,s)),o),r)},c=function(t,e,r,n,o,i,s){return u(e&r|~e&n,t,e,o,i,s)},l=function(t,e,r,n,o,i,s){return u(e&n|r&~n,t,e,o,i,s)},d=function(t,e,r,n,o,i,s){return u(e^r^n,t,e,o,i,s)},p=function(t,e,r,n,o,i,s){return u(r^(e|~n),t,e,o,i,s)},g=function(t,e){var r,n;return r=(65535&t)+(65535&e),n=(t>>16)+(e>>16)+(r>>16),n<<16|65535&r},i=function(t,e){return t<<e|t>>>32-e},e.exports=s},{}],81:[function(t,e,r){var n=[].slice;e.exports=function(){var t,e,r,o,i,s,a,u,c;for(a=2<=arguments.length?n.call(arguments,0,e=arguments.length-1):(e=0,[]),t=arguments[e++],r=0,i=a.length;i>r;r++){s=a[r],u=s.prototype;for(o in u)c=u[o],t.prototype[o]=c}return t}},{}],82:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h;n=t("jquery"),o=t(193),s=t(88),a=t("underscore"),c=0,d=window.sessionStorage,p=null!=(l=null!=d?d.status:void 0)?l:"active",u=null,h=null,"undefined"!=typeof document.hidden?(u="hidden",h="visibilitychange"):"undefined"!=typeof document.mozHidden?(u="mozHidden",h="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(u="msHidden",h="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(u="webkitHidden",h="webkitvisibilitychange"),e.exports=i={init:function(){setInterval(i.check,1e4),n(window).focus(function(){return i.addActivity()}),n(document).bind("keydown mousedown",function(){i.addActivity()}),i.getHidden=null!=u?function(){return document[u]}:function(){return!1},null!=h&&n(document).bind(h,function(t){return function(){return i.trigger("visibilitychange")}}(this))},addActivity:function(){var t;t=(new Date).getTime(),c=t,s.set("lastActivity",c),i.setStatus("active")},check:function(){var t;t=(new Date).getTime()-Math.max(c,s.enabled()?parseInt(s.get("lastActivity")):0),t>3e5&&i.setStatus("idle")},setStatus:function(t){t!==p&&(p=t,d&&(d.status=p),i.trigger("setStatus",p))},getStatus:function(){return p}},a.extend(i,o.Events)},{}],83:[function(t,e,r){var n,o,i;n=t("hearsay"),i=t("xtend"),o=t(197),e.exports=i(n.mixin,{componentWillUnmount:function(){return this.unsubscribe()},syncState:function(t){return this.subscribe(t,o(this,"setState"))}})},{}],84:[function(t,e,r){var n,o;n=t("react"),o=t("xtend"),e.exports=function(t,e){return null==e&&(e={}),function(r){return n.createElement(t,o(e,r))}}},{}],85:[function(t,e,r){var n,o;o=t("underscore"),e.exports=n=function(){function t(){}return t.prototype.setTimeout=function(t,e){var r;return null==this._scheduled_timeouts&&(this._scheduled_timeouts=[]),this._scheduled_timeouts.push(r=setTimeout(t,e)),r},t.prototype.setInterval=function(t,e){var r;return null==this._scheduled_intervals&&(this._scheduled_intervals=[]),this._scheduled_intervals.push(r=setInterval(t,e)),r},t.prototype.requestAnimationFrame=function(t){var e;return null==this._scheduled_frameRequests&&(this._scheduled_frameRequests=[]),this._scheduled_frameRequests.push(e=requestAnimationFrame(t)),e},t.prototype.cancelScheduled=function(){var t,e,r,n,o,i,s,a,u,c,l,d,p;if(null!=this._scheduled_intervals)for(u=this._scheduled_intervals,e=0,i=u.length;i>e;e++)r=u[e],clearInterval(r);if(null!=this._scheduled_timeouts)for(c=this._scheduled_timeouts,n=0,s=c.length;s>n;n++)p=c[n],clearTimeout(p);if(null!=this._scheduled_frameRequests)for(d=null!=(l=this._scheduled_frameRequests)?l:[],o=0,a=d.length;a>o;o++)t=d[o],cancelAnimationFrame(t)},t.prototype.defer=function(t){return this.setTimeout(t,1)},t.prototype.debounce=function(t,e){return null==e&&(e=1),this.dynamicDebounce(t,function(){return e})},t.prototype.dynamicDebounce=function(t,e){var r,n;return r=this.setTimeout.bind(this),n=null,function(){var o,i;o=arguments,i=function(e){return function(){n=null,t.apply(e,o)}}(this),clearTimeout(n),n=r(i,e.apply(this,o))}},t.prototype.throttle=function(t,e,r){var n,i,s,a,u,c,l,d,p,h,m;return null==r&&(r={}),i=n=d=h=null,a=null!=(c=r.leading)?c:!0,m=null!=(l=r.trailing)?l:!0,p=this.setTimeout.bind(this),u=null,s=function(){return u=a?o.now():0,h=null,d=t.apply(i,n),i=n=null},function(){var r,c;return r=o.now(),null!=u||a||(u=r),c=e-(r-u),i=this,n=arguments,0>=c?(clearTimeout(h),h=null,u=r,d=t.apply(i,n),i=n=null):!h&&m&&(h=p(s,c)),d}},t}()},{}],86:[function(t,e,r){e.exports=t(87)(window.sessionStorage)},{}],87:[function(t,e,r){e.exports=function(t){return{enabled:function(){return null!=t},set:function(e,r){try{return null!=t?t[e]=JSON.stringify(r):void 0}catch(t){}},get:function(e){var r,n;if(n=null!=t?t[e]:void 0,!n)return null;try{return JSON.parse(n)}catch(t){return r=t,null}},unset:function(e){return null!=(null!=t?t[e]:void 0)&&null!=t?delete t[e]:void 0}}}},{}],88:[function(t,e,r){e.exports=t(87)(window.localStorage)},{}],89:[function(t,e,r){var n,o;n=t(88),o=t(31),e.exports=new(function(){function t(){}return t.prototype.delta=n.get("serverTimeDelta"),t.prototype.updateServerTime=function(t){return this.delta=new Date(t)-new Date,n.set("serverTimeDelta",this.delta),o("time","delta",this.delta)},t.prototype.serverToClient=function(t){return new Date(new Date(t)-this.delta)},t}())},{}],90:[function(t,e,r){var n,o,i,s,a,u,c,l,d;n=t("jquery"),u=t("underscore"),o=t(193),c=t(109),l=t(398).getTypes,d=t(103),i=t(73),s=t(14),a=function(){function t(){this.value="",n(document).keydown(function(t){return function(e){var r,o,a;if(r=i.getKey(e),t.value&&(e.ctrlKey||e.metaKey)){if(n(e.target).is("#clipboard"))return void(r===s.C&&t.clearCut());if(!n(e.target).is("input:visible,textarea:visible")&&!(("function"==typeof window.getSelection&&null!=(o=window.getSelection())?o.toString():0)||(null!=(a=document.selection)?a.createRange().text:0)))return u.defer(function(){var e;return e=n("#clipboard-container"),e.empty().show(),n('<div id="clipboard" contenteditable="true"></div>').text(t.value).appendTo(e).focus().select(),d(document.getElementById("clipboard"))})}}}(this)),n(document).keyup(function(t){return function(e){var r;return t.isClipboard(e.target)&&(r=n("#clipboard").text(),""===r&&t.setCut(t.value)),t.checkForPastedImage()}}(this)),n(document).on("paste",function(t){return function(e){return u.isEmpty(l(e))||t.cancelPasteImage(),setTimeout(t.clearCut.bind(t),1)}}(this))}return t.prototype.set=function(t){this.value=t},t.prototype.setCut=function(t){try{localStorage.cut=t}catch(t){}},t.prototype.getCut=function(){try{return localStorage.cut}catch(t){}return null},t.prototype.clearCut=function(){try{delete localStorage.cut}catch(t){}},t.prototype.isCut=function(t){return t===this.getCut()},t.prototype.isClipboard=function(t){return"clipboard"===t.id},t.prototype.clear=function(){return n("#clipboard-container").empty().hide()},t.prototype.checkForPastedImage=function(){return clearTimeout(this.pasteImageTimeout),this.pasteImageTimeout=setTimeout(function(t){return function(){var e,r;e=n("#clipboard-container").find("img"),t.clear(),e.length>0&&(r=e.attr("src"),/^data:/.test(r)&&t.trigger("pasteImage",c(r)))}}(this),1)},t.prototype.cancelPasteImage=function(){return clearTimeout(this.pasteImageTimeout),this.clear()},t}(),u.extend(a.prototype,o.Events),e.exports=new a},{}],91:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m;u=t(25).locales,i=t(58),c=t(209),s=t(197),o=t(57),n=t("underscore"),d=n.clone(t("locale").strings),l=n.pick(t("locale"),"axis","exports","labels","templates","billing");for(a in l)p=l[a],o(!(a in d)),d[a]=p;m=i.makeVisitor(s.id,function(t,e){return o(e.hasOwnProperty(t),"'"+t+"' not found in "+JSON.stringify(e)),p=e[t],o("string"==typeof p,"I don't know how to convert values into strings. Please use a localized conversion function and pass me the string result."),n.escape(p)}),h=s(i.visit,d),e.exports=function(t,e){var r;return null==e&&(e={}),null!=(r=h(t,m,e))?r.join(""):void 0}},{}],92:[function(t,e,r){var n,o,i;n=t(22),o=t("underscore"),i=t("moment"),e.exports=function(){var t,e,r,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C;if(n.isLoggedIn()){for(c=n.me(),k=function(t){var e,r,n,o,i;if(r=t+"",e=r.match(/\(([^\)]+)\)$/)||r.match(/([A-Z]+|UTC[+-]\d{4}) [\d]{4}$/))for(e=e[1],/\s/.test(e)&&(e=e.replace(/(\S)\S*/g,function(t,e){return e})),n=null!=(i=e.toUpperCase().match(/[A-Z]/g))?i:[],e=n.join("");e.length<2;)e+="?";else o=t.getTimezoneOffset(),e="UTC"+(0>o?"+":"-")+("00"+Math.floor(Math.abs(o)/60)).substr(-2)+":"+("00"+Math.abs(o)%60).substr(-2);return e},g=v=r=null,e=new Date,g=e.getTimezoneOffset(),w=k(e),h=6e4,s=a=0;12>=a;s=++a)if(e=i(e).add(30,"days").toDate(),e.getTimezoneOffset()!==g){r=e;break}if(null!=r){for(v=r.getTimezoneOffset(),d=(new Date).getTime(),l=r.getTime(),t=0;l>d+h/2&&30>t;)if(t++,p=Math.floor((d+l)/2),f=new Date(p).getTimezoneOffset(),f===g)d=p;else{if(f!==v)break;l=p}_=k(r),r=new Date(h*Math.floor(l/h)).toISOString()}m={},b={offsetCurrent:g,timezoneCurrent:w,offsetNext:v,timezoneNext:_,dateNext:r};for(u in b)C=b[u],null!=C&&(m[u]=C);return y=c.getPref("timezoneInfo"),o.isEqual(m,y)?void 0:c.run("timezoneInfo",m)}}},{}],93:[function(t,e,r){var n=[].slice;e.exports=function(){var t,e,r,o,i,s,a,u,c,l,d,p;if(t=2<=arguments.length?n.call(arguments,0,r=arguments.length-1):(r=0,[]),l=arguments[r++],e=t[0],d=2<=t.length?n.call(t,1):[],null==e)return 0;if(d.length>0)for(o=i=0,a=e.length;a>i;o=++i)for(p=e[o],s=0,u=d.length;u>s;s++)if(c=d[s],c.length<=o||!l(p,c[o]))return o;return e.length}},{}],94:[function(t,e,r){var n;n=t("hearsay"),e.exports=function(t){return new n.ContinuousSignal(function(e){var r,n;return e(t.get()),r=null,n=t.subscribe(function(t){return cancelAnimationFrame(r),r=requestAnimationFrame(function(){return e(t)})}),function(){return n(),cancelAnimationFrame(r)}})}},{}],95:[function(t,e,r){var n,o;n=t("underscore"),o=t(100),e.exports=function(t,e,r){var i;return null==r&&(r=function(t,e,r){return r}),(i=function(t,s){var a;return(a=e(t,s))?r(t,s,a):n.isArray(t)?t.map(i):o(t)?n.mapObject(t,i):t})(t)}},{}],96:[function(t,e,r){var n;e.exports=function(){try{return new window.CustomEvent("testEvent"),window.CustomEvent}catch(t){return n=function(t,e){var r;return null==e&&(e={bubbles:!1,cancelable:!1,detail:void 0}),r=document.createEvent("CustomEvent"),r.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),r},n.prototype=window.Event.prototype,n}}()},{}],97:[function(t,e,r){var n;n=t(96),e.exports=function(t,e,r){var o,i,s,a,u,c;for(o=new n(e,{bubbles:!1,cancelable:!1,detail:null!=(a=r.detail)?a:void 0}),u=!1,o.stopPropagation=function(){return u=!0,n.prototype.stopPropagation.apply(this,arguments)},i=0,s=t.length;s>i;i++)c=t[i],u||c.dispatchEvent(o)}},{}],98:[function(t,e,r){var n;n=t(96),e.exports=function(t,e,r){var o,i,s,a;return null==r&&(r={}),o=new n(e,{bubbles:null!=(i=r.bubbles)?i:!0,cancelable:null!=(s=r.cancelable)?s:!1,detail:null!=(a=r.detail)?a:void 0}),t.dispatchEvent(o)}},{}],99:[function(t,e,r){var n,o,i,s,a,u,c=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1},l={}.hasOwnProperty;n=t("jquery"),o=t(14),s=t("underscore"),a=t(31),u=t(216),e.exports=i={spacing:16384,checkId:function(t){return"ObjectID"===(null!=t?t.constructor.name:void 0)||24===(null!=t?t.length:void 0)&&/^[a-f0-9]*$/.test(t)},capitalize:function(t){return s.isString(t)&&!s.isEmpty(t)?t[0].toUpperCase()+t.substr(1):t},pluralize:function(t){return t+"s"},imageFileExtensions:["png","gif","jpg","jpeg","bmp","ico"],extensionIsImage:function(t){var e,r;return e=null!=(r=i.fileExt(t))?r.toLowerCase():void 0,c.call(i.imageFileExtensions,e)>=0},fileExt:function(t){var e,r,n;return null!=(e=null!=(r=/\.([a-z0-9]+)$/i.exec(t))&&null!=(n=r[1])?n.toLowerCase():void 0)?e:null},traverse:function(t,e){var r,n,o;if(s.isEmpty(e)||!t)return t;if(s.isArray(e)){for(r=0,o=e.length;o>r&&(n=e[r],t=t[n],t);r++);return t}return t[e]},escapeForRegex:function(t){return null!=t?t.replace(/[-[\]{}()*+?.,\\\/^$|#\s]/g,"\\$&"):void 0},makeSlug:function(t,e){var r;return null==e&&(e="-"),t&&(r=i.removeAccents(t.toLowerCase()).replace(/[^a-z0-9]+/gi,e).replace(RegExp("^"+e+"|"+e+"$","g"),""),r.length>128&&(r=r.substr(0,128))),r||e},removeAccents:function(t){return t.replace(/[àáâãäåāăą]/g,"a").replace(/æ/g,"ae").replace(/[çćĉċč]/g,"c").replace(/[ďđ]/g,"d").replace(/[èéêëēĕėęě]/g,"e").replace(/[ĝğġģ]/g,"g").replace(/[ĥħ]/g,"h").replace(/[ìíîïĩīĭįı]/g,"i").replace(/[ñńņňŉŋ]/g,"n").replace(/[òóôõöōŏő]/g,"o").replace(/œ/g,"oe").replace(/[śŝşš]/g,"s").replace(/ß/g,"ss").replace(/[ùúûüũūŭůűų]/g,"u").replace(/[ýÿ]/g,"y")},isShortId:function(t){return/^[0-9]{1,8}$/.test(t)},isShortLink:function(t){return s.isString(t)&&/^[a-zA-Z0-9]{8}$/.test(t)},getMs:function(t){var e,r,n,o,i,s,a,u;return e=t.days,r=t.hours,n=t.minutes,s=t.seconds,i=t.ms,u=t.years,o=t.months,a=t.weeks,null==e&&(e=0),null==r&&(r=0),null==n&&(n=0),null==s&&(s=0),null==i&&(i=0),u&&(e+=365*u),o&&(e+=30*o),a&&(e+=7*a),r+=24*e,n+=60*r,s+=60*n,i+=1e3*s},getSeconds:function(t){return this.getMs(t)/1e3},dateAfter:function(t){var e,r;return e=null!=(r=null!=t?t.date:void 0)?r:new Date,new Date(e.getTime()+this.getMs(t))},dateBefore:function(t){var e,r;return e=null!=(r=null!=t?t.date:void 0)?r:new Date,new Date(e.getTime()-this.getMs(t))},compareMemberType:function(t,e,r,n){var o,i,s,a,u;switch(null==n&&(n={}),u=n.mode,null==u&&(u="standard"),u){case"members":i=[["normal","admin"]];break;case"commentDelete":i=[["normal","org"],["admin"]];break;default:i=[["org"],["normal"],["admin"]]}return o=function(e){var r,n,o,s,a;for(a=t.getMemberType(e),o=n=0,s=i.length;s>n;o=++n)if(r=i[o],c.call(r,a)>=0)return o;return-1},s=o(e),a=o(r),s>a?1:a>s?-1:0},idToDate:function(t){return new Date(1e3*parseInt(null!=t?t.substr(0,8):void 0,16))},tryToExcludeEXIFRotated:function(t){var e,r,n;return e=function(t,e){return e>t},r=s.reduce(t,function(t,r){var n,o,i;return o=r.scaled,i=r.width,n=r.height,o?e(i,n)?t+1:t-1:t},0),n=r>0,s.filter(t,function(t){var r,o;return o=t.width,r=t.height,e(o,r)===n})},preferScaledPreviews:function(t){var e;return e=this.tryToExcludeEXIFRotated(s.filter(t,function(t){return t.scaled})),s.isEmpty(e)?t:e},smallestPreviewBiggerThan:function(t,e,r){var n,o,i,a;for(null==t&&(t=[]),null==e&&(e=0),null==r&&(r=0),a=[this.preferScaledPreviews(t),t],o=0,i=a.length;i>o;o++)t=a[o],s.isEmpty(n)&&(n=s.filter(t,function(t){return t.width>=e&&t.height>=r}));return this.smallestPreview(n)},previewBetween:function(t,e,r,n,o){var i;return null==t&&(t=[]),i=s.filter(this.preferScaledPreviews(t),function(t){var i,s;return e<=(i=t.width)&&n>=i&&r<=(s=t.height)&&o>=s}),this.biggestPreview(i)},biggestPreview:function(t){return 0===t.length?null:s.max(this.preferScaledPreviews(t),function(t){return Math.min(t.width,t.height)})},smallestPreview:function(t){return 0===t.length?null:s.min(this.preferScaledPreviews(t),function(t){return Math.max(t.width,t.height)})},rotateArr:function(t,e){return s.flatten([t.slice(-e),t.slice(0,-e)],!0)},isNonPushstateAndroid:function(t){return/android(\s)*[3-4]\.[0-1][^0-9]/i.test(t)},stopPropagation:function(t){return null!=t?t.stopPropagation():void 0},preventDefault:function(t){return null!=t?t.preventDefault():void 0},stop:function(t){return i.stopPropagation(t),i.preventDefault(t)},checkEmail:function(t,e){return null==e&&(e=""),RegExp('^[^"@\\s\\[\\]\\(\\),:;<>\\\\]+@[-a-z0-9\\.'+e+"]+\\.[a-z"+e+"]+$","i").test(t)},removeDomainFromEmailAddress:function(t,e){return null==e&&(e=""),t.replace(RegExp("@[-a-z0-9\\."+e+"]+\\.[a-z"+e+"]+$"),"")},validName:function(t){return t.length>=1},spaces:function(t){for(this.longStr||(this.longStr=" ");this.longStr.length<t;)this.longStr=this.longStr+this.longStr;return this.longStr.substr(0,t)},_pad:function(t,e,r,n){var o,i;return null==r&&(r=" "),t=t.toString(),t.length>e?t.substr(0,e):(o=e-t.length,i=" "===r?this.spaces(o):this.times(r,o),n?i+t:t+i)},rpad:function(t,e,r){return this._pad(t,e,r,!1)},lpad:function(t,e,r){return this._pad(t,e,r,!0)},times:function(t,e){var r;return s.map(function(){r=[];for(var t=0;e>=0?e>t:t>e;e>=0?t++:t--)r.push(t);return r}.apply(this),function(){return t}).join("")},truncate:function(t,e){var r;return!(null!=t?t.length:void 0)||t.length<e?t:(r=t.substr(0,t.lastIndexOf(" ",e)),r?r:t.substr(0,e))},scrollToTop:function(){return n(window).scrollTop(0)},getProtocol:function(t){var e,r;return t&&null!=(e=null!=(r=/^([a-z]+):/i.exec(t))?r[1]:void 0)?e:""},makeHttp:function(t){return t?(t=t.replace(/^[a-z]*:\/*/i,""),"http://"+t):""},sanitizeWebAddress:function(t){var e;return"http"!==(e=i.getProtocol(t))&&"https"!==e?i.makeHttp(t):t},isInPosition:function(t,e,r){var n;return null==(null!=r?r.id:void 0)?!1:(n=e[t],(null!=n?n.id:void 0)===r.id);
},calcPos:function(t,e,r,n,o){var s,a,u,c,l,d,p,h,m;return a=65536,l=e.select(function(t){return(!(null!=r&&r.id===t.id)||o)&&(!n||n(t))}),i.isInPosition(t,l,r)?null!=(m=r.pos)?m:r.get("pos"):(s=Math.min(Math.max(t,0),l.length),c=l[s-1],u=l[s],d=(null!=r?r.get("pos"):void 0)||-1,h=null!=c?c.get("pos"):-1,p=null!=u?u.get("pos"):-1,-1===p?r&&d>h?d:h+a:r&&d>h&&p>d?d:h>=0?(p+h)/2:p/2)},pushSupport:function(){return!(!window.history||!window.history.pushState||i.isNonPushstateAndroid())},randomWait:function(t,e){return Math.floor(t+Math.random()*e)},toTitleCase:function(t){return t.replace(/\w\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})},calcBoardLayout:function(){return n(window).trigger("resize")},navMenuList:function(t,e,r){var n,i,a,u,c,l,d,p;return a=t.find(e),p=t.find(e+".selected:first")[0],d=s.indexOf(a,p),i=a[0],u=a[a.length-1],l=0>d-1?u:a[d-1],c=d+1>a.length?i:a[d+1],r===o.ArrowDown&&(n=c),r===o.ArrowUp&&(n=l),this.selectMenuItem(t,e,n)},selectMenuItem:function(t,e,r){return t.find(e).removeClass("selected"),n(r).addClass("selected")},insertSelection:function(t,e,r,o){var s,a;return t=i.getElem(t),s=n(t),a=s.val(),r||o?(""===a.substring(o)?s.val(""+(a.substring(0,r)+e)):s.val(""+(a.substring(0,r)+e+a.substring(o))),this.setCaretPosition(t,r+(""+e).length)):(s.val(""+(a+e)),this.setCaretPosition(t,(""+(a+e)).length)),s.focus(),s.trigger("mutated")},_nextWhitespace:function(t,e){var r,n;return r=t.indexOf("\n",e),-1===r&&(r=1/0),n=t.indexOf(" ",e),-1===n&&(n=1/0),Math.min(r,n,t.length)},getWordFromIndex:function(t,e){var r,n,o,i;return o=Math.max(t.lastIndexOf("\n",e-1),t.lastIndexOf(" ",e-1)),o+=1,r=this._nextWhitespace(t,e),n=r-o,i=t.slice(o,r),{start:o,end:r,length:n,str:i}},getWordFromCaret:function(t){var e,r;return t=i.getElem(t),r=n(t).val(),e=this.getCaretPosition(t),this.getWordFromIndex(r,e)},getLineFromIndex:function(t,e){var r,n,o,i;return o=t.lastIndexOf("\n",e-1),o+=1,r=this._nextWhitespace(t,e),n=r-o,i=t.slice(o,r),{start:o,end:r,length:n,str:i}},getLineFromCaret:function(t){var e,r;return t=i.getElem(t),r=n(t).val(),e=this.getCaretPosition(t),this.getLineFromIndex(r,e)},getCaretPosition:function(t){var e,r,n;return t=i.getElem(t),t.selectionStart?e=t.selectionStart:c.call(document,"selection")>=0&&(t.focus(),r=document.selection.createRange(),n=document.selection.createRange().text.length,r.moveStart("character",-t.value.length),e=r.text.length-n),e},setCaretPosition:function(t,e){var r;return t=i.getElem(t),t.setSelectionRange?(t.focus(),t.setSelectionRange(e,e)):t.createTextRange?(r=t.createTextRange(),r.collapse(!0),r.moveEnd("character",e),r.moveStart("character",e),r.select()):void 0},setCaretAtEnd:function(t){var e;return t?(e=n(t).val().length,this.setCaretPosition(t,e)):void 0},getLastWord:function(t){var e;return e=n(t).val().split(" "),s.last(e)},removeWordAtIndex:function(t,e){var r,n,o;return o=i.getWordFromIndex(t,e),r=t.slice(0,o.start),n=t.slice(o.end),r+n},stripExtraSpaces:function(t){return null!=t?t.replace(/\s+/g," ").trim():void 0},getMemNameArray:function(t,e){var r,n,o,i;return s.isString(e)&&(e=t.get("Member",e)),null==e?[]:r=((null!=(n=e.get("username"))?n.toLowerCase():void 0)+" "+(null!=(o=e.get("fullName"))?o.toLowerCase():void 0)+" "+(null!=(i=e.get("initials"))?i.toLowerCase():void 0)).split(" ")},filterMembers:function(t,e,r){var n,o,a,u,c,l;for(l=RegExp("^"+i.escapeForRegex(e),"i"),o=[],n=0,a=r.length;a>n;n++)u=r[n],c=i.getMemNameArray(t,u),s.find(c,function(t){return l.test(t)})&&o.push(u);return o},getQueryParameter:function(t,e){var r,n,o,i;return null==e&&(e=""),n=RegExp("[?&]"+t+"=([^?&]*)"),r=null!=(o=n.exec(location.search))?o:n.exec(location.hash),i=null!=r?r[1]:void 0,null!=i?decodeURIComponent(i.replace(/\+/g," ")):e},validFileSize:function(t,e){return null==e&&(e=10485760),(null!=t?t.size:void 0)<e},uploadFile:function(t,e,r){var o,i;return i=s.uniqueId("iframe"),o=n("<iframe>").attr("name",i).css("display","none").appendTo("body").load(function(t){var e,n;s.defer(function(){return o.remove()});try{n=o.contents().text()}catch(t){return e=t,r("File too large")}return/File too large/i.test(n)?r(n):r()}),e.closest("form").attr("target",i).find("input[name=token]").val(t).end().submit(),s.defer(function(){return e.val("")})},hasValidInviteTokenFor:function(t){var e,r;return r=this.inviteTokenFor(t.id),null==r?!1:(e=t.modelCache.get("Member",r.split("-")[0]),null==e?!1:"virtual"===t.getMemberType(e)?!0:t.isMember(e)&&"ghost"===t.get("memberType"))},inviteTokenFor:function(t){return n.cookie("invite-token-"+t)},invitationTokens:function(){var t,e,r,o;for(e=/invite-token-[-a-f0-9]*/g,o=[];null!=(t=null!=(r=e.exec(document.cookie))?r[0]:void 0);)o.push(n.cookie(t));return o},getElem:function(t){return t instanceof n?t[0]:t},getElemTransformMatrix:function(t){var e;return e=t.css("-webkit-transform")||t.css("-moz-transform")||t.css("-ms-transform")||t.css("-o-transform")||t.css("transform"),"none"!==e?e:null},getMatrixDegrees:function(t){var e,r,n,o,i;return i=t.split("(")[1].split(")")[0].split(","),e=i[0],r=i[1],n=i[2],o=i[3],Math.round(Math.atan2(r,e)*(180/Math.PI))},getMatrixScale:function(t){var e,r,n,o,i;return i=t.split("(")[1].split(")")[0].split(","),e=i[0],r=i[1],n=i[2],o=i[3],Math.sqrt(e*e+r*r)},getDegrees:function(t,e){return Math.round(Math.atan2(t,e)*(180/Math.PI))},calcDistanceFromCenter:function(t,e,r){var n;return n=Math.pow(e-(t.offset().left+t.width()/2),2)+Math.pow(r-(t.offset().top+t.height()/2),2),Math.floor(Math.sqrt(n))},_runShredders:function(){var t,e,r,n,o,s;for(s=i._shredders,o=new Date,i._shredders=[],t=0,r=0,n=s.length;n>r;r++)e=s[r],o>e.time?(e.fn(),t++):i._shredders.push(e);return a("shred","Shred "+t+" objects, "+i._shredders.length+" left"),i._shredTimeout=null,i._startShredTimer()},_startShredTimer:function(){return!i._shredTimeout&&i._shredders.length>0?null!=i._shredTimeout?i._shredTimeout:i._shredTimeout=setTimeout(i._runShredders,i.getMs({seconds:3})):void 0},shred:function(t){return null==i._shredders&&(i._shredders=[]),i._shredders.push({time:i.dateAfter({seconds:20}),fn:function(e){return function(){var e,r;r=[];for(e in t)l.call(t,e)&&r.push(delete t[e]);return r}}(this)}),i._startShredTimer()},newestId:function(t){return t.length>0?s.reduce(t,function(t,e){return e.id>t.id?e:t}):null},extendEvents:function(t){return function(){return s.defaults(t,s.result(this.constructor.__super__,"events"))}},relativeUrl:function(t){return t.replace(RegExp("^"+siteDomain),"")},isTextElement:function(t){var e,r;if(t instanceof HTMLTextAreaElement)return!0;if(!(t instanceof HTMLInputElement))return!1;if("text"===(e=t.type)||"email"===e||"password"===e||"search"===e)return!0;if("submit"===(r=t.type)||"reset"===r||"button"===r||"checkbox"===r)return!1;try{return t.selectionStart,!0}catch(t){return!1}},withoutAlteringSelection:function(t){var e,r,o,s,a,u,c;r=document.activeElement,e=n(r),a=e.is(":focus"),null!=r&&i.isTextElement(r)?(r.selectionStart?(u=r.selectionStart,s=r.selectionEnd,o=r.selectionDirection):c=this.getCaretPosition(r),t(),u?r.setSelectionRange(u,s,o):c&&this.setCaretPosition(r,c),a&&e.focus()):t()},extendParentClassName:function(t){return function(){return s.result(this.constructor.__super__,"className")+(" "+t)}},waitForImageLoad:function(t,e,r){var n;return n=new Image,n.onload=function(){return e(n)},n.onerror=function(){return"function"==typeof r?r(n):void 0},n.src=t},bugzscout:function(t,e){var r,o,i,s,a,u;return u=t.project,r=t.area,o=t.description,i=t.extra,a=t.me,s=t.forceNew,null==s&&(s=0),n.ajax({url:"//trello.fogbugz.com/ScoutSubmit.asp",type:"POST",data:{ScoutUserName:"Bugzscout",ScoutProject:u,ScoutArea:r,Description:o,Extra:i,Email:'"'+a.fullName+'" <'+a.email+">",ForceNewBug:s,FriendlyResponse:0},success:function(){return"function"==typeof e?e():void 0},error:function(t,r){return"function"==typeof e?e(r):void 0}})},sortMembers:function(t,e){var r;return r=function(t){return t===e||t.id===e.get("id")},t.sort(function(t,e){var n,o;return n=r(t),o=r(e),n&&!o?-1:!n&&o?1:t.fullName<e.fullName?-1:t.fullName>e.fullName?1:0}),t},firstLessThan:function(t,e){var r,n,o,i,a;for(o=0,i=e.length;i>o;o++){if(n=e[o],!s.isArray(n))return s.isFunction(n)?n.call(this,t):n;if(r=n[0],a=n[1],r>=t)return s.isFunction(a)?a.call(this,t):a}},hoursLeft:function(t){return(new Date(t)-new Date)/i.getMs({hours:1})},escapedReturnUrl:function(){return encodeURIComponent(location.href.replace(/^https?:\/\/[^\/]+/,""))},isExternalURL:function(t){return u(t).host!==document.location.host},reverse:function(t){return t.slice(0).reverse()},buildFuzzyMatcher:function(t){var e;return e=s.map(t.split(/\s+/),function(t){return RegExp(""+i.escapeForRegex(t),"i")}),function(t){return s.every(e,function(e){return e.test(t)})}},getPadding:function(t){var e;return e=n(t).css(["padding-left","padding-top","padding-bottom","padding-right"]),{left:parseInt(e["padding-left"],10),top:parseInt(e["padding-top"],10),bottom:parseInt(e["padding-bottom"],10),right:parseInt(e["padding-right"],10)}},frameInCoordinateSpace:function(t,e){var r,n;return n=i.getPadding(e),r={top:t.offsetTop-(e.offsetTop+n.top),left:t.offsetLeft-(e.offsetLeft+n.left)},r.bottom=r.top+t.clientHeight,r.right=r.left+t.clientWidth,r},getBounds:function(t){var e,r;return e=n(t),r={left:e.scrollLeft(),top:e.scrollTop(),width:e.innerWidth(),height:e.innerHeight()},r.bottom=r.top+r.height,r.right=r.left+r.width,r},scrollElementIntoView:function(t,e,r){var o,s,a,u,c,l,d,p,h,m,f,g;p=null!=r?r:{},c=p.horizontal,g=p.vertical,s=p.animated,l=i.getBounds(t),d=i.getPadding(t),a=i.frameInCoordinateSpace(e,t),u={top:a.top-d.top,bottom:a.bottom+d.bottom,left:a.left-d.left,right:a.right+d.right},f=s?(o=n(t),function(t,e){var r;return r={},r[t]=e,o.animate(r,{duration:150,queue:!1})}):function(e,r){return t[e]=r},g&&(m=function(t){return f("scrollTop",t+d.top)},u.bottom>l.bottom?m(u.bottom-l.height):u.top<l.top&&m(u.top)),c&&(h=function(t){return f("scrollLeft",t+d.left)},u.right>l.right?h(u.right-l.width):u.left<l.left&&h(u.left))}}},{}],100:[function(t,e,r){e.exports=function(t){var e;return null==t?!1:"object"!=typeof t?!1:null===(e=Object.getPrototypeOf(t))||e===Object.prototype}},{}],101:[function(t,e,r){var n,o,i,s;o=t("underscore"),s=t(100),n=t("react"),e.exports=function(t,e){return!(i(t,this.props)&&i(e,this.state))},i=function(t,e){var r,a,u,c,l,d;if(s(t)&&s(e)){if(o.keys(t).length!==o.keys(e).length)return!1;for(c in t)if(d=t[c],!i(t[c],e[c]))return!1}else if(n.isValidElement(t)&&n.isValidElement(e)){if(!i([t.props,t.state],[e.props,e.state]))return!1}else if(o.isArray(t)&&o.isArray(e)){if(t.length!==e.length)return!1;for(r=u=0,l=t.length;l>u;r=++u)if(a=t[r],!i(t[r],e[r]))return!1}else{if(o.isFunction(t)&&o.isFunction(e))return!0;if(t!==e)return!1}return!0}},{}],102:[function(t,e,r){var n,o=[].slice;n=t("bluebird"),e.exports=function(){var t,e,r;return r=arguments[0],e=arguments[1],t=3<=arguments.length?o.call(arguments,2):[],n.fromNode(function(n){return r[e].apply(r,o.call(t).concat([n]))})}},{}],103:[function(t,e,r){e.exports=function(t){var e,r;document.body.createTextRange?(e=document.body.createTextRange(),e.moveToElementText(t),e.select()):(r=window.getSelection(),e=document.createRange(),e.selectNodeContents(t),r.removeAllRanges(),r.addRange(e))}},{}],104:[function(t,e,r){e.exports=function(t){return t.ctrlKey||t.metaKey||t.shiftKey||null!=t.button&&0!==t.button?!1:!0}},{}],105:[function(t,e,r){var n,o,i;i=t(18),o=-i,n=100-i,e.exports=function(t){return o>t?o:t>n?n:t}},{}],106:[function(t,e,r){var n,o=[].slice;n=t("underscore"),e.exports=function(t,e){var r,i,s,a,u,c;for(c=[],a=e.blockLex(t,{}),i=0,s=a.length;s>i;i++)r=a[i],null!=r.children&&(c=o.call(c).concat(o.call(e.inlineLex(r.children.text))));return u=n.chain(c).filter(function(t){return"link"===t.type}).map(function(r){var n,o;return t=null!=(n=r.children)?n.text:void 0,null!=t?{url:r.url,text:e.textInline(null!=(o=r.children)?o.text:void 0)}:{url:r.url}}).value()}},{}],107:[function(t,e,r){e.exports=function(t,e,r){return null==r&&(r="…"),t.length>e?t.substr(0,e-r.length+1).replace(/\s+\S*$/,"")+r:t}},{}],108:[function(t,e,r){e.exports=function(t){return/\bhttps?:\/\//.test(t)}},{}],109:[function(t,e,r){e.exports=function(t){var e,r,n,o,i,s,a,u,c,l,d;if(d=t.split(","),a=d[0],n=d[1],l=/data:([^;]+)(?:;charset=([^;]*))?(;base64)?/.exec(a),null!=l){if(e=l[0],c=l[1],s=l[2],u=l[3],!u)throw Error("Unable to handle non-base64 URIs");if(null!=s)throw Error("Unable to handle encodings");return o=atob(n),r=function(){var t,e,r;for(r=[],t=0,e=o.length;e>t;t++)i=o[t],r.push(i.charCodeAt(0));return r}(),new Blob([new Uint8Array(r)],{type:c})}throw Error("Invalid data URI")}},{}],110:[function(t,e,r){e.exports=function(t){return 0===t.indexOf(window.attachmentsDomain)}},{}],111:[function(t,e,r){var n;n=t(216),e.exports=function(t){return n(t).host===location.host}},{}],112:[function(t,e,r){e.exports=function(t){return/^https?:\/\/\S+$/.test(t)}},{}],113:[function(t,e,r){var n,o=[].slice,i={}.hasOwnProperty;n=t("underscore"),e.exports=function(){var t,e,r,s,a;return r=arguments[0],e=2<=arguments.length?o.call(arguments,1):[],t={},n.flatten(e).forEach(function(e){return t[r(e)]=e}),function(){var e;e=[];for(s in t)i.call(t,s)&&(a=t[s],e.push(a));return e}()}},{}],114:[function(t,e,r){var n,o;o=t("underscore"),n={},n.Server=function(){function t(t){var e,r;return t?(e=t.split("."),void(e.length>0?this.parts=function(){var t,n,o;for(o=[],t=0,n=e.length;n>t;t++)r=e[t],o.push(parseInt(r,10)||0);return o}():this.parts=[0])):null}return t.prototype.toString=function(){return this.parts.join(".")},t.prototype.toJSON=function(){return this.toString()},t.prototype.lessThan=function(t){var e;return e=this.compareTo(t),e&&0>e},t.prototype.greaterThan=function(t){var e;return e=this.compareTo(t),e&&e>0},t.prototype.equalTo=function(t){var e;return e=this.compareTo(t),e&&0===e},t.prototype.compareTo=function(t){var e,r,i,s,a,u,c;if(o.isString(t))t=new n.Server(t);else if(!(t instanceof n.Server))return null;for(r=Math.max(this.parts.length,t.parts.length),u=o.zip(this.parts,t.parts),e=0,i=u.length;i>e;e++){if(c=u[e],s=c[0],a=c[1],null==s&&(s=0),null==a&&(a=0),s>a)return r;if(a>s)return-r;r--}return 0},t.compareStringVersions=function(t,e){return new n.Server(t).compareTo(e)},t.prototype.supports=function(t){var e,r;return r=t.minServerVersion,e=t.maxServerVersion,(!r||this.greaterThan(r))&&(!e||this.lessThan(e))},t}(),n.Client=function(){function t(t){var e,r;e=t.split("-"),this.head=e[0],r=e[1],this.version=parseInt(r,10),this.patch=0}return t.prototype.toString=function(){return this.head+"-"+this.fullVersion()},t.prototype.toJSON=function(){return this.toString()},t.prototype.fullVersion=function(){return o.compact([this.version,this.patch]).join(".")||0},t}(),e.exports=n},{}],115:[function(t,e,r){var n,o,i,s,a,u,c,l;n=t("jquery"),c={width:0},s={width:750},i={width:900},o={width:1280},u={height:0},a={height:900},l={height:1200},e.exports={calc:function(){var t,e;return this.ranCalc=!0,e=n(window).width(),t=n(window).height(),this.fTallHeight=this.fMediumHeight=this.fSmallHeight=!1,t>l.height?this.fTallHeight=!0:t>a.height?this.fMediumHeight=!0:this.fShortHeight=!0,this.fExtraLarge=this.fLarge=this.fMedium=this.fSmall=!1,e>o.width?this.fExtraLarge=!0:e>i.width?this.fLarge=!0:e>s.width?this.fMedium=!0:this.fSmall=!0,n(this).triggerHandler("windowClassChange")},ensureRun:function(){return this.ranCalc?void 0:this.calc()}}},{}],116:[function(t,e,r){var n,o,i,s,a,u=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty,l=[].slice;o=t(22),i=t(61),s=t(161),a=t("underscore"),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}var r;return u(e,t),e.prototype.typeName="Action",e.prototype.urlRoot="/1/actions",r=64,e.getListForModel=function(){var t,e,r,n,o;if(e=arguments[0],t=2<=arguments.length?l.call(arguments,1):[],2===t.length)o=t[0],r=t[1];else{if(1!==t.length)return;n=t[0],o=n.typeName,r=n.id}return o=o.toLowerCase(),e.all("Action").filter(function(t){return t.includesModel(o,r)})},e.prototype.getModel=function(){return this.collection.options.model},e.prototype.triggerCacheEvents=function(t,e){var r,n,o,i;for(i=this.idModels(),r=0,o=i.length;o>r;r++)n=i[r],t.trigger(e+":"+this.typeName+":"+n)},e.prototype.isCommentLike=function(){var t;return"commentCard"===(t=this.get("type"))||"copyCommentCard"===t},e.prototype.isAddAttachment=function(){return"addAttachmentToCard"===this.get("type")},e.prototype.isMember=function(t){return this.get("idMemberCreator")===t.id},e.prototype.getDate=function(){return i.parse(this.get("date"))},e.prototype.getBoard=function(){var t,e;return this.modelCache.get("Board",null!=(t=this.get("data"))&&null!=(e=t.board)?e.id:void 0)},e.prototype.getCard=function(){var t,e;return this.modelCache.get("Card",null!=(t=this.get("data"))&&null!=(e=t.card)?e.id:void 0)},e.prototype.editable=function(){var t,e;return t=this.get("idMemberCreator"),"commentCard"===(e=this.get("type"))&&o.isMe(t)},e.prototype.deletable=function(){var t,e,r,n;return e=this.get("idMemberCreator"),"commentCard"===(r=this.get("type"))&&("observer"!==(null!=(n=this.getBoard())?n.getExplicitMemberType(o.me()):void 0)&&o.isMe(e)||null!=(t=this.getBoard())&&t.compareMemberType(o.me(),this.modelCache.get("Member",e),{mode:"commentDelete"})>0&&!(!t.isPremOrgAdmin(o.me())&&t.isPremOrgAdmin(e)))},e.prototype.isPlaceholder=function(){return null==this.get("date")},e.prototype.includesModel=function(t,e){var r,n;return t=t.toLowerCase(),"member"===t&&this.get("idMemberCreator")===e?!0:(r=this.get("data"),"convertToCardFromCheckItem"===this.get("type")&&r.cardSource.id===e?!0:(null!=(n=r[t])?n.id:void 0)===e)},e.prototype.idModels=function(){var t,e,r,n;return e=function(){var t,e,o;e=null!=(t=this.get("data"))?t:{},o=[];for(r in e)n=e[r],null!=(null!=n?n.id:void 0)&&o.push(n.id);return o}.call(this),t=this.get("idMemberCreator"),null!=t&&e.push(t),e},e.prototype.takingTooLong=function(){return this.isTakingTooLong=!0,this.trigger("takingTooLong")},e}(s)},{}],117:[function(t,e,r){var n;n=t(130),e.exports=new n([],{requiresLogin:!1,dataUrl:"/announcements/all"})},{}],118:[function(t,e,r){var n,o,i,s,a,u=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;n=t("jquery"),s=t(88),a=t(161),i=t(74),e.exports=o=function(t){function e(t){e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.typeName="Announcement",e.prototype._key=function(){return"announcement-"+this.id+"-read"},e.prototype.isUnread=function(){return!s.get(this._key())},e.prototype.markRead=function(){return n.post("/announcements/dismiss",{id:this.id}),s.set(this._key(),!0),this.trigger("change:unread")},e.prototype.getLocale=function(){return i.normalizeLocale(this.get("locale")||"en")},e.prototype.matchesLocale=function(t){return i.matches(t,this.getLocale())},e}(a)},{}],119:[function(t,e,r){var n,o,i,s,a;n=t("jquery"),i=t(130),s=t(99),a=t("underscore"),e.exports=o=new i([],{requiresLogin:!0,dataUrl:"/announcements"})},{}],120:[function(t,e,r){var n,o,i,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty,c=[].slice;o=t(161),i=t(99),s=t(216),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.typeName="Attachment",e.prototype.urlRoot=function(){return this.getCard().url()+"/attachments"},e.prototype.getCard=function(){return this.collection.sourceModel},e.prototype.editable=function(){return this.getCard().editable()},e.prototype.smallestPreviewBiggerThan=function(t,e){return i.smallestPreviewBiggerThan(this.get("previews"),t,e)},e.prototype.previewBetween=function(t,e,r,n){return i.previewBetween.apply(i,[this.get("previews")].concat(c.call(arguments)))},e.prototype.biggestPreview=function(){return i.biggestPreview(this.get("previews"))},e.prototype.smallestPreview=function(){return i.smallestPreview(this.get("previews"))},e.prototype.getType=function(){var t;return null!=(t=i.fileExt(this.get("name")))?t:this.get("mimeType")},e.prototype.getServiceKey=function(){var t,e,r;return this.get("isUpload")?"trello":(t=s(this.get("url")).host,r={"docs.google.com":"gdrive","drive.google.com":"gdrive","www.dropbox.com":"dropbox","onedrive.live.com":"onedrive","app.box.com":"box"},null!=(e=r[t])?e:"other")},e}(o)},{}],121:[function(t,e,r){var n,o,i=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;o=t(161),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.typeName="CustomBoardBackground",e}(o)},{}],122:[function(t,e,r){var n,o,i=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;o=t(162),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.typeName="BoardInvitation",e}(o)},{}],123:[function(t,e,r){var n,o,i=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;o=t(161),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.typeName="BoardPlugin",e}(o)},{}],124:[function(t,e,r){var n,o,i=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;o=t(161),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.typeName="BoardStar",e.prototype.getBoard=function(){return this.modelCache.get("Board",this.get("idBoard"))},e}(o)},{}],125:[function(t,r,n){var o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,B,M,T,O=function(t,e){function r(){this.constructor=t}for(var n in e)L.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},L={}.hasOwnProperty,P=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1},A=[].slice;o=t(178),i=t(22),s=t(11),u=void 0,e(function(){return u=t(133)}),c=t(135),l=t(220),d=t(222),p=t(223),h=void 0,e(function(){return h=t(139)}),m=t(5),f=t("hearsay"),g=t(23),v=t(163),y=t(144),b=t(225),w=void 0,e(function(){return w=t(145)}),_=void 0,e(function(){return _=t(147)}),k=t(158),C=t(159),x=t(151),j=t("bluebird"),S=t(99),T=t("xtend"),B=t("underscore"),M=t(81),r.exports=a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return O(e,t),M(k,e),e.prototype.typeName="Board",e.prototype.urlRoot="/1/boards",e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.destruct([this.boardPluginList=new c([],{board:this}).syncCache(this.modelCache,["idBoard"],function(t){return function(e){return e.get("idBoard")===t.id}}(this)),this.listList=new w(null,{board:this}).owner(this).syncCache(this.modelCache,["idBoard","closed"],function(t){return function(e){return e.get("idBoard")===t.id&&!e.get("closed")}}(this)),this.invitationList=new u([],{modelCache:this.modelCache,board:this}),this.checklistList=new h([],{modelCache:this.modelCache,board:this}),this.labelList=(new y).syncCache(this.modelCache,["idBoard"],function(t){return function(e){return e.get("idBoard")===t.id}}(this)),this.memberList=(new _).syncModel(this,"memberships",{fxGetIds:function(t){return B.pluck(t,"idMember")}}),this.adminList=(new _).syncModel(this,"memberships",{fxGetIds:function(t){return function(e){var r;return r=B.filter(e,function(e){var r,n;return r=t.modelCache.get("Member",e.idMember),"admin"===e.memberType||null!=r&&(null!=(n=t.getOrganization())?n.isPremOrgAdmin(r):void 0)}),B.pluck(r,"idMember")}}(this)}),this.pluginDataList=new x([],{scopeModel:this}).syncCache(this.modelCache,[],function(t){return function(e){return e.get("idModel")===t.id&&"board"===e.get("scope")}}(this)),this.filter=new p(this,{modelCache:this.modelCache}),this.composer=new d(null,{board:this,modelCache:this.modelCache}),this.listComposer=new b(this,{modelCache:this.modelCache}),this.viewState=new l(null,{modelCache:this.modelCache,board:this})]),this.listenForPermChange(),this.cacheShortLink()},e.prototype.cacheShortLink=function(){return this.waitForAttrs(this,["id","shortLink"],function(t){var e,r;return e=t.id,r=t.shortLink,g.setBoardId(r,e)})},e.prototype.close=function(){this.update({closed:!0})},e.prototype.reopen=function(){this.update({closed:!1})},e.prototype.markAsViewed=function(){return i.isLoggedIn()?(this.set("dateLastView",(new Date).toISOString()),o({url:this.urlRoot+"/"+this.id+"/markAsViewed",type:"post",background:!0})):void 0},e.prototype.subscribe=function(t){t!==this.get("subscribed")&&this.update({subscribed:t})},e.prototype.isStarred=function(){return null!=i.me().boardStarList.getBoardStar(this.id)},e.prototype.hasUnseenActivity=function(){var t,e;return e=this.get("dateLastView"),t=this.get("dateLastActivity"),null!=e&&null!=t&&t>e},e.prototype.getAvailableRoles=function(){return this.hasObservers()?["admin","normal","observer"]:["admin","normal"]},e.prototype.hasObservers=function(){var t;return null!=(t=this.getOrganization())?t.isFeatureEnabled("observers"):void 0},e.prototype.getPermLevel=function(){return this.getPref("permissionLevel")},e.prototype._normalizePref=function(t){return"none"===t?"disabled":t},e.prototype.getCommentPerm=function(){return this._normalizePref(this.get("prefs").comments)},e.prototype.getInvitePerm=function(){return this._normalizePref(this.get("prefs").invitations)},e.prototype.toJSON=function(t){var r,n;return null==t&&(t={}),r=e.__super__.toJSON.apply(this,arguments),t.org&&(n=this.getOrganization(),null!=n&&(r.hasOrg=!0,r.org=n.toJSON({url:!0}))),t.url&&null==r.url&&(r.url=m.getBoardUrl(this)),t.shortUrl&&null==r.shortUrl&&(r.shortUrl=m.getBoardShortUrl(this)),r},e.prototype.calcPos=function(t,e){return S.calcPos(t,this.listList,e,function(t){return!t.get("closed")})},e.prototype.getCard=function(t){return S.isShortId(t)?this.modelCache.findOne("Card","idShort",Number(t)):this.modelCache.get("Card",t)},e.prototype.getList=function(t){return this.listList.get(t)},e.prototype.getUrl=function(){return m.getBoardUrl(this)},e.prototype.getChecklist=function(t){return this.modelCache.get("Checklist",t)},e.prototype.getBoardInvitation=function(t){return this.invitationList.get(t)},e.prototype.getCheckItem=function(t){var e,r,n,o,i,s;for(i=this.checklistList.models,n=0,o=i.length;o>n;n++)if(r=i[n],e=null!=r&&null!=(s=r.checkItemList)?s.get(t):void 0)return e},e.prototype.editable=function(){var t;return t=i.me(),t&&this.editableByMember(t)},e.prototype.editableByMember=function(t){return this.isMember(t)},e.prototype.isMember=function(t){var e;return"virtual"===(e=this.getMemberType(t))||"normal"===e||"admin"===e},e.prototype.getMembershipCount=function(){var t,e,r,n;return null!=(t=null!=(e=null!=(r=this.get("membershipCounts"))?r.active:void 0)?e:null!=(n=this.get("memberships"))?n.length:void 0)?t:1},e.prototype.getStarCount=function(t){var e,r;return null!=(e=null!=(r=this.get("starCounts"))?r[t]:void 0)?e:0},e.prototype.getIdTags=function(){var t;return null!=(t=this.get("idTags"))?t:[]},e.prototype.owned=function(){var t;return t=i.me(),t&&this.ownedByMember(t)},e.prototype.ownedByMember=function(t){return"admin"===this.getMemberType(t)},e.prototype.allowsSelfJoin=function(){var t;return null!=(t=this.getPref("selfJoin"))?t:!1},e.prototype.canJoin=function(){var t,e,r;return r=this.getOrganization(),null==r?!1:(e=i.me(),this.isMember(e)||this.isObserver(e)?!1:(t=r.isMember(e),this.isPremOrgAdmin(e)||this.allowsSelfJoin()&&t))},e.prototype.canInviteMembers=function(){var t,e,r;return null!=this.getOrganization()||this.getPref("canInvite")?("admins"===(null!=(t=this.get("prefs"))?t.invitations:void 0)?r="admin":"members"===(null!=(e=this.get("prefs"))?e.invitations:void 0)&&(r="normal"),"admin"===this.getMemberType(i.me())||r===this.getMemberType(i.me())):!1},e.prototype.compareMemberType=function(t,e,r){return S.compareMemberType(this,t,e,r)},e.prototype.isMemberPublic=function(t){return"public"===this.getMemberType(t)},e.prototype.isMemberOrg=function(t){return"org"===this.getMemberType(t)},e.prototype.isMemberObserver=function(t){return"observer"===this.getMemberType(t)},e.prototype.memberMatchesSetting=function(t,e){switch(this.getPref(e)){case"public":return i.isLoggedIn();case"org":return this.isMember(t)||this.isMemberOrg(t)||this.isMemberObserver(t);case"observers":return this.isMember(t)||this.isMemberObserver(t);case"members":return this.isMember(t);case"admins":return this.ownedByMember(t);default:return!1}},e.prototype.isPowerUpEnabled=function(t){var e;return e=this.get("powerUps"),null!=e&&P.call(e,t)>=0},e.prototype.isPluginEnabled=function(t){return this.boardPluginList.any(function(e){return e.get("idPlugin")===t})},e.prototype.enablePlugin=function(t){return this.boardPluginList.create({idPlugin:t})},e.prototype.disablePlugin=function(t){var e;return e=this.boardPluginList.find(function(e){return e.get("idPlugin")===t}),e.destroy()},e.prototype.canVote=function(t){return this.memberMatchesSetting(t,"voting")},e.prototype.canComment=function(t){return this.memberMatchesSetting(t,"comments")},e.prototype.canInvite=function(t){return this.memberMatchesSetting(t,"invitations")},e.prototype.prefNames=["permissionLevel","voting","comments","invitations","selfJoin","background","cardAging","calendarFeedEnabled"],e.prototype.myPrefNames=["showSidebar","showSidebarMembers","showSidebarBoardActions","showSidebarActivity","emailKey","idEmailList","emailPosition","calendarKey","fullEmail"],e.prototype.isPublic=function(){return"public"===this.getPref("permissionLevel")},e.prototype.isPrivate=function(){return"private"===this.getPref("permissionLevel")},e.prototype.getIdBoardMems=function(){return B.map(this.memberList.models,function(t){return function(t){return t.id}}(this))},e.prototype.getOrganization=function(){return this.modelCache.get("Organization",this.get("idOrganization"))},e.prototype.snoopOrganization=function(){return this.snoop("idOrganization").map(function(t){return function(){return t.getOrganization()}}(this))},e.prototype.orgMembersAvailable=function(){var t;return t=this.getOrganization(),B.chain(t.memberList.filter(function(e){return function(e){return!t.isDeactivated(e)}}(this))).difference(this.memberList.models).value()},e.prototype.joinBoard=function(t){var e,r,n,o;return r=i.me(),e=this.isPremOrgAdmin(r),n=e?"admin":"normal",r.set("idBoards",r.get("idBoards").concat(this.id)),e&&r.set("idPremOrgsAdmin",(null!=(o=r.get("idPremOrgsAdmin"))?o:[]).concat(this.id)),this.addMember(r,n,t)},e.prototype.addMember=function(){var t,e,r,n,o;return r=arguments[0],t=3<=arguments.length?A.call(arguments,1,e=arguments.length-1):(e=1,[]),o=arguments[e++],n=t[0],null==n&&(n="normal"),this.memberList.add(r),this.api({type:"put",method:"members/"+r.id,data:{type:n}},o),this.set("memberships",this.get("memberships").concat({idMember:r.id,memberType:"normal"}))},e.prototype.removeMember=function(t){return this.memberList.remove(t),this.set("memberships",B.reject(this.get("memberships"),function(e){return e.idMember===t.id}))},e.prototype.getObserverList=function(){var t,e,r,n,o;for(n=this.memberList.models,o=[],t=0,e=n.length;e>t;t++)r=n[t],
this.isObserver(r)&&o.push(r);return o},e.prototype.filterLabels=function(t){var e,r;return r=RegExp("^"+S.escapeForRegex(t)),e=[],B.chain(this.getLabels()).filter(function(e){var r,n;return(null!=(r=e.get("name"))?r.toLowerCase().indexOf(t):void 0)>-1||0===(null!=(n=e.get("color"))?n.toLowerCase().indexOf(t):void 0)||e.get("color")===v.colors[parseInt(t)-1]}).value()},e.prototype.labelForColor=function(t){return B.chain(this.getLabels()).filter(function(e){return e.get("color")===t}).first().value()},e.prototype.labelsForColors=function(){return B.chain(this.getLabels()).groupBy(function(t){return t.get("color")}).value()},e.prototype.createLabel=function(t,e){var r;r=B.find(this.getLabels(),function(r){return r.get("name")===t&&r.get("color")===e}),r||this.labelList.create({name:t,color:null!=e?e:"",uses:1},{url:"/1/board/"+this.id+"/labels/"})},e.prototype.labelColors=function(){return v.colors},e.prototype.getLabels=function(){return this.labelList.models.sort(v.compare)},e.prototype.openLists=function(){return this.listList.filter(function(t){return!t.get("closed")})},e.prototype._generateKey=function(t){return this.api({type:"post",method:t+"Key/generate"})},e.prototype.generateEmailKey=function(){return this._generateKey("email")},e.prototype.generateCalendarKey=function(){return this._generateKey("calendar")},e.prototype.openCards=function(){var t;return B.flatten(function(){var e,r,n,o;for(n=this.openLists(),o=[],e=0,r=n.length;r>e;e++)t=n[e],o.push(t.cardList.openCards());return o}.call(this))},e.prototype.listenForPermChange=function(){var t,e,r;if(i.isLoggedIn())return r=this.getViewPermState(i.me()),e=this.owned(),t=this.debounce(function(t){return function(){var n,o;o=t.getViewPermState(i.me()),o!==r&&(r=o,t.trigger("permChange",o)),n=t.owned(),n!==e&&(e=n,t.trigger("ownedChange",n))}}(this)),this.listenTo(i.me().boardList,"add remove reset",t),this.listenTo(i.me().organizationList,"add remove reset",t),this.listenTo(this.memberList,"add remove reset",t),this.listenTo(this,"change:memberships change:prefs.permissionLevel",t)},e.prototype.getViewPermState=function(t){var e,r;return this.isObserver(t)?"observer":"normal"===(e=this.getMemberType(t))||"admin"===e?"member":S.hasValidInviteTokenFor(this)?"inviteToken":(null!=(r=this.getOrganization())?r.isMember(t):void 0)&&"org"===this.getPref("permissionLevel")?"org":"public"===this.getPref("permissionLevel")?"public":"none"},e.prototype.getClientBackgroundColor=function(t){var e,r;return null!=(e=null!=(r=s[t])?r.color:void 0)?e:s.blue.color},e.prototype.dataForLabel=function(t){return t.toJSON()},e.prototype.isViewableBy=function(t){return"none"!==this.getViewPermState(t)},e.prototype.toggleTag=function(t){return this.toggle("idTags",t,P.call(this.getIdTags(),t)<0)},e.prototype.setPluginData=function(t,e,r){return this.pluginDataList.upsert(t,e,r)},e.prototype.getPluginData=function(t){var e;return T(null!=(e=this.getOrganization())?e.getPluginData(t):void 0,this.pluginDataList.dataForPlugin(t))},e.prototype.snoopPluginData=function(t){var e,r;return r=this.snoopOrganization().map(function(e){return null!=e?e.snoopPluginData(t):f.const(null)}).latest(),e=this.pluginDataList.snoopDataForPlugin(t),f.combine(r,e).map(function(t){return T.apply(null,t)})},e.prototype.clearPluginData=function(t){var e,r,n;return e=this.pluginDataList.for(t,"private"),null!=e&&e.destroy(),r=null!=(n=this.getOrganization())?n.pluginDataList.for(t,"private"):void 0,null!=r?r.destroy():void 0},e.prototype.pluginsEnabled=function(){var t;return null!=(t=this.getOrganization())?t.isFeatureEnabled("plugins"):void 0},e.prototype.snoopPluginsEnabled=function(){return this.snoopOrganization().map(function(t){return function(t){return null!=t?t.snoopIsFeatureEnabled("plugins"):f.const(!1)}}(this)).latest().distinct()},e.prototype.idPluginsEnabled=function(){return this.pluginsEnabled()?this.boardPluginList.pluck("idPlugin"):[]},e.prototype.snoopIdPluginsEnabled=function(){return f.combine(this.snoopPluginsEnabled(),this.boardPluginList.snoop()).map(function(t){var e,r;return r=t[0],e=t[1],r?e.pluck("idPlugin"):[]})},e}(C)},{}],126:[function(t,r,n){var o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,B,M,T,O=function(t,e){function r(){this.constructor=t}for(var n in e)L.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},L={}.hasOwnProperty,P=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1},A=[].slice;o=t("jquery"),i=t(116),s=void 0,e(function(){return s=t(129)}),a=t(178),u=t(131),c=t(22),d=void 0,e(function(){return d=t(139)}),p=t(5),h=t(61),m=t(23),f=t(144),g=t(157),v=t(164),y=void 0,e(function(){return y=t(147)}),b=t(226),w=t(185),_=t("bluebird"),k=t(153),C=t(161),x=t(99),j=t("underscore"),S=t(81),B=t("moment"),M=t(102),T=t("xtend"),r.exports=S(g,l=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}var r;return O(e,t),r=1e4,e.prototype.typeName="Card",e.prototype.urlRoot="/1/cards",e.prototype.initialize=function(){return this.destruct([this.memberList=(new y).syncModel(this,"idMembers"),this.labelList=(new f).syncModel(this,"idLabels").syncCache(this.modelCache,[],function(t){return function(e){var r,n;return r=e.id,P.call(null!=(n=t.get("idLabels"))?n:[],r)>=0}}(this)),this.memberVotedList=(new y).syncModel(this,"idMembersVoted"),this.checklistList=(new d).syncCache(this.modelCache,["idCard"],function(t){return function(e){return e.get("idCard")===t.id}}(this)),this.attachmentList=(new u).syncSubModels(this,"attachments"),this.actionList=(new s).syncCache(this.modelCache,[],function(t){return function(e){var r,n,o,i;return r="commentCard"===(o=e.get("type"))||"copyCommentCard"===o,n=(null!=(i=e.get("data").board)?i.id:void 0)===t.get("idBoard"),e.includesModel(t.typeName,t.id)&&(r||n)}}(this)),this.stickerList=new k(this.get("stickers"),{card:this,modelCache:this.modelCache}).syncSubModels(this,"stickers"),this.memberEditingList=new y]),this.listenTo(this,"change:id",function(t){return function(){return t.actionList.sync()}}(this)),this._initSubEventsOn("badges"),this.cacheShortLink(),this.cacheBoardId()},e.prototype.cacheShortLink=function(){return this.waitForAttrs(this,["id","shortLink"],function(t){var e,r;return e=t.id,r=t.shortLink,m.setCardId(r,e)})},e.prototype.cacheBoardId=function(){return this.waitForAttrs(this,["id","idBoard"],function(t){var e,r;return e=t.id,r=t.idBoard,m.setBoardIdForCard(e,r)})},e.prototype.updateEditing=function(t){return null==this._editingTimeout&&(this._editingTimeout={}),this.memberEditingList.add(t),null!=this._editingTimeout[t.id]&&(clearTimeout(this._editingTimeout[t.id]),delete this._editingTimeout[t.id]),this._editingTimeout[t.id]=this.setTimeout(function(e){return function(){return e.memberEditingList.remove(t)}}(this),r)},e.prototype.sync=function(t,r,n){return"create"!==t||null!=this.get("idBoard")&&null!=this.get("idList")?e.__super__.sync.apply(this,arguments):(this.waitForAttrs(this,["idBoard","idList"],function(o){return function(i){return o.set(i),e.__super__.sync.call(o,t,r,n)}}(this)),this.waitForId(this.getBoard(),function(t){return function(e){return t.set("idBoard",e)}}(this)),this.waitForId(this.getList(),function(t){return function(e){return t.set("idList",e)}}(this)))},e.prototype.set=function(t,r){var n;return(null!=t?t.labels:void 0)&&(t.labels=function(){var e,r,o,i,s;for(o=t.labels,s=[],e=0,r=o.length;r>e;e++)n=o[e],s.push(null!=(i=n.color)?i:n);return s}()),(null!=t?t.badges:void 0)&&(t.badges=T(this.get("badges"),t.badges)),e.__super__.set.apply(this,arguments)},e.prototype.moveToList=function(t,e){var r;return r=this,new _(function(e){return function(r){return e.waitForId(t,r)}}(this)).then(function(n){return function(n){var o,i,s,a,u,c,l,d,p;if(u=t.calcPos(e,r),o=t.getBoard().composer,u===r.get("pos")&&r.get("idList")===n&&!r.get("closed"))return i=o.get("index"),void(i===e?o.set("index",i+1):i===e+1&&o.set("index",i-1));l=r.get("idList"),d=r.getIndexInList(),s={pos:u,idList:n,idBoard:t.getBoard().id,closed:!1};for(a in s)p=s[a],r.get(a)===p&&delete s[a];return r.update(s),(null!=o?o.get("vis"):void 0)?(i=c=o.get("index"),o.get("list").id===n&&o.get("index")>=e&&i++,o.get("list").id===l&&o.get("index")>d&&i--,o.set("index",i)):void 0}}(this)).return()},e.prototype.moveToNextList=function(){var t,e;e=this.getBoard().openLists(),t=j.indexOf(e,this.getList()),t<e.length-1&&this.moveToList(e[t+1],1e9)},e.prototype.moveToPrevList=function(){var t,e;e=this.getBoard().openLists(),t=j.indexOf(e,this.getList()),t>0&&this.moveToList(e[t-1],1e9)},e.prototype.toggleMember=function(){var t,e,r,n,o;return e=arguments[0],t=3<=arguments.length?A.call(arguments,1,n=arguments.length-1):(n=1,[]),o=arguments[n++],r=t[0],null==r&&(r=!this.hasMember(e)),r&&c.isMe(e)&&this.set("subscribed",!0),this.toggle("idMembers",e,r,o)},e.prototype.addMember=function(t,e){return this.toggleMember(t,!0,e)},e.prototype.removeMember=function(t,e){return this.toggleMember(t,!1,e)},e.prototype.hasMember=function(t){return this.memberList.get(t)},e.prototype.getIdCardMems=function(){return j.map(this.memberList.models,function(t){return function(t){return t.id}}(this))},e.prototype.getIdCommenters=function(){var t,e;return e=[],t=j.each(i.getListForModel(this.modelCache,this),function(t){return function(t){var r;return"commentCard"===t.get("type")?(r=t.get("idMemberCreator"),e.push(r)):void 0}}(this)),this.idCommenters=j.uniq(e),this.idCommenters},e.prototype.hasChecklist=function(t){return this.checklistList.get(t)},e.prototype.close=function(t){this.update({closed:!0},t)},e.prototype.reopen=function(){var t;t=this.getList(),null!=t&&this.update({closed:!1,pos:t.calcPos(t.cardList.length,this)})},e.prototype.getBoard=function(){var t,e;return null!=(t=this.modelCache.get("Board",this.get("idBoard")))?t:null!=(e=this.getList())?e.getBoard():void 0},e.prototype.getIndexInList=function(){var t;return t=this.getList(),null!=t?j.indexOf(t.cardList.models,this):-1},e.prototype.getList=function(){var t,e;return null!=(t=this.modelCache.get("List",this.get("idList")))?t:null!=(e=this.collection)?e.owner:void 0},e.prototype.getUrl=function(){return p.getCardUrl(this)},e.prototype.getFullUrl=function(){return""+siteDomain+this.getUrl()},e.prototype.getDueDate=function(){var t;return(null!=(t=this.get("badges"))?t.due:void 0)?new Date(this.get("badges").due):null},e.prototype.editable=function(){return this.getBoard().editable()},e.prototype.dateForNewComment=function(){var t,e;return 0===this.actionList.length?new Date:(e=this.actionList.sort().first(),t=B(e.getDate()).add(1,"seconds").toDate(),j.max([new Date,t]))},e.prototype.addComment=function(t){var e;e=this,""!==t&&this.waitForId(e,function(r){return function(n){var o,s,u;return s=e.getBoard(),o=new i({type:"commentCard",date:r.dateForNewComment(),data:{text:t,card:{id:e.id,name:e.get("name")},board:{id:s.id,name:s.get("name")},textData:{emoji:c.me().allCustomEmoji()}},idMemberCreator:c.myId(),display:{translationKey:"action_comment_on_card",entities:{card:{hideIfContext:!0,id:e.id,isContext:!1,shortLink:e.shortLink,text:t,type:"card"},comment:{text:t,type:"comment"},contextOn:{hideIfContext:!0,idContext:e.id,translationKey:"action_on",type:"translatable"},memberCreator:{id:c.myId(),isContext:!1,text:c.me().get("fullName"),type:"member",username:{text:c.me().get("fullName")}}}}},{modelCache:r.modelCache}),u=r.setTimeout(function(){return o.takingTooLong()},2e3),a({url:"/1/cards/"+e.id+"/actions/comments",type:"post",data:{text:t},dataType:"json",success:function(t){return clearTimeout(u),o.isTakingTooLong=!1,r.modelCache.enqueueDelta(o,t)}})}}(this))},e.prototype.changeDueDateMaintainTime=function(t){var e,r,n;return r=null!=(n=new Date(this.get("due")))?n:(new Date).setHours(12,0,0,0),e=h.getDateWithSpecificTime(r,t),this.update({due:e})},e.prototype.vote=function(t){return this.getBoard().canVote(c.me())?this.waitForLock("vote",function(e){return function(r){var n,o;return t===e.voted()?r():(n=null!=(o=j.clone(e.get("badges")))?o:{},t?(n.votes++,n.viewingMemberVoted=!0):(n.votes--,n.viewingMemberVoted=!1),e.set("badges",n),void e.toggle("idMembersVoted",c.myId(),t,{collectionName:"membersVoted"},r))}}(this)):void 0},e.prototype.voted=function(){var t,e;return null!=(t=null!=(e=this.get("badges"))?e.viewingMemberVoted:void 0)?t:!1},e.prototype.hasStickers=function(){return this.stickerList.length>0},e.prototype.hasCover=function(){return null!=this.attachmentList.get(this.get("idAttachmentCover"))},e.prototype.getAllAgingClasses=function(){return"aging-level-0 aging-level-1 aging-level-2 aging-level-3 aging-pirate aging-regular"},e.prototype.getAgingData=function(){var t,e,r;return t=this.getBoard(),r=Date.now()-new Date(this.get("dateLastActivity")),e={level:function(){switch(!1){case!(r<x.getMs({days:7})):return 0;case!(r<x.getMs({days:14})):return 1;case!(r<x.getMs({days:28})):return 2;default:return 3}}(),mode:t.get("prefs").cardAging},e.agingClassesToAdd="aging-level-"+e.level+" aging-"+e.mode,/64$/.test(this.id)&&(e.agingClassesToAdd+=" aging-treasure"),e},e.prototype.toggleVote=function(){this.vote(!this.voted())},e.prototype.subscribe=function(t){var e;t!==this.get("subscribed")&&(e=this.get("badges"),e.subscribed=t,this.update({subscribed:t}))},e.prototype.getCheckItem=function(t){var e,r,n,o,i,s;for(n=o=0,i=this.checklistList.length-1;i>=0?i>=o:o>=i;n=i>=0?++o:--o)if(r=this.checklistList.at(n),e=null!=r&&null!=(s=r.checkItemList)?s.get(t):void 0)return e;return null},e.prototype.toJSON=function(t){var r;return null==t&&(t={}),r=e.__super__.toJSON.apply(this,arguments),t.url&&(r.url=p.getCardUrl(this)),r},e.prototype.upload=function(t,e,r){var n;return n=new FormData,n.append("token",c.myToken()),null!=e?n.append("file",t,e):n.append("file",t),a({url:"/1/cards/"+this.id+"/attachments",data:n,type:"post",processData:!1,contentType:!1,error:function(n){return function(n,o,i,s){var a,u,c;return c=n.status,u=n.responseText,413===c?r("Error uploading "+(null!=(a=t.name)?a:e)):s()}}(this),success:function(t){return r()},timeout:x.getMs({hours:6})})},e.prototype.uploadUrl=function(t,e){return null==e&&(e=function(){}),j.isString(t)&&(t={url:t}),a({url:"/1/cards/"+this.id+"/attachments",type:"post",data:t,error:function(t){return function(t,r,n,o){var i,s;return s=t.status,i=t.responseText,e(r)}}(this),success:function(t){return e()}})},e.prototype.removeCover=function(){return this.update({idAttachmentCover:""})},e.prototype.makeCover=function(t){return this.update({idAttachmentCover:t.id})},e.prototype.calcChecklistPos=function(t,e){return x.calcPos(t,this.checklistList,e)},e.prototype._neighbor=function(t){var e,r,n;if(r=this.getList().openCards(),n=this.getBoard().filter,e=j.indexOf(r,this),e>=0){for(e+=t;null!=r[e]&&!n.satisfiesFilter(r[e]);)e+=t;return r[e]}return null},e.prototype.prevCard=function(){return this._neighbor(-1)},e.prototype.nextCard=function(){return this._neighbor(1)},e.prototype.labelCreateUrl=function(){return"/1/card/"+this.id+"/labels/"},e.prototype.copyTo=function(t){var e,r,n,o;return n=t.name,e=t.idList,o=t.pos,r=t.keepFromSource,null==n&&(n=this.get("name")),v.load(e,w.listMinimal,this.modelCache).then(function(t){return function(e){return M(e.cardList,"create",{name:n,pos:o},{createData:{idCardSource:t.id,keepFromSource:r}})}}(this))},e}(C))},{}],127:[function(t,e,r){var n,o,i=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;o=t(161),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.typeName="CheckItem",e.prototype.urlRoot=function(){var t;return t=this.getChecklist(),t.getCard().url()+"/checklist/"+t.id+"/checkItem"},e.prototype.sync=function(t,r,n){return null!=this.getChecklist()?this.waitForId(this.getChecklist(),function(o){return function(){return e.__super__.sync.call(o,t,r,n)}}(this)):void 0},e.prototype.getChecklist=function(){return this.collection.sourceModel},e.prototype.getCard=function(){return this.getChecklist().getCard()},e.prototype.getBoard=function(){return this.getCard().getBoard()},e.prototype.editable=function(){return this.getChecklist().editable()},e.prototype.getContext=function(){return this.getChecklist()},e.prototype.move=function(t){this.update("pos",this.getChecklist().calcPos(t,this)),this.collection.sort({silent:!0})},e}(o)},{}],128:[function(t,r,n){var o,i,s,a,u=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;o=void 0,e(function(){return o=t(138)}),s=t(161),a=t(99),r.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.typeName="Checklist",e.prototype.urlRoot=function(){return"/1/checklists"},e.prototype.initialize=function(){return this.destruct([this.checkItemList=(new o).syncSubModels(this,"checkItems")])},e.prototype.sync=function(t,r,n){return"create"!==t||null!=this.get("idBoard")&&null!=this.get("idCard")?e.__super__.sync.apply(this,arguments):(this.waitForAttrs(this,["idBoard","idCard"],function(o){return function(i){return o.set(i),e.__super__.sync.call(o,t,r,n)}}(this)),this.waitForId(this.getBoard(),function(t){return function(e){return t.set("idBoard",e)}}(this)),this.waitForId(this.getCard(),function(t){return function(e){return t.set("idCard",e)}}(this)))},e.prototype.getCard=function(){var t;return null!=(t=this.modelCache.get("Card",this.get("idCard")))?t:this.collection.sourceModel},e.prototype.getBoard=function(){var t;return null!=(t=this.getCard())?t.getBoard():void 0},e.prototype.getCompletedCount=function(t){var e;return e=0,this.checkItemList.each(function(t){return null!=t.get("state")&&"complete"===t.get("state")?e++:void 0}),e},e.prototype.getCheckItem=function(t){return this.checkItemList.get(t)},e.prototype.editable=function(){return this.getBoard().editable()},e.prototype.calcPos=function(t,e){return a.calcPos(t,this.checkItemList,e)},e}(s)},{}],129:[function(t,r,n){var o,i,s,a,u,c,l,d=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;o=t(116),a=t(142),u=void 0,e(function(){return u=t(27)}),c=t("bluebird"),l=t("underscore"),s=t(179),r.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return d(e,t),e.prototype.model=o,e.prototype.initialize=function(t,e){this.options=e},e.prototype.comparator=function(t){return-t.getDate()||0},e.prototype._getRelatedBoards=function(){var t,e,r;return e=function(){var e,n,o,i,s,a,u;for(o=this.models,u=[],e=0,n=o.length;n>e;e++)r=o[e],("moveCardToBoard"===(i=r.get("type"))||"moveCardFromBoard"===i)&&(t=r.get("data"),u.push((null!=(s=t.boardTarget)?s.id:void 0)||(null!=(a=t.boardSource)?a.id:void 0)));return u}.call(this),e=l.compact(l.uniq(e)),e=l.reject(e,function(t){return function(e){return null!=t.modelCache.get("Board",e)}}(this)),c.resolve(e).map(function(t){return function(t){return u.loadBoardName(t).catch(s.Unauthorized,s.NotFound,function(){})}}(this))},e}(a)},{}],130:[function(t,e,r){var n,o,i,s,a,u,c=function(t,e){function r(){this.constructor=t}for(var n in e)l.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},l={}.hasOwnProperty;n=t("jquery"),o=t(118),s=t(22),a=t(142),u=t(197),e.exports=i=function(t){function e(t,r){this.requiresLogin=r.requiresLogin,this.dataUrl=r.dataUrl,e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.model=o,e.prototype.sync=function(t,e,r){(!this.requiresLogin||s.isLoggedIn())&&n.ajax({url:this.dataUrl,success:function(t){return"function"==typeof r.success?r.success(e,t,r):void 0}})},e.prototype.forLocale=function(t){return this.filter(u.method("matchesLocale",t))},e}(a)},{}],131:[function(t,e,r){var n,o,i,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;n=t(120),i=t(142),s=t(61),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.model=n,e.prototype.comparator=function(t){return-s.parse(t.get("date"))||0},e.prototype.initialize=function(t,e){this.options=e},e}(i)},{}],132:[function(t,e,r){var n,o,i,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=t(121),i=t(142),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.model=n,e.prototype.url=function(){return"/1/member/"+this.member.id+"/boardBackgrounds"},e.prototype.initialize=function(t,e){this.member=e.member},e}(i)},{}],133:[function(t,e,r){var n,o,i,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=t(122),i=t(143),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.model=n,e}(i)},{}],134:[function(t,e,r){var n,o,i,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;n=t(125),i=t(142),s=t(99),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.model=n,e.prototype.initialize=function(){this.listenTo(this,"change:name",this.sort)},e.prototype.comparator=function(t){var e,r,n;return r=t.getOrganization(),n=(null!=r?r.get("displayName"):void 0)||"",e=t.get("name")||"",s.rpad(n,64).toUpperCase()+e.toUpperCase()},e}(i)},{}],135:[function(t,e,r){var n,o,i,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;i=t(142),n=t(123),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.model=n,e.prototype.initialize=function(t,e){var r;return r=e.board,this.board=r},e.prototype.url=function(){return"/1/boards/"+this.board.id+"/boardPlugins"},e}(i)},{}],136:[function(t,e,r){var n,o,i,s,a,u=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;n=t(124),i=t(142),s=t(99),a=t("underscore"),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.model=n,e.prototype.url=function(){return"/1/member/"+this.member.id+"/boardStars"},e.prototype.initialize=function(t,e){return this.member=e.member,this.listenTo(this,"change:pos",this.sort)},e.prototype.comparator=function(t){return t.get("pos")||0},e.prototype.getBoardStar=function(t){return a.find(this.models,function(e){return e.get("idBoard")===t})},e.prototype.starBoard=function(t){var e;if(!this.getBoardStar(t))return e=this.length?this.at(this.length-1).get("pos")+s.spacing:s.spacing,this.create({idBoard:t,pos:e},{modelCache:this.modelCache})},e.prototype.unstarBoard=function(t){var e;return e=this.getBoardStar(t),null!=e?e.destroy():void 0},e.prototype.updateStarBoard=function(t,e){var r,n;return r=this.getBoardStar(t),n=s.calcPos(e,this,r,function(t){return function(t){var e;return e=t.getBoard(),e&&!e.get("closed")}}(this)),null!=r?r.update({pos:n}):void 0},e.prototype.getBoards=function(){var t;return t=this.getBoardIds(),a.compact(this.modelCache.get("Board",t))},e.prototype.getBoardIds=function(){var t,e,r,n,o;for(n=a.sortBy(this.models,function(t){return t.get("pos")}),o=[],t=0,e=n.length;e>t;t++)r=n[t],o.push(r.get("idBoard"));return o},e}(i)},{}],137:[function(t,e,r){var n,o,i,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=t(126),i=t(142),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.model=n,e.prototype.initialize=function(t,e){this.listenTo(this,"change:pos",this.sort),this.list=e.list},e.prototype.url="/1/cards",e.prototype.comparator=function(t){return t.get("pos")||0},e.prototype.openCards=function(){return this.filter(function(t){return!t.get("closed")})},e}(i)},{}],138:[function(t,e,r){var n,o,i,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=t(127),i=t(142),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.model=n,e.prototype.initialize=function(){return this.listenTo(this,"change:pos",this.sort)},e.prototype.comparator=function(t){return t.get("pos")},e}(i)},{}],139:[function(t,e,r){var n,o,i,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=t(128),i=t(142),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.model=n,e.prototype.initialize=function(){return this.listenTo(this,"change:pos",this.sort)},e.prototype.comparator=function(t){return t.get("pos")},e.prototype.idList=function(){return this.pluck("id")},e}(i)},{}],140:[function(t,e,r){var n,o,i,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=t(142),o=t(155),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.model=o,e.prototype.url=function(){return"/1/member/"+this.member.id+"/customEmoji"},e.prototype.initialize=function(t,e){this.member=e.member},e}(n)},{}],141:[function(t,e,r){var n,o,i,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;n=t(22),o=t(142),i=t(156),e.exports=s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.model=i,e.prototype.url=function(){return"/1/member/"+n.me().id+"/customStickers"},e.prototype.initialize=function(t,e){this.member=e.member},e}(o)},{}],142:[function(t,e,r){var n,o,i,s,a,u,c=function(t,e){function r(){this.constructor=t}for(var n in e)l.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},l={}.hasOwnProperty,d=[].slice,p=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};n=t(193),i=t("hearsay"),s=t(99),a=t("underscore"),u=t(197),e.exports=o=function(t){function e(t,r){this.modelCache=null!=r?r.modelCache:void 0,e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.destructor=function(){return this.stopListening(),s.shred(this)},e.prototype.create=function(){var t,r,n,o,i,s,c,l,p;return o=arguments[0],t=3<=arguments.length?d.call(arguments,1,r=arguments.length-1):(r=1,[]),s=arguments[r++],c=t[0],c||a.isFunction(s)||(c=s,s=function(){}),i=this.model,null==c&&(c={}),n=this.modelCache.lock("Collection Create"),c.success=u.concat(null!=(l=c.success)?l:function(){},function(t){return function(t){return s(null,t)}}(this)),c.error=u.concat(null!=(p=c.error)?p:function(){},function(t){return function(t,e){return s(e)}}(this)),c.complete=u.choke(0,this.modelCache,"unlock",n),null==c.modelCache&&(c.modelCache=this.modelCache),e.__super__.create.call(this,o,c)},e.prototype._update=function(t){var e,r;return e=a.sortBy(t,function(t){return t.cid}),r=a.sortBy(this.models,function(t){return t.cid}),a.isEqual(e,r)?void 0:this.reset(t)},e.prototype.owner=function(t){return this.owner=t,this},e.prototype.syncModel=function(t,e,r){var n,o,i;return this.sourceModel=t,n=(null!=r?r:{}).fxGetIds,this.modelCache=this.sourceModel.modelCache,o=function(t){return function(){var r,o,i;return r=t.sourceModel.get(e),null!=(o=null!=(i="function"==typeof n?n(r):void 0)?i:r)?o:[]}}(this),i=function(t){return function(e){var r;return r=a.chain(e).map(function(e){return t.modelCache.get(t.model,e)}).compact().value(),t._update(r)}}(this),this.sync=function(t){return function(){return i(o())}}(this),this.listenTo(this.sourceModel,"change:"+e,this.sync),this.listenTo(this.modelCache,"add:"+this.model.prototype.typeName,function(t){var e;e=t.id,p.call(o(),e)>=0&&this.add(t)}),this.sync(),this},e.prototype.syncCache=function(t,e,r){var n,o,i,s;for(this.modelCache=t,this.sync=function(t){return function(){return t._update(t.modelCache.all(t.model).filter(r))}}(this),s=this.model.prototype.typeName,this.listenTo(this.modelCache,"add:"+s,function(t){return function(e){return r(e)?t.add(e):void 0}}(this)),this.listenTo(this.modelCache,"remove:"+s,function(t){return function(e){return r(e)?t.remove(e):void 0}}(this)),this.listenTo(this.modelCache,"reset:"+s,this.sync),o=0,i=e.length;i>o;o++)n=e[o],this.listenTo(this.modelCache,"change:"+s+":"+n,this.sync);return this.sync(),this},e.prototype.syncSubModels=function(t,e){return this.sourceModel=t,null==this.modelCache&&(this.modelCache=this.sourceModel.modelCache),this.sync=function(t){return function(){var r,n,o,i,s,u,c,l,d,p;for(r=t.models,p=null!=(c=t.sourceModel.get(e))?c:[],u=function(){var t,e,r;for(r=[],t=0,e=p.length;e>t;t++)o=p[t],d=a.find(this.models,function(t){return t.id===o.id}),null!=d?this.modelCache.enqueueDelta(d,o):d=new this.model(o,{modelCache:this.modelCache,collection:this}),r.push(d);return r}.call(t),l=t.models,n=0,i=l.length;i>n;n++)s=l[n],null==s.id&&u.push(s);return t._update(u)}}(this),this.listenTo(this.sourceModel,"change:"+e,this.sync),this.sync(),this},e.prototype.snoop=function(){var t,e;return t=1<=arguments.length?d.call(arguments,0):[],e=["add","remove","reset"].concat(t.map(function(t){return["change",t].join(":")})).join(" "),new i.ContinuousSignal(function(t){return function(r){var n;return r(t),n=function(){return r(t)},t.listenTo(t,e,n),function(){return t.stopListening(t,e,n)}}}(this))},e}(n.Collection)},{}],143:[function(t,e,r){var n,o,i,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;n=t(142),o=t(61),i=t(162),e.exports=s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.model=i,e.prototype.initialize=function(t,e){this.options=e},e.prototype.comparator=function(t){return t.get("dateExpires")?-o.parse(t.get("dateExpires")):-(1/0)},e}(n)},{}],144:[function(t,e,r){var n,o,i,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=t(142),o=t(163),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.model=o,e}(n)},{}],145:[function(t,e,r){var n,o,i,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;n=t(142),o=t(164),s=t(99),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.model=o,e.prototype.initialize=function(t,e){
this.listenTo(this,"change:pos",this.sort),this.board=e.board},e.prototype.comparator=function(t){return t.get("pos")||0},e.prototype.calcPos=function(t,e,r){return s.calcPos(t,this,e,function(t){return!t.get("closed")},r)},e.prototype.url=function(){return"/1/boards/"+this.board.id+"/lists"},e.prototype.openLists=function(){return this.filter(function(t){return!t.get("closed")})},e}(n)},{}],146:[function(t,e,r){var n,o,i,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;n=t(142),o=t(165),s=t("underscore"),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.model=o,e.prototype.initialize=function(){return this.listenTo(this,"change:primary",this.resetPrimary)},e.prototype.resetPrimary=function(t){var e,r,n;if(t.get("primary")){for(n=this.without(t),e=0,r=n.length;r>e;e++)t=n[e],t.set("primary",!1);return this.sort()}},e.prototype.comparator=function(t){return Number(!t.get("primary"))+t.id},e.prototype.types=function(){return s.countBy(s.flatten(this.pluck("types")))},e}(n)},{}],147:[function(t,e,r){var n,o,i,s,a,u=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;n=t(178),o=t(22),i=t(142),s=t(166),e.exports=a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.model=s,e.prototype.sortField="fullName",e.prototype.idList=function(){return this.pluck("id")},e.prototype.remove=function(t,r){var o;return null==this.sourceModel?e.__super__.remove.apply(this,arguments):(e.__super__.remove.call(this,t),o=(null!=r?r.invite:void 0)?"/1/"+this.sourceModel.typeName+"/"+this.sourceModel.id+"/ghost/"+t.id:"/1/"+this.sourceModel.typeName+"/"+this.sourceModel.id+"/members/"+t.id,(null!=r?r.mass:void 0)&&(o+="/all"),n({url:o,type:"delete",success:function(t){return(null!=t?t.unreadable:0)?void 0:null!=r&&"function"==typeof r.success?r.success():void 0}}))},e.prototype.filterDeactivated=function(t){var r,n,i,s;return s=null!=t?t:{},i=s.model,r=s.force,null==i&&(i=this.sourceModel),null==r&&(r=!1),n=o.me(),new e(this.filter(function(t){return((null!=i?i.isMember(t):void 0)||(null!=i?i.isMemberObserver(t):void 0))&&!(null!=i?i.isDeactivated(t):void 0)||(null!=i?i.canSeeDeactivated(n):void 0)&&!r},this.options))},e.prototype.comparator=function(t){return t.get(this.sortField)},e}(i)},{}],148:[function(t,e,r){var n,o,i,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=t(142),o=t(167),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.model=o,e.prototype.initialize=function(){return this.memberIndex={},this.listenTo(this,"add",function(t){return function(e){return t.memberIndex[e.get("idMember")]=e}}(this)),this.listenTo(this,"remove",function(t){return function(e){return delete t.memberIndex[e.get("idMember")]}}(this)),this.listenTo(this,"reset",function(t){return function(){var e,r,n,o,i;for(t.memberIndex={},o=t.models,i=[],e=0,r=o.length;r>e;e++)n=o[e],i.push(t.memberIndex[n.get("idMember")]=n);return i}}(this))},e.prototype.getMember=function(t){var e,r;return e=null!=(r=null!=t?t.id:void 0)?r:t,this.memberIndex[e]},e}(n)},{}],149:[function(t,e,r){var n,o,i,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=t(143),o=t(169),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.model=o,e}(n)},{}],150:[function(t,e,r){var n,o,i,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=t(142),o=t(170),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.model=o,e.prototype.initialize=function(){this.listenTo(this,"change:name",this.sort)},e.prototype.comparator=function(t){var e;return(null!=(e=t.get("name"))?e.toUpperCase():void 0)||""},e}(n)},{}],151:[function(t,e,r){var n,o,i,s,a,u,c=function(t,e){function r(){this.constructor=t}for(var n in e)l.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},l={}.hasOwnProperty;n=t(142),o=t(171),s=t("bluebird"),a=t("underscore"),u=t("xtend"),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.model=o,e.prototype.initialize=function(t,e){return this.scopeModel=e.scopeModel},e.prototype.scope=function(){return this.scopeModel.typeName.toLowerCase()},e.prototype.for=function(t,e){return a.find(this.models,function(r){return function(n){return n.get("idPlugin")===t&&n.get("access")===e&&n.get("scope")===r.scope()&&n.get("idModel")===r.scopeModel.id}}(this))},e.prototype.create=function(t,r){return t=u(t,{scope:this.scope(),idModel:this.scopeModel.id,access:t.visibility}),e.__super__.create.call(this,t,r)},e.prototype.dataForPlugin=function(t){return a.chain(this.models).filter(function(e){return e.get("idPlugin")===t}).groupBy(function(t){return t.get("scope")}).mapObject(function(t){return a.chain(t).groupBy(function(t){return t.get("access")}).mapObject(function(t){return t[0].get("value")}).value()}).value()},e.prototype.snoopDataForPlugin=function(t){return this.snoop("value").map(function(e){return function(){return e.dataForPlugin(t)}}(this))},e.prototype.upsert=function(t,e,r){var n;n=this.for(t,e),null!=n?n.update("value",r):this.create({idPlugin:t,visibility:e,value:r})},e}(n)},{}],152:[function(t,e,r){var n,o,i,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;n=t(142),o=t(173),s=t(99),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.model=o,e.prototype.url=function(){return"/1/member/"+this.member.id+"/savedSearches"},e.prototype.initialize=function(t,e){return this.member=e.member,this.listenTo(this,"change:pos",this.sort)},e.prototype.comparator=function(t){return t.get("pos")||0},e.prototype.saveSearch=function(t,e){var r;return r=this.length?this.at(this.length-1).get("pos")+s.spacing:s.spacing,this.create({name:t,query:e,pos:r},{modelCache:this.modelCache})},e}(n)},{}],153:[function(t,e,r){var n,o,i,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;n=t(142),o=t(174),s=t("underscore"),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.model=o,e.prototype.url=function(){return"/1/cards/"+this.card.get("id")+"/stickers"},e.prototype.initialize=function(t,e){this.card=e.card,this.listenTo(this,"change:zIndex",this.sort)},e.prototype.comparator=function(t){return t.get("zIndex")||0},e.prototype.nextZIndex=function(t){var e;return this.length>0?(e=s.max(this.pluck("zIndex")),(null!=t?t.get("zIndex"):void 0)===e&&1===this.filter(function(t){return t.get("zIndex")===e}).length?e:e+1):1},e}(n)},{}],154:[function(t,e,r){var n,o,i,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=t(142),o=t(175),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.model=o,e.prototype.comparator=function(t,e){return t.get("name").localeCompare(e.get("name"))},e}(n)},{}],155:[function(t,e,r){var n,o,i=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;o=t(161),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.typeName="CustomEmoji",e}(o)},{}],156:[function(t,e,r){var n,o,i=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;o=t(161),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.typeName="CustomSticker",e}(o)},{}],157:[function(t,e,r){var n,o;o=t("underscore"),e.exports=n=function(){function t(){}return t.prototype.getLabels=function(){return this.labelList.models},t.prototype.dataForLabel=function(t){return o.extend(t.toJSON(),{isActive:this.hasLabel(t)})},t.prototype.toggleLabelColor=function(t){var e;return e=this.getBoard().labelForColor(t),null!=e?this.toggleLabel(e):void 0},t.prototype.hasLabel=function(t){return this.labelList.contains(t)},t.prototype.toggleLabel=function(t){var e,r;return e=!this.hasLabel(t),r=t.get("uses")+(e?1:-1),this.toggle("idLabels",t.id,e),t.set("uses",r)},t.prototype.createLabel=function(t,e){var r;return(r=o.find(this.getBoard().getLabels(),function(r){return r.get("name")===t&&r.get("color")===e}))?void(this.hasLabel(r)||this.toggleLabel(r)):void this.labelList.create({name:t,color:null!=e?e:"",idBoard:this.get("idBoard"),uses:1},{url:this.labelCreateUrl()})},t}()},{}],158:[function(t,r,n){var o,i,s,a,u=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};o=t(22),i=void 0,e(function(){return i=t(148)}),a=t("underscore"),r.exports=s=function(){function t(){}return t.prototype.orderedVisibleMembers=function(){return this.memberList.sortBy(function(t){return function(e){var r;return r=function(){if(o.isMe(e))return"0";if(this.isDeactivated(e))return"5";if(this.isVirtual(e))return"4";switch(e.get("status")){case"active":return"1";case"idle":return"2";default:return"3"}}.call(t),r+e.get("fullName")}}(this)).filter(function(t){return function(e){return(!t.isDeactivated(e)||t.canSeeDeactivated(o.me()))&&!t.isObserver(e)}}(this))},t.prototype.getMemberType=function(t){var e,r;return e=("function"==typeof this.getOrganization&&null!=(r=this.getOrganization())?r.isPremOrgAdmin(t):void 0)?"admin":this.getExplicitMemberType(t),"public"!==e&&("function"==typeof this.isVirtual?this.isVirtual(t):void 0)&&(e="virtual"),e},t.prototype._refreshMemberships=function(){return this._memberships.update(this.get("memberships"))},t.prototype._getMembershipFor=function(t){return this._memberships||(this._memberships=new i,this._refreshMemberships(),this.listenTo(this,"change:memberships",this._refreshMemberships)),this._memberships.getMember(t)},t.prototype.getMembershipFor=function(t){var e;return null!=(e=this._getMembershipFor(t))?e.toJSON():void 0},t.prototype.isMember=function(t){return null!=this._getMembershipFor(t)},t.prototype.isVirtual=function(t){return"ghost"===(null!=t?t.get("memberType"):void 0)},t.prototype.isDeactivated=function(t){var e;return(null!=(e=this._getMembershipFor(t))?e.get("deactivated"):void 0)===!0},t.prototype.isUnconfirmed=function(t){var e;return(null!=(e=this._getMembershipFor(t))?e.get("unconfirmed"):void 0)===!0},t.prototype.isObserver=function(t){return"observer"===this.getExplicitMemberType(t)},t.prototype.isPremOrgAdmin=function(t){var e,r,n,o;return a.isString(t)&&(t=this.modelCache.get("Member",t)),r=null!=(n=null!=t&&"function"==typeof t.get?t.get("idPremOrgsAdmin"):void 0)?n:[],e=this.getOrganization?null!=(o=this.getOrganization())?o.id:void 0:this.id,u.call(r,e)>=0},t.prototype.getExplicitMemberType=function(t){var e,r;return this.isDeactivated(t)?"deactivated":this.isUnconfirmed(t)?"unconfirmed":(e=this._getMembershipFor(t))?e.get("memberType"):("function"==typeof this.getOrganization&&null!=(r=this.getOrganization())?r.isMember(t):void 0)?"org":"public"},t.prototype.canSeeDeactivated=function(t){var e,r;return this.isMember(t)||(null!=(e=t.organizationList)?e.get(null!=(r=this.getOrganization())?r.id:void 0):void 0)},t}()},{}],159:[function(t,e,r){var n,o,i,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty,u=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};o=t(160),i=t("underscore"),e.exports=n=function(t){function e(){e.__super__.constructor.apply(this,arguments),this._initSubEventsOn("myPrefs")}return s(e,t),e.prototype.myPrefNames=[],e.prototype.myPrefDefaults={},e.prototype.toJSON=function(t){var r,n,o,i,s,a;if(null==t&&(t={}),r=e.__super__.toJSON.apply(this,arguments),t.prefs)for(s=this.myPrefNames,n=0,o=s.length;o>n;n++)i=s[n],a=this.getPref(i),r[i]=a,r[i+"_"+a]=!0;return r},e.prototype.getPref=function(t){var r,n;return u.call(this.myPrefNames,t)>=0?null!=(r=null!=(n=this.get("myPrefs"))?n[t]:void 0)?r:this.myPrefDefaults[t]:e.__super__.getPref.apply(this,arguments)},e.prototype.setPref=function(t,r,n){return u.call(this.myPrefNames,t)>=0?this.setMyPref(t,r,n):e.__super__.setPref.apply(this,arguments)},e.prototype.setMyPref=function(t,e,r){var n;return this.api({type:"put",method:"myPrefs/"+t,data:{value:e}},r),n=i.clone(this.get("myPrefs")),n[t]=e,this.set({myPrefs:n})},e}(o)},{}],160:[function(t,e,r){var n,o,i,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=t(161),i=t("underscore"),e.exports=n=function(t){function e(){e.__super__.constructor.apply(this,arguments),this._initSubEventsOn("prefs")}return s(e,t),e.prototype.prefNames=[],e.prototype.toJSON=function(t){var r,n;return null==t&&(t={}),r=e.__super__.toJSON.apply(this,arguments),n=function(t){return function(e,o,s){var a,u,c,l,d,p,h;for(p=[],a=0,c=e.length;c>a;a++)l=e[a],u=s?s+"_"+l:l,h=null!=(d=null!=o?o[l]:void 0)?d:t.getPref(l),i.isObject(h)&&!i.isArray(h)?p.push(n(i.keys(h),h,u)):(r[u]=h,p.push(r[u+"_"+h]=!0));return p}}(this),t.prefs&&n(this.prefNames),r},e.prototype.getPref=function(t){var e;return null!=(e=this.get("prefs"))?e[t]:void 0},e.prototype.setPref=function(t,e,r){return this.update("prefs/"+t,e,r)},e.prototype.set=function(t,r){var n,o,s;if(t=i.clone(t),null!=t.prefs){o=t.prefs;for(n in o)s=o[n],"none"===s&&(s="disabled"),"owners"===s&&(s="admins"),o[n]=s}return e.__super__.set.apply(this,arguments)},e}(o)},{}],161:[function(t,r,n){var o,i,s,a,u,c,l,d,p,h,m,f,g,v=function(t,e){function r(){this.constructor=t}for(var n in e)y.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},y={}.hasOwnProperty,b=[].slice,w=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};o=t(178),i=t(179),s=t(193),a=t(64),u=t("hearsay"),c=void 0,e(function(){return c=t(27)}),l=t("bluebird"),d=t("promise-queue"),p=t(85),m=t(99),f=t("underscore"),g=t(81),r.exports=g(a,p,h=function(t){function e(t,r){var n;this._marked={},this._lockQueue={},this.modelCache=null!=r?r.modelCache:void 0,this._apiQueue=new d(1),e.__super__.constructor.apply(this,arguments),null!=(n=this.modelCache)&&n.add(this)}return v(e,t),e.prototype._initSubEventsOn=function(t){return this.listenTo(this,"change:"+t,function(e){return function(r,n){var o,i,s,a,u;i=null!=(s=r.previousAttributes())?s[t]:void 0,a=[];for(o in n)u=n[o],(null==i||u!==i[o])&&a.push(e.trigger("change:"+t+"."+o));return a}}(this))},e.prototype.waitForLock=function(t,e){var r;return r=function(e){return function(){var n;return f.isEmpty(e._lockQueue[t])?delete e._lockQueue[t]:(n=e._lockQueue[t].shift())(r)}}(this),null!=this._lockQueue[t]?this._lockQueue[t].push(e):(this._lockQueue[t]=[],e(r))},e.prototype.set=function(t,r){var n,o,i,s,a,u,c,l,d,p,h,m,g,v;f.isArray(t)&&(t=f.find(t,function(t){return t.id===this.id||t._id===this.id})),null!=(null!=t?t._id:void 0)&&(null==t.id&&(t.id=t._id),delete t._id),t=f.clone(t);for(c in t)if(v=t[c],c.indexOf("/")>=0){for(h=c.split("/"),p=h[0],o=3<=h.length?b.call(h,1,a=h.length-1):(a=1,[]),l=h[a++],null==t[p]&&(t[p]=null!=(m=f.clone(this.get(p)))?m:{}),i=t[p],s=u=0,d=o.length;d>u;s=++u)n=o[s],i=i[n]=null!=(g=f.clone(i[n]))?g:{};i[l]=v,delete t[c]}return e.__super__.set.apply(this,arguments)},e.prototype.destructor=function(){var t,e,r,n;if(this.stopListening(),this.cancelScheduled(),null!=this._using)for(n=this._using,t=0,e=n.length;e>t;t++)r=n[t],"function"==typeof r.destructor&&r.destructor();return m.shred(this)},e.prototype.destroy=function(){return e.__super__.destroy.apply(this,arguments),this.destructor()},e.prototype.destruct=function(t){var e,r,n,o;if(f.isArray(t)){for(null==this._using&&(this._using=[]),o=[],e=0,r=t.length;r>e;e++)n=t[e],o.push(this._using.push(n));return o}return this.destruct([t])},e.load=function(t,e,r){return l.try(function(n){return function(){var o,i,s;return null==r||null==t?null:(s=function(t,e){var r;return r=f.keys(t),!f.any(r,function(t){return w.call(e,t)<0})},s(e,["query"])&&s(e.query,["fields"])&&null!=(o=r.get(n,t))&&(i=e.query.fields?e.query.fields.split(","):[],f.all(i,function(t){return o.attributes.hasOwnProperty(t)}))?o:null)}}(this)).then(function(r){return function(n){return null!=n?n:c.loadModel(r,t,e)}}(this))},e.prototype.ready=function(t){t&&(this.isReady?t():(this.waitingForReady||(this.waitingForReady=[]),this.waitingForReady.push(t)))},e.prototype.setReady=function(){var t,e,r,n;if(this.isReady=!0,this.waitingForReady)for(n=this.waitingForReady,this.waitingForReady=null,e=0,r=n.length;r>e;e++)t=n[e],"function"==typeof t&&t()},e.prototype.update=function(){var t,e,r,n,o,i,s,a,u,c;return f.isString(arguments[0])?(r=arguments[0],u=arguments[1],s=4<=arguments.length?b.call(arguments,2,t=arguments.length-1):(t=2,[]),o=s[0],n=arguments[t++],i={},i[r]=u):(i=arguments[0],a=3<=arguments.length?b.call(arguments,1,e=arguments.length-1):(e=1,[]),o=a[0],n=arguments[e++]),null!=o||f.isFunction(n)||(o=n,n=null),c=(null!=o?o:{}).waitForServer,c||this.set(i),this._persistUpdate(i,n)},e.prototype._persistUpdate=function(t,e){return this.api({type:"put",data:t},e)},e.prototype.addToSet=function(){var t,e,r,n,o,i,s,a,u,c,l;return e=arguments[0],c=arguments[1],t=4<=arguments.length?b.call(arguments,2,n=arguments.length-1):(n=2,[]),i=arguments[n++],s=t[0],null!=s||f.isFunction(i)||(s=i,i=function(){}),a=null!=s?s:{},l=a.waitForServer,r=a.collectionName,o=this,null==r&&(r=e),l||this.set(e,f.uniq((null!=(u=o.get(e))?u:[]).concat(c))),this.api({method:r,data:{value:c},success:function(t){return function(r,n){var i;return i={},i[e]=f.uniq(o.get(e).concat(c)),t.modelCache.enqueueDelta(o,i),"function"==typeof n?n(null,r):void 0}}(this)},i)},e.prototype.pull=function(){var t,e,r,n,o,i,s,a,u,c,l;return e=arguments[0],c=arguments[1],t=4<=arguments.length?b.call(arguments,2,n=arguments.length-1):(n=2,[]),i=arguments[n++],s=t[0],null!=s||f.isFunction(i)||(s=i,i=function(){}),a=null!=s?s:{},l=a.waitForServer,r=a.collectionName,o=this,null==r&&(r=e),l||this.set(e,f.without(null!=(u=o.get(e))?u:[],c)),this.api({method:r+"/"+c,type:"delete",success:function(t){return function(r,n){var i;return i={},i[e]=f.without(o.get(e),c),t.modelCache.enqueueDelta(o,i),"function"==typeof n?n(null,r):void 0}}(this)},i)},e.prototype.run=function(t,e,r){return this.api({method:t,data:e},r)},e.prototype.api=function(t,e){var r,n,s,a,u,c;return s=t.method,c=t.type,r=t.data,u=t.success,n=t.datatype,a=this,null==n&&(n=""),null==s&&(s=""),null==c&&(c="post"),null==r&&(r={}),null==u&&(u=function(t){return function(e,r){var n;e.id===a.id?t.modelCache.enqueueDelta(a,e):f.isArray(e)&&(n=f.find(e,function(t){return t.id===a.id}),null!=n&&t.modelCache.enqueueDelta(a,n)),r(null,e)}}(this)),null==e&&(e=function(){}),this.waitForId(this,function(t){return function(){var a;return a=t.url(),null!=s&&""!==s&&(a+="/"+s),l.using(t.modelCache.getLock(),function(){return t._apiQueue.add(function(){return new l(function(t,e){return o({url:a,type:c,data:r,datatype:n,success:function(e){t(l.fromNode(function(t){return u(e,t)}))},error:function(t,r,n,o){var s,a;a=t.status,s=t.responseText,n=i.fromResponse(a,s),(n instanceof i.Server||n instanceof i.NoResponse)&&o(),e(n)}})})})}).nodeify(e).catch(function(){}).done()}}(this)),this},e.prototype.toggle=function(){var t,e,r,n,o,i,s;return r=arguments[0],s=arguments[1],t=arguments[2],e=5<=arguments.length?b.call(arguments,3,n=arguments.length-1):(n=3,[]),o=arguments[n++],i=e[0],this[t?"addToSet":"pull"](r,s,i,o)},e.prototype.snoop=function(t){return null!=t?new u.ContinuousSignal(function(e){return function(r){var n;return r(e.get("attr")),n=function(){return r(e.get("attr"))},e.listenTo(e,"change:"+t,n),function(){return e.stopListening(e,"change:"+t,n)}}}(this)):new u.ContinuousSignal(function(t){return function(e){var r;return e(t),r=function(){return e(t)},t.listenTo(t,"change",r),function(){return t.stopListening(t,"change",r)}}}(this))},e}(s.Model))},{}],162:[function(t,e,r){var n,o,i,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty,c=[].slice;n=t(178),i=t(161),s=t(31),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.typeName="Invitation",e.prototype.initialize=function(t,e){s("invitation",e),this.invitationList=e.collection,this.setReady()},e.prototype.create=function(t){var e,r,o,i;return o=t.model,e=t.data,i=t.success,r=t.error,n({url:"/1/"+o.typeName+"/"+o.id+"/invitations",type:"post",data:e,dataType:"json",error:function(t){return function(){var e,n,o,i,s;return e=2<=arguments.length?c.call(arguments,0,i=arguments.length-1):(i=0,[]),o=arguments[i++],n=e[0],"Member email restricted by organization administrators"===n.responseText.trim()?void t.$(".error").show():("Member already invited"!==(s=n.responseText.trim())&&"Member already a member"!==s&&"Member email restricted by organization administrators"!==s&&o(),"function"==typeof r?r(n):void 0)}}(this),success:function(t){return function(t){return"function"==typeof i?i(t):void 0}}(this)})},e.prototype.delete=function(t){var e,r,o,i;return o=t.model,r=t.idInvitation,i=t.success,e=t.error,n({url:"/1/"+o.typeName+"/"+o.id+"/invitations/"+r,type:"delete",dataType:"json",error:function(t){return function(){var t,r,n,o;return t=2<=arguments.length?c.call(arguments,0,o=arguments.length-1):(o=0,[]),n=arguments[o++],r=t[0],"Invitation not found"!==r.responseText.trim()&&n(),"function"==typeof e?e(r):void 0}}(this),success:function(t){return function(t){return"function"==typeof i?i(t):void 0}}(this)})},e.prototype.respond=function(t){var e,r,o,i,s;return o=t.model,i=t.response,e=t.data,s=t.success,r=t.error,n({url:"/1/"+o.typeName+"/"+o.id+"/invitations/"+i,type:"post",dataType:"json",data:e,error:function(t){return function(){var t,e,n,o;return t=2<=arguments.length?c.call(arguments,0,o=arguments.length-1):(o=0,[]),n=arguments[o++],e=t[0],"already a member"!==e.responseText.trim()&&n(),"function"==typeof r?r(e):void 0}}(this),success:function(t){return function(t){return"function"==typeof s?s(t):void 0}}(this)})},e}(i)},{}],163:[function(t,e,r){var n,o,i,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=t(161),i=t("underscore"),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.typeName="Label",e.prototype.urlRoot="/1/labels",e.prototype.getBoard=function(){return this.modelCache.get("Board",this.get("idBoard"))},e.prototype.editable=function(){return this.getBoard().editable()},e.prototype.colorSortVal=function(){var t;return t=i.indexOf(e.colors,this.get("color")),t>=0?t:1/0},e.prototype.nameSortVal=function(){var t;return(null!=(t=this.get("name"))?t:"").toLowerCase()},e.compare=function(t,e){var r;return r=t.colorSortVal()-e.colorSortVal(),0===r||isNaN(r)?t.nameSortVal().localeCompare(e.nameSortVal()):r},e.colors=["green","yellow","orange","red","purple","blue","sky","lime","pink","black"],e}(o)},{}],164:[function(t,r,n){var o,i,s,a,u,c,l,d,p,h=function(t,e){function r(){this.constructor=t}for(var n in e)m.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},m={}.hasOwnProperty;o=void 0,e(function(){return o=t(137)}),s=t(161),a=t(99),c=t(108),d=t(107),l=t(183),p=t("xtend"),u=t("underscore"),r.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return h(e,t),e.prototype.typeName="List",e.prototype.urlRoot="/1/lists",e.prototype.initialize=function(){return this.destruct([this.cardList=new o(null,{list:this}).owner(this).syncCache(this.modelCache,["idList","closed"],function(t){return function(e){return t.id&&e.get("idList")===t.id&&!e.get("closed")}}(this))])},e.prototype.sync=function(t,r,n){return"create"===t&&null==this.get("idBoard")?(this.waitForAttrs(this,["idBoard"],function(o){return function(i){return o.set(i),e.__super__.sync.call(o,t,r,n)}}(this)),this.waitForId(this.getBoard(),function(t){return function(e){return t.set("idBoard",e)}}(this))):e.__super__.sync.apply(this,arguments)},e.prototype.subscribe=function(t){t!==this.get("subscribed")&&this.update({subscribed:t})},e.prototype.move=function(t){this.update({pos:this.getBoard().calcPos(t,this)}),this.collection.sort({silent:!0})},e.prototype.close=function(){this.update({closed:!0})},e.prototype.reopen=function(){this.update({closed:!1,pos:this.getBoard().calcPos(this.collection.length,this)})},e.prototype.onChange=function(){},e.prototype.calcPos=function(t,e,r){return a.calcPos(t,this.cardList,e,function(t){return!t.get("closed")},r)},e.prototype.bottomCardPos=function(){var t;return null!=(t=this.cardList.last())?t.get("pos")+a.spacing:a.spacing},e.prototype.getBoard=function(){var t,e;return null!=(t=this.modelCache.get("Board",this.get("idBoard")))?t:null!=(e=this.collection)?e.owner:void 0},e.prototype.selectCardInList=function(t){var e;e=this.cardList.openCards()[t],null!=e&&this.getBoard().viewState.selectCard(e)},e.prototype.selectFirstCardInList=function(){return this.selectCardInList(0)},e.prototype.editable=function(){return this.getBoard().editable()},e.prototype.getIndexInList=function(){return u.indexOf(this.getBoard().openLists(),this)},e.prototype.openCards=function(){return this.cardList.filter(function(t){return!t.get("closed")})},e.prototype.uploadUrl=function(t,e,r,n){return null==n&&(n=function(){}),this.cardList.create(p({name:r,pos:this.bottomCardPos()},e),{createData:{urlSource:t,name:null!=e?e.name:void 0}},n)},e.prototype._processText=function(t){var e,r,n,o,i;return/[\r\n]/.test(t)?(i=/^\s*([^\r\n]+)/.exec(t),e=i[0],n=i[1],o=d(n,256),r=t):(o=d(t,256),r=o!==t||c(t)?t:""),{name:o,desc:r}},e.prototype.uploadText=function(t,e){var r,n,o;return null==e&&(e=function(){}),t?(o=this._processText(t),n=o.name,r=o.desc,this.cardList.create({name:n,desc:r,pos:this.bottomCardPos()},e)):e()},e.prototype.upload=function(t,e,r){var n,o;return null==r&&(r=function(){}),n={name:e,idList:this.id,pos:this.bottomCardPos()},o=l(u.extend({},n,{fileSource:[t,e]})),this.cardList.create(n,o)},e}(s)},{}],165:[function(t,e,r){var n,o,i,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=t(161),i=t("underscore"),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.typeName="Login",e.prototype.hasConflict=function(){var t;return t=this.collection.types(),!i.any([function(t){return function(){return i.isEmpty(t.get("types"))}}(this),function(e){return function(){return"password"in t}}(this),function(e){return function(){return t.google>=2}}(this)],function(t){return t()})},e}(o)},{}],166:[function(t,r,n){var o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x=function(t,e){function r(){this.constructor=t}for(var n in e)j.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},j={}.hasOwnProperty,S=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};o=t("jquery"),s=t(178),i=t(53),a=t(22),u=t(132),c=void 0,e(function(){return c=t(134)}),l=t(136),d=t(5),p=t(140),h=t(141),m=t(74),f=t(146),v=t(15),y=void 0,e(function(){return y=t(27)}),b=t(160),w=void 0,e(function(){return w=t(150)}),_=t(152),k=t(99),C=t("underscore"),r.exports=g=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}var r;return x(e,t),r=1e4,e.prototype.typeName="Member",e.prototype.nameAttr="fullName",e.prototype.urlRoot="/1/members",e.prototype.initialize=function(){e.__super__.initialize.apply(this,arguments),this.destruct([this.boardList=(new c).syncModel(this,"idBoards"),this.organizationList=(new w).syncModel(this,"idOrganizations")]),a.isMe(this)&&(this.destruct([this.boardStarList=new l([],{member:this}).syncSubModels(this,"boardStars"),this.savedSearchList=new _([],{member:this}).syncSubModels(this,"savedSearches"),this.customStickerList=new h([],{member:this}).syncSubModels(this,"customStickers"),this.boardBackgroundList=new u([],{member:this}).syncSubModels(this,"boardBackgrounds"),this.customEmojiList=new p([],{member:this}).syncSubModels(this,"customEmoji"),this.loginList=new f([],{member:this}).syncSubModels(this,"logins")]),this.isFeatureEnabled("customEmoji")&&y.loadMemberCustomEmoji(this.id).done()),this.listenTo(this,"change:editing",function(t){return function(e){var r,n;return null!=(r=t.modelCache.get("Card",null!=(n=e.get("editing"))?n.idCard:void 0))?r.updateEditing(e):void 0}}(this))},e.prototype.isLoggedIn=function(){return!this.get("notLoggedIn")},e.prototype.hasAtMe=function(t){var e;return this.isLoggedIn()&&null!=this.get("username")&&null!=this.get("fullName")?(e=C.compact([this.get("username")].concat(this.get("fullName").split(/\s+/))),C.find(e,function(e){return e.length>=2&&RegExp("(^|\\W)@"+k.escapeForRegex(e)+"($|\\W)","i").test(t)})):!1},e.prototype.getMembershipData=function(t){var e,r,n,o,i,s,u,c,l,d,p,h,m,f,g,v,y,b,w;return e=t.adminList.models,l=a.isMe(this),m=a.me(),h=C.some(e,function(t){return function(e){return e.id!==t.id}}(this)),d=e.length>1,p=t.memberList.length>1,b=t.getMembershipFor(this),f="admin"===t.getExplicitMemberType(this)||"admin"===(null!=b?b.memberType:void 0),v="observer"===t.getExplicitMemberType(this)||"observer"===(null!=b?b.memberType:void 0),g=!(f||v),y=t.isVirtual(this),c=t.owned(),w="org"!==t.getExplicitMemberType(this),r=c,i=!g&&h&&c,s=!v&&h&&c,o=!f&&c,u=p&&(h&&(c||l)||!l&&w&&("function"==typeof t.canInviteMembers?t.canInviteMembers():void 0)&&("function"==typeof t.compareMemberType?t.compareMemberType(m,this):void 0)>=0),n=u&&"Organization"===t.typeName&&c&&!t.isDeactivated(this)&&!y,{isMe:l,canRemove:u,canDeactivate:n,canChangeRole:r,memberIsAdmin:f,memberIsObserver:v,memberIsNormal:g,memberIsVirtual:y,canMakeMember:i,canMakeObserver:s,canMakeAdmin:o,isMoreThanOneAdmin:d,isMoreThanOneMember:p}},e.prototype.canAddBoardsTo=function(t){return null!=t.getMembershipFor(this)},e.prototype.isDismissed=function(t){var e;return S.call(null!=(e=this.get("oneTimeMessagesDismissed"))?e:[],t)>=0},e.prototype.dismiss=function(t,e){return this.addToSet("oneTimeMessagesDismissed",t,e)},e.prototype.dismissLanguageBannerFor=function(t,e){return this.dismiss("new-lang-"+t,e);
},e.prototype.shouldShowNewLanguageBannerFor=function(t){return t=m.normalizeLocale(t),!this.isDismissed("new-lang-"+t)&&this.getLocale()!==t&&m.mostPreferred(m.preferred,[this.getLocale(),t])===t},e.prototype.owned=function(){return a.isMe(this)},e.prototype.prefNames=["minutesBetweenSummaries"],e.prototype.getLocale=function(){return this.getPref("locale")?m.normalizeLocale(this.getPref("locale")):"en"},e.prototype.getLocales=function(){return this.isLoggedIn()?[this.getLocale(),"en"]:m.preferred.map(m.normalizeLocale)},e.prototype.getMemberViewTitle=function(){var t,e,r;return e=this.get("username"),t=this.get("fullName"),r=t+" ("+e+")"},e.prototype.toggleColorBlindMode=function(){null!=this.get("prefs")&&(this.get("prefs").colorBlind?this.setPref("colorBlind",!1).save():this.setPref("colorBlind",!0).save(),o("body").toggleClass("color-blind-mode-enabled",this.get("prefs").colorBlind))},e.prototype.getOpenBoardsByOrg=function(t){var e,r,n,o,i,s,a,u,c,l,d,p,h;for(c={},l=this.boardList.models,n=0,a=l.length;a>n;n++)e=l[n],e.get("closed")||t&&"observer"===e.get("myPermLevel")||(r=e.toJSON(),o=null!=(d=r.idOrganization)?d:"",null==c[o]&&(c[o]={boards:[],displayName:""===o?"Boards":null!=(p=this.modelCache.get("Organization",o))?p.get("displayName"):void 0}),c[o].boards.push(r));for(i=C.sortBy(C.keys(c),function(t){return""===t?"":c[t].displayName}),h=[],s=0,u=i.length;u>s;s++)o=i[s],h.push(c[o]);return h},e.prototype.getSortedOrgs=function(){return C.clone(this.organizationList.models).sort(function(t,e){return t.get("displayName").localeCompare(e.get("displayName"))})},e.prototype.checkColorBlindMode=function(){var t;return o("body").toggleClass("color-blind-mode-enabled",(null!=(t=this.get("prefs"))?t.colorBlind:void 0)===!0)},e.prototype.isFeatureEnabled=function(t){return v.isFeatureEnabled(t,this.get("products"))},e.prototype.isGold=function(){return v.hasProduct(this.get("products"))},e.prototype.getBillingStrategy=function(t){return{flatRate:!0}},e.prototype.hasMemberAccount=function(){var t;return i.hasAccount(null!=(t=this.get("paidAccount"))?t.standing:void 0)},e.prototype.hasMemberOrOrgAccount=function(){return this.hasMemberAccount()||this.organizationList.any(function(t){return t.hasAccount()})},e.prototype.allCustomEmoji=function(){var t,e,r,n,o;if(t={},this.isFeatureEnabled("customEmoji"))for(o=this.customEmojiList.models,r=0,n=o.length;n>r;r++)e=o[r],t[e.get("name")]=e.get("url");return t},e.prototype.toJSON=function(t){var r,n;return null==t&&(t={}),r=e.__super__.toJSON.apply(this,arguments),t.hasPassword&&(r.hasPassword=S.call(r.loginTypes,"password")>=0),r.accountStanding=i.standingName(null!=(n=this.get("paidAccount"))?n.standing:void 0),r},e.prototype.editing=function(t){return null==t&&(t={}),C.isEqual(t,this.lastMessage)?void 0:(this.lastMessage=t,clearTimeout(this.clearLastTimeout),this.clearLastTimeout=this.setTimeout(function(t){return function(){return t.lastMessage=null}}(this),r/2),a.isLoggedIn()?s({url:this.urlRoot+"/"+this.id+"/editing",type:"post",background:!0,data:C.clone(t)}):void 0)},e.prototype.removeMembershipConfirmationKey=function(t){var e;return e="Organization"===t.typeName,a.isMe(this)?e?"leave org":"leave board":e?"remove member from org":"remove member from board"},e.prototype.clearAllNotifications=function(){s({url:"/1/notifications/all/read",type:"post"})},e.prototype.maxFileSize=function(){return this.isFeatureEnabled("largeAttachments")?262144e3:10485760},e.prototype.canUploadAttachment=function(t){return t.size<this.maxFileSize()},e}(b)},{}],167:[function(t,e,r){var n,o,i=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;o=t(161),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e}(o)},{}],168:[function(t,e,r){var n,o,i,s,a,u,c,l=function(t,e){function r(){this.constructor=t}for(var n in e)d.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},d={}.hasOwnProperty;n=t(22),o=t(5),s=t(161),a=t(99),u=t("underscore"),c=t("xtend"),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.typeName="Notification",e.prototype.urlRoot="/1/notifications",e.sortedByDateDescending=function(t){return u.sortBy(t.all("Notification"),function(t){return-new Date(t.get("date")).getTime()})},e.unreadCount=function(t){return t.all("Notification").filter(function(t){return t.get("unread")}).length},e.prototype.getModel=function(){return this.collection.options.model},e.prototype.getBoard=function(){var t,e,r;return null!=(t=null!=(e=this.get("data"))&&null!=(r=e.board)?r.id:void 0)?this.modelCache.get("Board",t):null},e.prototype.getMember=function(){var t;return null!=(t=this.modelCache.get("Member",this.get("idMemberCreator")))?t.toJSON():void 0},e.prototype.triggerCacheEvents=function(t,e){var r,n,o,i;for(i=this.idModels(),r=0,o=i.length;o>r;r++)n=i[r],t.trigger(e+":"+this.typeName+":"+n)},e.prototype.idModels=function(){var t,e,r,n,o;r=null!=(e=this.get("data"))?e:{},n=[];for(t in r)o=r[t],null!=(null!=o?o.id:void 0)&&n.push(o.id);return n},e.prototype.getExpandedData=function(){var t,e,r,n,o;return r=c(null!=(o=this.toJSON().data)?o:{},{date:this.get("date"),unread:this.get("unread")}),r[this.get("type")]=!0,t=r.board,e=r.card,n=r.organization,r},e.prototype.markRead=function(){return this.update({unread:!1})},e.prototype.navigateToView=function(){var t;return t=this.get("data"),null!=t&&null!=t.card&&null!=t.board?(o.displayBoard({idBoard:t.board.id,idCard:t.card.id}).done(),!0):"memberJoinedTrello"===this.get("type")?(document.location="/recommend",!0):!1},e.prototype.getUrlOfTarget=function(){var t;return t=this.get("data"),null!=t.card?o.getCardUrlWithoutModels(t.board.id,t.card.id,t.card.name):null!=t.board?o.getBoardUrl(t.board):null!=t.organization?o.getOrganizationUrl(t.organization.id):o.getMemberNotificationsUrl()},e}(s)},{}],169:[function(t,e,r){var n,o,i=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=t(162),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.typeName="OrganizationInvitation",e}(n)},{}],170:[function(t,r,n){var o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b=function(t,e){function r(){this.constructor=t}for(var n in e)w.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},w={}.hasOwnProperty;o=t(53),i=t(22),s=void 0,e(function(){return s=t(134)}),a=t(5),u=void 0,e(function(){return u=t(147)}),c=t(158),l=t(160),d=t(16),h=void 0,e(function(){return h=t(149)}),f=t(154),m=t(151),g=t(99),v=t("underscore"),y=t(81),r.exports=p=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return b(e,t),y(c,e),e.prototype.typeName="Organization",e.prototype.nameAttr="displayName",e.prototype.urlRoot="/1/organizations",e.prototype.initialize=function(){return e.__super__.initialize.call(this),this.destruct([this.invitationList=new h([]),this.boardList=(new s).syncModel(this,"idBoards"),this.memberList=(new u).syncModel(this,"memberships",{fxGetIds:function(t){return v.pluck(t,"idMember")}}),this.adminList=(new u).syncModel(this,"memberships",{fxGetIds:function(t){return function(t){var e;return e=function(t){var e,r;return r=t.memberType,e=t.deactivated,"admin"===r&&!e},v.pluck(v.filter(t,e),"idMember")}}(this)}),this.tagList=(new f).syncSubModels(this,"tags"),this.pluginDataList=new m([],{scopeModel:this}).syncCache(this.modelCache,[],function(t){return function(e){return e.get("idModel")===t.id&&"organization"===e.get("scope")}}(this))])},e.prototype.prefNames=["permissionLevel","orgInviteRestrict","boardVisibilityRestrict","externalMembersDisabled"],e.prototype.editable=function(){var t,e;return t=i.me(),e=this.getMembershipFor(t),t&&"admin"===(null!=e?e.memberType:void 0)},e.prototype.isPremium=function(){return d.hasProduct(this.get("products"))},e.prototype.hasAccount=function(){var t;return o.hasAccount(null!=(t=this.get("paidAccount"))?t.standing:void 0)},e.prototype.isPremiumMonthly=function(){return this.isPremium()&&d.isMonthly(this.get("products"))},e.prototype.isPremiumYearly=function(){return this.isPremium()&&d.isYearly(this.get("products"))},e.prototype.getBillingStrategy=function(t){return d.isPerUser(t)?{perUser:d.isPerActiveUser(t)?this.get("activeBillableMemberCount"):this.get("billableMemberCount")}:{flatRate:!0}},e.prototype.totalPerUserPrice=function(t){var e;return e=this.getBillingStrategy(t),null!=e.perUser?e.perUser*d.getPrice(t):void 0},e.prototype.needsBCUpgrade=function(){return 0===v.intersection([d.getProductNumber(d.currentProducts.monthly),d.getProductNumber(d.currentProducts.yearly)],this.get("products")).length},e.prototype.isMember=function(t){var e;return"virtual"===(e=this.getMemberType(t))||"normal"===e||"admin"===e},e.prototype.ownedByMember=function(t){return"admin"===this.getMemberType(t)},e.prototype.canAddBoard=function(t){var e;return this.isFeatureEnabled("restrictVis")?(e=t.get("prefs").permissionLevel,this.canSetVisibility(e)):!0},e.prototype.canSetVisibility=function(t){var e;return this.isFeatureEnabled("restrictVis")?(e=this.get("prefs").boardVisibilityRestrict[t],!e||"org"===e||"admin"===e&&this.owned()):!0},e.prototype.owned=function(){return"admin"===this.getMemberType(i.me())},e.prototype.isLinkedToGoogleApps=function(){return this.isFeatureEnabled("googleApps")&&this.get("prefs").associatedDomain},e.prototype.isFeatureEnabled=function(t){return d.isFeatureEnabled(t,this.get("products"))},e.prototype.snoopIsFeatureEnabled=function(t){return this.snoop("products").map(function(e){return function(){return e.isFeatureEnabled(t)}}(this)).distinct()},e.prototype.toJSON=function(t){var r,n;return null==t&&(t={}),r=e.__super__.toJSON.apply(this,arguments),t.url&&(r.url=a.getOrganizationUrl(this.get("name"))),r.accountStanding=o.standingName(null!=(n=this.get("paidAccount"))?n.standing:void 0),r},e.prototype.getPermLevel=function(){return this.get("prefs").permissionLevel},e.prototype.getAvailableRoles=function(){return this.isFeatureEnabled("superAdmins")?["superadmin","normal"]:["admin","normal"]},e.prototype.hasObservers=function(){return!1},e.prototype.setPluginData=function(t,e,r){return this.pluginDataList.upsert(t,e,r)},e.prototype.getPluginData=function(t){return this.pluginDataList.dataForPlugin(t)},e.prototype.snoopPluginData=function(t){return this.pluginDataList.snoopDataForPlugin(t)},e}(l)},{}],171:[function(t,e,r){var n,o,i=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;o=t(161),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.typeName="PluginData",e.prototype.urlRoot=function(){return"/1/"+this.get("scope")+"/"+this.get("idModel")+"/pluginData"},e}(o)},{}],172:[function(t,e,r){var n,o,i=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;o=t(161),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.typeName="Plugin",e}(o)},{}],173:[function(t,e,r){var n,o,i=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;o=t(161),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.typeName="SavedSearch",e}(o)},{}],174:[function(t,e,r){var n,o,i=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;o=t(161),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.typeName="Sticker",e}(o)},{}],175:[function(t,e,r){var n,o,i,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=t(161),i=t("underscore"),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.typeName="Tag",e.prototype.urlRoot=function(){return this.getOrganization().url()+"/tags"},e.prototype.getOrganization=function(){return this.collection.sourceModel},e}(o)},{}],176:[function(t,e,r){var n,o,i,s,a;i=t("bluebird"),s=t(57),o=t(181),n=t("jquery"),a=t("xtend"),e.exports=function(t){return s(!("success"in t||"error"in t),"This is promise country!"),new i(function(e,r){return n.ajax(a(t,{success:function(t){return e(t)},error:function(t){return r(o.fromResponse(t.status,t.responseText))}}))})}},{}],177:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h=[].slice;n=t("jquery"),i=t(429),s=t(22),a=t(28),u=t(99),c=t("underscore"),d=t(31),p=t(418),l=t(76),e.exports=o=new(function(){function t(){this._msBackoff=100,this._msBackoffMin=100,this._nTriesLeft=12,this._nTriesMax=12,this._retrying=!1,this._stopped=!1,this._maxLength=10,this._queue=[],this._queueIdSeq=0}return t.prototype.uniqueReqId=function(){var t;return(null!=(t=s.me())?t.id:void 0)+"-"+Math.random()},t.prototype.hasQueue=function(){return this._queue.length>0},t.prototype.inQueue=function(t){return c.find(this._queue,function(e){return e.queueId===t.queueId})},t.prototype.removeFromQueue=function(t){return this._queue=c.filter(this._queue,function(e){return e.queueId!==t.queueId})},t.prototype.addToQueue=function(t){return d("AjaxQueue","addToQueue",t),this._queue.length+1>this._maxLength?void d("AjaxQueue","maxLength exceeded"):(this._queue.push(t),this.showRetrying())},t.prototype.success=function(t){return d("AjaxQueue","success",t),this.inQueue(t)?(this.removeFromQueue(t),this._retrying=!1,this._msBackoff=this._msBackoffMin,this._nTriesLeft=this._nTriesMax,this.retryNext()):void 0},t.prototype.retryableError=function(t){return d("AjaxQueue","retryableError",t),o.inQueue(t)?this._retrying=!1:o.addToQueue(t),this.retryNext()},t.prototype.serverAlreadySaw=function(t){return this.inQueue(t)?(this.removeFromQueue(t),this.retryNext()):void 0},t.prototype.retryNext=function(){var t;if(!this._stopped){if(!this.hasQueue())return void this.hideRetrying();if(this.showRetrying(),!this._retrying)return this._retrying=!0,t=this._queue[0],this._nTriesLeft>0?(d("AjaxQueue","retrying in "+this._msBackoff+"ms",t),setTimeout(function(){return n.ajax(t)},this._msBackoff),this._msBackoff*=2,--this._nTriesLeft):(this._stopped=!0,this.showOutOfRetries())}},t.prototype.showRealError=function(t,e,r){var n;return d("AjaxQueue","showRealError",r),this.hideRetrying(),n=l("alerts.changes not saved"),i.showHtml(p.fill("connect_failed",{msg:n}),"error","AjaxQueueFail")},t.prototype.showOutOfRetries=function(){var t;return d("AjaxQueue","showOutOfRetries"),this.hideRetrying(),t=l("alerts.timed out"),i.showHtml(p.fill("connect_failed",{msg:t}),"error","AjaxQueueFail")},t.prototype.showRetrying=function(){var t;return t=this._queue.length,i.show("retrying","error","AjaxQueueRetry")},t.prototype.hideRetrying=function(){return i.hide("AjaxQueueRetry")},t.prototype.showSending=function(){return i.show("sending","warning","AjaxQueueSending")},t.prototype.hideSending=function(){return i.hide("AjaxQueueSending")},t.prototype.showUploading=function(t){return i.show(t,"info","AjaxQueueUpload")},t.prototype.hideUploading=function(){return i.hide("AjaxQueueUpload")},t.prototype.ajax=function(t){var e,r,n,i,s,a;a=c.clone(t),this._stopped||(null==a.timeout&&(a.timeout=2e4),null==a.showSendingAfter&&(a.showSendingAfter=3e3),a.queueId=this._queueIdSeq++,a.headers={"X-Trello-ReqId":this.uniqueReqId()},a.oldSuccess=a.success,a.oldError=a.error,a.ourComplete=a.complete,delete a.complete,s=a.modelCache,delete a.modelCache,e=!1,n=!1,i=null!=s?s.lock("AjaxQueue.ajax"):void 0,a.success=function(){var t;return t=1<=arguments.length?h.call(arguments,0):[],o.hideSending(),o.hideUploading(),e=!0,o.success(this),"function"==typeof this.oldSuccess&&this.oldSuccess.apply(this,t),"function"==typeof this.ourComplete&&this.ourComplete(),null!=s?s.unlock(i):void 0},a.error=function(){var t,r,n,a,u,l;return t=1<=arguments.length?h.call(arguments,0):[],o.hideSending(),o.hideUploading(),e=!0,l=t[0],u=t[1],n=t[2],0===(a=l.status)||408===a||500===a?o.retryableError(this):(r=function(){return o._stopped=!0,o.showRealError.apply(o,t)},c.isFunction(this.oldError)?this.oldError.apply(this,h.call(t).concat([r])):r(),"function"==typeof this.ourComplete&&this.ourComplete(),null!=s?s.unlock(i):void 0)},/^post$/i.test(a.type)&&(r=function(t){return t.lengthComputable&&t.total>65536},a.xhr=function(t){return function(){var e,o;return o=new XMLHttpRequest,e=o.upload,null!=e&&(e.addEventListener("progress",function(e){var o;if(r(e))return n=!0,o=Math.round(100*e.loaded/e.total).toString()+"%",t.showUploading(["uploading",{percentString:o}])}),e.addEventListener("load",function(e){return n?t.showUploading("processing upload"):void 0})),o}}(this)),this.hasQueue()?o.addToQueue(a):(a.showSendingAfter>=0&&setTimeout(function(t){return function(){return e||n?void 0:o.showSending()}}(this),a.showSendingAfter),this.send(a)))},t.prototype.send=function(t){return n.ajax(t)},t}())},{}],178:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m=[].slice;n=t(177),o=t(22),i=t(5),u=t(99),s=t("bluebird"),a=t("promise-queue"),c=t(197),h=t("xtend"),p=new a(3),l=function(t){var e,r;return(null!=(e=null!=(r=t.type)?r:t.method)?e:"GET").toUpperCase()},d=function(t){var e;return null==t.data&&(t.data={}),"GET"!==l(t)&&(t.data.token=o.myToken()),null==(e=t.data).invitationTokens&&(e.invitationTokens=u.invitationTokens().join(",")),t.background?void n.send(t):(null==t.modelCache&&(t.modelCache=i.getCurrentModelCache()),void n.ajax(t))},e.exports=function(t,e){return p.add(function(){var e,r,n,o;return o=null!=(r=t.success)?r:function(){},e=null!=(n=t.error)?n:function(){},new s(function(r,n){t=h(t,{success:function(){var t;t=1<=arguments.length?m.call(arguments,0):[],o.apply(null,t),r(t)},error:function(){var t;t=1<=arguments.length?m.call(arguments,0):[],e.apply(null,t),n(t)}}),d(t)})}).nodeify(e).catch(function(){}).done()}},{}],179:[function(t,e,r){var n,o,i,s;i=t(77),o=t(57),s=t("xtend"),n=i("API",["Unauthorized","Unauthenticated","Unconfirmed","Timeout","NoResponse","NotFound","Server","BadRequest","Conflict","Other"]),n.fromResponse=function(t,e){var r;switch(null!=e?r=e.toLowerCase().trim():o(0===t,"Received a response without any content!"),t){case 0:return n.NoResponse();case 400:switch(r){case"invalid token":return n.Unauthenticated();default:return n.BadRequest(e)}break;case 401:switch(r){case"invalid token":return n.Unauthenticated();case"unauthorized permission requested":case"unauthorized organization.":case"unauthorized card permission requested":return n.Unauthorized(e);case"confirm to view":return n.Unconfirmed()}break;case 403:switch(r){case"user not logged in or invalid token.":return n.Unauthenticated();default:return n.Unauthorized(e)}break;case 404:return n.NotFound(e);case 408:return n.Timeout(e);case 409:return n.Conflict(e)}return t>=500&&600>t?n.Server(e):n.Other(t+": "+e)},e.exports=n},{}],180:[function(t,e,r){var n,o,i,s,a,u;n=t(178),i=t("bluebird"),u=t(197),s=t("underscore"),a=t(57),o=t(179),e.exports=function(t){return a(!("success"in t||"error"in t),"This is promise country!"),i.fromNode(u(n,t)).catch(function(t){var e;return e=t[0],i.reject(o.fromResponse(e.status,e.responseText))}).get(0)}},{}],181:[function(t,e,r){var n,o,i,s;i=t(77),o=t(57),s=t("xtend"),n=i("Http",["NoResponse","BadRequest","Unauthorized","Forbidden","NotFound","Timeout","Conflict","Precondition","Server","Other"]),n.fromResponse=function(t,e){switch(o(e||0===t,"Received a response without any content!"),t>=500&&600>t&&n.Server(e),t){case 0:return n.NoResponse();case 400:return n.BadRequest(e);case 401:return n.Unauthorized(e);case 403:return n.Forbidden(e);case 404:return n.NotFound(e);case 408:return n.Timeout(e);case 409:return n.Conflict(e);case 412:return n.Precondition(e);default:return n.Other(t+": "+e)}},e.exports=n},{}],182:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h;u=t("underscore"),d=t(77),p=t(216),s=t(212),a=t("bluebird"),h=t("xtend"),i=1e4,o=d("IFrameIO",["NotHandled","Timeout"]),l=null,c=function(){var t,e;if(null==l){if(e="iframe-io-host",l=document.createElement("div"),l.id=e,t=document.getElementsByTagName("body")[0],!t)throw Error("no body to host iframes");t.appendChild(l)}return l},e.exports=n=function(){function t(t,e){this.url=t,this.handlers=e}return t.Error=o,t.prototype._getIO=function(){return null!=this._io?this._io:this._io=new a(function(t){return function(e){var r,n,o;return r=document.createElement("iframe"),r.src=t.url,c().appendChild(r),o=s.randomId(64),n=new s({local:window,remote:r.contentWindow,targetOrigin:p(t.url).set("pathname","").href,secret:o,handlers:h(t.handlers,{initialize:function(){return{secret:o}},ready:function(){return e(n)}})})}}(this)).timeout(i).catch(a.TimeoutError,function(){throw o.Timeout("unable to initialize iframe-io in "+i+"ms")})},t.prototype.request=function(t,e,r){return this._getIO().then(function(n){return n.request(t,e).timeout(r).catch(a.TimeoutError,function(){throw o.Timeout(t+" did not complete in "+r+"ms")})}).catch(s.NotHandled,s.UnsupportedCommand,function(e){throw o.NotHandled("Request to run '"+t+"' failed due to error: '"+e.message+"'")})},t}()},{}],183:[function(t,e,r){var n,o,i=[].slice;n=t(22),o=t("underscore"),e.exports=function(t){var e,r,s;e=new FormData,e.append("token",n.myToken());for(r in t)s=t[r],o.isArray(s)?e.append.apply(e,[r].concat(i.call(s))):e.append(r,s);return{data:e,contentType:!1,processData:!1,timeout:216e5}}},{}],184:[function(t,e,r){var n,o,i,s,a,u,c,l,d=[].slice;n=t(180),o=t(15),s=t(170),i=t(16),u=t("bluebird"),c=function(t,e){return t instanceof s?i.getProductNumber(e):o.getProductNumber(e)},l=function(){var t,e;return t=arguments[0],e=2<=arguments.length?d.call(arguments,1):[],[t.urlRoot,t.id,"paidAccount"].concat(d.call(e)).join("/")},a=e.exports={changeProduct:function(t,e){var r;return r=c(t,e),n({url:l(t,"products"),type:"POST",data:{products:[r]}})},cancel:function(t){return n({url:l(t,"cancel"),type:"POST"})},renew:function(t){return a.changeProduct(t,t.get("paidAccount").products[0])},reactivate:function(t,e){var r;return r=c(t,e),n({url:l(t,"reactivate"),type:"POST",data:{products:[r]}})},createAccount:function(t,e){return n({url:l(t),data:e,type:"POST"})},changeCreditCard:function(t,e){return n({url:l(t,"creditCard"),data:e,type:"POST"})}}},{}],185:[function(t,e,r){var n,o,i,s,a,u,c,l,d;s=t(197),d=t(113),i=t("underscore"),o=t(186),e.exports=n={};for(a in o)if(l=o[a],i.isObject(l))n[a]={query:l};else{if(!i.isString(l))throw new Error("Implicit coupling fell over");n[a]=l}c=function(t,e){var r;return r=i.pluck(t,"id"),e.set("idBoards",r)},n.organizationBoardsPage.mappingRules={boards:c},n.memberActions=[n.boardActions,"updateMember"].join(","),n.boardFieldsUnread=["dateLastActivity","dateLastView"],n.boardFieldsMinimalMemberships=["name","closed","memberships"].join(","),n.organizationFieldsMinimalMemberships=[n.organizationFieldsMinimal,"memberships"],n.organizationFieldsMembersPage=[n.organizationBoardsFields,"memberships"].join(","),u=function(t,e){var r,n,o;return r=null!=(o=e.get("memberships"))?o:[],n=d(s.get("id"),r,t),e.set("memberships",n)},n.boardMinimal={query:{fields:n.boardFieldsMinimal,organization:!0,organization_fields:n.organizationFieldsMinimal,myPermLevel:!0,memberships:"me"},mappingRules:{memberships:u}},n.boardsMenuMinimal={query:{boards:"open,starred",board_fields:n.boardFieldsMinimal,boardStars:!0,organizations:"all",organization_fields:n.organizationFieldsMinimal,board_organization:!0,board_organization_fields:n.organizationFieldsMinimal,board_myPermLevel:!0,board_memberships:"me"},mappingRules:{memberships:u}},n.boardsMenu={query:{fields:"",board_fields:n.boardFieldsMinimal,organizations:"all",organization_fields:n.organizationFieldsMinimal,board_organization:!0,board_organization_fields:n.organizationFieldsMinimal,paid_account:!0}},n.memberUnreadBoards={query:{fields:"",boards:"open,starred",board_fields:n.boardFieldsUnread}},n.boardUnread={query:{fields:n.boardFieldsUnread}},n.cardDetails={query:{actions:n.cardActions,actions_display:!0,action_memberCreator_fields:n.memberFieldsAndPremOrgsAdmin,members:!0,member_fields:n.memberFieldsStatus,attachments:!0,fields:"email",checklists:"all",list:!0}},n.cardMinimal={query:{fields:n.cardFieldsBulk}},n.cardVoters={query:{fields:"idMembersVoted",membersVoted:!0}},n.cardCopy={query:{members:!0,member_fields:n.memberFieldsStatus,attachments:!0,stickers:!0,fields:"name",checklists:"all"}},n.cardList={query:{fields:"all"}},n.memberAccount={query:{tokens:"all",sessions:"all",credentials:"all",paid_account:!0,credits:"invitation,promoCode",organizations:"all",organization_paid_account:!0,logins:!0}},n.memberPaidAccount={query:{paid_account:!0}},n.orgMemberCards={query:{board:!0,list:!0,fields:"badges,closed,due,idAttachmentCover,idList,idBoard,idMembers,idShort,labels,name,url",attachments:"true",members:"true",stickers:"all",member_fields:n.memberFields}},n.memberCards={query:{boards:"open",board_fields:"name,closed,idOrganization,prefs",board_lists:"open",board_memberships:"me",cards:"visible",card_fields:[n.cardFieldsBulk,"labels"].join(","),card_attachments:"true",card_stickers:!0,card_members:"true",card_member_fields:n.memberFields,organizations:"all",organization_fields:"displayName,name,prefs,products",organization_memberships:"me",organization_paid_account:!0,paid_account:!0},mappingRules:{memberships:u}},n.memberMinimal={query:{fields:n.memberFields}},n.memberProfile={query:{actions:"all",actions_limit:10,actions_display:!0,organizations:"all",organization_fields:n.organizationFieldsMinimal,organization_paid_account:!0,boards:"open",board_fields:"name,prefs,idOrganization",paid_account:!0}},n.memberProfile_daysBack=30,n.organization={query:{boards:"open",board_fields:n.boardFieldsMinimal,fields:"all",members:"all",member_fields:n.memberFieldsStatus,membersInvited:"all",membersInvited_fields:n.memberFields,paid_account:!0},mappingRules:{boards:c}},n.organizationExports={query:{exports:!0,fields:"all",paid_account:!0}},n.organizationPaidAccount={query:{paid_account:!0}},n.organizationMembers={query:{fields:n.organizationFieldsMembersPage,members:"all",member_fields:n.memberFieldsStatus,membersInvited:"all",membersInvited_fields:n.memberFields,paid_account:!0}},n.organizationMembersExtra={query:{members:"all",member_activity:!0,boards:"open",board_fields:n.boardFieldsMinimalMemberships},mappingRules:{boards:c}},n.organizationMembersMinimal={query:{members:"all",fields:n.organizationFieldsMinimalMemberships}},n.organizationMinimal={query:{fields:"all"}},n.memberNotifications={query:{notifications:"all",notifications_limit:10,notifications_display:!0}},n.organizations={query:{organizations:"all",organization_paid_account:!0}},n.idCard={query:{fields:"",checkItemStates:!1}},n.cardsAndListsMinimal={query:{lists:"open",list_fields:"name,pos,idBoard",cards:"visible",card_fields:"idList,idBoard,pos"}},n.listsMinimal={query:{lists:"open",list_fields:"name,pos,idBoard"}},n.listMinimal={query:{fields:"name,pos,idBoard,closed"}},n.archivedLists={query:{lists:"closed",list_fields:"name,pos,idBoard,closed"}},n.boardPluginData={query:{fields:"",pluginData:!0}},n.organizationPluginData={query:{fields:"",pluginData:!0}}},{}],186:[function(t,e,r){var n;e.exports=n={},n.boardFieldsMinimal=["name","closed","dateLastActivity","dateLastView","idOrganization","prefs","shortLink","shortUrl","url"].join(","),n.boardFieldsFull=[n.boardFieldsMinimal,"desc","descData","invitations","invited","labelNames","memberships","pinned","powerUps","subscribed"].join(","),n.boardFieldsMinimalSubscribed=[n.boardFieldsMinimal,"subscribed"].join(","),n.memberFields=["fullName","initials","memberType","username","avatarHash","bio","bioData","confirmed","products","url"].join(","),n.memberFieldsStatus=[n.memberFields,"status"].join(","),n.memberFieldsAndPremOrgsAdmin=[n.memberFields,"idPremOrgsAdmin"].join(","),n.organizationFieldsMinimal=["name","displayName","products","prefs","logoHash"].join(","),n.cardFieldsBulk=["badges","closed","dateLastActivity","desc","descData","due","idAttachmentCover","idList","idBoard","idMembers","idShort","idLabels","name","pos","shortUrl","shortLink","subscribed","url"].join(","),n.boardFieldsInOrganization=[n.boardFieldsMinimal,"idTags"].join(","),n.organizationBoardsFields=[n.organizationFieldsMinimal,"desc","descData","website"].join(","),n.cardActions=["addAttachmentToCard","addChecklistToCard","addMemberToCard","commentCard","copyCommentCard","convertToCardFromCheckItem","createCard","copyCard","deleteAttachmentFromCard","emailCard","moveCardFromBoard","moveCardToBoard","removeChecklistFromCard","removeMemberFromCard","updateCard:idList","updateCard:closed","updateCheckItemStateOnCard"].join(","),n.boardActions=[n.cardActions,"addMemberToBoard","addToOrganizationBoard","copyBoard","createBoard","createList","deleteCard","disablePlugin","disablePowerUp","enablePlugin","enablePowerUp","makeAdminOfBoard","makeNormalMemberOfBoard","makeObserverOfBoard","moveListFromBoard","moveListToBoard","removeFromOrganizationBoard","unconfirmedBoardInvitation","unconfirmedOrganizationInvitation","updateBoard","updateList:closed"].join(","),n.card={fields:"all",stickers:!0,attachments:!0},n.currentBoardMinimal={lists:"open",cards:"visible",card_attachments:"cover",card_stickers:!0,card_fields:[n.cardFieldsBulk,"labels"].join(","),card_checklists:"none",members:"all",member_fields:n.memberFieldsStatus,membersInvited:"all",membersInvited_fields:n.memberFields,checklists:"none",organization:!0,organization_fields:"name,displayName,desc,descData,url,website,prefs,memberships,logoHash,products",myPrefs:!0,fields:n.boardFieldsFull},n.currentBoardSecondary={fields:"",actions:n.boardActions,actions_display:!0,actions_limit:50,action_memberCreator_fields:n.memberFieldsAndPremOrgsAdmin,checklists:"none",cards:"visible",card_attachments:!0,card_fields:"",card_checklists:"all",labels:"all",labels_limit:1e3,organization:!0,organization_fields:"",organization_pluginData:!0,boardPlugins:!0,pluginData:!0},n.memberBoards={boards:"open,starred",board_fields:n.boardFieldsMinimalSubscribed,boardStars:!0,boardsInvited:"all",boardsInvited_fields:n.boardFieldsMinimalSubscribed,board_organization:!0,board_organization_fields:n.organizationFieldsMinimal,credits:"invitation,promoCode",organizations:"all",organization_fields:n.organizationFieldsMinimal,organizationsInvited:"all",organizationsInvited_fields:n.organizationFieldsMinimal,paid_account:!0},n.memberHeader={channels:!0,notifications:"all",notifications_limit:10,notifications_display:!0,notification_memberCreator_fields:n.memberFields,organizations:"all",organization_paid_account:!0,organization_fields:"name,displayName",paid_account:!0,savedSearches:!0},n.organizationBoardsPage={boards:"open",board_fields:n.boardFieldsInOrganization,board_starCounts:"organization",board_membershipCounts:"active",fields:n.organizationBoardsFields,paid_account:!0,memberships:"active",members:"all",tags:!0}},{}],187:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y=[].slice;o=t(179),i=t(22),s=t(193),a=t(188),u=t(28),c=t(5),l=t(82),d=t("bluebird"),h=t("underscore"),f=t(31),m=t(197),g=t(77),p=g("RPC",["SyncError","BatchError"]),v=function(t){
try{return JSON.parse(t)}catch(t){return null}},e.exports=n=function(){function t(t){for(this.delegate=t,this.idBoardToPoll=null,this.modelIxUpdate={},this.msPoll=2e3,this.msPollIdle=1e4,this.ajaxSessionId=Math.random().toString().substring(2);this.ajaxSessionId.length<16;)this.ajaxSessionId+="0";this.failures=0,this.failuresAllowed=1e3}return h.extend(t.prototype,s.Events),t.prototype.subscribe=function(t,e,r,n){return"function"==typeof n?n():void 0},t.prototype.unsubscribe=function(t,e,r){return"function"==typeof r?r():void 0},t.prototype.resync=function(){},t.prototype._getPollLength=function(){return i.isLoggedIn()&&"active"===l.getStatus()?this.msPoll:this.msPollIdle},t.prototype.stopPolling=function(){return null!=this._pollingTimeout?(clearTimeout(this._pollingTimeout),delete this._pollingTimeout):void 0},t.prototype.poll=function(){return this._pollingTimeout=setTimeout(function(t){return function(){return t.failures>=t.failuresAllowed?void t.trigger("connect_failed"):t.doPoll(function(e){if(null!=e){if("syncError"===e)return;t.trigger("connecting"),++t.failures}else t.failures>0&&t.trigger("reconnect"),t.failures=0;return t.poll()})}}(this),this._getPollLength())},t.prototype.doPoll=function(){var t,e,r,n,o,i,s,a,u,c,l;if(t=2<=arguments.length?y.call(arguments,0,e=arguments.length-1):(e=0,[]),a=arguments[e++],n=t[0],s=t[1],l=[],null==s&&(s=this),h.isArray(n))for(o=0,i=n.length;i>o;o++)r=n[o],l.push(this.delegate.currentSubscriptions[r]);else{if(null!=n)return void f("rpc","Bad argument to doPoll: "+n);u=this.delegate.currentSubscriptions;for(r in u)c=u[r],l.push(c)}return h.isEmpty(l)?(f("rpc","No models to poll for "+n),"function"==typeof a?a():void 0):this._doPoll(l,s,a)},t.prototype._doPoll=function(t,e,r){var n,i;return i=new a,n=t.map(function(t){return function(r){var n,s,a,u,c;return a=r.modelType,n=r.idModel,s=r.ixLastUpdate,u=r.tags,c="/"+a+"/"+n+"/deltas?ixLastUpdate="+encodeURIComponent(s.toString())+"&tags="+encodeURIComponent(u.join(",")),i.request(c).tap(function(r){var o;return null!=r.syncError?d.reject(p.SyncError()):(t.delegate.setIxLastUpdate(n,r.modelIxUpdate[n]),void h.chain(null!=(o=r.messages)?o:[]).map(v).compact().forEach(function(t){var r,n;n=t.notify,r=t.idModelChannel,e.trigger(n.event,h.extend({idModelChannel:r},n))}))}).catch(o,function(){})}}(this)),d.all(n).catch(p.SyncError,function(t){return function(){return c.syncError(),t.stopPolling()}}(this)).catch(a.BatchFailure,function(){}).done(),i.send().tap(function(t){var e;return e=t.jqxhr,u.setServerVersionFromResponse(e)}).catch(a.BatchFailure,function(t){var e,r;return r=t.message,e=t.error,d.reject(p.BatchError(r,{error:e}))}).nodeify(r).done()},t}()},{}],188:[function(t,e,r){var n,o,i,s,a,u,c,l;n=t("jquery"),o=t(179),c=t(205),l=t(197),u=t(57),s=t("bluebird"),a=t("underscore"),e.exports=i=function(){function t(){this._requests=[]}return t.BatchFailure=c("Batcher::BatchFailure"),t.prototype._sent=!1,t.prototype.request=function(t){return u(!this._sent,"Cannot add requests to a batcher after sending!"),new s(function(e){return function(r,n){return e._requests.push({url:t,resolve:r,reject:n})}}(this))},t.prototype.send=function(){var e;return u(!this._sent,"Cannot send more than once!"),this._sent=!0,e=this._requests.map(l.get("url")).join(","),new s(function(r){return function(i,s){return n.ajax({data:{urls:e},url:"/1/batch",success:function(t,e,n){var s,u,c,l,d,p,h,m;for(c=a.zip(t,r._requests),s=0,u=c.length;u>s;s++)l=c[s],m=l[0],d=l[1],h=d.resolve,p=d.reject,"200"in m?h(m[200]):p(o.fromResponse(m.statusCode,m.message));return i({jqxhr:n})},error:function(e){var n,i,a,u,c,l,d;for(d=e.status,l=e.responseText,n=o.fromResponse(d,l),u=r._requests,i=0,a=u.length;a>i;i++)(c=u[i].reject)(t.BatchFailure("",{error:n}));return s(n)}})}}(this))},t}()},{}],189:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h=[].slice;n=t(187),o=t(22),i=t(193),a=t(192),u=t(190),c=t(88),l=t("underscore"),d=t(31),p=t(34),window.dropTheHammer=function(){return c.set("useWebsockets","yes"),"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log("Websockets engaged! Reload the page, please. Use pitStop() to turn sockets off."):void 0},window.pitStop=function(){return c.set("useWebsockets","no"),"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log("Shutting Websockets down! Reload the page, please. Use dropTheHammer() to turn sockets back on."):void 0},s=function(){function t(){this.rpcSocket=this.rpcAJAX=this.rpcCurrent=null,this.currentSubscriptions={},this.fReadyToSubscribe=!1,this.deferredQueue=[],this.handleLogin()}return l.extend(t.prototype,i.Events),t.prototype.rpcReady=function(){var t,e,r,n;for(this.fReadyToSubscribe=!0,this.isUsingSocket()||this.rpcCurrent.poll(),this.trigger("ready"),n=this.deferredQueue,e=0,r=n.length;r>e;e++)(t=n[e])();return this.listenTo(this,"reconnect",function(t){return function(){return t.resubscribe()}}(this))},t.prototype.resubscribe=function(){var t,e,r,n;this.rpcCurrent.resync(),e=this.currentSubscriptions,r=[];for(t in e)n=e[t],r.push(this.subscribe(n.modelType,t,n.tags));return r},t.prototype.setActiveRPC=function(t){this.stopListening(this.rpcCurrent),this.rpcCurrent=t,this.listenTo(this.rpcCurrent,"all",function(t){return function(){var e;return e=1<=arguments.length?h.call(arguments,0):[],t.trigger.apply(t,e)}}(this))},t.prototype.lazyCreateRPC=function(){var t,e,r;if(!this.rpcCurrent){if(this.rpcSocket=new u(this),this.rpcAJAX=new n(this),this.setActiveRPC(this.rpcAJAX),t=function(){return null!=("undefined"!=typeof performance&&null!==performance?performance.now:void 0)?performance.now():+new Date},this.rpcSocket.hasSocketTransport()){if(this.rpcSocket.connectedOnce)return;return r=t(),e=8e3,setTimeout(function(t){return function(){return t.fReadyToSubscribe?void 0:(d("rpc","Socket not responsive. Using AJAX."),t.rpcSocket.disconnect(),t.rpcReady())}}(this),e),this.rpcSocket.ping(function(e){return function(n,o){e.fReadyToSubscribe?(e.rpcSocket.disconnect(),p("RPC","No Sockets","Slow ping",t()-r)):(d("rpc","Socket responded to ping in a timely fashion. Using sockets."),e.setActiveRPC(e.rpcSocket),e.rpcReady())}}(this))}return d("rpc","No socket connect. Using AJAX."),this.rpcReady()}},t.prototype.handleLogin=function(){return o.isLoggedIn()?this.lazyCreateRPC():void 0},t.prototype.unsubscribe=function(t,e){return this.lazyCreateRPC(),this.rpcCurrent.unsubscribe(t,e),delete this.currentSubscriptions[e]},t.prototype.subscribe=function(t,e,r){var n;return this.lazyCreateRPC(),null!=(n=this.currentSubscriptions[e])?n[r]=l.union(n[r],r):this.currentSubscriptions[e]={tags:r,ixLastUpdate:-1,modelType:t,idModel:e},this.fReadyToSubscribe?this.rpcCurrent.subscribe(t,e,r):(d("rpc","deferring subscribe to "+t+" "+e),void this.deferredQueue.push(function(n){return function(){return n.rpcCurrent.subscribe(t,e,r)}}(this)))},t.prototype.getIxLastUpdate=function(t){return this.currentSubscriptions[t].ixLastUpdate},t.prototype.setIxLastUpdate=function(t,e){var r;return null!=(r=this.currentSubscriptions[t])?r.ixLastUpdate=e:void 0},t.prototype.resync=function(){var t,e;return e=1<=arguments.length?h.call(arguments,0):[],this.lazyCreateRPC(),"function"==typeof(t=this.rpcCurrent).resync?t.resync.apply(t,e):void 0},t.prototype.isUsingSocket=function(){return null!=this.rpcCurrent&&this.rpcCurrent===this.rpcSocket},t}(),e.exports=window.rpc=new s},{}],190:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m=[].slice;n=t(22),o=t(193),i=t(28),s=t(82),a=t(192),c=t(88),l=t(99),d=t("underscore"),p=t(31),h=t(34),e.exports=u=function(){function t(t){var e,r,o,i,u,d,m,f,g,v;if(this.delegate=t,this.reqid=0,this.dictCallback={},this.dictTime={},this.connectedOnce=!1,this.modelIxUpdate={},this.hasSockets="WebSocket"in window&&"no"!==c.get("useWebsockets"),"WebSocket"in window?"no"===c.get("useWebsockets")&&h("RPC","No Sockets","pitStop"):h("RPC","No Sockets","No WebSocket"),this.hasSockets){for(p("rpc","opening newSocket"),m="http:"===document.location.protocol?"ws:":"wss:",this.socket=new a(m+"//"+document.location.host+"/1/Session/socket?token="+n.myToken(),{maxReconnectDelay:32e3,maxReconnectAttempts:100,fxReconnectDelay:function(t){var e,r,n,o;if(o=s.getStatus(),n="active"===o?l.randomWait(l.getMs({seconds:10}),l.getMs({seconds:30})):l.randomWait(l.getMs({seconds:30}),l.getMs({minutes:2})),e="active"===o?l.randomWait(100,l.getMs({seconds:1})):l.randomWait(l.getMs({seconds:2}),l.getMs({seconds:10})),null==t||1006===t.code)return n;if(4e3===t.code){try{r=parseInt(t.reason,0)}catch(t){}return"active"===o?l.randomWait(l.getMs({seconds:r}),4*l.getMs({seconds:r})):l.randomWait(4*l.getMs({seconds:r}),4*l.getMs({seconds:r})*4)}return e}}),f=["connect","reconnect","connecting","reconnecting","disconnect","connect_failed","reconnect_failed","error"],e=function(t){return function(e){return t.socket.on(e,function(t){return p("rpc","socket event",e,t)})}}(this),o=0,u=f.length;u>o;o++)v=f[o],e(v);for(g=["connecting","reconnecting"],r=function(t){return function(e){return t.socket.on(e,function(){return p("rpc","connecting"),t.trigger("connecting")})}}(this),i=0,d=g.length;d>i;i++)v=g[i],r(v);this.socket.on("connect_failed",function(t){return function(){return p("rpc","connect_failed"),t.trigger("connect_failed")}}(this)),this.socket.on("reconnect_failed",function(t){return function(){return p("rpc","reconnect_failed"),t.trigger("reconnect_failed")}}(this)),this.socket.on("connect",function(t){return function(){return p("rpc","connect"),t.trigger("connect"),t.connectedOnce=!0}}(this)),this.socket.on("reconnect",function(t){return function(){return p("rpc","reconnect"),clearTimeout(t.timeoutInvokeResponse),delete t.timeoutInvokeResponse,t.trigger("reconnect")}}(this)),this.socket.on("disconnect",function(t){return function(e){return p("rpc","disconnect",e),clearTimeout(t.timeoutInvokeResponse),delete t.timeoutInvokeResponse}}(this)),this.socket.on("error",function(t){return function(){var e,r;return t.connectedOnce&&!(null!=(e=t.socket)&&null!=(r=e.socket)?r.connected:void 0)?t.trigger("disconnect"):void 0}}(this)),this.socket.on("data",function(t){return function(e){return t._messageHandler(e)}}(this))}}return d.extend(t.prototype,o.Events),t.prototype._messageHandler=function(t){var e,r,n;return p("rpc","message",t),clearTimeout(this.timeoutInvokeResponse),delete this.timeoutInvokeResponse,(null!=t?t.version:void 0)?void i.setServerVersion(t):(null!=t.reqid&&(r=this.dictCallback["fx"+t.reqid]),null!=t.result?"function"==typeof r&&r(null,t.result):(null!=(n=t.notify)?n.event:void 0)?(null!=t.idModelChannel&&this.delegate.setIxLastUpdate(t.idModelChannel,t.ixLastUpdateChannel),this.trigger(t.notify.event,d.extend({idModelChannel:t.idModelChannel},t.notify))):t.error?"function"==typeof r&&r(t.error):p("rpc","unrecognized message",t),void(t.reqid&&(e=new Date-this.dictTime[t.reqid],p("timing","message",t.reqid,"time",e),delete this.dictCallback["fx"+t.reqid],delete this.dictTime[t.reqid])))},t.prototype.subscribe=function(t,e,r,n){return this.send({type:"subscribe",modelType:t,idModel:e,tags:r,invitationTokens:l.invitationTokens()},function(t){return function(r,o){return null!=r?p("rpc",r):t.delegate.setIxLastUpdate(e,o),"function"==typeof n?n(r,o):void 0}}(this))},t.prototype.unsubscribe=function(t,e,r){return this.send({type:"unsubscribe",modelType:t,idModel:e},function(t){return function(t,e){return null!=t&&p("rpc",t),"function"==typeof r?r(t,e):void 0}}(this))},t.prototype.ping=function(t){return this.send({type:"ping"},function(e){return function(e,r){return null!=e&&p("rpc",e),"function"==typeof t?t(e,r):void 0}}(this))},t.prototype._getSubscriptions=function(){return this.send({type:"getSubscriptions"},function(t){return function(t,e){return null!=e?p("rpc",e):void 0}}(this))},t.prototype.send=function(t,e){var r;this.dictCallback["fx"+this.reqid]=e,this.dictTime[this.reqid]=new Date,t.reqid=this.reqid++,r=JSON.stringify(t),p("rpc","invoke: "+r),this.socket.send(r),null==this.timeoutInvokeResponse&&(this.timeoutInvokeResponse=setTimeout(function(t){return function(){var e;if(t.socket.state===a.CONNECTED)return p("rpc","No response from the socket.io server in 10 seconds. Disconnecting."),clearTimeout(t.timeoutInvokeResponse),delete t.timeoutInvokeResponse,null!=(e=t.socket)?e.disconnect():void 0}}(this),1e4))},t.prototype.resync=function(){var t;return t=1<=arguments.length?m.call(arguments,0):[],d.isEmpty(t)&&(t=null),this.delegate.rpcAJAX.doPoll(t,this,function(){})},t.prototype.disconnect=function(){p("rpc","disconnecting"),this.socket.disconnect()},t.prototype.hasSocketTransport=function(){return this.hasSockets},t}()},{}],191:[function(t,e,r){var n,o,i,s,a,u;n=t("jquery"),o=t(22),i=t(5),a=t(99),u=t(189),e.exports=s={start:function(){return u.on("ready",function(t){return function(){return n(window).on("beforeunload",function(){t.markCurrentBoardAsViewed()})}}(this)),u.on("updateModels deleteModels",function(t){return function(e){var r,n;r=e.idModelChannel,null!=r&&r===(null!=(n=i.getCurrentBoard())?n.id:void 0)&&t.scheduleMarkCurrentBoardAsViewed()}}(this))},markCurrentBoardAsViewed:function(){var t;return clearTimeout(this._markAsViewedTimeout),null!=(t=i.getCurrentBoard())?t.markAsViewed():void 0},scheduleMarkCurrentBoardAsViewed:function(){return clearTimeout(this._markAsViewedTimeout),this._markAsViewedTimeout=setTimeout(function(t){return function(){return t.markCurrentBoardAsViewed()}}(this),a.getMs({minutes:5}))}}},{}],192:[function(t,e,r){var n,o,i,s,a,u,c=[].slice;n=t(193),i=t(99),s=t("underscore"),a=t(31),u=["close","error","message","open"],e.exports=o=function(){function t(t,e){var r,o,a,c;for(this.url=t,c=null!=e?e:{},this.fxReconnectDelay=c.fxReconnectDelay,this.maxReconnectDelay=c.maxReconnectDelay,this.maxReconnectAttempts=c.maxReconnectAttempts,s.extend(this,n.Events),this.ws=null,this.resetRetries(),o=0,a=u.length;a>o;o++)r=u[o],this.listenTo(this,r,this["on"+i.capitalize(r)]);return"WebSocket"in window?(this.connect(),this.buffer=[],this.connectedOnce=!1,void this.trigger("connecting")):void this.trigger("connect_failed")}return t.CONNECTING="connecting",t.CONNECTED="connected",t.WAITING_TO_RECONNECT="waiting to reconnect",t.RECONNECTING="reconnecting",t.CLOSED="closed",t.PING_TIMEOUT=3e4,t.prototype.resetRetries=function(){return this.attempts=0},t.prototype._clearPingTimeout=function(){return null!=this._pingTimeout&&clearTimeout(this._pingTimeout),this._pingTimeout=null},t.prototype._resetPingTimeout=function(){return this._clearPingTimeout(),this._pingTimeout=setTimeout(this._noPing.bind(this),t.PING_TIMEOUT)},t.prototype._noPing=function(){return!this.state!==t.CONNECTED?this.disconnect():void 0},t.prototype.connect=function(){var e,r,n,o,i,s;if(null!=this.ws)for(n=0,i=u.length;i>n;n++)e=u[n],this.ws["on"+e]=null;for(this.ws=new WebSocket(this.url),r=function(t){return function(e){return t.ws["on"+e]=function(){return t.trigger.apply(t,[e].concat(c.call(arguments)))}}}(this),o=0,s=u.length;s>o;o++)e=u[o],r(e);return this.state=t.CONNECTING},t.prototype.onOpen=function(e){return this.connectedOnce?this.trigger("reconnect"):this.trigger("connect"),this.connectedOnce=!0,this.state=t.CONNECTED,this.flushBuffer(),this.resetRetries()},t.prototype._triggerFailures=function(){return this.state===t.CONNECTING?this.trigger("connect_failed"):void 0},t.prototype.onClose=function(e){var r,n;return this.trigger("disconnect",null!=(n=null!=e?e.reason:void 0)?n:""),r="booted"===(null!=e?e.reason:void 0)||1006===(null!=e?e.code:void 0)&&this.state===t.CONNECTED,this._triggerFailures(),this._clearPingTimeout(),this.reconnect(e)},t.prototype.onError=function(t){return this._triggerFailures(),this.disconnect(),this.reconnect()},t.prototype.onMessage=function(t){var e;if(this._resetPingTimeout(),""===t.data)return a("socket","responding to ping"),void this.ws.send("");try{e=JSON.parse(t.data)}catch(t){}return this.trigger("data",e)},t.prototype.reconnect=function(e){switch(this.state){case t.CONNECTED:this.ws.close();break;case t.RECONNECTING:case t.WAITING_TO_RECONNECT:return}return this.attempts>=this.maxReconnectAttempts?(this.trigger("reconnect_failed"),void(this.state=t.CLOSED)):(this.state=t.WAITING_TO_RECONNECT,0===this.attempts&&(this.currentReconnectDelay=this.fxReconnectDelay(e)),a("socket","attempting reconnect in "+this.currentReconnectDelay+"ms"),this._reconnectTimer=setTimeout(function(e){return function(){return e._reconnectTimer=null,e.connect(),e.state=t.RECONNECTING,e.trigger("reconnecting")}}(this),this.currentReconnectDelay),this.attempts++,this.currentReconnectDelay=Math.min(2*this.currentReconnectDelay,this.maxReconnectDelay))},t.prototype.disconnect=function(){var e;switch(this._clearPingTimeout(),e=this.state,this.state=t.CLOSED,e){case t.CONNECTED:case t.CONNECTING:case t.RECONNECTING:return this.ws.close(),this.onClose();case t.WAITING_TO_RECONNECT:return clearTimeout(this._reconnectTimer)}},t.prototype.send=function(e){if(this.state!==t.CONNECTED)return this.buffer.push(e);try{return this.ws.send(e)}catch(t){return this.buffer.push(e),this.onError()}},t.prototype.flushBuffer=function(){var t,e,r,n,o;for(t=this.buffer,this.buffer=[],o=[],r=0,n=t.length;n>r;r++)e=t[r],o.push(this.send(e));return o},t}()},{}],193:[function(t,e,r){var n,o,i,s;i=t(796),o=t(22),s=t("underscore"),n=t("jquery"),i.$=n,i.$=t("jquery"),i.prepareData=function(t,e,r){var i,a,u;return null==r&&(r={}),u={token:o.myToken()},a=function(){switch(t){case"create":case"update":return i=null!=r.requestData?s.clone(r.requestData):null!=r.createData?s.extend({},e.toJSON(),r.createData):s.clone(e.toJSON()),s.extend(i,u);case"delete":return u;default:return{}}}(),"read"===t&&s.isArray(r.fields)&&(a.fields=r.fields.join(",")),"read"===t?n.param(a):JSON.stringify(a)},i.syncOriginal=i.sync,i.sync=function(t,e,r){var n,o,a;switch(t){case"update":return null!=r&&"function"==typeof r.success?r.success(e,{},r):void 0;case"create":r.wait||(n=e.modelCache.lock("Backbone.sync create"),o=s.once(function(){return e.modelCache.unlock(n)}),a=function(t){return function(){return"function"==typeof t&&t.apply(null,arguments),o()}},setTimeout(a(),1e4),r.success=a(r.success),r.error=a(r.error));break;case"delete":if(/^placeholder/.test(e.id))return}return i.syncOriginal.apply(i,arguments)},e.exports=i},{}],194:[function(t,e,r){var n,o={}.hasOwnProperty;n=function(t){return function(e){switch(arguments.length){case 0:throw new Error("Operators can't be invoked with no arguments");case 1:return function(r){if(0===arguments.length)throw new Error("Partially applied binary operator can't be invoked with no arguments");return t.call(this,r,e)};default:return t.apply(null,arguments)}}},e.exports=function(t){var e,r,i;r={};for(e in t)o.call(t,e)&&(i=t[e],r[e]=n(i));return r}},{}],195:[function(t,e,r){var n,o,i=[].slice;o=t(204),n=function(t,e){return"function"==typeof t&&(e=t,t=e.length),function(){return arguments.length<t?n(t-arguments.length,o.apply(null,[e].concat(i.call(arguments)))):e.apply(this,arguments)}},e.exports=n},{}],196:[function(t,e,r){var n,o,i=[].slice;n=t(204),o=t(202),e.exports={noop:n(),id:function(t){return t},choke:function(){var t,e,r;return r=arguments[0],e=2<=arguments.length?i.call(arguments,1):[],t=n.apply(null,e),function(){var e;return e=1<=arguments.length?i.call(arguments,0):[],t.apply(this,e.slice(0,r))}},concat:function(){var t;return t=1<=arguments.length?i.call(arguments,0):[],function(){var e,r,n,o;for(r=void 0,n=0,o=t.length;o>n;n++)e=t[n],r=e.apply(this,arguments);return r}},compose:function(t,e){return function(){return t.call(this,e.apply(this,arguments))}},unpack:function(t){return function(e){return t.apply(this,e)}},invoke:function(){var t,e;return e=arguments[0],t=2<=arguments.length?i.call(arguments,1):[],e.apply(this,t)},guard:function(t,e,r){return function(){return e.apply(this,arguments)?t.apply(this,arguments):r}},const:function(t){return function(){return t}},once:function(t,e){return null==e&&(e="Function called more than once!"),o({first:t,after:function(){throw new Error(e)}})}}},{}],197:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h={}.hasOwnProperty;for(o=t(204),u=[t(199),t(198),t(200),t(203),t(196)],d=0,p=u.length;p>d;d++){a=u[d];for(i in a)h.call(a,i)&&(l=a[i],o[i]=l)}o.overloaded=t(201),o.curried=t(195),o.prime=t(202),n={sub:"subtract",mult:"multiply",div:"divide",idiv:"intDivide",mod:"modulo",neg:"negate",rem:"remainder",comp:"compose",dot:"get"};for(s in n)h.call(n,s)&&(c=n[s],o[s]=o[c]);e.exports=o},{}],198:[function(t,e,r){var n;n=t(194),e.exports=n({and:function(t,e){return t&&e},or:function(t,e){return t||e}}),e.exports.not=function(t){return!t}},{}],199:[function(t,e,r){var n;n=t(194),e.exports=n({add:function(t,e){return t+e},subtract:function(t,e){return t-e},multiply:function(t,e){return t*e},divide:function(t,e){return t/e},intDivide:function(t,e){return Math.floor(t/e)},modulo:function(t,e){return(t%e+e)%e},remainder:function(t,e){return t%e}}),e.exports.negate=function(t){return-t}},{}],200:[function(t,e,r){var n,o=[].slice;n=t(195),e.exports={get:n(function(t,e){return e[t]}),lookup:n(function(t,e){return t[e]}),set:n(function(t,e,r){return e[t]=r}),method:function(){var t,e;return e=arguments[0],t=2<=arguments.length?o.call(arguments,1):[],function(){var r,n;return n=arguments[0],r=2<=arguments.length?o.call(arguments,1):[],0===r.length?n[e].apply(n,t):n[e].apply(n,o.call(t).concat(o.call(r)))}}}},{}],201:[function(t,e,r){var n,o={}.hasOwnProperty;n=function(t,e){var r;return r=t.filter(function(t){return e>=t}),0===r.length?null:Math.max.apply(null,r)},e.exports=function(t){var e,r,i,s,a;if(1!==arguments.length)throw new Error("overloaded is not overloaded!");if(r={},s=function(){var n;n=[];for(e in t)if(o.call(t,e)){if(a=t[e],i=Number(e),""===e||isNaN(i))throw new Error("non-numeric key "+e);r[i]=a,n.push(i)}return n}(),0===s.length)throw new Error("you must pass at least one overload!");return function(){var t,e,o;return e=arguments.length,t=null!=(o=r[e])?o:function(){if(e=n(s,e),null===e)throw new Error("function not overloaded to accept "+arguments.length+" arguments");return r[e]}(),t.apply(this,arguments)}}},{}],202:[function(t,e,r){var n,o,i=[].slice;n=t(204),o=function(){var t,e,r,n,o,s,a;for(e=arguments[0],t=arguments[1],n=3<=arguments.length?i.call(arguments,2):[],o=void 0,s=0,a=n.length;a>s;s++)r=n[s],null!=r&&(o=r.apply(e,t));return o},e.exports=function(t){var e,r,n,i,s,a;return s=t.first,e=t.after,n=t.beforeBoth,r=t.afterBoth,i=t.both,r=null!=r?r:i,a=!0,function(){return o(this,arguments,n,a?(a=!1,s):e,r)}}},{}],203:[function(t,e,r){var n;n=t(194),e.exports=n({gt:function(t,e){return t>e},gte:function(t,e){return t>=e},lt:function(t,e){return e>t},lte:function(t,e){return e>=t},eq:function(t,e){return t===e},neq:function(t,e){return t!==e}})},{}],204:[function(t,e,r){var n,o,i,s,a,u,c=[].slice;s=function(){},n=null!=(u=Array.isArray)?u:function(t){return"[object Array]"===Object.prototype.toString.call(t)},o=function(t){return"function"==typeof t},i=function(t){return"string"==typeof t},a=function(){var t,e,r,n,a;return r=1<=arguments.length?c.call(arguments,0):[],0===r.length?s:null==r[0]?s:"function"==typeof r[0]?(e=r[0],t=2<=r.length?c.call(r,1):[],0===t.length?e:function(){return e.call.apply(e,[this].concat(c.call(t),c.call(arguments)))}):(a=r[0],n=r[1],t=3<=r.length?c.call(r,2):[],e=function(){if(i(n))return a[n];if(o(n))return n;throw new Error("The [target, method, args...] functionoid requires a string or a function as the method")}(),function(){return e.call.apply(e,[a].concat(c.call(t),c.call(arguments)))})},e.exports=a},{}],205:[function(t,e,r){var n=Object.prototype.hasOwnProperty,o=function(t,e){function r(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype},i=function(t){return function(e){for(var r=Array.prototype.slice.call(arguments,1),o=0;o<r.length;o++){var i=r[o];for(var s in i)n.call(i,s)&&t(e,s,i)&&(e[s]=i[s])}return e}},s=i(function(){return!0}),a=i(function(t,e){return"undefined"==typeof t[e]});e.exports=function(t,e,r){function i(t,r){if(!(this instanceof i)){var n=new i(t,r);return null!=Error.captureStackTrace&&Error.captureStackTrace(n,arguments.callee),n}Error.call(this),null!=Error.captureStackTrace&&Error.captureStackTrace(this,arguments.callee),this.message=t,a(this,r,e);var o=this.message||t;delete this.message,Object.defineProperty(this,"message",{get:function(){return this.getMessage(o)},set:function(t){o=t}})}return null==r&&(r=Error),o(i,r),i.prototype.name=t,i.prototype.getMessage=function(t){return t},i.prototype.toObject=function(){var t={};for(var e in this)n.call(this,e)&&(t[e]=this[e]);return t},i.prototype.toJSON=function(){return s({message:this.message},this.toObject())},i}},{}],206:[function(t,e,r){"use strict";e.exports=function(t,e){for(var r=e,n=Array.isArray(r),o=0,r=n?r:r[Symbol.iterator]();;){var i;if(n){if(o>=r.length)break;i=r[o++]}else{if(o=r.next(),o.done)break;i=o.value}var s=i;if(!t(s))return!1}return!0}},{}],207:[function(t,e,r){"use strict";var n=t(211);e.exports=new n(function(){return!0})},{}],208:[function(t,e,r){"use strict";var n=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t)){for(var r,n=[],o=t[Symbol.iterator]();!(r=o.next()).done&&(n.push(r.value),!e||n.length!==e););return n}throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=t(206),i=t(211),s=function(t,e){for(var r=[],n=0;n<t.length;n++)r.push([t[n],e[n]]);return r},a=function(t){var e=n(t,2),r=e[0],o=e[1];return r(o)},u=function(t){return"string"==typeof t},c=function(t){return"boolean"==typeof t},l=function(t){return"number"==typeof t},d=function(t){return"function"==typeof t},p=void 0,h=function(t){var e=t.map(p);return function(r){return Array.isArray(r)&&t.length===r.length&&o(a,s(e,r))}},m=function(t){var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push([r,p(t[r])]);return function(t){if("object"!=typeof t)return!1;for(var r=e,o=Array.isArray(r),i=0,r=o?r:r[Symbol.iterator]();;){var s;if(o){if(i>=r.length)break;s=r[i++]}else{if(i=r.next(),i.done)break;s=i.value}var a=n(s,2),u=a[0],c=a[1];if(!(u in t&&c(t[u])))return!1}return!0}};p=function(t){return t instanceof i?t.matches:t===String?u:t===Boolean?c:t===Number?l:t===Function?d:t===Array?Array.isArray:Array.isArray(t)?h(t):"object"==typeof t?m(t):"function"==typeof t?function(e){return e instanceof t}:function(e){return e===t}},e.exports=p},{}],209:[function(t,e,r){"use strict";var n=t(211),o=t(210),i=t(208),s=t(206);o.Any=t(207),o.If=function(t){return new n(t)},o.Or=function(t,e){return t=i(t),e=i(e),new n(function(r){return t(r)||e(r)})},o.And=function(t,e){return t=i(t),e=i(e),new n(function(r){return t(r)&&e(r)})};var a=function(t){return Array.isArray(t)||"undefined"!=typeof Symbol&&t[Symbol.iterator]};o.List=function(t){return new n(function(e){return a(e)&&s(i(t),e)})},o.compile=i,o.overload=o,e.exports=o},{}],210:[function(t,e,r){"use strict";var n=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t)){for(var r,n=[],o=t[Symbol.iterator]();!(r=o.next()).done&&(n.push(r.value),!e||n.length!==e););return n}throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=t(208),i=t(207);e.exports=function(t){if("function"!=typeof t)throw new Error("Pass a function to pattern.");var e=[],r=function(t,r){if(0===arguments.length)throw new Error("Cannot call match without arguments.");if(1===arguments.length&&(r=t,t=i),"function"!=typeof r)throw new Error("Final argument to match must be a function implementation.");e.push([o(t),r])};return t(function(){r.apply(this,arguments)}),r=function(){throw new Error("Cannot call match outside of a pattern invocation.")},function(){for(var t=arguments.length,r=Array(t),o=0;t>o;o++)r[o]=arguments[o];for(var i=e,s=Array.isArray(i),a=0,i=s?i:i[Symbol.iterator]();;){var u;if(s){if(a>=i.length)break;u=i[a++]}else{if(a=i.next(),a.done)break;u=a.value}var c=n(u,2),l=c[0],d=c[1];if(l(r))return d.apply(this,r)}throw new Error("No matching pattern")}}},{}],211:[function(t,e,r){"use strict";var n=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};e.exports=function t(e){n(this,t),this.matches=e,Object.freeze(this)}},{}],212:[function(t,e,r){var n=t("bluebird"),o=t(213),i=function(t){this.local=t.local,this.remote=t.remote,this.targetOrigin=t.targetOrigin,this.secret=t.secret,this.handlers=t.handlers,this.defaultHandler=t.defaultHandler,this.hostHandlers=t.hostHandlers,this._pendingRequests={},this._messageQueue=[],this.listen()},s="not handled",a="unsupported command";i.NotHandled=o("PostMessageIO:NotHandled",{code:s}),i.UnsupportedCommand=o("PostMessageIO:UnsupportedCommand",{code:a});var u=function(t,e){return Array.prototype.slice.call(t,e)},c=function(){var t={};return u(arguments,0).forEach(function(e){if(e)for(key in e)t[key]=e[key]}),t},l="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";i.randomId=function(t){t=t||16;for(var e=[];e.length<t;)e.push(l[Math.floor(Math.random()*l.length)]);return e.join("")},i.prototype.listen=function(){var t=this;t.stop(),t.listener=function(e){var r=e.data,n=e.source;if(n==t.remote||r.secret==t.secret){var o=function(e){var r=e.data;switch(e.type){case"request":t._handleRequest(r.id,r.command,r.args,n);break;case"response":t._handleResponse(r.to,r.success,r.response);break;case"bulk":r.forEach(o)}};o(r)}},this.local.addEventListener("message",t.listener)},i.prototype.stop=function(){this.local.removeEventListener("message",self.listener)},i.prototype._handleRequest=function(t,e,r,o){var s=this,a=c(s.hostHandlers,{NotHandled:i.NotHandled,command:e,args:r,source:o,request:function(){return s.request.apply(s,u(arguments,0).concat([o]))},secret:s.secret});n.try(function(){if(!s.handlers.hasOwnProperty(e)){if(s.defaultHandler)return s.defaultHandler.apply(s,[a,e].concat(r));throw new i.UnsupportedCommand("unsupported command: "+e)}return s.handlers[e].apply(s,[a].concat(r))}).then(function(e){s.respond(t,!0,e,o)}).catch(i.NotHandled,i.UnsupportedCommand,function(e){s.respond(t,!1,{code:e.code,message:e.message},o)}).done()},i.prototype._handleResponse=function(t,e,r){var n=this;if(n._pendingRequests.hasOwnProperty(t))if(e)n._pendingRequests[t].resolve(r);else{var o=null;switch(r.code){case s:o=new i.NotHandled(r.message);break;case a:o=new i.UnsupportedCommand(r.message);break;default:o=new Error(r.message)}n._pendingRequests[t].reject(o)}},i.prototype.raw=function(t,e,r){var n=this;if("bulk"==t){var o={secret:n.secret,type:t,data:e};r?r.postMessage(o,"*"):n.remote.postMessage(o,n.targetOrigin)}else 0==n._messageQueue.length&&setTimeout(n.emptyQueue.bind(n),0),n._messageQueue.push({type:t,data:e,target:r})},i.prototype.emptyQueue=function(){var t=this,e=t._messageQueue;t._messageQueue=[];for(var r=0;r<e.length;r++){var n=e[r];if(!n.sent){for(var o=n.target,i=[],s=r;s<e.length;s++)e[s].target==o&&(i.push({type:e[s].type,data:e[s].data}),e[s].sent=!0);t.raw("bulk",i,o)}}},i.prototype.request=function(t){var e=this,r=u(arguments,1),o=i.randomId(),s=void 0,a=r[r.length-1];return a&&"function"==typeof a.postMessage&&(s=r.pop()),e.raw("request",{id:o,command:t,args:r},s),new n(function(n,i){e._pendingRequests[o]={id:o,command:t,args:r,resolve:n,reject:i}})},i.prototype.respond=function(t,e,r,n){var o=this;o.raw("response",{to:t,success:e,response:r},n)},e.exports=i},{}],213:[function(t,e,r){arguments[4][205][0].apply(r,arguments)},{}],214:[function(t,e,r){var n=Object.prototype.hasOwnProperty,o=function(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);return"object"!=typeof t&&(t=null),e.reduce(function(t,e){return"object"!=typeof e||null===e?t:Object.create(t,i(e))},t)},i=function(t){var e=Object.getOwnPropertyNames(t);return e.reduce(function(e,r){return e[r]=Object.getOwnPropertyDescriptor(t,r),e},Object.create(null))},s=function(t,e){return"undefined"==typeof e&&(e=Object.prototype),
a(t,e,{})},a=function(t,e,r){u(r,i(t));var n=Object.getPrototypeOf(t);return n===e||null===n?Object.create(n,r):a(n,e,r)},u=function(t,e){Object.keys(e).forEach(function(r){n.call(t,r)||(t[r]=e[r])})};e.exports=o,e.exports.getOwnPropertyDescriptorMap=i,e.exports.flatten=s},{}],215:[function(t,e,r){(function(){var t,r,n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k=[].slice,C=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};r={default:"<!DOCTYPE html>",5:"<!DOCTYPE html>",xml:'<?xml version="1.0" encoding="utf-8" ?>',transitional:'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">',strict:'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">',frameset:'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd">',1.1:'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">',basic:'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML Basic 1.1//EN" "http://www.w3.org/TR/xhtml-basic/xhtml-basic11.dtd">',mobile:'<!DOCTYPE html PUBLIC "-//WAPFORUM//DTD XHTML Mobile 1.2//EN" "http://www.openmobilealliance.org/tech/DTD/xhtml-mobile12.dtd">',ce:'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "ce-html-1.0-transitional.dtd">'},n={regular:"a abbr address article aside audio b bdi bdo blockquote body button canvas caption cite code colgroup datalist dd del details dfn div dl dt em fieldset figcaption figure footer form h1 h2 h3 h4 h5 h6 head header hgroup html i iframe ins kbd label legend li map mark menu meter nav noscript object ol optgroup option output p pre progress q rp rt ruby s samp section select small span strong sub summary sup table tbody td textarea tfoot th thead time title tr u ul video",raw:"style",script:"script",void:"area base br col command embed hr img input keygen link meta param source track wbr",obsolete:"applet acronym bgsound dir frameset noframes isindex listing nextid noembed plaintext rb strike xmp big blink center font marquee multicol nobr spacer tt",obsolete_void:"basefont frame"},g=function(){var t,e,r,o,i,s,a,u,c;for(e=1<=arguments.length?k.call(arguments,0):[],c=[],o=0,s=e.length;s>o;o++)for(t=e[o],u=n[t].split(" "),i=0,a=u.length;a>i;i++)r=u[i],C.call(c,r)<0&&c.push(r);return c},t=function(){function t(){this.htmlOut=null}return t.prototype.resetBuffer=function(t){var e;return null==t&&(t=null),e=this.htmlOut,this.htmlOut=t,e},t.prototype.render=function(){var t,e,r,n;n=arguments[0],t=2<=arguments.length?k.call(arguments,1):[],e=this.resetBuffer("");try{n.apply(null,t)}finally{r=this.resetBuffer(e)}return r},t.prototype.cede=function(){var t;return t=1<=arguments.length?k.call(arguments,0):[],this.render.apply(this,t)},t.prototype.renderable=function(t){var e;return e=this,function(){var r,n;if(r=1<=arguments.length?k.call(arguments,0):[],null===e.htmlOut){e.htmlOut="";try{t.apply(this,r)}finally{n=e.resetBuffer()}return n}return t.apply(this,r)}},t.prototype.renderAttr=function(t,e){var r,n;return null==e?" "+t:e===!1?"":"data"===t&&"object"==typeof e?function(){var t;t=[];for(r in e)n=e[r],t.push(this.renderAttr("data-"+r,n));return t}.call(this).join(""):(e===!0&&(e=t)," "+t+"="+this.quote(this.escape(e.toString())))},t.prototype.attrOrder=["id","class"],t.prototype.renderAttrs=function(t){var e,r,n,o,i,s;for(i="",o=this.attrOrder,e=0,r=o.length;r>e;e++)n=o[e],n in t&&(i+=this.renderAttr(n,t[n]));for(n in t)s=t[n],C.call(this.attrOrder,n)>=0||(i+=this.renderAttr(n,s));return i},t.prototype.renderContents=function(){var t,e,r;if(t=arguments[0],e=2<=arguments.length?k.call(arguments,1):[],null==t);else{if("function"!=typeof t)return this.text(t);if(r=t.apply(this,e),"string"==typeof r)return this.text(r)}},t.prototype.isSelector=function(t){var e;return t.length>1&&("#"===(e=t.charAt(0))||"."===e)},t.prototype.parseSelector=function(t){var e,r,n,o,i,s,a,u;for(n=null,e=[],s=t.split("."),r=0,i=s.length;i>r;r++)u=s[r],u=u.trim(),n?e.push(u):(a=u.split("#"),o=a[0],n=a[1],""!==o&&e.push(u));return{id:n,classes:e}},t.prototype.normalizeArgs=function(t){var e,r,n,o,i,s,a,u,c,l;for(r={},l=null,o=null,a=i=0,u=t.length;u>i;a=++i)if(e=t[a],null!=e)switch(typeof e){case"string":0===a&&this.isSelector(e)?(l=e,c=this.parseSelector(e)):o=e;break;case"function":case"number":case"boolean":o=e;break;case"object":e.constructor===Object?r=e:o=e;break;default:o=e}return null!=c&&(s=c.id,n=c.classes,null!=s&&(r.id=s),(null!=n?n.length:void 0)&&(r.class&&n.push(r.class),r.class=n.join(" "))),{attrs:r,contents:o,selector:l}},t.prototype.tag=function(){var t,e,r,n,o;return o=arguments[0],t=2<=arguments.length?k.call(arguments,1):[],n=this.normalizeArgs(t),e=n.attrs,r=n.contents,this.raw("<"+o+this.renderAttrs(e)+">"),this.renderContents(r),this.raw("</"+o+">")},t.prototype.rawTag=function(){var t,e,r,n,o;return o=arguments[0],t=2<=arguments.length?k.call(arguments,1):[],n=this.normalizeArgs(t),e=n.attrs,r=n.contents,this.raw("<"+o+this.renderAttrs(e)+">"),this.raw(r),this.raw("</"+o+">")},t.prototype.scriptTag=function(){var t,e,r,n,o;return o=arguments[0],t=2<=arguments.length?k.call(arguments,1):[],n=this.normalizeArgs(t),e=n.attrs,r=n.contents,this.raw("<"+o+this.renderAttrs(e)+">"),this.renderContents(r),this.raw("</"+o+">")},t.prototype.selfClosingTag=function(){var t,e,r,n,o;if(o=arguments[0],t=2<=arguments.length?k.call(arguments,1):[],n=this.normalizeArgs(t),e=n.attrs,r=n.contents,r)throw new Error("Teacup: <"+o+"/> must not have content.  Attempted to nest "+r);return this.raw("<"+o+this.renderAttrs(e)+" />")},t.prototype.coffeescript=function(t){return this.raw('<script type="text/javascript">(function() {\n  var __slice = [].slice,\n      __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; },\n      __hasProp = {}.hasOwnProperty,\n      __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n  ('+this.escape(t.toString())+")();\n})();</script>")},t.prototype.comment=function(t){return this.raw("<!--"+this.escape(t)+"-->")},t.prototype.doctype=function(t){return null==t&&(t=5),this.raw(r[t])},t.prototype.ie=function(t,e){return this.raw("<!--[if "+this.escape(t)+"]>"),this.renderContents(e),this.raw("<![endif]-->")},t.prototype.text=function(t){if(null==this.htmlOut)throw new Error("Teacup: can't call a tag function outside a rendering context");return this.htmlOut+=null!=t&&this.escape(t.toString())||"",null},t.prototype.raw=function(t){return null!=t?(this.htmlOut+=t,null):void 0},t.prototype.escape=function(t){return t.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},t.prototype.quote=function(t){return'"'+t+'"'},t.prototype.use=function(t){return t(this)},t.prototype.tags=function(){var t,e,r,n,o,i;for(t={},e=[].concat("cede coffeescript comment component doctype escape ie normalizeArgs raw render renderable script tag text use".split(" "),g("regular","obsolete","raw","void","obsolete_void")),r=function(e){return function(r){return t[r]=function(){var t;return t=1<=arguments.length?k.call(arguments,0):[],e[r].apply(e,t)}}}(this),n=0,o=e.length;o>n;n++)i=e[n],r(i);return t},t.prototype.component=function(t){return function(e){return function(){var r,n,o,i,s,a;return r=1<=arguments.length?k.call(arguments,0):[],i=e.normalizeArgs(r),a=i.selector,n=i.attrs,o=i.contents,s=function(){var t;return t=1<=arguments.length?k.call(arguments,0):[],t.unshift(o),e.renderContents.apply(e,t)},t.apply(e,[a,n,s])}}(this)},t}(),v=g("regular","obsolete"),o=function(e){return t.prototype[e]=function(){var t;return t=1<=arguments.length?k.call(arguments,0):[],this.tag.apply(this,[e].concat(k.call(t)))}};for(u=0,d=v.length;d>u;u++)_=v[u],o(_);for(y=g("raw"),i=function(e){return t.prototype[e]=function(){var t;return t=1<=arguments.length?k.call(arguments,0):[],this.rawTag.apply(this,[e].concat(k.call(t)))}},c=0,p=y.length;p>c;c++)_=y[c],i(_);for(b=g("script"),s=function(e){return t.prototype[e]=function(){var t;return t=1<=arguments.length?k.call(arguments,0):[],this.scriptTag.apply(this,[e].concat(k.call(t)))}},l=0,h=b.length;h>l;l++)_=b[l],s(_);for(w=g("void","obsolete_void"),a=function(e){return t.prototype[e]=function(){var t;return t=1<=arguments.length?k.call(arguments,0):[],this.selfClosingTag.apply(this,[e].concat(k.call(t)))}},f=0,m=w.length;m>f;f++)_=w[f],a(_);("undefined"!=typeof e&&null!==e?e.exports:void 0)?(e.exports=(new t).tags(),e.exports.Teacup=t):"function"==typeof define&&define.amd?define("teacup",[],function(){return(new t).tags()}):(window.teacup=(new t).tags(),window.teacup.Teacup=t)}).call(this)},{}],216:[function(t,e,r){"use strict";function n(t,e,r){if(!(this instanceof n))return new n(t,e,r);var c,l,d,p,h=a.test(t),m=typeof e,f=this,g=0;for("object"!==m&&"string"!==m&&(r=e,e=null),r&&"function"!=typeof r&&(r=s.parse),e=i(e);g<u.length;g++)l=u[g],c=l[0],p=l[1],c!==c?f[p]=t:"string"==typeof c?~(d=t.indexOf(c))&&("number"==typeof l[2]?(f[p]=t.slice(0,d),t=t.slice(d+l[2])):(f[p]=t.slice(d),t=t.slice(0,d))):(d=c.exec(t))&&(f[p]=d[1],t=t.slice(0,t.length-d[0].length)),f[p]=f[p]||(l[3]||"port"===p&&h?e[p]||"":""),l[4]&&(f[p]=f[p].toLowerCase());r&&(f.query=r(f.query)),o(f.port,f.protocol)||(f.host=f.hostname,f.port=""),f.username=f.password="",f.auth&&(l=f.auth.split(":"),f.username=l[0]||"",f.password=l[1]||""),f.href=f.toString()}var o=t(219),i=t(217),s=t(218),a=/^\/(?!\/)/,u=[["#","hash"],["?","query"],["//","protocol",2,1,1],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/\:(\d+)$/,"port"],[NaN,"hostname",void 0,1,1]];n.prototype.set=function(t,e,r){var n=this;return"query"===t?("string"==typeof e&&e.length&&(e=(r||s.parse)(e)),n[t]=e):"port"===t?(n[t]=e,o(e,n.protocol)?e&&(n.host=n.hostname+":"+e):(n.host=n.hostname,n[t]="")):"hostname"===t?(n[t]=e,n.port&&(e+=":"+n.port),n.host=e):"host"===t?(n[t]=e,/\:\d+/.test(e)&&(e=e.split(":"),n.hostname=e[0],n.port=e[1])):n[t]=e,n.href=n.toString(),n},n.prototype.toString=function(t){t&&"function"==typeof t||(t=s.stringify);var e,r=this,n=r.protocol+"//";return r.username&&(n+=r.username,r.password&&(n+=":"+r.password),n+="@"),n+=r.hostname,r.port&&(n+=":"+r.port),n+=r.pathname,r.query&&(e="object"==typeof r.query?t(r.query):r.query,n+=("?"===e.charAt(0)?"":"?")+e),r.hash&&(n+=r.hash),n},n.qs=s,n.location=i,e.exports=n},{}],217:[function(t,e,n){"use strict";var o,i={hash:1,query:1};e.exports=function(e){e=e||r.location||{},o=o||t(216);var n,s={},a=typeof e;if("blob:"===e.protocol)s=new o(unescape(e.pathname),{});else if("string"===a){s=new o(e,{});for(n in i)delete s[n]}else if("object"===a)for(n in e)n in i||(s[n]=e[n]);return s}},{}],218:[function(t,e,r){"use strict";function n(t){for(var e,r=/([^=?&]+)=([^&]*)/g,n={};e=r.exec(t);n[decodeURIComponent(e[1])]=decodeURIComponent(e[2]));return n}function o(t,e){e=e||"";var r=[];"string"!=typeof e&&(e="?");for(var n in t)i.call(t,n)&&r.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return r.length?e+r.join("&"):""}var i=Object.prototype.hasOwnProperty;r.stringify=o,r.parse=n},{}],219:[function(t,e,r){"use strict";e.exports=function(t,e){if(e=e.split(":")[0],t=+t,!t)return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 22!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t}},{}],220:[function(t,e,r){var n,o,i,s,a,u,c,l=function(t,e){function r(){this.constructor=t}for(var n in e)d.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},d={}.hasOwnProperty;n=t(22),i=t(90),s=t(161),a=t(115),u=t("underscore"),c=t(34),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.sync=function(t,e,r){throw new Error("BoardState is a special weird non-persistent thing")},e.prototype.initialize=function(t,r){return e.__super__.initialize.apply(this,arguments),this.board=r.board,this.useSidebarPref()?(this.setShowSidebarFromPref(),this.listenTo(this.board,"change:myPrefs",this.setShowSidebarFromPref)):this.set("showSidebar",!a.fSmall),this.set("listComposerOpen",!1),this.listenTo(this,"change:idActiveCard",function(t){return function(){var e,r;return r=t.modelCache.get("Card",t.previousAttributes().idActiveCard),null!=r&&t.stopListening(r,"change:closed"),e=t.getCard(),null!=e?t.listenTo(e,"change:closed",function(){return t.selectCardAfter(e)}):void 0}}(this))},e.prototype.defaults=function(){return{idActiveCard:null}},e.prototype.setSidebarDisplayType=function(t){return this.set("sidebarDisplayType",null!=t?t:"")},e.prototype.getSidebarDisplayType=function(){return this.get("sidebarDisplayType")},e.prototype.selectCard=function(t){return null==t?void this.set("idActiveCard",null):this.waitForId(t,function(e){return function(){return e.set("idActiveCard",t.id),i.set(t.getFullUrl())}}(this))},e.prototype.isCardSelected=function(t){return null!=t&&this.get("idActiveCard")===t.id},e.prototype.clearSelectedCard=function(){return this.set("idActiveCard",null)},e.prototype.getCard=function(){return this.modelCache.get("Card",this.get("idActiveCard"))},e.prototype.getList=function(){var t;return null!=(t=this.getCard())?t.getList():void 0},e.prototype.selectCardAfter=function(t){var e,r,n,o;return r=t.getList(),o=null!=r?r.cardList.openCards():void 0,null==r||0===o.length?void this.set("idActiveCard",null):(e=function(t){return function(t){return function(e){return e!==t&&e.get("pos")>=t.get("pos")}}}(this),n=u.find(o,e(t)),this.selectCard(null!=n?n:u.last(o)))},e.prototype.openListComposer=function(){return this.set("listComposerOpen",!0)},e.prototype.closeListComposer=function(){return this.set("listComposerOpen",!1)},e.prototype.useSidebarPref=function(){return n.isLoggedIn()&&(a.fExtraLarge||a.fLarge||a.fMedium)},e.prototype.setShowSidebar=function(t){var e;return t!==this.get("showSidebar")&&(e=t?"Open":"Close",c("Board Menu",e+" Board Menu"),this.set("showSidebar",t),this.useSidebarPref())?this.board.setPref("showSidebar",t):void 0},e.prototype.setShowSidebarFromPref=function(){return this.waitForAttr(this.board,"myPrefs",function(t){return function(){return t.set("showSidebar",t.board.getPref("showSidebar"))}}(this))},e}(s)},{}],221:[function(t,e,r){var n,o,i=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;o=t(224),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.default=function(){return{mode:"month"}},e.prototype.getMode=function(){return this.get("mode")},e.prototype.setMode=function(t){return this.update("mode",t)},e}(o)},{}],222:[function(t,e,r){var n,o,i,s,a,u=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty,l=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};o=t(144),i=t(157),s=t(224),a=t(81),e.exports=a(i,n=function(t){function e(t,r){this.board=r.board,e.__super__.constructor.apply(this,arguments),this.waitForId(this.board,function(t){return function(e){return t.set({id:"boardCardComposerSettings-"+e}),t.fetch()}}(this)),this.labelList=(new o).syncModel(this,"idLabels").syncCache(this.modelCache,[],function(t){return function(e){var r,n;return r=e.id,l.call(null!=(n=t.get("idLabels"))?n:[],r)>=0}}(this))}return u(e,t),e.prototype.typeName="CardComposer",e.prototype.syncedKeys=["title"],e.prototype.default=function(){return{list:null,index:null,idMembers:[],idLabels:[],pos:"bottom",title:"",vis:!1}},e.prototype.clear=function(){return this.save(this.default())},e.prototype.clearItems=function(){this.labelList.reset(),this.save({idMembers:[],idLabels:[],title:""})},e.prototype.moveToNext=function(){var t;this.labelList.reset(),this.save({list:this.get("list"),index:(null!=(t=this.get("index"))?t:0)+1,idMembers:[],idLabels:[],pos:"bottom",title:"",vis:!0})},e.prototype.getBoard=function(){return this.board},e.prototype.getList=function(){return this.get("list")},e.prototype.editable=function(){return this.getBoard().editable()},e.prototype.addMember=function(t){return this.addToSet("idMembers",t)},e.prototype.removeMember=function(t){return this.pull("idMembers",t)},e.prototype.labelCreateUrl=function(){return"/1/board/"+this.getBoard().id+"/labels/"},e}(s))},{}],223:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p=function(t,e){function r(){this.constructor=t}for(var n in e)h.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},h={}.hasOwnProperty,m=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1},f=[].slice;n=t(22),i=t(61),s=t(163),a=t(224),u=t(99),c=t("underscore"),d=t("moment"),l=t(76),e.exports=o=function(t){function e(t,r){this.board=t,e.__super__.constructor.call(this,null,r),this.waitForId(this.board,function(t){return function(e){return t.set({id:"boardCardFilterSettings-"+e}),t.fetch(),t._resetNewCards()}}(this)),this.dueMap={day:1,week:7,month:28,overdue:0},this.newCardsWithoutIds=[],this.listenTo(this,"change:title change:idLabels change:idMembers change:due",this.debounce(this._resetNewCards))}return p(e,t),e.prototype.default=function(){return{idMembers:[],idLabels:[],title:null,due:null,limitMembers:!0,limitLabels:!0,newCards:[]}},e.prototype.clear=function(){return this.save(this.default())},e.prototype.getBoard=function(){return this.board},e.prototype._resetNewCards=function(){return this.newCardsWithoutIds=[],this.save("newCards",[])},e.prototype.toggleQuietMode=function(){var t,e,r,o,i;if(t=n.myId(),null!=t){o=this.default(),o.idMembers=[t],e=!0;for(r in o)i=o[r],e&&(e=c.isEqual(this.get(r),i));return e?this.clear():this.save(o)}},e.prototype.toggleIdLabel=function(t){return this.toggle("idLabels",t)},e.prototype.toggleMember=function(t){return this.toggle("idMembers",t)},e.prototype.isFiltering=function(){var t;return c.some([!c.isEmpty(this.get("idMembers")),!c.isEmpty(this.get("idLabels")),null!=(t=this.get("title"))?t.trim():void 0,null!=this.get("due")])},e.prototype.satisfiesFilter=function(t){var e,r,n,o,i,s,a,u,l,p,h,g,v,y,b,w,_,k,C,x;if(null==t)return!1;if(t.get("closed"))return!0;if(y=t.id,m.call(null!=(b=this.get("newCards"))?b:[],y)>=0||m.call(this.newCardsWithoutIds,t)>=0)return!0;for(w=["idLabels","idMembers"],a=0,p=w.length;p>a;a++)if(s=w[a],!c.isEmpty(this.get(s))&&c.isEmpty(c.intersection(this.get(s),t.get(s))))return!1;if(null!=this.get("due")){if(n=t.get("due"),null==n)return!1;switch(g=new Date,o=this.get("due")){case"overdue":if(d(n).isAfter(g))return!1;break;default:if(h=d().add(this.dueMap[o],"day"),!d(n).isBetween(d(),h))return!1}}return k=this.get("title"),null==k||(i=function(t){return c.compact(t.toLowerCase().split(/[\s\x21\x22\x24-\x26\x28-\x2C\x2F\x3A-\x3F\x5B-\x60\x7B-\x7F]+/))},C=i(k),c.isEmpty(C)||(u=null!=t.get("idShort")?i(t.get("idShort").toString()):[],e=c.flatten([i(null!=(_=t.get("name"))?_:""),u]),r=2<=C.length?f.call(C,0,l=C.length-1):(l=0,[]),v=C[l++],!c.isEmpty(r)&&!c.isEmpty(c.intersection(r,e))||(x=function(t){return t.substring(0,v.length)===v},c.any(e,x))))?!0:!1},e.prototype.addNewCard=function(t){return this.newCardsWithoutIds.push(t),this.waitForId(t,function(e){return function(r){return e.newCardsWithoutIds=c.without(e.newCardsWithoutIds,t),e.addToSet("newCards",r)}}(this))},e.prototype.toJSON=function(t){var r,o,i,a,d,p,h,f;return p=null!=t?t:{},r=p.board,o=p.expanded,i=e.__super__.toJSON.apply(this,arguments),r&&(i.board=this.board.toJSON()),o&&(f=null!=(h=this.get("title"))?h:"",a=RegExp("^"+u.escapeForRegex(f),"i"),i.labels=c.chain(this.board.getLabels()).filter(function(t){return a.test(t.get("color"))||a.test(t.get("name"))}).sort(s.compare).map(function(t){return function(e){var r;return c.extend(e.toJSON(),{isActive:(r=e.id,m.call(t.get("idLabels"),r)>=0),matchesFilter:!0})}}(this)).value(),i.members=function(){var t,e,r,o,i,s;for(r=this.board.memberList.models,s=[],t=0,e=r.length;e>t;t++)d=r[t],s.push(c.extend(d.toJSON(),{isActive:(o=d.id,m.call(null!=(i=this.get("idMembers"))?i:[],o)>=0),matchesFilter:""!==f&&("me"===f&&n.isMe(d)||c.any(u.getMemNameArray(this.modelCache,d.id),function(t){return a.test(t)}))}));return s}.call(this),i.members=u.sortMembers(i.members,n.me()),i.dueOptions=c.keys(this.dueMap).map(function(t){return function(e){return{time:e,desc:l(["due date filter",e]),isActive:e===t.get("due")}}}(this))),i},e}(a)},{}],224:[function(t,e,r){var n,o,i,s,a,u=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty,l=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};n=t("jquery"),i=t(88),s=t(161),a=t("underscore"),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.default=function(){return{}},e.prototype.sync=function(t,e,r){var n,o,s,u,c;switch(u=r.success,t){case"create":throw Error("not implemented");case"read":return o=e.syncedKeysFromLocalStorage(),a.defaults(o,this.default()),"function"==typeof u?u(e,o,r):void 0;case"update":o=e.toJSON(),n=this.default(),delete o.id;for(s in o)c=o[s],a.isEqual(c,n[s])&&delete o[s];return a.isEmpty(o)?i.unset(e.id):i.set(e.id,o),"function"==typeof u?u(e,e.toJSON(),r):void 0;case"delete":return i.unset(e.id),"function"==typeof u?u(e,null,r):void 0}},e.prototype.syncedKeysFromLocalStorage=function(){var t,e;return t=null!=(e=i.get(this.id))?e:{},a.pick(t,this.syncedKeys)},e.prototype.syncedKeys=function(){return!0},e.prototype.toJSON=function(){return a.pick(this.attributes,this.syncedKeys)},e.prototype._persistUpdate=function(t,e){var r;return i.set(this.id,a.extend(null!=(r=i.get(this.id))?r:this.default(),t)),"function"==typeof e?e(null,this.toJSON()):void 0},e.prototype.toggle=function(t,e){return this.inSet(t,e)?(this.pull(t,e),!1):(this.addToSet(t,e),!0)},e.prototype.inSet=function(t,e){var r;return l.call(null!=(r=this.get(t))?r:[],e)>=0},e.prototype.addToSet=function(t,e){var r;return this.save(t,(null!=(r=this.get(t))?r:[]).concat(e))},e.prototype.pull=function(t,e){var r;return this.save(t,a.without(null!=(r=this.get(t))?r:[],e))},e}(s)},{}],225:[function(t,e,r){var n,o,i=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;o=t(224),e.exports=n=function(t){function e(t,r){this.board=t,e.__super__.constructor.call(this,null,r),this.waitForId(this.board,function(t){return function(e){return t.set({id:"boardListComposerSettings-"+e}),t.fetch()}}(this))}return i(e,t),e.prototype.default=function(){return{title:null,vis:!1}},e.prototype.clear=function(){return this.save(this.default())},e.prototype.clearItems=function(){this.save({title:""})},e.prototype.getBoard=function(){return this.board},e.prototype.toJSON=function(t){var r,n,o,i;return i=null!=t?t:{},r=i.board,o=i.list,n=e.__super__.toJSON.apply(this,arguments),r&&(n.board=this.getBoard().toJSON()),n},e}(o)},{}],226:[function(t,e,r){var n,o,i,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=t(22),o=t(224),i=t("underscore"),e.exports=new(function(t){function e(){e.__super__.constructor.call(this),this.set({id:"memberState-"+n.myId()}),this.fetch()}return s(e,t),e.prototype.default=function(){return{cardsPageSortType:"board",processingAttachmentsLength:0,idCollapsedChecklists:[]}},e.prototype.getCardsPageSortType=function(){return this.get("cardsPageSortType")},e.prototype.sortCardsPageByBoard=function(){return this.save("cardsPageSortType","board")},e.prototype.sortCardsPageByDate=function(){return this.save("cardsPageSortType","date")},e.prototype.getCollapsedChecklists=function(){return this.get("idCollapsedChecklists")},e.prototype.pullCollapsedChecklist=function(t){return this.pull("idCollapsedChecklists",t)},e.prototype.pushCollapsedChecklist=function(t){var e,r;return this.pull("idCollapsedChecklists",t),this.addToSet("idCollapsedChecklists",t),e=this.getCollapsedChecklists(),r=i.rest(e,Math.max(0,e.length-256)),this.save("idCollapsedChecklists",r)},e}(o))},{}],227:[function(t,e,r){var n,o,i=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=t(161),o=t(99),e.exports=new(function(t){function e(){e.__super__.constructor.call(this),this.set({query:"",suggestions:[],suggestionSearchTerm:"",suggestSearchModelTypes:""})}return i(e,t),e.prototype.getQuery=function(){return this.get("query")},e.prototype.setQuery=function(t){return t!==this.getQuery()&&this.set("query",t),""===t?(this.clearSuggestions(),this.clearSuggestionSearchTerm(),this.clearSuggestionSearchModelTypes()):void 0},e.prototype.removeStringFromQuery=function(t){var e,r,n;return e=this.getQuery(),r=RegExp(""+o.escapeForRegex(t)),r.test(e)?(n=e.replace(t,""),n=o.stripExtraSpaces(n),""!==n&&(n+=" "),this.setQuery(n)):void 0},e.prototype.addStringToQuery=function(t){var e,r,n;return e=this.getQuery(),r=RegExp(""+o.escapeForRegex(t)),r.test(e)?void 0:(n=e+" "+t,n=o.stripExtraSpaces(n)+" ",this.setQuery(n))},e.prototype.getSuggestions=function(){return this.get("suggestions")},e.prototype.setSuggestions=function(t){return this.set("suggestions",t)},e.prototype.clearSuggestions=function(){return this.set("suggestions",[])},e.prototype.getSuggestionSearchTerm=function(){return this.get("suggestionSearchTerm")},e.prototype.setSuggestionSearchTerm=function(t){return this.set("suggestionSearchTerm",t)},e.prototype.clearSuggestionSearchTerm=function(){return this.set("suggestionSearchTerm","")},e.prototype.getSuggestionSearchModelTypes=function(){return this.get("suggestSearchModelTypes")},e.prototype.setSuggestionSearchModelTypes=function(t){return this.set("suggestSearchModelTypes",t)},e.prototype.clearSuggestionSearchModelTypes=function(){return this.set("suggestSearchModelTypes","")},e}(n))},{}],228:[function(t,e,r){var n,o,i,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=t(22),o=t(224),i=t("underscore"),e.exports=new(function(t){function e(){e.__super__.constructor.call(this),this.set({id:"sidebarState-"+n.myId()}),this.fetch()}return s(e,t),e.prototype.default=function(){return{pinBoardsListSidebar:!1,showBoardsListSidebar:!1,idRecentBoards:[],collapsedDrawerSections:[]}},e.prototype.syncedKeys=["idRecentBoards","collapsedDrawerSections","pinBoardsListSidebar"],e.prototype.getPinSidebar=function(){return this.get("pinBoardsListSidebar")},e.prototype.showPinSidebar=function(){return this.save("pinBoardsListSidebar",!0)},e.prototype.hidePinSidebar=function(){return this.save("pinBoardsListSidebar",!1)},e.prototype.getShowSidebar=function(){return this.get("showBoardsListSidebar")},e.prototype.showSidebar=function(){return this.save("showBoardsListSidebar",!0)},e.prototype.hideSidebar=function(){return this.save("showBoardsListSidebar",!1)},e.prototype.getRecentBoards=function(){return this.get("idRecentBoards")},e.prototype.pullBoard=function(t){var e,r;for(r=i.clone(this.getRecentBoards());(e=i.indexOf(r,t))>-1;)r.splice(e,1);return this.save("idRecentBoards",r)},e.prototype.pushBoard=function(t){var e;return e=i.clone(this.getRecentBoards()),i.contains(e,t)&&(e=i.without(e,t)),e.unshift(t),e=e.slice(0,16),this.save("idRecentBoards",e)},e.prototype.getCollapsedSections=function(){var t;return null!=(t=this.get("collapsedDrawerSections"))?t:this.default().collapsedDrawerSections},e.prototype.isCollapsed=function(t){return i.contains(this.getCollapsedSections(),t)},e.prototype.collapseSection=function(t){return this.addToSet("collapsedDrawerSections",t)},e.prototype.expandSection=function(t){return this.pull("collapsedDrawerSections",t)},e}(o))},{}],229:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k=function(t,e){function r(){this.constructor=t}for(var n in e)C.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},C={}.hasOwnProperty,x=[].slice;n=t("jquery"),i=t(230),s=t(231),a=t(61),u=t(99),c=t(421),l=t("underscore"),g=t("moment"),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return k(e,t),e.prototype.initialize=function(t){return this.renderOpts=t.renderOpts,this.makeDebouncedMethods("render"),this.listenTo(this.collection,"add remove reset",this.renderDebounced),this.actionViews=[]},e.prototype.render=function(){return this.collection._getRelatedBoards().then(function(t){return function(){var e,r,n,o,i,s,u,c,d,p,h;for(d=t.saveEdits(),i=d[0],o=d[1],n=t.collection.models,n=l.sortBy(n,function(t){return-a.parse(t.get("date"))}),r=v(n).slice(0,t.renderOpts.limit),p=!t.$el.html(),p&&t.removeActionViews(),t.$(".js-board-member-profile-no-activity").toggleClass("hide",r.length>0),u=s=0,c=r.length;c>s;u=++s)e=r[u],(p||t.actionNeedsRerender(e,u))&&(h=t.rerenderAction(e,u,r,{rerenderAll:p}),t.restoreEdits(i,o,h))}}(this)).done()},e.prototype.saveEdits=function(){var t,e;return e=[],t=0,this.$(".editing textarea").each(function(){var r;r=n(this),e.push(r.val()),r.is(":focus")&&(r.parents(".editing").addClass("focused"),t=u.getCaretPosition(r))}),null!=e&&e.reverse(),[e,t]},e.prototype.restoreEdits=function(t,e,r){var n;return r.$el.hasClass("editing")?(r.$("textarea").val(t.pop()),n=u.getElem(r.$("textarea")),r.$el.hasClass("focused")&&u.setCaretPosition(n,e),r.openEditView()):void 0},e.prototype.rerenderAction=function(t,e,r,n){var o,a,u;return u=/^comment/.test(t.get("type"))?this.subview(s,t,this.renderOpts):this.subview(i,t,this.renderOpts),n.rerenderAll?(this.appendSubview(u),this.actionViews.push(u)):(this.insertActionView(u,e),1===this.actionViews.length&&1===r.length?(this.actionViews[e].remove(),this.actionViews.splice(e,1,u)):null==this.actionViews[e+1]?this.actionViews.splice(e,1,u):r.length<=this.actionViews.length?this.actionViews[e+1].model.id===(null!=(o=l.first(r[e+1]))?o.id:void 0)?(this.actionViews[e].remove(),this.actionViews.splice(e,1,u)):(this.actionViews.splice(e,0,u),null!=(a=this.actionViews[this.actionViews.length-1])&&a.remove(),this.actionViews=this.actionViews.splice(0,this.actionViews.length-1)):this.actionViews.splice(e,0,u)),u},e.prototype.actionNeedsRerender=function(t,e){var r,n,o;return(null!=(n=this.actionViews[e+1])&&null!=(o=n.model)?o.id:void 0)===t.id&&(this.actionViews[e].remove(),this.actionViews.splice(e,1)),r=this.actionViews[e],!r||t.id!==r.model.id},e.prototype.insertActionView=function(t,e){return this.actionViews[e]?(t.delegateEvents(),t.render().$el.insertBefore(this.actionViews[e].el)):this.appendSubview(t)},e.prototype.removeActionViews=function(){var t,e,r,n;for(n=this.actionViews,e=0,r=n.length;r>e;e++)t=n[e],t.remove();this.actionViews=[]},e.prototype.delegateEvents=function(){var t,r,n,o;for(e.__super__.delegateEvents.apply(this,arguments),o=this.actionViews,r=0,n=o.length;n>r;r++)t=o[r],t.delegateEvents()},e.prototype.undelegateEvents=function(){var t,r,n,o;for(e.__super__.undelegateEvents.apply(this,arguments),o=this.actionViews,r=0,
n=o.length;n>r;r++)t=o[r],t.undelegateEvents()},e.prototype.remove=function(){return this.removeActionViews(),e.__super__.remove.apply(this,arguments)},e}(c),y=function(t){return function(e){return function(r,n){var o;return o=t in r&&t in n&&r[t].id===n[t].id,o?e(r,n):[!1,!1]}}},w=y("card"),b=y("board"),h=function(t){return[t,t]},p=function(t,e){var r,n,o,i;return r=t[0],n=t[1],o=e[0],i=e[1],[r||o,n||i]},m=function(t,e){var r,n;return null==e?!1:0===t.length?!0:(r=t[0],n=2<=t.length?x.call(t,1):[],m(n,e[r]))},f=function(){var t,e;return t=arguments[0],e=2<=arguments.length?x.call(arguments,1):[],l.all(e,function(e){return m(t,e)})},d=[{a:"removeMemberFromCard",b:"addMemberToCard",cancel:w(function(t,e){return h(t.idMember===e.idMember)})},{a:"deleteAttachmentFromCard",b:"addAttachmentToCard",cancel:w(function(t,e){return h(t.attachment.id===e.attachment.id)})},{a:"updateCheckItemStateOnCard",b:"updateCheckItemStateOnCard",cancel:w(function(t,e){return h(t.checkItem.id===e.checkItem.id)})},{a:"updateCard",b:"updateCard",cancel:w(function(t,e){return h("listAfter"in t&&"listBefore"in e&&t.listAfter.id===e.listBefore.id)})},{a:"addChecklistToCard",b:"removeChecklistFromCard",cancel:w(function(t,e){return h(t.checklist.id===e.checklist.id)})},{a:"updateBoard",b:"updateBoard",cancel:b(function(t,e){return[f(["board","prefs","background"],t,e),!1]})}],_=function(t,e){return d.reduce(function(r,n){return t.type!==n.a||e.type!==n.b?r:p(r,n.cancel(t,e))},[!1,!1])},v=function(t){var e,r,n,o,i,s,a,u,c,d,p;if(1===t.length)return t;for(o={},d=t.slice(0,-1),u=a=0,c=d.length;c>a;u=++a)e=d[u],i=e.toJSON(),s=t[u+1].toJSON(),l.extend(i,i.data),l.extend(s,s.data),i.idMemberCreator===s.idMemberCreator&&g(i.date).diff(s.date,"minutes")<5&&!o[i.id]&&!o[s.id]&&(p=_(i,s),r=p[0],n=p[1],r&&(o[i.id]=!0),n&&(o[s.id]=!0));return l.reject(t,function(t){return o[t.id]})}},{}],230:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,B,M=function(t,e){function r(){this.constructor=t}for(var n in e)T.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},T={}.hasOwnProperty;n=t("jquery"),i=t(447),s=t(248),a=t(22),u=t(125),c=t(395),l=t(60),d=t(126),p=t(5),h=t(61),m=t(62),f=t(24),g=t(26),v=t(435),y=t(79),b=t(99),w=t(421),_=t("underscore"),C=t(401),j=t(31),S=t(418),B=t(34),x=t(76),k=t(552),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return M(e,t),e.prototype.className="phenom phenom-action u-clearfix",e.prototype.initialize=function(t){var e,r;return this.context=t.context,this.listenTo(this.model,"takingTooLong change",this.render),e=this.model.get("data"),null!=(null!=(r=e.card)?r.id:void 0)&&e.board?this.listenTo(this.modelCache,"remove:Action:"+this.model.get("id"),function(t){return function(){return t.remove()}}(this)):void 0},e.prototype.events={"click .js-show-mem-menu":"viewMemberActionMenu","click .js-open-attachment-viewer":"openAttachmentViewer","click .js-reply-to-action":"reply","click .js-expand-comment":"expandComment"},e.prototype.getData=function(){var t;return t=new m("action").getEntities(this.model.get("display"),this.context.id),{saved:null!=this.model.id,entities:_.map(t,this._withEntityInfo.bind(this)),date:this.model.get("date"),dateLastEdited:this.model.get("data").dateLastEdited,textData:this.model.get("data").textData}},e.prototype.getContext=function(){var t,e,r,n,o,i,s,u,l;return e={},t=this.modelCache.get("Board",null!=(o=this.model.get("data"))&&null!=(i=o.board)?i.id:void 0),this.options.showBoard&&null!=t&&(e.board=t.toJSON({prefs:!0,url:!0}),e.boardPLevelIconClass=c.getPermLevelIconClassForBoard(t),e.boardPLevelAltText=c.getPermLevelAltTextForBoard(t)),this.options.showOrganization&&(n=this.modelCache.get("Organization",null!=(s=this.model.get("data"))&&null!=(u=s.organization)?u.id:void 0),null!=n&&(e.organization=n.toJSON({prefs:!0,url:!0}),e.orgPLevelIconClass=n.getPermLevel(),e.orgPLevelAltText=x(["org perms",n.getPermLevel(),"text"]))),r=this.modelCache.get("Member",this.model.get("idMemberCreator")),e.canReply=(null!=t?t.canComment(a.me()):void 0)&&(this.model.isCommentLike()||this.model.isAddAttachment())&&null!=r&&!a.isMe(r),e.canDelete=this.model.deletable(),e.canEdit=this.model.editable(),e.member=null!=r?r.toJSON():void 0,null!=(l=e.member)&&(l.url=p.getMemberProfileUrl(e.member.id)),e},e.prototype.getOptions=function(){return{showAttachmentPreview:!this.options.compact,truncateComment:this.options.truncateComments,showOptions:!this.model.isPlaceholder()&&!this.options.compact&&!this.options.readOnly,useEmbedly:!this.options.compact&&this.model.isCommentLike(),usePreviews:!this.options.compact&&this.model.isAddAttachment()}},e.prototype.render=function(){var t,e,r,o,i,s,a,u,c,l,d,p,m,g;if(s=this.getData(),l=this.getOptions(),i=this.getContext(),j("actions",s),this.$el.addClass(this.model.isCommentLike()?"phenom-comment":this.model.isAddAttachment()?"phenom-attachment":"phenom-other"),this.$el.html(k(s,i,l)),null!=(o=this.model.getBoard())&&this.$(".js-friendly-links").each(function(){return C(this,o)}),l.useEmbedly)for(t=this.$(".js-embedly"),d=s.entities,u=0,c=d.length;c>u;u++)if(a=d[u],"comment"===a.type&&null!=a.embedly)try{p=JSON.parse(a.embedly);for(m in p)g=p[m],g["type_"+g.type]=!0,g.requireHttps=!0,t.show().append(S.fill("embedly",g))}catch(t){}return l.usePreviews&&(r=_.filter(s.entities,function(t){return"attachment"===t.type}),_.isEmpty(r)||(e=this.$(".js-previews"),f.previewHtml(r[0].url,function(t,r){if(e.empty(),null!=t){if(null!=t.login)return n("<div>").addClass("attachment-extra-info-login").html(t.login).appendTo(e),e.removeClass("hide")}else if(null!=r)return n("<div>").addClass("attachment-extra-info").html(r).appendTo(e),e.removeClass("hide")}))),h.update(this.el),this.model.isTakingTooLong?this.$el.addClass("unsent"):this.$el.removeClass("unsent"),this},e.prototype._tfmFormatOpts=function(){return{card:this.model.get("data").card,board:this.model.get("data").board},siteDomain,{textData:this.model.get("data").textData}},e.prototype._withEntityInfo=function(t){var e;return e=_.clone(t),"attachment"===e.type&&(e.url=this.model.get("data").attachment.url),"attachmentPreview"===e.type&&(e.previewUrlForRes=l.isHighDPI()&&null!=e.previewUrl2x?e.previewUrl2x:e.previewUrl),"comment"===e.type&&(e.textHtml=y.comments.format(e.text,this._tfmFormatOpts()).output),"checkItem"===e.type&&(e.nameHtml=y.checkItems.format(e.text,this._tfmFormatOpts()).output),e},e.prototype.viewMemberActionMenu=function(t){var e,r;b.stop(t),e=this.modelCache.get("Member",null!=(r=n(t.target).closest("[idmember]").attr("idmember"))?r:this.model.get("idMemberCreator")),v.toggle({elem:this.$(t.target).closest(".js-show-mem-menu"),view:i,options:{model:e,modelCache:this.modelCache}})},e.prototype.expandComment=function(t){return b.stop(t),this.$(".js-comment").addClass("is-expanded")},e.prototype.openAttachmentViewer=function(t){var e,r;t.metaKey||t.ctrlKey||(e=n(t.target),e.closest(".window-main-col").length>0&&(b.stop(t),r=e.closest(".js-open-attachment-viewer").attr("data-idattachment"),new s({model:this.model.getCard(),modelCache:this.modelCache,idAttachment:r}).render()))},e.prototype.reply=function(t){return b.stop(t),this.$el.trigger("replyToAction",this.model),B("Card","Reply to Comment")},e}(w)},{}],231:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k=function(t,e){function r(){this.constructor=t}for(var n in e)C.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},C={}.hasOwnProperty;n=t("jquery"),o=t(230),i=t(388),s=t(351),u=t(391),c=t(430),l=t(73),d=t(14),p=t(434),h=t(435),m=t(79),f=t(99),g=t("underscore"),y=t(106),b=t(81),w=t(418),_=t(34),v=t(76),e.exports=b(i,u,a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return k(e,t),e.prototype.events=f.extendEvents({"click .action-comment":"clickComment","click .js-confirm-delete-action":"confirmDeleteAction","click .js-edit-action":"editAction","click .js-save-edit":"saveEdit","keyup .js-text":"keyAutoMention","keydown .js-text":"keydownJsText","click .js-comment-add-attachment":"commentAddAttachment","click .js-comment-mention-member":"commentMentionMember","click .js-comment-add-emoji":"commentAddEmoji","click .js-comment-add-card":"commentAddCard","click .js-attach-link":"attachLink"}),e.prototype.potentialAttachments=function(){return y(this.model.get("data").text,m.comments)},e.prototype.addContextData=function(t){var r;e.__super__.addContextData.apply(this,arguments),r=this.model.getCard(),t.canAttachLink=null!=r&&r.editable()&&this.potentialAttachments().length>0},e.prototype.confirmDeleteAction=function(t){f.stop(t),c.toggle("delete comment",{elem:n(t.target).closest(".js-confirm-delete-action")[0],model:this.model,confirmBtnClass:"negate",fxConfirm:function(t){return function(e){return _("Card","Delete Comment"),t.model.destroy()}}(this)})},e.prototype.getTextInput=function(){return this.$(".js-text")},e.prototype.getMentionTarget=function(){return this.$(".js-comment-mention-member:visible")[0]},e.prototype.getEmojiTarget=function(){return this.$(".js-comment-add-emoji:visible")[0]},e.prototype.getCardTarget=function(){return this.$(".js-comment-add-card:visible")[0]},e.prototype.editAction=function(t){return f.stop(t),this.$el.hasClass("is-editing")?void 0:(this.$el.addClass("is-editing"),this.$("textarea").focus().select(),this.openEditView())},e.prototype.openEditView=function(){this.$el.append(w.fill("comment_edit_controls")),this.$(".js-text").attr("placeholder","").autosize()},e.prototype.keydownJsText=function(t){return l.isForceSubmitEvent(t)?this.saveEdit(t):this.checkInsert(t)},e.prototype.saveEdit=function(t){var e;if("keypress"!==t.type||l.isForceSubmitEvent(t)||l.getKey(t)===d.Enter&&(!n(t.target).is("textarea")||n(t.currentTarget).hasClass("single-line"))){if(e=this.$(".js-text").val(),/^\s*$/.test(e))return this.$(".js-text").val("").focus(),void this.$(".js-text").attr("placeholder",v("empty comment error message"));f.stop(t),this.$(".js-spinner").show(),this.$(".js-hide-on-sending").hide(),this.$(".current-comment").text(e),p.cancelEdits(),this.model.get("display").entities.comment.text=e,this.model.update("text",e),this.$(".js-text").trigger("autosize.destroy"),h.hide(),_("Card","Edit Comment")}},e.prototype.showError=function(t){},e.prototype.cancelEdit=function(t){t&&f.stop(t),h.hide(),p.cancelEdits()},e.prototype.clickComment=function(t){"Card"===this.context.typeName||n(t.target).is("a,textarea")||(f.stop(t),this.$("a.action-card").click())},e.prototype.getCard=function(){return this.model.getCard()},e.prototype.attachLink=function(t){var e;return f.stop(t),e=this.potentialAttachments(),h.toggle({elem:n(t.currentTarget),view:new s({model:this.getCard(),modelCache:this.modelCache,links:e})})},e}(o))},{}],232:[function(t,e,r){var n,o,i,s,a,u=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;o=t(22),i=t(99),s=t(421),a=t(34),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.events=function(){return{click:this.click,"click .js-close-ad":this.close}},e.isEligible=function(t){return!1},e.prototype.getAdId=function(){return this.constructor.adId},e.prototype.click=function(){return a("Ad",this.getAdId(),"Click")},e.prototype.close=function(t){var e;return i.stop(t),null!=(e=this.getAdId())&&(a("Ad",this.getAdId(),"Dismiss"),o.me().dismiss(e)),this.$el.slideUp(100)},e}(s)},{}],233:[function(t,e,r){var n,o,i,s=[].slice;n=t(234),o=t(235),i=t("underscore"),e.exports=new(function(){function t(){}return t.prototype._findAd=function(){var t,e,r;return t=arguments[0],r=arguments[1],e=3<=arguments.length?s.call(arguments,2):[],i.find(t,function(t){return!r.isDismissed(t.adId)&&t.isEligible.apply(t,[r].concat(s.call(e)))})},t.prototype.addMemberToOrganizationAd=function(t,e){return this._findAd.apply(this,[[o]].concat(s.call(arguments)))},t.prototype.boardsListAd=function(t,e){return this._findAd.apply(this,[[n]].concat(s.call(arguments)))},t}())},{}],234:[function(t,e,r){var n,o,i,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;o=t(237),i=t(99),s=t(418),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.adId="BoardsListBC",e.isEligible=function(t){var e,r,n,o;return(o=function(t,e){return i.idToDate(t.id)<i.dateBefore(e)})(t,{months:1})?(n=t.organizationList,e=n.any(function(t){return t.isPremium()}),r=n.any(function(t){return o(t,{weeks:1})}),!e&&r):void 0},e.prototype.className="member-boards-list-ad business-class-ad window-title-extra--bc-pitch",e.prototype.copyHtml=function(){return s.fill("ad_business_class")},e.prototype.click=function(){return e.__super__.click.apply(this,arguments),window.open("/business-class","_blank")},e}(o)},{}],235:[function(t,e,r){var n,o,i,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=t(236),i=t(418),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.adId="AddOrganizationMemberBC",e.isEligible=function(t,e){return null!=e&&!e.isPremium()},e.prototype.copyHtml=function(){return i.fill("ad_business_class_google_apps")},e}(o)},{}],236:[function(t,e,r){var n,o,i=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;o=t(239),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.className="pop-over-ad business-class-ad",e.prototype.iconClass=function(){return"business-class-mark"},e.prototype.click=function(){return e.__super__.click.apply(this,arguments),window.open("/business-class","_blank")},e}(o)},{}],237:[function(t,e,r){var n,o,i,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=t(232),i=t(418),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.tagName="span",e.prototype.className="member-boards-list-ad",e.prototype.render=function(){return this.$el.html(i.fill("member_boards_list_ad",{copyHtml:this.copyHtml()})),this},e.prototype.copy=function(){return""},e}(n)},{}],238:[function(t,e,r){var n,o;n=t("react"),o=t(414)("paid_product_info"),e.exports=n.createClass({displayName:"PaidProductBannerComponent",render:o.renderable(function(){var t,e,r,n,i,s;return n=this.props,i=n.stringsKey,s=n.subtitleCount,r=n.infoUrl,t=n.epilogueCount,e=n.icon,o.div(".business-class-new-intro.u-gutter.u-clearfix",function(){return o.div(".business-class-new-intro-header",{style:{marginBottom:"25px"}},function(){var t,e,r;for(o.h1(".business-class-new-intro-header-title",function(){return o.format([i,"title"])}),e=t=0,r=s;r>=0?r>t:t>r;e=r>=0?++t:--t)o.p(".business-class-new-intro-header-text",function(){return o.format([i,"subtitles",e])})}),o.ul(".business-class-new-intro-list",function(){var t,r;for(r=t=0;3>t;r=++t)o.icon(e,{class:"business-class-new-intro-list-icon"}),o.li(".business-class-new-intro-list-item",function(){return o.h3(function(){return o.format([i,"featureHeaders",r])}),o.p(function(){return o.format([i,"featureBodies",r])})})}),t&&o.div(".business-class-new-intro-header",function(){var e,r,n;for(r=e=0,n=t;n>=0?n>e:e>n;r=n>=0?++e:--e)o.p(function(){return o.format([i,"epilogue",r])})}),o.div(".business-class-new-intro-more",function(){return o.a(".business-class-new-intro-more-link.quiet-button",{href:r,target:"_blank"},function(){return o.format([i,"link"])})})})})})},{}],239:[function(t,e,r){var n,o,i,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=t(232),i=t(418),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.className="pop-over-list-ad",e.prototype.render=function(){return this.$el.html(i.fill("pop_over_ad",{copyHtml:this.copyHtml(),iconClass:this.iconClass()})),this},e.prototype.copyHtml=function(){return""},e}(n)},{}],240:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h=function(t,e){function r(){this.constructor=t}for(var n in e)m.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},m={}.hasOwnProperty;n=t("jquery"),i=t(432),s=t(434),a=t(435),u=t(228),c=t(421),l=t(115),d=t("underscore"),p=t(34),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return h(e,t),e.prototype.initialize=function(){var t,e;this.updatePinnedDrawer(),l.ensureRun(),this.listenTo(u,"change:pinBoardsListSidebar",function(){return this.updatePinnedDrawer()}),e=function(t){l.calc(),a.calcPos({notNew:!0}),i.isVisible&&i.calcPos()},t=this.debounce(e,300),n(window).on("resize.windowEvent",t)},e.prototype.updatePinnedDrawer=function(){return n("body").toggleClass("pinned-drawer",u.getPinSidebar())},e}(c)},{}],241:[function(t,e,r){var n,o,i,s,a,u,c,l=function(t,e){function r(){this.constructor=t}for(var n in e)d.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},d={}.hasOwnProperty;o=t(243),i=t(244),s=t(99),a=t(421),c=t(418),u=t(76),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.viewTitleKey="archive",e.prototype.className="board-menu-content-frame",e.prototype.events={"click .js-switch-section":"didClickSwitchSections","input .js-search":"searchChanged"},e.prototype.initialize=function(){return this.searchText=this.slot(""),this.cardsView=this.subview(o,this.model,{searchText:this.searchText}).render(),this.listsView=this.subview(i,this.model,{searchText:this.searchText}).render(),this.activeSubview=this.slot(this.cardsView)},e.prototype.searchChanged=function(){return this.searchText.set(this.$searchInput.val().trim())},e.prototype.didClickSwitchSections=function(t){var e;return e=function(t,e,r){return t===e?r:e},this.activeSubview.set(e(this.activeSubview.get(),this.cardsView,this.listsView)),this.$searchInput.focus(),s.stop(t)},e.prototype.injectSubview=function(t){return this.$(".js-archive-content").append(t.el),t.didBecomeActive()},e.prototype.renderOnce=function(){return this.$el.html(c.fill("board_archive")),this.$searchInput=this.$(".js-search"),this.subscribeChanges(this.activeSubview,{in:this.injectSubview,out:function(t){return t.$el.detach()}}),this.watch("activeSubview",function(t){return function(e){var r;return r=e===t.cardsView?"switch to archived lists":"switch to archived cards",t.$(".js-switch-section").text(u(r))}}(this)),this.watch("activeSubview.isLoading",function(t){return function(e){return t.$(".js-loading-spinner").toggleClass("hide",!e),t.$(".js-archive-content").toggleClass("hide",e)}}(this)),this},e}(a)},{}],242:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h=function(t,e){function r(){this.constructor=t}for(var n in e)m.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},m={}.hasOwnProperty;n=t("jquery"),i=t(361),s=t(430),a=t(5),u=t(432),c=t(99),l=t(421),d=t(418),p=t(34),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return h(e,t),e.prototype.tagName="div",e.prototype.className="archived-list-card",e.prototype.events={"click .list-card":"openCard","click .js-delete":"deleteModel","click .js-reopen":"reopen"},e.prototype.vigor=e.VIGOR.NONE,e.prototype.renderOnce=function(){var t,e,r;return e={reOpenText:this.options.reOpenText,canDelete:null!=(r=this.options.canDelete)?r:!1},t=this.subview(i,this.model,{dontFilter:!0}),t.render(),this.$el.append(t.el),this.$el.append(d.fill("archived_card_options",e,{editable:this.model.editable()})),this},e.prototype.openCard=function(t){c.stop(t),a.showCardDetail(this.model),u.calcPos()},e.prototype.deleteModel=function(t){var e;c.stop(t),s.toggle("delete card",{elem:null!=(e=n(t.target).closest(".js-delete"))?e[0]:void 0,model:this.model,confirmBtnClass:"negate",fxConfirm:function(t){return function(e){return t.model.destroy(),p("Card","Delete","Via Archive")}}(this)})},e.prototype.reopen=function(t){return c.preventDefault(t),this.model.update({closed:!1},function(t){return function(){return p("Card","Reopen","Via Archive")}}(this)),!1},e}(l)},{}],243:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h=function(t,e){function r(){this.constructor=t}for(var n in e)m.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},m={}.hasOwnProperty,f=[].slice;n=t(242),i=t(61),s=t("hearsay"),a=t(27),u=t(421),c=t("underscore"),p=t(418),d=t(76),l=t(197),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}var r,o,s;return h(e,t),e.prototype.CARDS_PER_PAGE=30,o={},s=function(t){var e;return e=o,{lease:function(){var r;return r=function(){(e===o||r===e)&&t.apply(this,arguments)},e=r,r}}},e.prototype.initialize=function(t){var e;return this.searchText=t.searchText,this.isLoadingInitialCards=this.slot(!1),this.isLoadingMoreCards=this.slot(!1),this.isLoadingSearchResults=this.slot(!1),this.isLoading=this.using(this.isLoadingInitialCards.or(this.isLoadingSearchResults)),this.isSearching=this.using(this.searchText.map(function(t){return t.length>0}).distinct()),this.hasMoreCards=this.slot(!1),this.searchResults=this.slot([]),this.sortedContiguousCards=this.slot([]),this.updateSearchCallback=s(function(t){return function(e){var r;return r=e.map(function(e){return t.modelCache.get("Card",e.id)}),t.searchResults.set(r),t.isLoadingSearchResults.set(!1)}}(this)),e=function(t){return function(e){return t.sortedContiguousCards.set(c.without(t.sortedContiguousCards.get(),e)),t.searchResults.set(c.without(t.searchResults.get(),e))}}(this),this.listenTo(this.modelCache,{"remove:Card":e,"change:Card:closed":function(t){return function(r){r.get("idBoard")===t.model.id&&(r.get("closed")?t.sortedContiguousCards.set([r].concat(f.call(t.sortedContiguousCards.get()))):e(r))}}(this)}),this.cards=this.using(this.isSearching.if(this.searchResults,this.sortedContiguousCards))},e.prototype.events={"click .js-more-cards":"getMoreCards"},r=!1,e.prototype.didBecomeActive=function(){var t;if(!this.hasBeenActiveBefore)return this.hasBeenActiveBefore=!0,t={limit:this.CARDS_PER_PAGE},this.isLoadingInitialCards.set(!0),a.loadClosedCards(this.model.id,t).tap(l(this,"didLoadContiguousCards")).finally(function(t){return function(){return t.isLoadingInitialCards.set(!1)}}(this)).done()},e.prototype.didLoadContiguousCards=function(t){var e,r;return this.hasMoreCards.set(t.length===this.CARDS_PER_PAGE),r=c.sortBy(t,function(t){return function(e){return-t.cardSortRank(e)}}(this)),e=f.call(this.sortedContiguousCards.get()).concat(f.call(r)),this.sortedContiguousCards.set(c.uniq(e))},e.prototype.cardSortRank=function(t){var e,r;return null!=(r="function"==typeof(e=i.parse(t.get("dateLastActivity"))).getTime?e.getTime():void 0)?r:null},e.prototype.getMoreCards=function(){var t,e;return t=c.last(this.sortedContiguousCards.get()),e={limit:this.CARDS_PER_PAGE,before:null!=t?this.cardSortRank(t):null},this.isLoadingMoreCards.set(!0),a.loadClosedCards(this.model.id,e).tap(l(this,"didLoadContiguousCards")).finally(function(t){return function(){return t.isLoadingMoreCards.set(!1)}}(this)).done()},e.prototype.vigor=e.VIGOR.SOME,e.prototype.renderOnce=function(){var t,e;return this.$el.html(p.fill("archived_cards")),this.watch("isLoadingMoreCards",function(t){return this.$(".js-more-cards").attr("disabled",t)}),e=this.hasMoreCards.and(this.isSearching.not()),this.subscribe(e,function(t){return this.$(".js-more-cards").toggleClass("hide",!t)}),this.watch("isSearching",function(t){var e;return e=t?"no results":"no archived cards",this.$(".js-empty-message").text(d(e))}),this.watch("cards",function(t){return this.$(".js-empty-message").toggleClass("hide",t.length>0)}),this.watch("isLoadingSearchResults",function(t){return this.$(".js-search-loading").toggleClass("hide",!t)}),t=this.debounce(this.loadSearchResults,400),this.subscribe(this.searchText.filter(function(t){return t.length>0}),function(){return this.isLoadingSearchResults.set(!0),t.call(this)}),this.subscribe(this.cards,this.frameDebounce(this.renderCards))},e.prototype.loadSearchResults=function(){var t;return t={query:"is:archived "+this.searchText.get(),modelTypes:"cards",idBoards:this.model.id,card_stickers:!0,card_attachments:"cover",partial:!0},a.loadSearchData(t).get("cards").then(this.updateSearchCallback.lease()).done()},e.prototype.renderCards=function(){var t,e,r;t=this.$(".js-archive-items"),t.children().detach(),r=function(){var t,r,o,i;for(o=this.cards.get(),i=[],t=0,r=o.length;r>t;t++)e=o[t],i.push(this.subview(n,e,{reOpenText:d("unarchive card"),canDelete:!0}));return i}.call(this),this.appendSubviews(r,t)},e}(u)},{}],244:[function(t,e,r){var n,o,i,s,a,u,c,l,d=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty,h=[].slice;o=t(245),i=t(27),s=t(99),a=t(421),u=t("underscore"),l=t(418),c=t(76),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return d(e,t),e.prototype.initialize=function(t){return this.searchText=t.searchText,this.isLoading=this.slot(!0),this.allArchivedLists=this.slot([]),this.sortedFilteredLists=this.allArchivedLists.combine(this.searchText).map(function(t){var e,r,n;return r=t[0],n=t[1],""===n?r:(e=s.buildFuzzyMatcher(n),u.filter(r,function(t){return e(t.get("name"))}))}).map(function(t){return u.sortBy(t,function(t){return t.get("name")})}),this.using(this.sortedFilteredLists),this.listenTo(this.modelCache,"change:List:closed",function(t){return function(e){return e.get("closed")?t.allArchivedLists.set([e].concat(h.call(t.allArchivedLists.get()))):t.allArchivedLists.set(u.without(t.allArchivedLists.get(),e))}}(this))},e.prototype.hasBeenActiveBefore=!1,e.prototype.didBecomeActive=function(){this.hasBeenActiveBefore||(this.hasBeenActiveBefore=!0,i.loadArchivedLists(this.model.id).then(function(t){return function(e){var r;return r=t.modelCache.find("List",function(e){return e.get("idBoard")===t.model.id&&e.get("closed")}),t.allArchivedLists.set(r),t.isLoading.set(!1)}}(this)))},e.prototype.vigor=e.VIGOR.SOME,e.prototype.renderOnce=function(){return this.$el.html(l.fill("archived_lists")),this.watch("searchText",function(t){var e;return e=0===t.length?"no archived lists":"no results",this.$(".js-empty-message").text(c(e))}),this.watch("sortedFilteredLists",function(t){return this.$(".js-empty-message").toggleClass("hide",t.length>0)}),this.watch("sortedFilteredLists",this.frameDebounce(this.renderLists))},e.prototype.renderLists=function(){var t,e;return this.$(".js-archive-items").children().detach(),t=function(){var t,r,n,i;for(n=this.sortedFilteredLists.get(),i=[],t=0,r=n.length;r>t;t++)e=n[t],i.push(this.subview(o,e,{reOpenText:c("unarchive list"),canDelete:!1}));return i}.call(this),this.appendSubviews(t,this.$(".js-archive-items")),this},e}(a)},{}],245:[function(t,e,r){var n,o,i,s,a,u,c=function(t,e){function r(){this.constructor=t}for(var n in e)l.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},l={}.hasOwnProperty;o=t(435),i=t(99),s=t(421),a=t(418),u=t(34),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.tagName="li",e.prototype.className="u-clearfix",e.prototype.events={"click .js-reopen":"reopen"},e.prototype.canReopen=function(){return null!=this.model.owned?this.model.owned():this.model.editable()},e.prototype.render=function(){var t,e;return e=this.model.toJSON(),e.reOpenText=this.options.reOpenText,e.url="function"==typeof(t=this.model).getUrl?t.getUrl():void 0,this.$el.html(a.fill("archive_item",e,{editable:this.canReopen()})),this},e.prototype.reopen=function(t){return i.preventDefault(t),o.hide(),this.model.update({closed:!1},function(t){return function(){var e;return u(t.model.typeName,"Reopen","Via Archive"),"function"==typeof(e=t.options).onReopen?e.onReopen(t.model):void 0}}(this)),!1},e}(s)},{}],246:[function(t,e,r){var n,o,i,s,a,u,c,l=function(t,e){function r(){this.constructor=t}for(var n in e)d.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},d={}.hasOwnProperty;n=t(245),i=t(5),s=t(421),c=t(418),u=t(76),a=t(197),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.initialize=function(){return this.listenTo(this.model.boardList,{"change:closed add remove reset":this.frameDebounce(this.render)})},e.prototype.render=function(){var t,e,r,o;return e=this.model.boardList,r={empty:0===e.filter(function(t){return t.get("closed")}).length},this.$el.html(c.fill("closed_boards",r)),t=this.$(".js-archive-items"),o=e.filter(a.method("get","closed")).map(function(t){return function(e){return t.subview(n,e,{onReopen:t.onReopen.bind(t),reOpenText:u("unarchive board")})}}(this)),this.appendSubviews(o,t),this},e.prototype.onReopen=function(t){return i.displayBoard({idBoard:t.id}).done()},e}(s)},{}],247:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x=function(t,e){function r(){this.constructor=t}for(var n in e)j.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},j={}.hasOwnProperty;g=t("underscore"),n=t(249),i=t(248),s=t(60),a=t(430),u=t(61),c=t(24),b=t(412),l=t(408),d=t(411),p=t(537),h=t(435),m=t(99),f=t(421),v=t(76),w=t(416)("plugin_attachment_thumbnail"),_=t(562),k=t(34),C=t("xtend"),y=w.renderable(function(t){var e,r,n,o,i,s,a,u,c,l,d;d=t.url,c=t.openText,e=t.canRemove,o=t.image,l=t.title,r=t.created,n=t.createdBy,a=t.modified,u=t.modifiedBy,i=t.initialize,(null==o||null==o.url)&&(o={url:""}),s={href:d,target:d,title:l},o.logo?w.a(".attachment-thumbnail-preview",g.clone(s),function(){return w.span(".attachment-thumbnail-preview-power-up-logo",function(){return w.img({class:"attachment-thumbnail-preview-power-up-logo-image",src:o.url+"?color=999"})})}):w.a(".attachment-thumbnail-preview",C(s,{style:w.stylify({"background-image":o.url?w.urlify(o.url):void 0,"background-position-y":"top"===o.y?"0px":void 0,"background-position-x":"left"===o.x?"0px":void 0,"background-size":function(){switch(o.size){case"cover":return"cover";case"original":return"inherit";default:return"contain"}}()})})),w.p(".attachment-thumbnail-details",function(){var t,o;return w.a(".attachment-thumbnail-details-title",g.clone(s),function(){return w.text(l),null!=r&&w.span(".u-block.quiet",function(){return null!=n?w.format("created-by",{date:r,user:n}):w.format("created",{date:r})}),null!=a?w.span(".u-block.quiet",function(){return null!=u?w.format("modified-by",{date:a,user:u}):w.format("modified",{date:a})}):void 0}),null!=i&&"iframe"===i.type&&(o=i.url,t=i.height,w.iframe(".plugin-iframe.plugin-thumbnail-initialize",{src:o,style:t?"height:"+t+"px;":void 0})),w.span(".quiet.attachment-thumbnail-details-options",function(){return w.a(".attachment-thumbnail-details-options-item.dark-hover",g.clone(s),function(){return w.icon("external-link"),w.text(" "),w.span(".attachment-thumbnail-details-options-item-text.js-direct-link",function(){return w.text(c)})}),e?w.a(".attachment-thumbnail-details-options-item.attachment-thumbnail-details-options-item-delete.dark-hover.js-confirm-delete",{
href:"#"},function(){return w.icon("close"),w.text(" "),w.span(".attachment-thumbnail-details-options-item-text",function(){return w.format("remove")})}):void 0})})}),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return x(e,t),e.prototype.className="attachment-thumbnail",e.prototype.events={"click .js-open-viewer":"openViewer","click .js-direct-link":"dontOpenViewer","click .js-download":"download","click .js-make-cover":"makeCover","click .js-remove-cover":"removeCover","click .js-confirm-delete":"confirmDelete"},e.prototype.vigor=e.VIGOR.NONE,e.prototype.renderOnce=function(){var t,e;return e=this.model.getCard(),t=e.getBoard(),this.subscribe(b(t).combine(e.snoop("idAttachmentCover")),function(t){return function(){return t.renderPluginThumbnail().catch(d.Error.NotHandled,function(){return t.renderNormal()}).done()}}(this)),this},e.prototype.renderPluginThumbnail=function(){var t,e;return e=this.model.getCard(),t=e.getBoard(),d.one({command:"attachment-thumbnail",card:e,board:t,options:l.attachment(this.model)}).then(function(e){return function(r){return e.$el.html(y(C({url:e.model.get("url"),title:e.model.get("name"),openText:v("attachments.trello.open")},r,{canRemove:e.model.editable(),created:r.created?new Date(r.created):void 0,modified:r.modified?new Date(r.modified):void 0}))),u.update(e.el),e.initIFrames(t)}}(this)).return()},e.prototype.renderNormal=function(){return n.getAttachmentData(this.model).then(function(t){return function(e){var r,o,i,a,l,d,p;return e.canUseViewer="dropbox"!==t.model.getServiceKey()&&n.isViewerable(e.ext)&&!s.isTouch(),a=t.model.smallestPreviewBiggerThan(110,80),s.isHighDPI()&&(i=t.model.smallestPreviewBiggerThan(220,160),a=null!=i?i:a),null!=a&&(o=t.model.getCard(),p=null!=(l=o.getBoard())&&null!=(d=l.get("prefs"))?d.cardCovers:void 0,e.isCover=p&&o.get("idAttachmentCover")===t.model.id,e.imgSrc=a.url),e.isUpload=t.model.get("isUpload"),e.editable=t.model.editable(),t.$el.html(_(e)),t.renderCoverState(),u.update(t.el),e.isKnownService?(r=t.$(".js-attachment-thumbnail-details"),c.thumbnailHtml(e.url,e,function(t,e){return null==t&&null!=e?(r.html(e),u.update(r)):void 0})):void 0}}(this)).done(),this},e.prototype.openViewer=function(t){t.metaKey||t.ctrlKey||(m.stop(t),new i({model:this.model.getCard(),modelCache:this.modelCache,attachmentModel:this.model}).render(),k("Attachment","Open Attachment Viewer",this.model.getType()))},e.prototype.dontOpenViewer=function(t){return t.stopPropagation()},e.prototype.renderCoverState=function(){var t,e,r,n,o,i,s,a;r=null!=(o=this.model.getCard())&&null!=(i=o.getBoard())?i.getPref("cardCovers"):void 0,t=this.$(".js-make-cover").addClass("hide"),e=this.$(".js-remove-cover").addClass("hide"),(null!=(s=this.model.get("previews"))?s.length:void 0)>0&&r&&(n=(null!=(a=this.model.getCard())?a.get("idAttachmentCover"):void 0)===this.model.id,t.toggleClass("hide",n),e.toggleClass("hide",!n))},e.prototype.download=function(t){m.stopPropagation(t),k("Attachment","Attachment Thumbnail","Download")},e.prototype.makeCover=function(t){m.stop(t),h.hide(),this.model.getCard().makeCover(this.model),k("Attachment","Attachment Thumbnail","Make Cover")},e.prototype.removeCover=function(t){m.stop(t),h.hide(),this.model.getCard().removeCover(null),k("Attachment","Attachment Thumbnail","Remove Cover")},e.prototype.confirmDelete=function(t){var e;m.stop(t),e=this.model.get("isUpload")?"delete attachment":"remove attachment",a.toggle(e,{elem:this.$(".js-confirm-delete"),model:this.model,confirmBtnClass:"negate",fxConfirm:function(t){return function(e){return t.model.destroy(),k("Attachment","Delete Attachment",t.model.getType())}}(this)}),k("Attachment","Attachment Thumbnail","Confirm Delete")},e}(p)},{}],248:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g=function(t,e){function r(){this.constructor=t}for(var n in e)v.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},v={}.hasOwnProperty,y=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};n=t("jquery"),o=t(249),s=t(61),a=t(14),u=t(435),c=t(419),l=t(99),d=t(421),p=t("underscore"),m=t(418),f=t(34),h=t(76),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return g(e,t),e.prototype.className="attachment-viewer",e.prototype.initialize=function(){var t,e;return u.hide(),this.allowsCardCovers=null!=(e=this.model.getBoard())?e.getPref("cardCovers"):void 0,this.currentAttachment=this.options.attachmentModel,t=this.options.idAttachment,null!=t?this.currentAttachment=this.model.attachmentList.find(function(e){return e.id===t}):void 0},e.prototype.events={"click .js-show-next-frame":"showNextFrame","click .js-show-prev-frame":"showPrevFrame","mouseenter .js-show-next-frame":"hintNextFrame","mouseenter .js-show-prev-frame":"hintPrevFrame","mouseleave .js-show-next-frame":"clearHint","mouseleave .js-show-prev-frame":"clearHint","click .js-stop":"stop","click .js-close-viewer":"close","click .js-open-delete-confirm":"openDeleteConfirm","click .js-close-delete-confirm":"closeDeleteConfirm","click .js-delete":"delete","click .js-make-cover":"makeCover","click .js-remove-cover":"removeCover",shortcut:"shortcut"},e.prototype.shortcut=function(t){switch(t){case a.Escape:return this.close(),["Esc - Close Attachment Viewer","Attachment Viewer"];case a.ArrowRight:return this.showNextFrame(),["Right Arrow - Next Attachment","Attachment Viewer"];case a.ArrowLeft:return this.showPrevFrame(),["Left Arrow - Previous Attachment","Attachment Viewer"]}},e.prototype.getAttachmentModels=function(){return this.model.attachmentList.models},e.prototype.getAttachmentModelsLength=function(){return this.getAttachmentModels().length},e.prototype.getCurrentAttachmentIndex=function(){return p.indexOf(this.getAttachmentModels(),this.currentAttachment)},e.prototype.getNextAttachmentIndex=function(){var t;return t=this.getCurrentAttachmentIndex()+1,t>=this.getAttachmentModelsLength()?null:t},e.prototype.getNextModel=function(){var t;return t=this.getNextAttachmentIndex(),null!=t?this.getAttachmentModels()[t]:null},e.prototype.getPrevAttachmentIndex=function(){var t;return t=this.getCurrentAttachmentIndex()-1,0>t?null:t},e.prototype.getPrevModel=function(){var t;return t=this.getPrevAttachmentIndex(),null!=t?this.getAttachmentModels()[t]:null},e.prototype.render=function(){var t,e,r;return t=this.model.toJSON(),t.numAttachments=this.getAttachmentModelsLength(),this.$el.html(m.fill("attachment_viewer",t)),this.addNewFrame(this.currentAttachment,"center"),e=this.getNextModel(),null!=e&&this.addNewFrame(e,"right"),r=this.getPrevModel(),null!=r&&this.addNewFrame(r,"left"),this.setDetailsAndControls(),n("body").append(this.$el),c.addHandler(this,{scope:"attachment_viewer",modal:!0}),this},e.prototype.setDetailsAndControls=function(){o.getAttachmentData(this.currentAttachment).then(function(t){return function(e){var r,n;return e.canMakeCover=t.allowsCardCovers&&(null!=(n=e.previews)?n.length:void 0)>0,e.isCover=t.allowsCardCovers&&t.model.get("idAttachmentCover")===t.currentAttachment.id,r=t.currentAttachment.get("isUpload")?"delete attachment":"remove attachment",p.extend(e,{removeButtonText:h([r,"button"]),removeMessageText:h([r,"message"]),removeConfirmText:h([r,"confirm"]),removeCancelText:h([r,"cancel"])}),t.$(".js-display-frame-details").html(m.fill("attachment_viewer_frame_details",e,{editable:t.model.editable()})),t.$(".js-show-prev-frame").toggleClass("hide",null==t.getPrevAttachmentIndex()),t.$(".js-show-next-frame").toggleClass("hide",null==t.getNextAttachmentIndex()),s.update(t.el)}}(this)).done()},e.prototype.addNewFrame=function(t,e){return o.getAttachmentData(t).then(function(t){return function(r){var i,s,a,u,c,d,p,h,f,g,v,b,w,_;return null!=e&&(r.directionClass="attachment-viewer-frame-"+e),p=r.ext,u=y.call(o.imageExts(),p)>=0||(null!=(h=r.previews)?h.length:void 0)>0,f=r.ext,i=y.call(o.audioExts(),f)>=0,g=r.ext,c=y.call(o.videoExts(),g)>=0,v=r.ext,a=y.call(o.iFrameableExts(),v)>=0,b=r.ext,s=y.call(o.googleViewerableExts(),b)>=0,r.isExternal?r.isPlaceholder=!0:u?(r.isImage=!0,null!=r.previews&&null!=(d=null!=(w=l.biggestPreview(r.previews))?w.url:void 0)&&(r.url=d)):i?r.isAudio=!0:c?r.isVideo=!0:a?r.isIFrameable=!0:s?(r.isIFrameable=!0,_=encodeURIComponent(r.url),r.url="https://docs.google.com/viewer?embedded=true&url="+_):(r.isPlaceholder=!0,r.openText="Download"),t.$(".js-frames").append(m.fill("attachment_viewer_frame",r,{editable:t.model.editable()})),t.defer(function(){return n(".attachment-viewer-frame").addClass("attachment-viewer-frame-loaded")})}}(this)).done(),this},e.prototype.focusFrame=function(t,e){var r,o,i,s;switch(this.currentAttachment=t,r=p.find(this.$(".attachment-viewer-frame"),function(e){return function(e){return n(e).attr("data-idAttachment")===t.id}}(this)),e){case"right":o=this.$(".attachment-viewer-frame-left"),s="attachment-viewer-frame-left",i=this.getNextModel();break;case"left":o=this.$(".attachment-viewer-frame-right"),s="attachment-viewer-frame-right",i=this.getPrevModel()}this.$(".attachment-viewer-frame-center").removeClass("attachment-viewer-frame-center").addClass(s),n(r).removeClass("attachment-viewer-frame-left attachment-viewer-frame-right").addClass("attachment-viewer-frame-center"),o.remove(),null!=i?this.addNewFrame(i,e):this.clearHint(),this.setDetailsAndControls()},e.prototype.showNextFrame=function(t){var e;l.stop(t),e=this.getNextModel(),null!=e&&this.focusFrame(e,"right"),f("Attachment Viewer","Show Next Frame")},e.prototype.showPrevFrame=function(t){var e;l.stop(t),e=this.getPrevModel(),null!=e&&this.focusFrame(e,"left"),f("Attachment Viewer","Show Previous Frame")},e.prototype.hintNextFrame=function(){this.$el.addClass("attachment-viewer-frames-next-hint")},e.prototype.hintPrevFrame=function(){this.$el.addClass("attachment-viewer-frames-prev-hint")},e.prototype.clearHint=function(){this.$el.removeClass("attachment-viewer-frames-next-hint attachment-viewer-frames-prev-hint")},e.prototype.stop=function(t){return l.stopPropagation(t)},e.prototype.openDeleteConfirm=function(t){l.stop(t),this.$(".js-meta").addClass("hide"),this.$(".js-confirm-delete").removeClass("hide"),f("Attachment Viewer","Open Delete Attachment Confirm")},e.prototype.closeDeleteConfirm=function(t){l.stop(t),this.$(".js-meta").removeClass("hide"),this.$(".js-confirm-delete").addClass("hide"),f("Attachment Viewer","Close Delete Attachment Confirm")},e.prototype.delete=function(t){l.stop(t),this.currentAttachment.destroy(),this.close(),f("Attachment Viewer","Delete Attachment")},e.prototype.renderToggleCover=function(){var t,e;t=this.allowsCardCovers&&this.currentAttachment.get("previews").length>0,this.$(".js-cover-options").toggleClass("hide",!t),e=this.allowsCardCovers&&this.model.get("idAttachmentCover")===this.currentAttachment.id,this.$(".js-make-cover-box").toggleClass("hide",e),this.$(".js-remove-cover-box").toggleClass("hide",!e)},e.prototype.makeCover=function(){this.model.makeCover(this.currentAttachment),this.renderToggleCover(),f("Attachment Viewer","Make Cover")},e.prototype.removeCover=function(){this.model.removeCover(null),this.renderToggleCover(),f("Attachment Viewer","Remove Cover")},e.prototype.close=function(){this.remove(),c.removeHandler(this),f("Attachment Viewer","Close Viewer")},e}(d)},{}],249:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};n=t(60),o=t(78),i=t(24),s=t("bluebird"),a=t(99),l=t(91),d=t("xtend"),u=t("underscore"),c=t(76),e.exports=function(){return{getAttachmentData:function(t){var e,r;return e=t.get("url"),r=t.getServiceKey(),i.interpret(e,t.modelCache).then(function(e){return function(e){var i;if(null!=e)return{isKnownService:!0,meta:e.name,previewClass:e.previewClass,name:e.text};switch(r){case"trello":return i=n.respectsCrossDomainDownloadAttribute(),{meta:o.bytes(t.get("bytes")),openText:c(i?"attachments.trello.download":"attachments.trello.open"),doDownload:i,openIconClass:i?"download":"external-link",isExternal:!1};case"gdrive":return{meta:l(["mime",t.get("mimeType")]),previewClass:"attachment-thumbnail-preview-google-drive-logo"};case"dropbox":return{previewClass:"attachment-thumbnail-preview-dropbox-logo"};case"onedrive":return{previewClass:"attachment-thumbnail-preview-one-drive-logo"};case"box":return{previewClass:"attachment-thumbnail-preview-box-logo"};case"other":return{ext:"LINK"}}}}(this)).then(function(n){var o,i;return o=d({doDownload:!1,isKnownService:!1,isExternal:!0,openIconClass:"external-link"},t.toJSON(),n),null==o.meta&&(o.meta=c(["attachments",r,"type"])),null==o.openText&&(o.openText=c(["attachments",r,"open"])),null==o.removeText&&(o.removeText=c(["attachments",r,"remove"])),null==o.ext&&(o.ext=null!=(i=a.fileExt(t.get("name")))?i:a.fileExt(e),null!=o.ext&&o.ext.length>6&&(o.ext=null)),o})},availableExts:function(){var t,e,r,n,o;if(null==this._availableExts){for(t=[],o=navigator.mimeTypes,e=0,r=o.length;r>e;e++)n=o[e],t=t.concat(n.suffixes.split(","));this._availableExts=u.compact(u.uniq(t))}return this._availableExts},imageExts:function(){return["bmp","gif","jpeg","jpg","png","svg","webp"]},getPlayableExts:function(t,e){var r;return r=document.createElement(e),u.chain(t).filter(function(t){var e;return e=t.types,u.any(e,function(t){return""!==r.canPlayType(t)})}).pluck("exts").flatten().value()},audioExts:function(){var t;return this._audioExts?this._audioExts:(t=[{exts:["m4a"],types:["audio/x-m4a;","audio/aac;"]},{exts:["mp3"],types:["audio/mpeg;"]},{exts:["opus"],types:['audio/ogg; codecs="opus"']},{exts:["ogg"],types:['audio/ogg; codecs="vorbis"']},{exts:["wav"],types:['audio/wav; codecs="1"']}],this._audioExts=this.getPlayableExts(t,"audio"))},videoExts:function(){var t;return this._videoExts?this._videoExts:(t=[{exts:["mp4"],types:['video/mp4; codecs="mp4v.20.8"']},{exts:["mov","h264"],types:['video/mp4; codecs="avc1.42E01E"','video/mp4; codecs="avc1.42E01E, mp4a.40.2"']},{exts:["ogv"],types:['video/ogg; codecs="theora"']},{exts:["webm"],types:['video/webm; codecs="vp8, vorbis"']}],this._videoExts=this.getPlayableExts(t,"video"))},googleViewerableExts:function(){var t;return t=["doc","docx","ppt","pptx","rtf","xls","xlsx"],p.call(this.availableExts(),"pdf")>=0||t.push("pdf"),null!=this._googleViewerableExts?this._googleViewerableExts:this._googleViewerableExts=t},iFrameableExts:function(){var t,e;return t=["css","js","txt"],e=["pdf"],null!=this._iFrameableExts?this._iFrameableExts:this._iFrameableExts=u.intersection(e,this.availableExts()).concat(t)},allViewerableExts:function(){return null!=this._viewerableExts?this._viewerableExts:(this._viewerableExts=this.imageExts().concat(this.audioExts()).concat(this.videoExts()).concat(this.googleViewerableExts()).concat(this.iFrameableExts()),this._viewerableExts)},isViewerable:function(t){return p.call(this.allViewerableExts(),t)>=0}}}()},{}],250:[function(t,e,r){var n,o,i,s;s=t(418),n=t("jquery"),i=t("underscore"),e.exports=o=function(){function t(t,e){var r,o;this.badgesView=t,this.modelCache=e.modelCache,null==this.$el&&(this.$el=n("<div>")),this.dependentBadges.length>0&&(o=function(){var t,e,n,o;for(n=this.dependentBadges,o=[],t=0,e=n.length;e>t;t++)r=n[t],o.push("change:badges."+r);return o}.call(this),this.badgesView.listenTo(this.badgesView.model,o.join(" "),function(t){return function(){return t.render()}}(this)))}return t.prototype.shouldUpdate=!0,t.prototype.dependentBadges=[],t.prototype.additionalClasses=[],t.prototype.rendered=!1,t.prototype.visible=function(){throw new Error("Badge subclasses must specify a `visible` predicate")},t.prototype.update=function(){return this.shouldUpdate&&this.$el.attr("title",i.result(this,"title")).find(".badge-text").html(this.text?i.result(this,"text"):""),this},t.prototype.remove=function(){var t;return null!=(t=this.$el)&&t.detach(),this.rendered=!1},t.prototype.render=function(){var t,e,r;return this.rendered?(this.visible()?this.update():this.remove(),this):this.visible()?(r=this.text?i.result(this,"text"):"",e=i.result(this,"icon"),this.$el.attr("title",i.result(this,"title")).attr("class","").addClass("badge").addClass(i.result(this,"additionalClasses").join(" ")).toggleClass("is-icon-only",!r).html(s.fill("badge",{text:r,icon:e})),t=i.find(this.badgesView.badges,function(t){return function(e){return e.rendered&&e.position>t.position}}(this)),null==t?this.badgesView.$el.append(this.$el):this.$el.insertBefore(t.$el),this.rendered=!0,this):this},t.prototype.badge=function(t){var e;return null!=(e=this.badgesView.model.get("badges"))?e[t]:void 0},t}()},{}],251:[function(t,e,r){var n,o,i,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;n=t("jquery"),i=t(522),s=t(421),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.className="badges",e.prototype.initialize=function(t){var e;e=t.badges,this.badges=e.map(function(t){return function(e){return new e(t,{modelCache:t.modelCache})}}(this))},e.prototype.render=function(){var t;return this.$el.append(function(){var e,r,n,o;for(n=this.badges,o=[],e=0,r=n.length;r>e;e++)t=n[e],t.visible()&&o.push(t.render().$el);return o}.call(this)),this.appendSubview(this.subview(i,this.model)),this},e.prototype.remove=function(){var t,r,n,o,i;for(e.__super__.remove.apply(this,arguments),o=this.badges,i=[],r=0,n=o.length;n>r;r++)t=o[r],i.push(t.remove());return i},e}(s)},{}],252:[function(t,e,r){var n,o,i;n=t("react"),i=t(414)(),o=t(101),e.exports=n.createClass({displayName:"BoardListItemBadgeComponent",render:i.renderable(function(){var t,e,r,n,o;return r=this.props,t=r.icon,n=r.text,o=r.title,e=r.iconClass,i.span(".board-tile-badges-item",{title:o},function(){return i.icon(t,{class:["board-tile-badges-item-icon",e].join(" ")}),null!=n?i.span(".board-tile-badges-item-name",function(){return i.text(n)}):void 0})}),shouldComponentUpdate:o})},{}],253:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m=function(t,e){function r(){this.constructor=t}for(var n in e)f.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},f={}.hasOwnProperty;i=t(250),p=t("underscore"),h=t(76),l=function(t){function e(){var t,r;e.__super__.constructor.apply(this,arguments),this._cachedNotificationCount=null,r=function(){var e,r,n,o;for(n=["add","remove","change"],o=[],e=0,r=n.length;r>e;e++)t=n[e],o.push(t+":Notification:"+this.badgesView.model.id);return o}.call(this),this.badgesView.listenTo(this.modelCache,r.join(" "),function(t){return function(){return t._cachedNotificationCount=null,t.render()}}(this))}return m(e,t),e.prototype.icon="notification",e.prototype.position=0,e.prototype.visible=function(){return this.notificationCount()>0},e.prototype.notificationCount=function(){return null==this._cachedNotificationCount&&(this.badgesView.model.id?this._cachedNotificationCount=p.count(this.modelCache.all("Notification"),function(t){return function(e){var r,n;return e.get("unread")&&(null!=(r=e.get("data"))&&null!=(n=r.card)?n.id:void 0)===t.badgesView.model.id}}(this)):this._cachedNotificationCount=0),this._cachedNotificationCount},e.prototype.text=function(){return this.notificationCount().toString()},e.prototype.title=function(){return h("badge.notifications")},e.prototype.additionalClasses=["is-unread-notification"],e}(i),d=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.badgesView.listenTo(this.badgesView.model,"change:subscribed",function(t){return function(){return t.render()}}(this))}return m(e,t),e.prototype.shouldUpdate=!1,e.prototype.position=1,e.prototype.icon="subscribe",e.prototype.visible=function(){return this.badgesView.model.get("subscribed")},e.prototype.title=function(){return h("badge.subscribed")},e}(i),u=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return m(e,t),e.prototype.shouldUpdate=!1,e.prototype.position=3,e.prototype.dependentBadges=["description"],e.prototype.icon="description",e.prototype.title=function(){return h("badge.description")},e.prototype.visible=function(){return this.badge("description")},e}(i),a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return m(e,t),e.prototype.position=4,e.prototype.dependentBadges=["comments"],e.prototype.icon="comment",e.prototype.title=function(){return h("badge.comments")},e.prototype.text=function(){return this.commentCount().toString()},e.prototype.visible=function(){return this.commentCount()>0},e.prototype.commentCount=function(){var t;return null!=(t=this.badge("comments"))?t:0},e}(i),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return m(e,t),e.prototype.position=5,e.prototype.dependentBadges=["attachments"],e.prototype.icon="attachment",e.prototype.attachmentCount=function(){var t;return null!=(t=this.badge("attachments"))?t:0},e.prototype.visible=function(){return this.attachmentCount()>0},e.prototype.text=function(){return this.attachmentCount().toString()},e.prototype.title=function(){return h("badge.attachments")},e}(i),s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return m(e,t),e.prototype.position=6,e.prototype.dependentBadges=["checkItems","checkItemsChecked"],e.prototype.icon="checklist",e.prototype.title=function(){return h("badge.checkitems")},e.prototype.visible=function(){return this.badge("checkItems")},e.prototype.text=function(){return this.badge("checkItemsChecked")+"/"+this.badge("checkItems")},e.prototype.additionalClasses=function(){return this.isCompleted()?["is-complete"]:[]},e.prototype.isCompleted=function(){return this.badge("checkItemsChecked")===this.badge("checkItems")},e.prototype.update=function(){return this.$el.toggleClass("is-complete",this.isCompleted()),e.__super__.update.apply(this,arguments)},e}(i),n=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.badgesView.listenTo(this.badgesView.model,"change:closed",function(t){return function(){return t.render()}}(this))}return m(e,t),e.prototype.shouldUpdate=!1,e.prototype.icon="archive",e.prototype.text=function(){return h("badge.archived.text")},e.prototype.title=function(){return h("badge.archived.title")},e.prototype.visible=function(){return this.badgesView.model.get("closed")},e}(i),c=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return m(e,t),e.prototype.dependentBadges=["fogbugz"],e.prototype.icon="fogbugz",e.prototype.title=function(){return h("badge.fogbugz")},e.prototype.visible=function(){return this.badge("fogbugz")},e}(i),e.exports=[l,d,t(255),u,a,o,s,t(254),n,c]},{}],254:[function(t,e,r){var n,o,i,s,a,u,c=function(t,e){function r(){this.constructor=t}for(var n in e)l.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},l={}.hasOwnProperty;n=t(250),o=t(61),s=t(399),u=t(76),a=t("underscore"),e.exports=i=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.badgesView.listenTo(this.badgesView.model,"change:due",function(t){return function(){return t.render()}}(this))}return c(e,t),e.prototype.position=7,e.prototype.shouldUpdate=!0,e.prototype.render=function(){return e.__super__.render.apply(this,arguments),this.badgesView.stopListening(o,"renderInterval"),this.visible()&&this.badgesView.listenTo(o,"renderInterval",function(t){return function(){return t.render()}}(this)),this},e.prototype.icon="clock",e.prototype.visible=function(){return this.getDueDate()},e.prototype.getDueDate=function(){return this.badgesView.model.get("due")},e.prototype.text=function(){return o.toDateString(this.getDueDate())},e.prototype.additionalClasses=function(){return[s.classForDueDate(this.getDueDate())]},e.prototype.title=function(){return s.titleForDueDate(this.getDueDate())},e.prototype.update=function(){return this.$el.removeClass(),this.$el.addClass(a.result(this,"additionalClasses").join(" ")).addClass("badge"),e.__super__.update.apply(this,arguments)},e}(n)},{}],255:[function(t,e,r){var n,o,i,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;n=t(250),i=t(76),s=t(75),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.position=2,e.prototype.dependentBadges=["votes","viewingMemberVoted"],e.prototype.icon="vote",e.prototype.additionalClasses=function(){var t;return t=[],this.badge("viewingMemberVoted")&&t.push("is-voted"),t},e.prototype.title=function(){return i("badge.votes")},e.prototype.text=function(){return s("votes",this.voteCount())},e.prototype.visible=function(){return this.voteCount()>0},e.prototype.voteCount=function(){var t;return null!=(t=this.badge("votes"))?t:0},e.prototype.update=function(){return this.$el.toggleClass("is-voted",this.badge("viewingMemberVoted")),e.__super__.update.apply(this,arguments)},e}(n)},{}],256:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C=[].slice;o=t(53),s=t(257),a=t(258),c=t(260),u=t(262),i=t(261),h=t(266),l=t(16),d=t("bluebird"),p=t("react"),m=t(99),w=t(414)("billing"),g=t(197),y=t(76),_=t(34),f=t("underscore"),k=t("xtend"),n=t("jquery"),b=t(84),v=t(68),e.exports=p.createClass({displayName:"BillingComponent",getInitialState:function(){return{showChangeCCForm:!1,processingReactivation:!1,reactivateDisabled:!1,reactivatingProduct:null}},render:w.renderable(function(){var t,e,r,n,o,i,a,u,c,l,d,p,h,m,f,g;return p=this.props,o=p.id,t=p.activeAccount,c=p.paidAccount,g=p.willExpire,u=p.nextChargeAmount,a=p.nextBillingDate,e=p.canSwitchToYearly,r=p.cancelledAccount,n=p.hasAccount,f=p.statementUrl,d=p.productName,h=this.state,i=h.justCancelled,l=h.processingReactivation,m=h.showChangeCCForm,w.div(function(p){return function(){return p.renderStatusBanner(),t&&w.div(".window-module.u-text-align-center",function(){return w.div(".u-gutter",function(){return g?p.renderExpirationAndRenewButton():c.cardType?(u&&a&&p.renderNextCharge(),e?p.renderUpgradeToYearly():void 0):p.renderCreditExpirationMessage()})}),r&&!l&&p.renderReactivateSection(),c.cardType&&(p.renderBillingContact(),t&&p.renderPaymentMethod()),m&&w.div(".window-module",function(){return p.renderCCChangeForm()}),n&&w.createElement(s,{statementUrl:f,key:o}),t&&!g&&p.renderCancelFlow(),i?w.div(".window-module",function(){return w.div(".u-gutter",function(){return w.p(function(){return w.strong(function(){return w.format("your-productname-subscription-has-been-cancelled",{productName:d})})}),w.p(function(){return w.format("well-keep-your-data-safe-and-your-account-will-remain-usable-if-youd-like-you-can-reinstate-productname-at-any-time-by-re-entering-your-credit-card-information",{productName:d})}),w.p(function(){return w.format("the-trello-team")})})}):void 0}}(this))}),renderNextCharge:function(){var t,e,r,n,o;return o=this.props,t=o.billingStrategy,r=o.nextChargeAmount,n=o.price,e=o.nextBillingDate,w.p(".next-charge",function(){return null!=t.perUser?w.format("you-will-be-billed-nextchargeamount-price-per-billablemembercount-members-on-nextbillingdate",{nextChargeAmount:r,price:v(n),billableMemberCount:t.perUser,nextBillingDate:e}):w.format("you-will-be-billed-nextchargeamount-on-nextbillingdate",{nextChargeAmount:r,nextBillingDate:e})})},renderUpgradeToYearly:function(){var t,e,r,n,o;return n=this.props,e=n.current,t=n.billingStrategy,o=n.yearlyDiscountPercent,r=n.onSwitchToYearly,w.p(function(){return w.b(r,".button-link.mod-inline-block",{style:{paddingLeft:"24px",paddingRight:"24px"}},function(){return w.format("switch-to-yearly-billing")})}),w.p(function(){return null!=t.perUser?w.format("yearly-billing-will-be-totalyearlyprice-yearlyprice-per-billablemembercount-members-per-year",{totalYearlyPrice:v(e.yearly.totalPrice),yearlyPrice:v(e.yearly.price),billableMemberCount:t.perUser}):w.format("yearly-billing-will-be-yearlyprice-per-year",{yearlyPrice:v(e.yearly.price)}),w.br(),w.format("thats-percent-less-than-monthly-billing",{yearlyDiscountPercent:o})})},renderCreditExpirationMessage:function(){var t,e,r;return t=this.props.nextBillingDate,r=this.state.showChangeCCForm,e=g.choke(0,g(this,"setState",{showChangeCCForm:!0})),w.p(".next-charge",function(){return w.format("your-credits-will-expire-on-nextbillingdate",{nextBillingDate:t})}),r?void 0:(w.p(function(){return w.b(e,".button-link.mod-inline-block",{style:{paddingLeft:"24px",paddingRight:"24px"}},function(){return w.format("add-billing-information")})}),w.p(function(){return w.format("keep-using-trello-in-style-even-after-your-credits-expire")}))},renderExpirationAndRenewButton:function(){var t,e,r,n;return n=this.props,r=n.productName,t=n.expirationDate,e=n.onRenewClick,w.p(".quiet",function(){return w.format("youve-cancelled-productname-but-you-can-use-the-premium-features-until-expirationdate",{productName:r,expirationDate:t})}),w.p(function(){return w.b(e,".button-link.mod-inline-block",{style:{paddingLeft:"24px",paddingRight:"24px"}},function(){return w.format("renew-your-subscription")})}),w.p(".quiet",function(){return w.format("when-you-renew-you-wont-be-charged-until-the-date-listed-above")})},renderReactivationForm:function(){var t,e,r,n,o,s,a;return a=this.props,n=a.paidAccount,o=a.paidAccountPoll,t=a.createPaidAccount,r=a.didntGetAuthStatus,e=a.didGetAuthStatus,s=this.state.reactivatingProduct,w.createElement(c,{onSubmit:t,doPoll:o,buttonKey:"continue",contentBuilders:[u,i,h].map(g.choke(1,b)),extraData:{billingContactFullName:n.contactFullName,billingContactEmail:n.contactEmail,billingContactLocale:n.contactLocale,products:[s.toString()]},didntGetAuthStatus:function(t){return function(){return t.setState({reactivatingProduct:null}),r()}}(this),didGetAuthStatus:function(t){return function(){return t.setState({reactivatingProduct:null}),e()}}(this)})},renderReactivationButtons:function(){var t,e,r,n,o,i,s;return s=this.props,t=s.current,r=s.productName,e=s.paidAccount,n=this.state.reactivateDisabled,null!=e.cardType?(o=g(this,"reactivate",t.monthly.productNumber),i=g(this,"reactivate",t.yearly.productNumber)):(o=g.choke(0,this,"setState",{reactivatingProduct:t.monthly.productNumber}),i=g.choke(0,this,"setState",{reactivatingProduct:t.yearly.productNumber})),w.div(".window-module",function(){return w.div(".window-module-title",function(){return w.h3(function(){return w.format("reactivate-productname",{productName:r})})}),w.div(".u-gutter",function(){return w.div(".billing-option-buttons.u-clearfix",function(){return w.b(o,{class:w.classify({disabled:n})},function(){return w.span(".name",function(){return w.format("charge-monthly")}),w.span(".price",function(){null!=t.billingStrategy.perUser?w.format("totalmonthlyprice-monthlyprice-per-billablemembercount-members",{totalMonthlyPrice:v(t.monthly.totalPrice),monthlyPrice:v(t.monthly.price),billableMemberCount:t.billingStrategy.perUser}):w.strong(function(){return w.format("monthlyprice",{monthlyPrice:v(t.monthly.price)})})})}),w.b(i,{class:w.classify({disabled:n})},function(){return w.span(".name",function(){return w.format("charge-yearly-save")}),w.span(".price",function(){null!=t.billingStrategy.perUser?w.format("totalyearlyprice-yearlyprice-per-billablemembercount-members",{totalYearlyPrice:v(t.yearly.totalPrice),yearlyPrice:v(t.yearly.price),billableMemberCount:t.billingStrategy.perUser}):w.strong(function(){return w.format("yearlyprice",{yearlyPrice:v(t.yearly.price)})})})})})})})},renderReactivateSection:function(){var t;return t=this.state.reactivatingProduct,null!=t?this.renderReactivationForm():this.renderReactivationButtons()},renderPaymentMethod:function(){var t,e,r,n,o;return n=this.props,t=n.accountStandingDisplay,r=n.paidAccount,o=this.state.showChangeCCForm,e=g.choke(0,g(this,"setState",{
showChangeCCForm:!0})),w.div(".window-module",function(n){return function(){return w.div(".window-module-title",function(){return w.h3(".u-inline",function(){return w.format("payment-method")}),w.p(".u-inline.quiet",{style:{marginLeft:"4px"}},function(){return w.format("account-standing-accountstandingdisplay",{accountStandingDisplay:t})})}),w.div(".u-gutter",function(){return w.p(function(){return w.text(r.cardType),w.br(),w.text(r.cardName),w.br(),w.format("paidaccount-cardlast4",{paidAccount_cardLast4:r.cardLast4}),o?void 0:(w.br(),w.b(e,".quiet",function(){return w.format("change-credit-card")}))})})}}(this))},renderCCChangeForm:function(){var t,e,r,n,o;return o=this.props,t=o.changeCreditCard,n=o.paidAccountPoll,r=o.didntGetAuthStatus,e=o.didGetAuthStatus,w.createElement(c,{onSubmit:t,doPoll:n,buttonKey:"continue",contentBuilders:[u,i,h].map(g.choke(1,b)),didntGetAuthStatus:function(t){return function(){return t.setState({showChangeCCForm:!1}),r()}}(this),didGetAuthStatus:function(t){return function(){return t.setState({showChangeCCForm:!1}),e()}}(this)})},reactivate:function(t){var e,r,n;n=this.props.reactivateProduct,r=this.state.reactivateDisabled,r||(e=l.isMonthly(t)?"Monthly":"Yearly",_("Organization View","Billing Page","Reactivate Business Class - "+e),this.setState({reactivateDisabled:!0}),n(t).then(function(t){return function(r){return _("Organization","Sucessfully Reactivate Business Class - "+e),t.setState({processingReactivation:!0,reactivateDisabled:!1})}}(this)).done())},renderBillingContact:function(){var t,e,r;return r=this.props,e=r.paidAccount,t=r.onChangeBillingContactClick,w.div(".window-module",function(){return w.div(".window-module-title",function(){return w.h3(function(){return w.format("billing-contact")})}),w.div(".u-gutter",function(){return w.p(function(){return w.format("paidaccount-contactfullname-paidaccount-contactemail",{paidAccount_contactFullName:e.contactFullName,paidAccount_contactEmail:e.contactEmail}),w.text(" "),w.b(t,".quiet",function(){return w.format("change")})})})})},renderCancelFlow:function(){var t,e,r;return r=this.props,e=r.productName,t=r.cancelProduct,w.createElement(a,{productName:e,cancelProduct:function(e){return function(){var r;return r=1<=arguments.length?C.call(arguments,0):[],t.apply(null,r).then(g.choke(0,g(e,"setState",{justCancelled:!0})))}}(this)})},renderStatusBanner:function(){var t,e,r,n,o,i,s,a,u,c,l;return l=this.props,t=l.activeAccount,i=l.problemAccount,s=l.processingAccount,u=l.productIconClass,r=l.detailsUrl,c=l.productName,e=l.cancelledAccount,n=l.needCC,a=this.state.processingReactivation,o=g.choke(0,g(this,"setState",{showChangeCCForm:!0})),w.div(".window-module.u-gutter",function(){return t&&(i?(w.p(".bc-active-status.error",function(){return w.format("theres-an-issue-with-productname",{productIconClass:u,detailsUrl:r,productName:c})}),w.b(o,".emphasis-button",function(){return w.format("you-are-overdue-and-we-are-having-trouble-processing-your-credit-card-enter-a-credit-card-to-resolve-the-issue")})):(w.p({class:w.classify({"bc-active-status":!0,active:!0,warning:s})},function(){return w.span({class:"icon-lg icon-"+u}),s?w.format("productname-is-almost-active",{detailsUrl:r,productName:c}):w.format("productname-is-active",{detailsUrl:r,productName:c})}),s&&w.p(".quiet",{style:"margin-left: 46px;"},function(){return w.format("your-credit-card-is-being-processed")}))),e&&(a?(w.p(".bc-active-status.warning",function(){return w.format("your-account-is-being-processed-for-reactivation",{productIconClass:u})}),w.p(".quiet.u-text-align-center",function(){return w.format("check-back-soon")})):w.p(".bc-active-status.error",function(){return w.format("productname-is-cancelled",{productIconClass:u,detailsUrl:r,productName:c})})),n?(w.p(".bc-active-status.error",function(){return w.format("productname-is-not-active",{productIconClass:u,detailsUrl:r,productName:c})}),w.b(o,".emphasis-button",function(){return w.format("enter-a-credit-card-to-activate-productname",{productName:c})})):void 0})}})},{}],257:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v;n=t(176),o=t(268),s=t("react"),f=t(414)("billing_statement"),i=t(83),p=t("moment"),u=t(67),d=t(30),v=t(91),a=t(197),m={return:["credited-return","credited-return-receipt"],credit:["paid-credit","paid-credit-receipt"],debit:["billed-debit","billed-debit-invoice"],refund:["refunded-refund","refunded-refund"]},h=function(t){var e,r,n,o;n=m[t.type],r=n[0],o=n[1],e={statementUrl:t.statementUrl},e[t.type]=u.money(t.amount),e.statementUrl?f.format(o,e):f.format(r,e)},g={startDate:function(t){return p(t).format("LL")},endDate:function(t){return p(t).format("LL")},taxRate:u.taxRate,discount:u.percentage},c=function(t){var e,r,n,o,i;o=function(t){return t.toString()},n={};for(e in t)i=t[e],n[e]=(null!=(r=g[e])?r:o)(i);return n},l=function(t){var e,r;return null==t.translationKey?t.fallbackText:(e=c(t.translationArgs),r=v(["billing",t.translationKey],e),null!=r?r:(d(new Error("Unknown statement row key "+t.translationKey)),t.fallbackText))},e.exports=s.createClass({displayName:"BillingHistoryComponent",mixins:[i],render:f.renderable(function(){var t,e,r;return e=this.state,t=e.errorText,r=e.statement,f.div(".window-module",function(){return f.div(".window-module-title",function(){return f.h3(function(){return f.format("billing-history")})}),f.div(".u-gutter",{id:"billing-statement"},function(){var e,n,o,i;if(null!=t)return f.text(t);if(null!=r){for(o=[],e=0,n=r.length;n>e;e++)i=r[e],f.div(function(){return f.p(function(){return f.format("date-item",{date:p(i.date).format("l"),item:l(i)})}),f.p({style:{textAlign:"right"}},function(){return h(i)})}),o.push(f.hr());return o}return f.div(".spinner.loading")})})}),componentWillMount:function(){this.pollster=new o(a(n,{url:this.props.statementUrl}),10,5e3),this.pollster.start(),this.syncState(this.pollster.state)},componentWillUnmount:function(){this.pollster.stop()}})},{}],258:[function(t,e,r){var n,o,i,s;n=t("react"),s=t(414)("billing"),o=t(197),i=[["its-missing-functionality","missing functionality"],["im-not-using-it","not using it"],["its-too-expensive","too expensive"],["other","other"]],e.exports=n.createClass({displayName:"CancelFlowComponent",getInitialState:function(){return{isCancelling:!1,reason:null,details:""}},render:s.renderable(function(){var t,e,r,n,a,u,c,l,d,p,h;return l=this.props,c=l.productName,e=l.cancelProduct,d=this.state,u=d.isCancelling,n=d.details,h=o.choke(0,o(this,"setState",{isCancelling:!0})),t=o.choke(0,o(this,"setState",{isCancelling:!1})),a=function(t){return function(){var r;return r={reason:t.state.reason,details:t.state.details},e(r).then(o.choke(0,o(t,"setState",{isCancelling:!1}))).done()}}(this),r=o(s,"radio",this),p=function(t){return function(e){return t.setState({details:e})}}(this),s.div(".window-module.u-gutter",function(e){return function(){return u?s.div(function(){return s.p(function(){return s.format("thanks-for-trying-productname-were-sorry-to-see-you-go",{productName:c})}),s.p(function(){return s.format("clicking-the-button-below-will-cancel-your-subscription-and-you-will-not-be-billed-again-of-course-well-keep-your-data-safe-and-your-account-will-remain-usable-if-youd-like-you-can-reinstate-productname-at-any-time-by-re-entering-your-credit-card-information",{productName:c})}),s.p(function(){return s.format("were-working-hard-to-make-trello-better-every-day-and-would-really-appreciate-any-feedback-you-have-on-productname",{productName:c})}),s.p(function(){return s.b(function(){return s.format("please-let-us-know-why-you-are-cancelling-ellipsis")})}),s.div(function(){var t,e,n,o,a,u;for(a=[],e=0,n=i.length;n>e;e++)o=i[e],t=o[0],u=o[1],a.push(s.label(function(){return r("reason",u),s.text(" "),s.format(t)}));return a}),s.textarea({placeholder:s.l("tell-us-more-ellipsis"),value:n,onChange:function(t){return p(t.target.value)}}),s.div(function(){return s.button(".button",{onClick:a},function(){return s.format("cancel-productname",{productName:c})}),s.b(t,".quiet",function(){return s.format("never-mind")})})}):s.b(h,".quiet.dark-hover",function(){return s.icon("close"),s.text(" "),s.format("cancel-productname-ellipsis",{productName:c})})}}(this))})})},{}],259:[function(t,e,r){var n,o,i,s,a,u,c,l=function(t,e){function r(){this.constructor=t}for(var n in e)d.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},d={}.hasOwnProperty;n=t(178),o=t(22),s=t(435),a=t(99),u=t(421),c=t(569),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.viewTitleKey="change billing contact",e.prototype.events={"click .js-submit":"changeBillingContact","submit form":"changeBillingContact"},e.prototype.render=function(){var t,e,r;return e=this.model.get("paidAccount"),t=e?{fullName:e.contactFullName,email:e.contactEmail,locale:null!=(r=e.contactLocale)?r:"en"}:{fullName:o.me().get("fullName"),email:o.me().get("email"),locale:o.me().getLocale()},this.$el.html(c(t)),this},e.prototype.changeBillingContact=function(t){var e,r,o,i,u;for(a.stop(t),e={},e.billingContactFullName=this.$("input#billingContactFullName").val(),e.billingContactEmail=this.$("input#billingContactEmail").val(),e.billingContactLocale=this.$("select#billingContactLocale").val(),this.$(".js-submit").attr("disabled","disabled"),u=["billingContactFullName","billingContactEmail","billingContactLocale"],o=0,i=u.length;i>o;o++)r=u[o],this.$("#"+r).removeClass("input-error");return n({url:this.model.urlRoot+"/"+this.model.id+"/paidAccount/billingContact",data:e,type:"POST",success:function(t){return function(e){return t.model.set(e),s.hide()}}(this),error:function(t){return function(e){var r,n;return r=null!=(n=e.responseText)?n:"error",t.$(".js-submit").removeAttr("disabled","disabled"),/billingContactFullName/.test(r)?void t.$("#billingContactFullName").addClass("input-error"):/email/.test(r)?void t.$("#billingContactEmail").addClass("input-error"):/locale/.test(r)?void t.$("#billingContactLocale").addClass("input-error"):t.$(".error").text(r).show()}}(this)})},e}(u)},{}],260:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p;n=t(269),o=t("bluebird"),i=t("react"),l=t(414)("credit_card"),s=t("underscore"),a=t(197),u=t(76),d=t(34),p=t("xtend"),c=t(274),e.exports=i.createClass({displayName:"CreditCardFormComponent",getInitialState:function(){return{errorField:null,unknownError:null,waitingForCCAuth:!1}},getData:function(){return this.props.extraData},render:l.renderable(function(){var t,e,r,n,o,i,s,c,d;return i=this.props,r=i.contentBuilders,t=i.buttonKey,s=this.state,n=s.errorField,c=s.unknownError,d=s.waitingForCCAuth,e=[],o=function(t){return function(r){var n;return r.preventDefault(),n=p.apply(null,e.concat([t]).map(a.method("getData"))),t.submit(n)}}(this),l.form(".credit-card-form",{onSubmit:o},function(){return l.div(function(){return l.p({class:l.classify({"u-gutter":!0,"u-form-error":!0,hide:!c})},function(){return l.text(null!=c?c:"")}),r.map(function(t){return t({ref:a(e,"push"),errorField:n})}).forEach(a(l,"addElement")),l.hr(".u-gutter"),l.p({class:l.classify({"u-gutter":!0,"u-form-info":!0,hide:!d})},function(){return l.text(u(["alerts","authorizing"]))}),l.div({class:l.classify({"u-gutter":!0,hide:d})},function(){return l.input({type:"submit",value:l.l(t),class:"primary"})})})})}),componentWillUnmount:function(){var t;return null!=(t=this._submitPromise)?t.cancel():void 0},submit:function(t){var e,r,i;if(null!=this._submitPromise)throw Error("Submission already in progress!");return i=this.props,r=i.onSubmit,e=i.doPoll,this.setState({errorField:null,unknownError:null,waitingForCCAuth:!0}),this._submitPromise=o.try(function(i){return function(){return null==t.acceptTOS||t.acceptTOS?c(a(r,t),e,t):o.reject(n.InvalidField("",{field:"acceptTOS"}))}}(this)).then(function(t){return function(){t.props.didGetAuthStatus(),d("Business Class","Purchase","yearly price")}}(this)).catch(n.InvalidField,function(t){return function(e){var r;r=e.field,t.setState({errorField:r})}}(this)).catch(n.PostError,function(t){return function(e){var r,n;r=e.err,t.setState({unknownError:null!=(n=r.message)?n:"error"})}}(this)).catch(n.PollError,function(t){return function(e){var r;r=e.err,t.props.didntGetAuthStatus()}}(this)).catch(o.CancellationError,function(){}).finally(function(t){return function(){t.setState({waitingForCCAuth:!1}),delete t._submitPromise}}(this)).done()}})},{}],261:[function(t,e,r){var n,o,i,s,a,u,c,l;o=t("react"),c=t(414)("credit_card"),i=t("underscore"),l=t("xtend"),a=t(197),s=t(263),n=t(264),u=function(t){var e,r;return r=t[0],e=t[1],[r,c.l(["countries",e])]},e.exports=o.createClass({displayName:"AddressComponent",formFields:["companyName","streetAddress1","streetAddress2","city","state","zipCode","country"],mixins:[n],getInitialState:function(){return l(this.defaultInitialState(),{country:s.special[0][0]})},render:c.renderable(function(){var t,e,r,n;return e=this.props.errorField,n=this.getLocalizedCountries(),t=a(this,"controlledOpts"),r=function(r,n,o,i){var s;return s=r===e,c.label(function(){return c.format(n),c.input(l(i,t(r),{class:c.classify({text:!0,"input-error":s}),type:"text"})),s?c.span(".u-form-error",function(){return c.format(o)}):void 0})},c.div(".window-module",function(){return c.div(".window-module-title",function(){return c.h4(function(){return c.format("billing-address")})}),c.div(".u-gutter.credit-card-form-section",function(){return c.label(".quiet",function(){return c.format("company-name"),c.input(l(t("companyName"),{class:"text",type:"text",maxLength:"50",size:"30"}))}),r("streetAddress1","street-address-1","please-enter-your-address",{maxLength:"255",size:"30"}),c.label(".quiet",function(){return c.format("street-address-2"),c.input(l(t("streetAddress2"),{class:"text",type:"text",maxLength:"255",size:"30"}))}),r("city","city","please-enter-your-city",{maxLength:"30",size:"30"}),r("state","state-province-region","us-and-canada-addresses-require-a-two-letter-abbreviation",{maxLength:"20",size:"30"}),r("zipCode","zip-postal-code","us-addresses-require-a-zip-code",{maxLength:"10",size:"30"}),c.label(function(){return c.format("country"),c.text(" "),c.select(t("country"),function(){var t,e,r,o,i;for(t=0,e=n.length;e>t;t++)o=n[t],i=o[0],r=o[1],c.option({value:i},function(){return c.text(r)})})})})})}),getLocalizedCountries:function(){var t,e;return t=s.special.map(u),e=s.unloved.map(u).sort(function(t,e){var r,n,o,i;return r=t[0],n=t[1],o=e[0],i=e[1],n.localeCompare(i)}),t.concat(e)}})},{}],262:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h;o=t("react"),n=t(264),i=t(99),p=t(414)("credit_card"),s=t("underscore"),a=t(197),h=t("xtend"),c=t("moment"),l=function(){for(d=[],u=0;25>=u;u++)d.push(u);return d}.apply(this).map(function(t){return c().add(t,"years").locale("en").format("YY")}),e.exports=o.createClass({displayName:"CreditCardComponent",formFields:["name","cardNumber","cvv","expMonth","expYear"],mixins:[n],getInitialState:function(){return h(this.defaultInitialState(),{expMonth:"01",expYear:l[0]})},render:p.renderable(function(){var t,e,r,n,o,s;return e=this.props.errorField,s="name"===e,r="cardNumber"===e,n="cvv"===e,o="expMonth"===e||"expYear"===e,t=a(this,"controlledOpts"),p.div(".window-module",function(){return p.div(".window-module-title",function(){return p.h4(function(){return p.format("credit-card-for-account")})}),p.div(".u-gutter.credit-card-form-section",function(){return p.label(function(){p.format("name-as-it-appears-on-the-credit-card"),p.input(h(t("name"),{class:p.classify({text:!0,"input-error":s}),type:"text",maxLength:"50",size:"30"})),s&&p.span(".u-form-error",function(){return p.format("please-provide-your-full-name-as-shown-on-the-card-for-credit-card-verification")})}),p.div(".u-clearfix",function(){return p.div(".credit-card-form-number",function(){return p.label(function(){return p.format("card-number"),p.input(h(t("cardNumber"),{class:p.classify({"input-error":r}),type:"text",maxLength:"19",size:"16",autoComplete:"off"})),r?p.span(".u-form-error",function(){return p.format("please-provide-your-full-card-number-for-credit-card-verification")}):void 0})}),p.div(".credit-card-form-cvv",function(){return p.label(function(){return p.format("cvv"),p.input(h(t("cvv"),{class:p.classify({"input-error":n}),type:"text",maxLength:"4",size:"4"}))})})}),p.fieldset(function(){return p.legend(function(){return p.format("expiration-date")}),p.div(".u-clearfix",function(){return p.select(".credit-card-form-select-month",t("expMonth"),function(){var t,e;for(e=t=1;12>=t;e=++t)p.option({value:i.lpad(e,2,"0")},function(){return p.format(["months",e.toString()].join("."))})}),p.select(".credit-card-form-select-year",t("expYear"),function(){var t,e,r;for(t=0,e=l.length;e>t;t++)r=l[t],p.option({value:r},function(){return p.text(["20",r].join(""))})}),o?p.span(".u-form-error",function(){return p.format("please-provide-a-valid-expiration-date")}):void 0})})})})})})},{}],263:[function(t,e,r){e.exports={special:[["US","united-states"],["GB","united-kingdom"],["CA","canada"],["AU","australia"],["DE","germany"],["NL","netherlands"]],unloved:[["AF","afghanistan"],["AL","albania"],["DZ","algeria"],["AS","american-samoa"],["AD","andorra"],["AI","anguilla"],["AG","antiqua-and-barbuda"],["AR","argentina"],["AM","armenia"],["AW","aruba"],["AU","australia"],["AT","austria"],["AZ","azerbaijan"],["BS","bahamas"],["BH","bahrain"],["BD","bangladesh"],["BB","barbados"],["BY","belarus"],["BE","belgium"],["BZ","belize"],["BJ","benin"],["BM","bermuda"],["BT","bhutan"],["BO","bolivia"],["BV","bouvet-islands"],["BR","brazil"],["IO","british-indian-ocean-territory"],["VI","british-virgin-islands"],["BN","brunei"],["BG","bulgaria"],["BF","burkina-faso"],["BI","burundi"],["KH","cambodia"],["CM","cameroon"],["CA","canada"],["CV","cape-verde"],["KY","cayman-islands"],["CF","central-african-republic"],["TD","chad"],["CL","chile"],["CN","china"],["CO","colombia"],["KM","comoros"],["CG","congo"],["CR","costa-rica"],["CI","cote-d-ivoire"],["HR","croatia"],["CY","cyprus"],["CZ","czech-republic"],["DK","denmark"],["DJ","djibouti"],["DM","dominica"],["DO","dominican-republic"],["EG","egypt"],["SV","el-salvador"],["EC","equador"],["GQ","equatorial-guinea"],["ER","eritrea"],["EE","estonia"],["ET","ethiopia"],["FK","falkland-islands"],["FO","faroe-islands"],["FM","federated-states-of-micronesia"],["FJ","fiji"],["FI","finland"],["FR","france"],["GF","french-guiana"],["PF","french-polynesia"],["GA","gabon"],["GM","gambia"],["GE","georgia"],["DE","germany"],["GH","ghana"],["GI","gibraltar"],["GR","greece"],["GL","greenland"],["GD","grenada"],["GP","guadeloupe"],["GU","guam"],["GT","guatemala"],["GN","guinea"],["GW","guinea-bissau"],["GY","guyana"],["HT","haiti"],["HN","honduras"],["HK","hong-kong"],["HU","hungary"],["IS","iceland"],["IN","india"],["ID","indonesia"],["IE","ireland"],["IL","israel"],["IT","italy"],["JM","jamaica"],["JP","japan"],["JO","jordan"],["KZ","kazakhstan"],["KE","kenya"],["KI","kiribati"],["KW","kuwait"],["KG","kyrgyzstan"],["LA","laos"],["LV","latvia"],["LB","lebanon"],["LS","lesotho"],["LR","liberia"],["LI","liechtenstein"],["LT","lithuania"],["LU","luxembourg"],["MO","macau"],["MG","madagascar"],["MW","malawi"],["MY","malaysia"],["MV","maldives"],["ML","mali"],["MT","malta"],["MH","marshall-islands"],["MQ","martinique"],["MR","mauritania"],["MU","mauritius"],["YT","mayotte"],["FX","metropolitan-france"],["MX","mexico"],["MD","moldova"],["MN","mongolia"],["ME","montenegro"],["MA","morocco"],["MZ","mozambique"],["NA","namibia"],["NR","nauru"],["NP","nepal"],["AN","netherlands-antilles"],["NL","netherlands"],["NC","new-caledonia"],["NZ","new-zealand"],["NI","nicaragua"],["NE","niger"],["NG","nigeria"],["MP","northern-mariana-islands"],["NO","norway"],["OM","oman"],["PK","pakistan"],["PW","palau"],["PA","panama"],["PG","papua-new-guinea"],["PY","paraguay"],["PE","peru"],["PE","peru"],["PH","philippines"],["PN","pitcairn"],["PL","poland"],["PT","portugal"],["PR","puerto-rico"],["QA","qatar"],["KR","republic-of-korea"],["RE","reunion"],["RO","romania"],["RU","russia"],["ST","sao-tome-and-principe"],["SA","saudi-arabia"],["SN","senegal"],["RS","serbia"],["SC","seychelles"],["SL","sierra-leone"],["SG","singapore"],["SK","slovakia"],["SI","slovenia"],["SB","solomon-islands"],["SO","somalia"],["ZA","south-africa"],["ES","spain"],["LK","sri-lanka"],["SH","st-helena"],["KN","st-kitts-and-nevis"],["LC","st-lucia"],["VC","st-vincent-and-the-grenadines"],["SD","sudan"],["SR","suriname"],["SJ","svalbard-and-jan-mayen-islands"],["SZ","swaziland"],["SE","sweden"],["CH","switzerland"],["SY","syria"],["TW","taiwan"],["TJ","tajikistan"],["TZ","tanzania"],["TH","thailand"],["MK","the-former-yugoslav-republic-of-macedonia"],["TG","togo"],["TO","tonga"],["TT","trinidad-and-tobago"],["TR","turkey"],["TM","turkmenistan"],["TC","turks-and-caicos-islands"],["TV","tuvalu"],["UG","uganda"],["UA","ukraine"],["AE","united-arab-emirates"],["GB","united-kingdom"],["US","united-states"],["UY","uruguay"],["UZ","uzbekistan"],["VU","vanuatu"],["VA","vatican-city"],["VE","venezuela"],["VN","vietnam"],["EH","western-sahara"],["YE","yemen"],["ZR","zaire"],["ZM","zambia"],["ZW","zimbabwe"]]}},{}],264:[function(t,e,r){var n;n=t("underscore"),e.exports={defaultInitialState:function(){return n.object(this.formFields.map(function(t){return[t,""]}))},getData:function(){return n.object(this.formFields.map(function(t){return function(e){return[e,t.state[e]]}}(this)))},controlledOpts:function(t){return{onChange:function(e){return function(r){var n;return n={},n[t]=r.target.value,e.setState(n)}}(this),value:this.state[t]}}}},{}],265:[function(t,e,r){var n,o,i,s,a,u,c,l;n=t(264),o=t("react"),c=t(414)("credit_card"),i=t("underscore"),l=t("xtend"),s=t(197),a=t(68),u=t(69),e.exports=o.createClass({displayName:"ProductsComponent",formFields:["products"],mixins:[n],getInitialState:function(){return{products:[this.props.defaultProduct.toString()]}},render:c.renderable(function(){var t,e,r,n,o,i;return o=this.props,n=o.productName,r=o.monthlyProduct,i=o.yearlyProduct,t=o.billingStrategy,e=s(c,"radio",this),c.div(function(){return c.p(".u-gutter.quiet",function(){return c.format("subscribing-to-productname",{productName:n})}),c.div(".window-module",function(){return c.div(".window-module-title",function(){return c.h3(function(){return c.format("billing")})}),c.div(".u-gutter.u-clearfix.credit-card-form-section",function(){return t.perUser&&c.p(".u-quiet",function(){return c.format("smart billing explanation")}),c.div(".radio-div.u-clearfix",function(){return c.label(function(){e("products",[r.productNumber.toString()]),null!=t.perUser?c.format("monthly-totalperuserprice-per-month-price-per-billablemembercount-members-per-month",{totalPerUserPrice:a(r.totalPrice),price:a(r.price),billableMemberCount:t.perUser}):c.format("monthly-price-per-month",{price:a(r.price)})})}),c.div(".radio-div.u-clearfix",function(){return c.label(function(){e("products",[i.productNumber.toString()]),null!=t.perUser?c.format("yearly-totalperuserprice-per-year-price-per-billablemembercount-members-per-year-save-savepercent",{totalPerUserPrice:a(i.totalPrice),price:a(i.price),billableMemberCount:t.perUser,savePercent:u(i.savePercent)}):c.format("yearly-price-per-year-save-savepercent",{price:a(i.price),savePercent:u(i.savePercent)})})})})})})})})},{}],266:[function(t,e,r){var n,o,i;n=t(264),o=t("react"),i=t(414)("credit_card"),e.exports=o.createClass({displayName:"TermsOfServiceComponent",formFields:["acceptTOS"],mixins:[n],getInitialState:function(){return{acceptTOS:!1}},render:i.renderable(function(){var t,e,r,n;return e=this.props.errorField,r="acceptTOS"===e,n=function(t){return function(e){return t.setState({acceptTOS:e.target.checked})}}(this),t=this.state.acceptTOS,i.div(".u-gutter",{id:"divAcceptTOS"},function(){return r&&i.p(".u-form-error.error",function(){return i.format("you-must-accept-the-terms-of-service-and-privacy-policy")}),i.div(".check-div.u-clearfix",function(){return i.label(function(){return i.input({class:i.classify({"input-error":r}),type:"checkbox",checked:t,onChange:n}),i.format("i-accept-the-terms-of-service-and-the-privacy-policy")})})})})})},{}],267:[function(t,e,r){var n,o,i,s,a;n=t(53),i=t(76),s=t("moment"),o=t(197),a=t("xtend"),e.exports=function(t,e,r){var o,u,c,l,d,p,h,m,f,g,v;return c={},c.paidAccount=t.get("paidAccount"),c.key=c.id=t.id,c.statementUrl=t.urlRoot+"/"+t.id+"/paidAccount/statement",u=null!=(d=c.paidAccount)&&null!=(p=d.products)?p[0]:void 0,null!=u&&(l=null!=(h=c.paidAccount.billingDates)?h[u]:void 0)&&(c.nextBillingDate=s(l).format("LL")),c.yearlyDiscountPercent=e.getYearlyDiscountPercent(e.currentProducts.yearly,e.currentProducts.monthly),c.price=e.getPrice(u),c.billingStrategy=t.getBillingStrategy(u),e.isPerUser(u)?c.nextChargeAmount=t.totalPerUserPrice(u):c.nextChargeAmount=e.getPrice(u),c.current=e.currentPriceObjectForModel(t),c.canSwitchToYearly=u===c.current.monthly.productNumber,c.activeAccount=n.isActive(c.paidAccount),v=null!=(m=c.paidAccount)?m.standing:void 0,c.hasAccount=n.hasAccount(v),c.processingAccount=n.isProcessing(v),c.problemAccount=n.isProblem(v),c.willExpire=n.willExpire(c.paidAccount),c.willExpire&&null!=u&&(l=c.paidAccount.expirationDates[u])&&(c.expirationDate=s(l).format("LL")),null!=(o=n.standingName(null!=(f=t.get("paidAccount"))?f.standing:void 0))&&(c.accountStandingDisplay=i(["account standing",o])),c.cancelledAccount=n.isCancelled(c.paidAccount),c.needCC=n.needsCC(null!=(g=c.paidAccount)?g.standing:void 0),a(c,r)}},{}],268:[function(t,e,r){var n,o,i,s,a,u,c,l=function(t,e){function r(){this.constructor=t}for(var n in e)d.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},d={}.hasOwnProperty;o=t(273),i=t("moment"),a=t(209),u=function(t,e){if("string"!=typeof t)throw Error("Not a string!");return 0===t.indexOf(e)},s=function(t){return{date:t.date,statementUrl:t.statementUrl,fallbackText:t.item,translationKey:t.translationKey,translationArgs:t.translationSubstitutions,amount:Math.abs(t.amount),type:function(){if(u(t.item,"Credit."))return"return";if(u(t.item,"Refund to your"))return"refund";if(t.amount>0)return"credit";if(t.amount<0)return"debit";throw new Error("Cannot format a row with 0 amount!")}()}},c=function(t){var e,r;return r=(null!=(e=t.statement)?e:[]).filter(function(t){return 0!==t.amount}).map(s).reverse(),{statement:r}},e.exports=n=function(t){function e(){var t;e.__super__.constructor.apply(this,arguments),t=null,this.state=this._protectedState.map(a(function(e){return e([{value:a.Any}],function(e){var r;return r=e.value,t=c(r)}),e([{error:a.Any}],function(t){var e;return e=t.error,{errorText:e.message}}),e([{timeout:!0}],function(){return t}),e([{}],function(){return{}})}))}return l(e,t),e}(o)},{}],269:[function(t,e,r){var n;n=t(77),e.exports=n("CreditCardForm",["InvalidField","PostError","PollError"])},{}],270:[function(t,e,r){var n,o,i,s;s=t(53),n=s.isActive,o=s.isProcessing,i=s.needsCC,e.exports=function(t){return i(null!=t?t.standing:void 0)||n(t)&&!o(null!=t?t.standing:void 0)}},{}],271:[function(t,e,r){var n;n=t(205),e.exports=n("PollTimeoutError")},{}],272:[function(t,e,r){var n,o;o=t("bluebird"),n=t(271),e.exports=function(t,e){var r,i;return i=null,r=new o(function(r,o){i=t.state.subscribe(function(t){"error"in t?o(t.error):"timeout"in t?o(n()):"value"in t&&e(t.value)&&r(t.value)})}),t.start(),t.finished.then(function(){return i()}),r.finally(function(){return t.stop()})}},{}],273:[function(t,e,r){var n,o,i,s,a,u,c,l,d;n=t(179),o=t("hearsay"),a=t("bluebird"),d=t("moment"),l=t(197),u=t(57),c=t(205),i=c("PollingError"),e.exports=s=function(){function t(t,e,r){var n;this.pollFx=t,this.minutesToPoll=e,this.intervalMs=r,this._protectedState=new o.Slot({}),this.state=this._protectedState,this.finished=new a(function(t){return function(e){return t._resolveFinished=e}}(this)),n=this._protectedState.use(),this.finished.finally(n)}return t.prototype._started=!1,t.prototype.start=function(){u(!this._started,"Cannot start more than once!"),u(!this._isComplete(),"Cannot start after stopping!"),this._started=!0,this._dateToStopPolling=d().add(this.minutesToPoll,"minutes").toDate(),this._poll()},t.prototype._done=function(){return u(!this._isComplete(),"Pollster cannot complete more than once!"),this._resolveFinished(this.state.get())},t.prototype._isComplete=function(){return this.finished.isFulfilled()},t.prototype.stop=function(){this._isComplete()||(null!=this._currentTimeout&&(clearTimeout(this._currentTimeout),delete this._currentTimeout),this._done())},t.prototype._poll=function(){return a.try(this.pollFx).catch(function(t){return a.reject(i("",{innerError:t}))}).then(function(t){return function(e){t._isComplete()||(t._protectedState.set({value:e}),d().isBefore(t._dateToStopPolling)?t._currentTimeout=setTimeout(l(t,"_poll"),t.intervalMs):(t._protectedState.set({timeout:!0}),delete t._currentTimeout,t._done()))}}(this)).catch(i,function(t){return function(e){var r;return r=e.innerError,t._protectedState.set({error:r}),t._done()}}(this)).done()},t}()},{}],274:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h;n=t(179),o=t(180),s=t(273),a=t("bluebird"),d=t(272),u=t(270),i=t(269),c=function(t){return u(t.paidAccount)},h="U.S. addresses require a 5 or 9 digit zip code. Canadian addresses require a Postal Code.",l=function(t){return t instanceof n.BadRequest&&(/^invalid value for /.test(t.message)||t.message.trim()===h)},p=function(t){return a.resolve(t).disposer(function(t){return t.stop()})},e.exports=function(t,e,r){return a.using(p(new s(e,1,1e3)),function(e){return t().cancellable().catch(l,function(t){var e,r;return r=t.message,e=r.trim()===h?"zipCode":r.replace("invalid value for ","").trim(),a.reject(i.InvalidField("",{field:e}))}).catch(n,function(t){return a.reject(i.PostError("",{err:t}))}).then(function(t){return c(t)?t:d(e,c).catch(function(t){return a.reject(i.PollError("",{err:t}))})})})}},{}],275:[function(t,e,r){var n,o;n=t("react"),o=t(414)("board_list_item_add"),e.exports=n.createClass({displayName:"BoardListItemAddComponent",render:o.renderable(function(){var t;return t=this.props.newBoard,o.li(".boards-page-board-section-list-item",function(){return o.b(t,".board-tile.mod-add",function(){return o.format("create-new-board-ellipsis")})})})})},{}],276:[function(t,e,r){var n,o,i,s,a;n=t("react"),s=t(414)("board_list_item"),o=t(197),i=t(101),a=t(34),e.exports=n.createClass({displayName:"BoardListItemComponent",render:s.renderable(function(){var t,e,r,n,i,u,c,l,d,p,h,m,f,g,v,y,b;return m=this.props,l=m.isStarred,f=m.background,n=f.color,c=f.image,b=f.tiled,r=f.brightness,g=m.relUrl,h=m.orgname,d=m.name,v=m.showStar,u=m.id,p=m.onStarClick,e=m.badgeComponents,y=m.tagComponents,i=m.hidden,t=this.getBackgroundStyle(),s.li({class:s.classify({hide:i,"boards-page-board-section-list-item":!0})},function(){var i,c;if(i={"board-tile":!0,tile:b},!n)switch(r){case"unknown":i["mod-unknown-background"]=!0;break;case"light":i["mod-light-background"]=!0}return c=function(){return a("Organization View","Boards Page","Click on Board")},s.link(g,{onClick:c,class:s.classify(i),style:t},function(){var t;return s.span(".board-tile-fade"),t={"board-tile-details":!0,"is-badged":!0,"is-sub-named":h},s.span({class:s.classify(t)},function(){s.span(".board-tile-details-name",function(){return s.text(d)}),h&&s.span(".board-tile-details-sub-name",function(){return s.text(h)})}),v&&s.span(".board-tile-options",function(){return s.icon("star",{class:s.classify({"is-starred":l,"board-tile-options-star-icon":!0}),title:s.l("click-to-star-this-board-it-will-show-up-at-top-of-your-boards-list"),onClick:function(t){return t.preventDefault(),t.stopPropagation(),p(u)}})}),s.span(".board-tile-badges",function(){return e.forEach(o(s,"addElement"))})}),s.div(".board-tags.u-clearfix",function(){return y.forEach(o(s,"addElement"))})})}),getBackgroundStyle:function(){var t,e,r,n,o;return n=this.props.background,e=n.color,
r=n.image,o=n.tiled,t=n.brightness,e?{backgroundColor:e}:{backgroundImage:s.urlify(r)}},shouldComponentUpdate:i})},{}],277:[function(t,e,r){var n,o,i;n=t("react"),i=t(414)("org_filtering"),o=t(101),e.exports=n.createClass({displayName:"BoardListItemTagAddComponent",render:i.renderable(function(){var t;return t=this.props.onClick,i.b(t,{class:"board-tags-item mod-add"},function(){return i.icon("add",{class:"board-tags-item-icon"})})}),shouldComponentUpdate:o})},{}],278:[function(t,e,r){var n,o,i;n=t("react"),i=t(414)(),o=t(101),e.exports=n.createClass({displayName:"BoardListItemTagComponent",render:i.renderable(function(){var t,e,r,n;return e=this.props,n=e.text,t=e.onClick,r=e.selected,i.b(t,{class:i.classify({"board-tags-item":!0,"mod-selected":r})},function(){return i.text(n)})}),shouldComponentUpdate:o})},{}],279:[function(t,e,r){var n,o,i,s,a,u,c,l=function(t,e){function r(){this.constructor=t}for(var n in e)d.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},d={}.hasOwnProperty;n=t(22),i=t(5),s=t(99),a=t(421),c=t(34),u=t(580),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.tagName="li",e.prototype.initialize=function(){var t;return this.listenTo(this.model,"change:prefs change:name change:idOrganization",this.frameDebounce(this.render)),this.listenTo(n.me().boardStarList,"add remove reset change:pos",this.frameDebounce(this.renderStarred)),this.listenTo(this.model,"change:dateLastActivity change:dateLastView",this.frameDebounce(this.renderUnread)),(null!=(t=this.options)?t.showOrgName:void 0)?(this.listenTo(this.model,"change:idOrganization",function(t){return function(e){var r;return r=t.modelCache.get("Organization",t.model.previous("idOrganization")),null!=r&&t.stopListening(r,"change:displayName"),t.listenToOrgNameChange(),t.render()}}(this)),this.listenToOrgNameChange()):void 0},e.prototype.listenToOrgNameChange=function(){return null!=this.model.getOrganization()?this.listenTo(this.model.getOrganization(),"change:displayName",this.render):void 0},e.prototype.events={"click .js-open-board":"openBoard","click .js-star-board":"starBoard",moveto:"moveTo"},e.prototype.render=function(){var t,e,r,o,a,c;return e=this.model.toJSON({prefs:!0}),e.url=i.getBoardUrl(this.model),this.model.getPref("backgroundTile")?(e.backgroundTile=!0,e.backgroundImageThumbnail=this.model.getPref("backgroundImage")):e.backgroundImageThumbnail=null!=(r=null!=(o=s.smallestPreviewBiggerThan(this.model.getPref("backgroundImageScaled"),400,200))?o.url:void 0)?r:this.model.getPref("backgroundImage"),e.backgroundImageThumbnailUrl="url('"+e.backgroundImageThumbnail+"')",null==e.backgroundImageThumbnail&&(e.backgroundColor=this.model.getClientBackgroundColor("blue")),null!=this.model.getPref("backgroundColor")&&(t=this.model.getPref("background"),e.backgroundColor=this.model.getClientBackgroundColor(t)),e.backgroundBrightness=this.model.getPref("backgroundBrightness"),(null!=(a=this.options)?a.showOrgName:void 0)&&(e.orgname=null!=(c=this.model.getOrganization())?c.get("displayName"):void 0),e.isLoggedIn=n.isLoggedIn(),this.$el.html(u(e)),this.renderStarred(),this.renderUnread(),this},e.prototype.trackBoardClick=function(){return c("Boards View","Opened Board")},e.prototype.openBoard=function(t){return this.trackBoardClick()},e.prototype.starBoard=function(t){var e,r;s.stop(t),r=this.model.id,e=n.me().boardStarList,null==e.getBoardStar(r)?e.starBoard(r):e.unstarBoard(r)},e.prototype.renderUnread=function(){var t;return t=this.model.hasUnseenActivity()&&!i.onBoardView(this.model.id),this.$(".js-unread").toggleClass("any",t),this.$el.toggleClass("has-unread-activity",t),this},e.prototype.moveTo=function(t,e){var r,o;o=e.item.closest(".js-board-list").find("li"),r=o.index(e.item),n.me().boardStarList.updateStarBoard(this.model.id,r)},e.prototype.renderStarred=function(){return null!=n.me().boardStarList.getBoardStar(this.model.id)?(this.$el.addClass("starred"),this.$(".icon-star").addClass("icon-star-active")):(this.$el.removeClass("starred"),this.$(".icon-star").removeClass("icon-star-active")),this},e}(a)},{}],280:[function(t,e,r){var n,o,i,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;o=t(322),i=t(34),s=t("xtend"),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.events={mouseenter:"select",mouseleave:"deselect"},e.prototype.delegateEvents=function(t){return e.__super__.delegateEvents.call(this,s(o.prototype.events,t||this.events))},e.prototype.select=function(){return this.$el.addClass("selected")},e.prototype.deselect=function(){return this.$el.removeClass("selected")},e.prototype.trackBoardClick=function(){return i("Search","Select Board")},e}(o)},{}],281:[function(t,e,r){var n,o;n=t("react"),o=t(414)("board_list"),e.exports=n.createClass({displayName:"BoardListSectionComponent",render:o.renderable(function(){var t,e,r;return r=this.props,e=r.items,t=r.header,o.div(".boards-page-boards-section",function(){return t&&o.addElement(t),o.ul(".boards-page-board-section-list",function(){var t,r,n;for(t=0,n=e.length;n>t;t++)r=e[t],o.addElement(r)})})})})},{}],282:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f=function(t,e){function r(){this.constructor=t}for(var n in e)g.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},g={}.hasOwnProperty;n=t("jquery"),o=t(233),i=t(279),a=t(319),u=t(435),c=t(99),l=t(421),h=t(418),m=t(34),d=t(76),p=t(579),e.exports=s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return f(e,t),e.prototype.initialize=function(){this.debouncedPostRenderBoardsEvent=this.debounce(this.postRenderBoardsEvent,150),this.initedSortable=!1,this.listenTo(this.model.boardList,"add remove reset",this.frameDebounce(this.renderBoards))},e.prototype.events={"click .js-add-board":"createBoard","click .js-view-org-boards":"viewOrgBoards","click .js-view-org-members":"viewOrgMembers","click .js-view-org-settings":"viewOrgSettings"},e.prototype.className="boards-page-board-section",e.prototype.getBoards=function(){return[]},e.prototype.hideSectionIfEmpty=function(){return!1},e.prototype.showOrgName=function(){return!1},e.prototype.showAddBoard=function(){return!0},e.prototype.getTemplateData=function(){return{}},e.prototype.postRenderBoardsEvent=function(){},e.prototype.render=function(){var t;return t=this.getTemplateData(),t.logoDomain=logoDomain,this.$el.html(p(t)),this.renderBoards(),this.debouncedPostRenderBoardsEvent(),this},e.prototype.renderBoards=function(){var t,e,r;return t=this.$(".js-board-list").empty(),this.$el.removeClass("hide"),this.getBoards().length>0?(r=function(){var t,r,n,o;for(n=this.getBoards(),o=[],t=0,r=n.length;r>t;t++)e=n[t],o.push(this.subview(i,e,{showOrgName:this.showOrgName()}));return o}.call(this),this.appendSubviews(r,t)):this.hideSectionIfEmpty()?this.$el.addClass("hide"):this.showAddBoard()||n("<p></p>").addClass("quiet").css({padding:"8px 12px"}).text(d("no boards")).appendTo(t),this.showAddBoard()&&t.append(h.fill("board_list_item_add")),this},e.prototype.createBoard=function(t){var e,r;c.stop(t),e=null!=(r=this.options.organization)?r:null,u.toggle({elem:this.$(".js-add-board"),top:0,view:a,options:{model:this.model,modelCache:this.modelCache,organization:e}}),m("Boards View","Clicked 'Create new board' Button")},e.prototype.viewOrgBoards=function(){return m("Boards View","Clicked View Org Boards Link")},e.prototype.viewOrgMembers=function(){return m("Boards View","Clicked View Org Members Link")},e.prototype.viewOrgSettings=function(){return m("Boards View","Clicked View Org Settings Link")},e}(l)},{}],283:[function(t,e,r){var n,o,i,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;n=t(282),o=t(5),s=t("underscore"),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.listenTo(this.getOrganization(),"change:name change:displayName change:logoHash",this.render)},e.prototype.getBoards=function(){return s.filter(this.model.boardList.models,function(t){return function(e){var r;return(null!=(r=e.getOrganization())?r.id:void 0)===t.getOrganization().id&&!e.get("closed")}}(this))},e.prototype.getOrganization=function(){return this.options.organization},e.prototype.getTemplateData=function(){var t,e;return e=this.getOrganization(),t=e.toJSON(),t.title=e.get("displayName"),t.iconClass="organization",t.isOrg=!0,t.boardsUrl=o.getOrganizationUrl(e),t.membersUrl=o.getOrganizationMembersUrl(e),t.settingsUrl=o.getOrganizationAccountUrl(e),t.hasBusinessClass=e.isPremium(),t},e}(n)},{}],284:[function(t,e,r){var n,o,i,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty,c=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};n=t(282),i=t("underscore"),s=t(76),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.getBoards=function(){var t;return t=function(t){return function(e){var r,n;return r=null!=(n=e.getOrganization())?n.id:void 0,null!=r&&c.call(t.model.get("idOrganizations"),r)>=0}}(this),i.filter(this.model.boardList.models,function(e){return!t(e)&&!e.get("closed")})},e.prototype.getTemplateData=function(){return{title:s("board section title.my boards"),iconClass:"member"}},e}(n)},{}],285:[function(t,e,r){var n,o,i,s,a,u,c=function(t,e){function r(){this.constructor=t}for(var n in e)l.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},l={}.hasOwnProperty;n=t(282),o=t(60),i=t(433),a=t("underscore"),u=t(76),e.exports=s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.listenTo(this.model.boardStarList,"add remove reset change:pos",function(){return this.renderBoards()})},e.prototype.hideSectionIfEmpty=function(){return!0},e.prototype.showOrgName=function(){return!0},e.prototype.showAddBoard=function(){return!1},e.prototype.getBoards=function(){return a.filter(this.model.boardStarList.getBoards(),function(t){return!t.get("closed")})},e.prototype.getTemplateData=function(){return{title:u("board section title.starred boards"),iconClass:"star"}},e.prototype.postRenderBoardsEvent=function(){var t;return o.isTouch()?void 0:(t=this.$(".js-board-list"),this.initedSortable?i.refreshIfInitialized(t):(this.initedSortable=!0,t.sortable({delay:75,distance:7,forcePlaceholderSize:!0,items:"> li",placeholder:"placeholder",scroll:!0,stop:function(t){return function(e,r){t.defer(function(){return r.item.trigger("moveto",r)})}}(this),tolerance:"pointer"})))},e}(n)},{}],286:[function(t,e,r){var n,o,i,s,a,u,c,l,d=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;n=t("jquery"),s=t(421),i=t(99),u=t(416)("bc_upsell_ad"),l=t(34),a=t("underscore"),c=u.renderable(function(){return u.div(".bc-upsell-ad-icon",function(){return u.img(".bc-upsell-ad-icon-image.bc-upsell",{src:"https://d78fikflryjgj.cloudfront.net/images/e5a5cdbdce4d6a5cc83d8f1d94ba32cd/business-class-logo-mark-blue.svg"})}),u.div(".bc-upsell-ad-details",function(){return u.h4(".bc-upsell-ad-details-header",function(){return u.format("name")}),u.p(function(){return u.format("description")}),u.div(".bc-upsell-ad-details-actions",function(){return u.a(".bc-upsell-ad-details-actions-button.mod-details.quiet.js-show-details",{href:"/business-class?utm_source=trello&utm_medium=inapp&utm_content=power-ups-menu&utm_campaign=bc-upgrade",target:"_blank"},function(){return u.format("show-details")})})})}),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return d(e,t),e.prototype.className="bc-upsell-ad",e.prototype.events={"click .js-show-details":function(){return l("Power-Ups","BC Upsell Ad")}},e.prototype.renderOnce=function(){return this.$el.html(c())},e}(s)},{}],287:[function(t,e,r){var n,o,i,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=t(428),i=t(421),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.viewTitleKey="labels",e.prototype.el=function(){var t;return t=this.subview(o,this.model,{board:this.model,popOverMethod:"toggle",className:"board-menu-content-frame",selectLabel:function(e){return t.editLabel(e)}}),t.render().el},e}(i)},{}],288:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,B,M=function(t,e){function r(){this.constructor=t}for(var n in e)T.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},T={}.hasOwnProperty;n=t("jquery"),o=t(178),i=t(22),s=t(448),u=t(291),c=t(430),l=t(5),d=t(162),p=t(73),h=t(14),m=t(166),f=t(462),g=t(544),v=t(27),y=t(435),b=t(483),w=t(99),_=t(421),k=t("underscore"),j=t(81),S=t(418),C=t(662),B=t(34),x=t(76),e.exports=a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return M(e,t),j(g,f,e),e.prototype.viewTitleKey="members",e.prototype.initialize=function(){var t;t=this.model.getOrganization(),null!=t&&this.listenTo(t.memberList,"add remove reset",this.frameDebounce(this.renderOrgMembers)),this.listenTo(this.model.memberList,"add remove reset",this.frameDebounce(this.renderOrgMembers)),null!=t&&this.listenTo(t,"change:prefs",this.frameDebounce(this.render)),this.savedSearch=""},e.prototype.events={"click .js-board-members .js-select-member":"showMemberMenu","click .js-search-results .js-select-member":"didClickAddOtherMember","paste .js-search-input":"searchPaste","click .js-org-members .js-select-member":"didClickAddOrgMember","click .js-org-members .js-add-all-org-members":"didClickAddAllOrgMembers","click .js-org-members .js-more-org-members":"didClickViewMoreOrgMembers","click .js-remove-invitation":"removeInvitation","click .js-send-email-invite":"sendEmailInvite","submit .js-email-data":"sendEmailInvite","click .js-open-option":"openOption","mouseenter .js-select-member":"hoverMember"},e.prototype.render=function(){var t,e;return t={},t.placeholder=x("add member placeholder"),t.canAddMembers=this.model.canInviteMembers(),e=this.model.getOrganization(),null!=e&&(t.orgName=e.get("displayName")),t.canInviteMembers=t.canAddMembers&&!((null!=e?e.isFeatureEnabled("disableExternalMembers"):void 0)&&e.getPref("externalMembersDisabled")),t.disableAddingExternalMembers=this.model.isMember(i.me())&&(null!=e?e.isFeatureEnabled("disableExternalMembers"):void 0)&&e.getPref("externalMembersDisabled"),t.isBCOrgAdmin=null!=e?e.isPremOrgAdmin(i.me()):void 0,t.orgSettingsURL=null!=e?l.getOrganizationAccountUrl(e):"",this.$el.html(S.fill("manage_members",t,{editable:this.model.editable()})),t.canAddMembers?this.setTimeout(function(t){return function(){return t.renderOrgMembers(),t.input=t.$(".js-search-input"),t.input.click(function(t){return w.stop(t)}).keyup(t.debounce(t.search,500).bind(t)).keydown(t.keydownEvent.bind(t)).focus(),t.savedSearch?(t.input.val(t.savedSearch),t.search(),t.savedSearch=""):void 0}}(this),10):this.setTimeout(function(t){return function(){return t.renderBoardMembers()}}(this),10),this.lastSearch="",this.loadingEl=this.$(".js-loading"),this.helperEl=this.$(".js-helper"),this},e.prototype.loadOrgData=function(){var t;t=this.model.getOrganization(),null!=t&&this.model.editable()&&v.loadOrganizationMembersMinimal(t.id).then(function(t){return function(){t.renderOrgMembers()}}(this)).done()},e.prototype.renderBoardMembers=function(){var t,e,r,n,o,i;for(e=this.$(".js-board-members").hide(),t=e.find(".js-list").empty(),this.model.memberList.models.length>7&&t.addClass("collapsed"),i=this.model.memberList.models,r=0,n=i.length;n>r;r++)o=i[r],this.appendSubview(this.subview(b,o),t);e.show()},e.prototype.renderOrgMembers=function(){var t,e,r,n,o,i,s,a,u;r=this.$(".js-org-members").hide(),e=r.find(".js-list").empty(),t=r.find(".js-add-all-org-members").empty(),n=r.find(".js-more-org-members").addClass("hide"),a=this.model.getOrganization(),null!=a&&(i=this.model.orgMembersAvailable(),i.length>0&&(u=!1,i.length>7&&(u=!0,n.removeClass("hide")),s=i.slice(0,7),k.each(s,function(t){return function(t){var r;return r=t.toJSON(),(null!=a?a.isPremOrgAdmin(t):void 0)&&(r.className="no-option"),e.append(S.fill("select_member",r,{},{member:S.member}))}}(this)),o={count:i.length.toString()},t.text(x("add all org members",o)),r.show()))},e.prototype.renderEmailInviteToSearchResults=function(t){var e,r,n,o,i,s;return o=/[\s\d\x21-\x2F\x3A-\x40\x5B-\x60\x7B-\x7F]+/,n=/[\d\x21-\x2F\x3A-\x40\x5B-\x60\x7B-\x7F]+/,r=k.compact(w.removeDomainFromEmailAddress(t.email).split(o)).join(" ").replace(n,""),t.fullName=w.toTitleCase(r),t.canAddAsObserver=null!=(i=this.model.getOrganization())?i.isFeatureEnabled("observers"):void 0,t.modelType="Board",e=null!=(s=this.model.getOrganization())?s.get("prefs").externalMembersDisabled:void 0,this.$(".js-no-results").toggleClass("hide",!e),e?void 0:this.$(".js-uninvited-search-results").append(C(t)).show()},e.prototype.showMemberMenu=function(t){var e,r;w.stop(t),e=n(t.target).closest(".js-select-member").attr("idMember"),r=this.modelCache.get("Member",e),y.pushView({view:new s({model:r,board:this.model,modelCache:this.modelCache})})},e.prototype.searchPaste=function(){return this.loadingEl.show(),this.input.keyup()},e.prototype.search=function(t){var e,r,n;if(null==this.lastSearch||this.lastSearch!==this.input.val()){if(this.lastSearch=this.input.val(),n=this.input.val().toLowerCase().trim(),""===n)return void this.clearSearchResults();this.loadingEl.show(),o({url:"/1/search/members/",type:"get",data:{idBoard:this.model.id,query:n,idOrganization:null!=(e=this.model.getOrganization())?e.id:void 0,onlyOrgMembers:null!=(r=this.model.getOrganization())?r.getPref("externalMembersDisabled"):void 0,_cache:w.newestId(this.model.get("memberships"))},dataType:"json",success:function(t){return function(e){return t.renderSearchResults(n,e)}}(this)})}},e.prototype.keydownEvent=function(t){var e;e=p.getKey(t),e===h.Enter?this.$(".js-search-results .js-list .selected .js-select-member").length>0?(w.stop(t),this.$(".js-search-results .js-list .selected:first .js-select-member").click()):this.$(".js-search-results .js-list .email-invite").length>0&&(w.stop(t),this.$(".email-invite:first").click()):(e===h.ArrowUp||e===h.ArrowDown)&&(w.stop(t),w.navMenuList(this.$(".js-search-results .js-list"),"li",e))},e.prototype.clearSearchResults=function(){return this.helperEl.show(),this.lastSearch="",this.input.val("").focus().select(),this.$(".js-search-results").hide(),this.$(".js-uninvited-search-results").empty().hide(),this.renderOrgMembers()},e.prototype.removeInvitation=function(t){var e;e=n(t.currentTarget).closest(".invitation").data("id"),d.prototype.delete({model:this.model,idInvitation:e,success:function(t){return function(){return B("Invitations","Delete Board Invite"),t.search}}(this)}),w.setCaretAtEnd(this.input[0])},e.prototype.canRemoveInvitation=function(t){return t.get("idMemberInviter")===i.myId()||this.model.owned()},e.prototype.sendEmailInvite=function(t){var e,r,i,s;if(w.stop(t),r=this.$(".js-send-email-invite"),null==r.attr("disabled")){if(e=this.$(".js-email-data .js-full-name"),s=e.val().trim(),!w.validName(s))return w.setCaretAtEnd(e),void n(".js-name-error").show();i={fullName:s,email:this.$(".js-email-data .js-email").val().trim(),type:"normal"},this.$("#addAsObserver").is(":checked")&&(i.type="observer"),r.attr("disabled","disabled"),o({url:"/1/board/"+this.model.id+"/members",type:"put",dataType:"json",data:i,success:function(t){return function(e){var n;return n=new m(e,{modelCache:t.modelCache}),t.renderOrgMembers(),B("Invitations","Send Email Board Invite to New Member","Role: "+e.type),r.removeAttr("disabled"),y.hide()}}(this),error:function(t){return function(e,o){n(".manage-member-section.js-error").removeClass("hide").find(".error").html(e.responseText),t.$(".js-uninvited-search-results").empty().hide(),r.removeAttr("disabled"),t.input.focus().select(),B("Invitations","Error",e.responseText)}}(this)})}},e.prototype.addMember=function(t){var e;e=this.modelCache.get("Member",t),this.model.addMember(e),this.renderOrgMembers()},e.prototype.didClickAddOtherMember=function(t){var e,r,o;return w.stop(t),n(t.target).closest(".item.disabled").length>0?void 0:(e=n(null!=t?t.target:void 0).closest(".js-select-member").attr("idMember"),this.clearSearchResults(),o=this.model.getOrganization(),r=this.modelCache.get("Member",e),r&&(null!=o?o.isMember(r):void 0)?B("Invitations","Add Org Member to Board","Role: Member"):B("Invitations","Add Other Member to Board","Role: Member"),this.addMember(e))},e.prototype.didClickAddOrgMember=function(t){var e;return w.stop(t),B("Invitations","Add Org Member to Board (via List)","Role: Member"),e=n(null!=t?t.target:void 0).closest(".js-select-member").attr("idMember"),this.addMember(e)},e.prototype.didClickAddAllOrgMembers=function(t){var e,r;return w.stop(t),B("Invitations","Add All Org Members to Board"),r=this.model.orgMembersAvailable(),e=r.length.toString(),c.pushView("add all org members",{model:this.model,text:x("confirm.add all org members.text",{memberCount:e}),confirmBtnClass:"primary",fxConfirm:function(t){return function(e){var n,o,i,s;for(s=[],n=0,o=r.length;o>n;n++)i=r[n],s.push(t.model.addMember(i));return s}}(this)})},e.prototype.didClickViewMoreOrgMembers=function(t){w.stop(t),B("Invitations","View More Org Members"),y.pushView({view:new u({model:this.model,modelCache:this.modelCache})})},e.prototype.willBePushedDown=function(){return this.savedSearch=this.input.val()},e.prototype.willBePopped=function(){return this.savedSearch=""},e}(_)},{}],289:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p=function(t,e){function r(){this.constructor=t}for(var n in e)h.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},h={}.hasOwnProperty;n=t(129),o=t(229),s=t(185),u=t(420),a=t(421),c=t(81),l=t(418),d=t(34),c(u,i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.viewTitleKey="activity",e.prototype.initialize=function(){this.mode="all",this.fullHistory=this.options.fullHistory,null==this.fullHistory&&(this.fullHistory=!1),this.actionListView=this.collectionSubview(o,new n(this.getActions(),{modelCache:this.modelCache}),{renderOpts:{compact:!this.fullHistory,key:"boardmenuactivity",context:this.model}}),this.makeDebouncedMethods("renderMoreActionsLink"),this.listenTo(this.modelCache,"add:Action:"+this.model.id,function(t){return function(){return t.actionListView.collection.reset(t.getActions(),{silent:!0}),t.renderMoreActionsLinkDebounced()}}(this)),this.loadMoreActions()},e.prototype.className="board-menu-content-frame",e.prototype.events={"click .js-show-all":"showAll","click .js-show-comments":"showComments","click .js-more-actions":"loadMoreActions"},e.prototype.render=function(){return this.$el.html(l.fill("board_menu_activity",this.model.toJSON())),this.actionListView.setElement(this.$(".js-list-activity")[0]),this.renderActions(),this.renderMode(),this},e.prototype.renderActions=function(){return this.actionListView.render(),this.renderMoreActionsLink()},e.prototype.renderMoreActionsLink=function(){return this.$(".js-more-actions").toggle(this.hasMoreActions()),this},e.prototype.getActionsFilter=function(){return s.boardActions},e.prototype.renderMode=function(){return this.$(".js-control-option").removeClass("is-active"),"all"===this.mode?(this.$(".js-list-activity").removeClass("is-only-comments"),this.$(".js-show-all").addClass("is-active")):(this.$(".js-list-activity").addClass("is-only-comments"),this.$(".js-show-comments").addClass("is-active")),this},e.prototype.showAll=function(t){this.mode="all",this.renderMode(),d("Board Menu","Activity","Show All")},e.prototype.showComments=function(t){this.mode="comments",this.renderMode(),d("Board Menu","Activity","Show Comments Only")},e}(a)),e.exports=i},{}],290:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b=function(t,e){function r(){this.constructor=t}for(var n in e)w.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},w={}.hasOwnProperty;n=t("jquery"),o=t(22),i=t(395),l=t(435),p=t(99),h=t(421),a=t(430),d=t(321),c=t(308),u=t(319),m=t(115),f=t("underscore"),v=t(418),y=t(34),g=t(76),e.exports=s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return b(e,t),e.prototype.viewTitleKey="more",e.prototype.initialize=function(t){return this.sidebarView=t.sidebarView,this.listenTo(this.model,{"change:subscribed":this.renderSubscribeState})},e.prototype.className="board-menu-content-frame",e.prototype.events={"click .js-open-settings":"openSettings","click .js-open-stickers":"openStickers","click .js-open-labels":"openLabels","click .js-open-archive":"openArchivedItems","click .js-share":"shareBoard","click .js-email":"openEmailSettings","click .js-board-subscribe":"toggleSubscribe","click .js-copy-board":"copyBoard","click .js-close-board":"closeConfirm","click .js-leave-board":"leaveConfirm","click .js-short-url":"selectUrl","submit form":"cancel"},e.prototype.render=function(t){var e,r,n;return r=o.me(),e=this.model.toJSON(),e.canJoin=this.model.canJoin(),e.canInviteMembers=this.model.canInviteMembers(),e.confirmed=r.get("confirmed"),n=this.model.getOrganization(),e.canCloseBoard=this.model.owned()||(null!=n?n.isFeatureEnabled("superAdmins"):void 0)&&(null!=n?n.owned():void 0),e.editableByMember=this.model.editableByMember(r),e.canLeaveBoard=(this.model.isMemberObserver(r)||this.model.editableByMember(r))&&r.getMembershipData(this.model).canRemove,e.canCloseOrLeave=e.canLeaveBoard||e.canCloseBoard,e.isShortHeight=m.fShortHeight,e.pLevelClass=i.getPermLevelIconClassForBoard(this.model),e.pLevelAltText=i.getPermLevelAltTextForBoard(this.model),e.helperText=g(["board perms",this.model.getPermLevel(),"short summary"]),this.$el.html(v.fill("board_menu_more",e)),this.renderSubscribeState(),this},e.prototype.renderSubscribeState=function(){var t;t=this.model.toJSON(),this.$(".js-subscribed-state").html(v.fill("board_menu_subscribed_state",t))},e.prototype.openSettings=function(t){p.stop(t),this.sidebarView.pushView("settings"),y("Board Menu","Open Settings")},e.prototype.openLabels=function(t){p.stop(t),this.sidebarView.pushView("labels"),y("Board Menu","Open Labels")},e.prototype.openStickers=function(t){p.stop(t),this.sidebarView.pushView("stickers"),y("Board Menu","Open Stickers","Via More Menu")},e.prototype.openArchivedItems=function(t){p.stop(t),this.sidebarView.pushView("archive"),y("Board Menu","Open Archived Items")},e.prototype.shareBoard=function(t){p.stop(t),l.toggle({elem:this.$(t.target).closest(".js-share"),view:new d({model:this.model,modelCache:this.modelCache})}),y("Board Menu","Open Share, Print, and Export Menu")},e.prototype.openEmailSettings=function(t){p.stop(t),l.toggle({elem:this.$(t.target).closest(".js-email"),view:new c({model:this.model,modelCache:this.modelCache})}),y("Board Menu","Open Email Settings - Menu")},e.prototype.copyBoard=function(t){p.stop(t),n(t.target).hasClass("disabled")||(y("Board Menu","Open Copy Board"),l.toggle({elem:this.$(t.target).closest(".js-copy-board"),view:new u({model:this.model,copyBoard:!0,modelCache:this.modelCache})}))},e.prototype.toggleSubscribe=function(t){p.preventDefault(t),n(t.target).hasClass("disabled")||(this.model.subscribe(!this.model.get("subscribed")),y("Board Menu","Subscribe/Unsubscribe"))},e.prototype.closeConfirm=function(t){p.stop(t),y("Board Menu","Open Close Menu"),a.toggle("close board",{elem:n(t.target).closest("a"),model:this.model,confirmBtnClass:"negate",fxConfirm:function(t){return function(e){return t.model.close(),y("Board","Close Board")}}(this)})},e.prototype.leaveConfirm=function(t){var e,r;p.stop(t),y("Board Menu","Open Leave Menu"),r=o.me(),e=r.removeMembershipConfirmationKey(this.model),a.toggle(e,{elem:n(t.target).closest("a"),confirmBtnClass:"negate",fxConfirm:function(t){return function(e){return t.model.removeMember(r),y("Board","Leave Board")}}(this)})},e.prototype.selectUrl=function(t){return this.$(".js-short-url").focus().select()},e.prototype.cancel=function(t){return p.stop(t),!1},e}(h)},{}],291:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f=function(t,e){function r(){this.constructor=t}for(var n in e)g.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},g={}.hasOwnProperty;n=t("jquery"),i=t(73),s=t(14),a=t(462),u=t(435),c=t(99),l=t(421),d=t("underscore"),h=t(81),m=t(418),p=t(76),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return f(e,t),h(a,e),e.prototype.viewTitleKey="organization members",e.prototype.initialize=function(){var t;t=this.model.getOrganization(),null!=t&&this.listenTo(t.memberList,"add remove reset",this.frameDebounce(this.render))},e.prototype.events={"click .js-board-members .js-select-member":"didClickAddOrgMember",keyup:"keyupEvent","click .js-open-option":"openOption","mouseenter .js-select-member":"hoverMember"},e.prototype.renderOrgMembers=function(t){var e,r,n,o,i,s;for(i=[],i=t?this.modelCache.get("Member",t):this.model.orgMembersAvailable(),s=this.$(".js-board-members .js-list").empty().show(),r=0,n=i.length;n>r;r++)o=i[r],e=o.toJSON(),s.append(m.fill("select_member",e,{},{member:m.member}));this.$(".js-board-members .js-num-org-mem").empty().text(i.length)},e.prototype.render=function(){var t,e;return t=this.model.toJSON({prefs:!0}),t.orgName=null!=(e=this.model.getOrganization())?e.get("displayName"):void 0,t.canInvite=!0,this.$el.html(m.fill("manage_members",t,{editable:this.model.editable()})),this.renderOrgMembers(),this.$(".js-board-members").removeClass("hide"),this},e.prototype.keyupEvent=function(t){var e,r,o,a,l;r=i.getKey(t),l=n(".js-search-input").val().trim(),r===s.Enter?(c.stop(t),this.$(".js-org-members .js-list .selected").length>0&&(e=this.$(".js-org-members .js-list .selected:first .js-select-member").attr("idMember"),o=this.modelCache.get("Member",e),this.model.addMember(o),this.$(".js-search-input").focus().select())):r===s.ArrowUp||r===s.ArrowDown?(c.stop(t),c.navMenuList(n(null!=(a=u.view)?a.el:void 0).find(".js-org-members .js-list"),".item",r)):l.length>0?(this.filterAndFillMembers(l),n(".js-org-members .js-list").removeClass("collapsed"),n(".js-add-all-org-members").addClass("hide")):(this.renderOrgMembers(),n(".js-org-members .js-list").addClass("collapsed"),n(".js-add-all-org-members").removeClass("hide"))},e.prototype.filterAndFillMembers=function(t){var e,r,n;r=d.pluck(this.model.orgMembersAvailable(),"id"),n=c.filterMembers(this.modelCache,t,r),n=n.slice(0,7),n.length>0?(this.renderOrgMembers(n),e=this.$(".js-org-members .js-list .item:first"),c.selectMenuItem(this.$(".js-org-members .js-list"),".item",e)):this.$(".js-org-members .js-list").html('<li><p class="empty"></p></li>').find("p").text(p("no matched memebers"))},e.prototype.didClickAddOrgMember=function(t){var e,r;return c.stop(t),e=n(t.target).closest(".js-select-member").attr("idMember"),r=this.modelCache.get("Member",e),this.model.addMember(r),this.render()},e}(l)},{}],292:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p=function(t,e){function r(){this.constructor=t;
}for(var n in e)h.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},h={}.hasOwnProperty,m=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};n=t("jquery"),o=t(395),s=t(5),a=t(435),u=t(99),c=t(421),d=t(418),l=t(76),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.viewTitleKey="change visibility",e.prototype.tagName="ul",e.prototype.events={"click .js-select":"selectVis"},e.prototype.className="pop-over-list",e.prototype.render=function(){var t,e,r,n,i,a,u,c,p,h;for(c=this.options.organization,e=["public","org","private"],t=c.owned()?["admin","org"]:["org"],u=c.get("displayName"),n={explanationText:l("illegal org visibility",{orgName:u})},n["permissionLevel_"+this.model.get("prefs").permissionLevel]=!0,r=!1,i=0,a=e.length;a>i;i++)h=e[i],n["permText_"+h]=o.getPermLevelAltText(h),n["iconClass_"+h]=o.getPermLevelIconClass(h),p=c.get("prefs").boardVisibilityRestrict[h],m.call(t,p)<0?n["disabledVis_"+h]=!0:r=!0;return r?(this.$el.html(d.fill("board_menu_vis",n,{editable:this.model.editable(),owned:this.model.owned()})),this):(n={isOrgAdmin:c.owned(),orgSettingsUrl:s.getOrganizationAccountUrl(c),organization:c.toJSON()},this.$el.html(d.fill("cant_add_board_to_org",n)),this)},e.prototype.selectVis=function(t){var e,r,o;return u.stop(t),e=n(t.target).closest(".js-select"),e.hasClass("disabled")||e.closest(".js-disabled").length?void 0:(o=e.attr("name"),this.options.idOrganizationSource&&null!=(r=this.modelCache.get("Organization",this.options.idOrganizationSource))&&r.boardList.remove(this.model),this.model.update({idOrganization:this.options.organization.id,"prefs/permissionLevel":o}),this.options.organization.boardList.add(this.model),a.hide())},e}(c)},{}],293:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_=function(t,e){function r(){this.constructor=t}for(var n in e)k.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},k={}.hasOwnProperty;n=t("jquery"),f=t("underscore"),i=t(294),s=t(430),g=t(216),u=t(407),c=t(406),a=t(529),l=t(411),v=t(412),d=t(435),p=t("bluebird"),y=t(416)("plugin_item"),h=t(99),m=t(421),w=t("xtend"),b=y.renderable(function(t){var e,r,n,o,i,s,a,u,c;return i=t.loading,s=t.name,o=t.iconUrl,r=t.desc,u=t.source,a=t.pluginsEnabled,e=t.canEnable,c=t.supportsSettings,n=t.hasPersonalSettings,y.div(".power-up-item-icon",function(){return o?y.img(".power-up-item-icon-image.plugin-item-icon",{src:o,alt:s}):void 0}),y.div(".power-up-item-details",function(){return y.h4(".power-up-item-details-header",function(){return i?y.format("loading"):s?y.text(s):y.format("unknown plugin")}),y.icon("check",{class:"power-up-item-details-enabled-icon"}),r&&y.p(function(){return y.text(r)}),y.div(".power-up-item-details-actions",function(){return y.a(".power-up-item-details-actions-button.mod-details.quiet.js-show-details",{href:"#"},function(){return y.format("show-details")}),y.a(".power-up-item-details-actions-button.mod-clear-data.quiet.js-clear-data",{href:"#"},function(){return y.format("clear data")})}),y.div(".power-up-item-details-right-actions",function(){return e?(c&&y.a(".power-up-item-details-actions-button.mod-settings.button-link.js-show-settings",{href:"#"},function(){return y.icon("gear")}),y.a(".power-up-item-details-actions-button.mod-enable.button-link.js-enable",{href:"#"},function(){return y.format("enable")}),y.a(".power-up-item-details-actions-button.mod-disable.button-link.js-disable",{href:"#"},function(){return y.format("disable")})):void 0})})}),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return _(e,t),e.prototype.initialize=function(t){this.plugin=t.plugin,this.io=c.get(this.plugin)},e.prototype.events=h.extendEvents({"click .js-clear-data":function(t){return h.stop(t),this.clearData(t.currentTarget)}}),e.prototype.renderOnce=function(){var t,e,r,n;return r=this.model.getOrganization(),n=r&&r.isFeatureEnabled("plugins"),e={loading:!0,supportsSettings:!1,pluginsEnabled:n,canEnable:n&&this.model.editable()},this.$el.html(b(e)),t=function(t,e){return t.catch(u.Error.UnableToLoadManifest,function(){return e})},p.props({loading:!1,name:t(this.io.getName(),null),desc:t(this.io.getDescription(),this.io.manifestUrl),iconUrl:t(this.io.getIconUrl(),null),supportsSettings:t(this.io.supports("show-settings"),!1)}).then(function(t){return function(r){return t.$el.html(b(w(e,r))),t.subscribe(t.model.boardPluginList.snoop(),t.renderEnabledState),t.subscribe(v(t.model),t.renderPersonalSettingsState)}}(this)).done(),this},e.prototype.getEnabledState=function(){return this.model.isPluginEnabled(this.plugin.id)},e.prototype.renderEnabledState=function(){return this.$el.toggleClass("is-enabled",this.getEnabledState()),this},e.prototype.hasPersonalSettings=function(){return f.any(this.model.getPluginData(this.io.id),function(t){var e;return e=t.private,null!=e})},e.prototype.renderPersonalSettingsState=function(){return this.$(".js-clear-data").toggleClass("hide",!this.hasPersonalSettings()),this},e.prototype.enable=function(){this.model.enablePlugin(this.plugin.id)},e.prototype.disable=function(){this.model.disablePlugin(this.plugin.id)},e.prototype.showDetails=function(t){var e;e=this.model,d.toggle({elem:t,view:new a({plugin:this.plugin,model:e,showEnable:!1})})},e.prototype.showSettings=function(t){l.one({plugin:this.plugin,command:"show-settings",board:this.model,el:t}).done()},e.prototype.clearData=function(t){return s.toggle("clear plugin data",{elem:t,model:this.model,confirmBtnClass:"negate",fxConfirm:function(t){return function(e){return t.model.clearPluginData(t.io.id)}}(this)})},e}(i)},{}],294:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p=function(t,e){function r(){this.constructor=t}for(var n in e)h.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},h={}.hasOwnProperty;n=t("jquery"),u=t(421),i=t(435),a=t(99),s=t(309),l=t(418),d=t(34),c=t("underscore"),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.initialize=function(t){this.powerUp=t.powerUp},e.prototype.className="power-up-item",e.prototype.events={"click .js-enable":function(t){return a.stop(t),i.hide(),this.enable()},"click .js-disable":function(t){return a.stop(t),i.hide(),this.disable()},"click .js-show-details":function(t){return a.stop(t),this.showDetails(t.currentTarget)},"click .js-show-settings":function(t){return a.stop(t),this.showSettings(t.currentTarget)}},e.prototype.renderOnce=function(){var t;return t=c.clone(this.powerUp),t.canEnable=this.model.owned(),this.$el.html(l.fill("power_up_item",t)),this.renderEnabledState(),this.listenTo(this.model,{"change:powerUps":this.renderEnabledState}),this},e.prototype.getEnabledState=function(){return this.model.isPowerUpEnabled(this.powerUp.name)},e.prototype.renderEnabledState=function(){return this.$el.toggleClass("is-enabled",this.getEnabledState()),this},e.prototype.enable=function(){this.model.addToSet("powerUps",this.powerUp.name),d("Power-Ups",this.powerUp.displayName,"Enable")},e.prototype.disable=function(t){this.model.pull("powerUps",this.powerUp.name),d("Power-Ups",this.powerUp.displayName,"Disable")},e.prototype.showDetails=function(t){return i.toggle({elem:t,view:new s({powerUp:this.powerUp}),autoPosition:!0}),d("Power-Ups",this.powerUp.displayName,"Show Details")},e.prototype.showSettings=function(t){return i.toggle({elem:t,view:this.powerUp.settingsView(this.model),autoPosition:!0}),d("Power-Ups",this.powerUp.displayName,"Show Details")},e}(u)},{}],295:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C=function(t,e){function r(){this.constructor=t}for(var n in e)x.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},x={}.hasOwnProperty;n=t("jquery"),v=t("underscore"),i=t(293),s=t(294),u=t(538),c=t(539),o=t(286),l=t(27),d=t(407),p=t(406),m=t("bluebird"),f=t(421),g=t(540),y=t(76),_=t(215),k=t("xtend"),b=[{name:"voting",iconSrc:"https://d78fikflryjgj.cloudfront.net/images/powerups/7a64373ca0f3e1858b4a9a3928d561d3/voting-icon.svg",aboutTemplate:"power_ups_about_voting",settingsView:function(t){return new g({model:t})},screenshots:["https://d78fikflryjgj.cloudfront.net/images/powerups/voting/screenshots/de063c1421497f609fef2e5b37797cff/2015-3-23-screenshot1.png"]},{name:"cardAging",iconSrc:"https://d78fikflryjgj.cloudfront.net/images/powerups/d33d5c107f425c21f7f3a19f602871ec/card-aging-icon.svg",aboutTemplate:"power_ups_about_card_aging",settingsView:function(t){return new c({model:t})},screenshots:["https://d78fikflryjgj.cloudfront.net/images/powerups/card-aging/screenshots/27972dcff7cab11886b671d6fcfc11ae/2015-3-23-screenshot1.png"]},{name:"calendar",iconSrc:"https://d78fikflryjgj.cloudfront.net/images/powerups/ff818ba7df38d8af7f68d26ae408f5eb/calendar-icon.svg",aboutTemplate:"power_ups_about_calendar",settingsView:function(t){return new u({model:t})},screenshots:["https://d78fikflryjgj.cloudfront.net/images/powerups/calendar/screenshots/e204a5ed5a8dc113760b185b4c7276c5/2015-3-23-screenshot1.png"]}],w=_.renderable(function(){return _.div(function(){return _.div(".spinner.loading")})}),h=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return C(e,t),e.prototype.render=function(){return this.$el.html(w()),this},e}(f),e.exports=a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return C(e,t),e.prototype.viewTitleKey="power ups",e.prototype.className="board-menu-content-frame power-ups-list",e.prototype.renderOnce=function(){var t,e;return this.appendSubview(this.subview(h,this.model)),t=this.model.getOrganization(),e=!(null!=t&&t.isFeatureEnabled("plugins")),m.all([v.map(b,function(t){return function(e){var r,n;return n=e.name,r=k(e,{displayName:y(["power ups",n,"name"]),description:y(["power ups",n,"description"])}),{displayName:r.displayName,view:t.subview(s,t.model,{powerUp:r},n)}}}(this)),m.try(function(t){return function(){return e?[]:l.loadBoardAvailablePlugins(t.model.id).map(function(e){return p.get(e).getName().catch(d.Error.UnableToLoadManifest,function(){return e.get("url")}).then(function(r){return{displayName:r,view:t.subview(i,t.model,{plugin:e},e.id)}})})}}(this))]).spread(function(t){return function(r,n){var i;return i=v.chain([r,n]).flatten().sortBy("displayName").pluck("view").value().concat(e?[t.subview(o,t.model)]:[]),t.ensureSubviews(i)}}(this)).done(),this},e}(f)},{}],296:[function(t,e,r){var n,o,i,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;n=t(292),i=t(297),s=t(435),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.initialize=function(t){return this.disableNone=null!=t?t.disableNone:void 0,e.__super__.initialize.apply(this,arguments)},e.prototype.render=function(){return e.__super__.render.apply(this,arguments),this.disableNone&&this.$(".js-submit").addClass("disabled").attr("disabled","disabled"),this},e.prototype.showOrgBoardVisPerms=function(t,e){return s.pushView({view:new n({model:this.model,organization:t,idOrganizationSource:e,modelCache:this.modelCache})})},e.prototype.submit=function(t){return e.__super__.submit.apply(this,arguments)},e.prototype.canAddToOrg=function(t){return!t.isFeatureEnabled("restrictVis")||t.canSetVisibility("org")},e.prototype.updateModel=function(t){return this.model.update({idOrganization:t,"prefs/permissionLevel":"org"})},e.prototype.orgSelected=function(){return e.__super__.orgSelected.apply(this,arguments),this.disableNone?""===this.$(".js-org").val()?this.$(".js-submit").addClass("disabled").attr("disabled","disabled"):this.$(".js-submit").removeClass("disabled").removeAttr("disabled"):void 0},e}(i)},{}],297:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p=function(t,e){function r(){this.constructor=t}for(var n in e)h.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},h={}.hasOwnProperty;n=t(22),o=t(292),s=t(27),a=t(435),u=t(99),c=t(421),l=t(418),d=t(34),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.viewTitleKey="change organization",e.prototype.events={"click .js-submit":"submit","change .js-org":"orgSelected"},e.prototype.render=function(){var t,e,r,o,i,s;if(t=this.model.toJSON({org:!0}),i=this.model.owned()?n.me().organizationList.models:[],t.orgs=function(){var t,e,r;for(r=[],t=0,e=i.length;e>t;t++)o=i[t],r.push(o.toJSON());return r}(),t.hasOrgs=0!==t.orgs.length,t.idOrganization)for(s=t.orgs,e=0,r=s.length;r>e;e++)o=s[e],o.id===t.idOrganization&&(o.select=!0);return t.isPrivate=this.model.isPrivate(),t.allowsSelfJoin=this.model.allowsSelfJoin(),this.$el.html(l.fill("popover_change_board_org",t)),this.updateOrgOptions(),this},e.prototype.showOrgBoardVisPerms=function(t,e){return a.pushView({view:new o({model:this.model,organization:t,idOrganizationSource:e,modelCache:this.modelCache})})},e.prototype.changeOrg=function(t,e){var r,n,o;return r=t!==e,r&&e&&null!=(n=this.modelCache.get("Organization",e))&&n.boardList.remove(this.model),o={},r&&(o.idOrganization=t),t&&(this.$(".js-make-org-visible").is(":checked")&&(o["prefs/permissionLevel"]="org"),this.$(".js-make-org-joinable").is(":checked")&&(o["prefs/selfJoin"]=!0)),this.model.update(o),r&&t&&this.modelCache.get("Organization",t).boardList.add(this.model),a.hide()},e.prototype.canAddToOrg=function(t){return t.canAddBoard(this.model)},e.prototype.submit=function(t){var e,r,n,o;return u.stop(t),d("Board","Change Org"),n=this.$(".js-org").val(),r=this.model.get("idOrganization"),o=this.modelCache.get("Organization",n),e=function(t){return function(){return t.changeOrg(n,r)}}(this),(null!=o?o.isFeatureEnabled("restrictVis"):void 0)?s.loadOrganizationMembersData(n).then(function(t){return function(){t.canAddToOrg(o)?e():t.showOrgBoardVisPerms(o,r)}}(this)).done():e()},e.prototype.updateOrgOptions=function(){var t;t=""!==this.$(".js-org").val(),this.$(".js-make-org-visible,.js-make-org-joinable").closest(".js-check-div").toggleClass("hide",!t)},e.prototype.orgSelected=function(t){return this.updateOrgOptions()},e}(c)},{}],298:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m=function(t,e){function r(){this.constructor=t}for(var n in e)f.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},f={}.hasOwnProperty;n=t("jquery"),o=t(297),s=t(302),a=t(304),u=t(435),c=t(99),l=t(421),p=t(418),h=t(34),d=t(76),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return m(e,t),e.prototype.viewTitleKey="settings",e.prototype.className="board-menu-content-frame",e.prototype.events={"click .js-change-org:not(.disabled)":"changeOrg","click .js-toggle-covers:not(.disabled)":"toggleCovers","click .js-change-comments:not(.disabled)":"changeCommentingPerms","click .js-change-add-members:not(.disabled)":"changeAddMemberPerms","click .js-toggle-org-mem-join:not(.disabled)":"toggleSelfJoin"},e.prototype.initialize=function(){this.listenTo(this.model,"change",this.frameDebounce(this.render))},e.prototype.render=function(){var t,e;return t=this.model.toJSON({prefs:!0,url:!0,labels:!0}),t.cardCovers=t.prefs.cardCovers,e=this.model.getOrganization(),t.orgDisplayName=null!=e?e.get("displayName"):void 0,t.hasOrg=null!=(null!=e?e.id:void 0),t.commentsDisplay=d(["board pref perms",this.model.getCommentPerm()]),t.invitationsDisplay=d(["board pref perms",this.model.getInvitePerm()]),t.canChangeOrg=(null!=e?e.owned():void 0)||this.model.owned(),(null!=e?e.owned():void 0)&&!this.model.owned()&&(t.setOrgNull=!0),this.$el.html(p.fill("board_menu_settings",t,{editable:this.model.editable(),owned:this.model.owned()})),this},e.prototype.changeOrg=function(t){var e,r;c.stop(t),this.model.owned()?(u.toggle({elem:n(t.target).closest("a"),view:o,options:{model:this.model,modelCache:this.modelCache}}),h("Board Menu","Settings","Change Org")):(e=this.model.get("idOrganization"),null!=(r=this.modelCache.get("Organization",e))&&r.boardList.remove(this.model),this.model.update("idOrganization",""),u.hide(),h("Board Menu","Settings","Remove Org"))},e.prototype.toggleCovers=function(t,e){c.stop(t),this.model.setPref("cardCovers",!this.model.getPref("cardCovers")),h("Board Menu","Settings","Enable/Disable Cover Images")},e.prototype.changeCommentingPerms=function(t){c.stop(t),u.toggle({elem:n(t.target).closest("a"),view:new a({model:this.model,modelCache:this.modelCache})}),h("Board Menu","Settings","Open Change Commenting Permissions")},e.prototype.changeAddMemberPerms=function(t){c.stop(t),u.toggle({elem:n(t.target).closest("a"),view:new s({model:this.model,modelCache:this.modelCache})}),h("Board Menu","Settings","Open Change Add Member Permissions")},e.prototype.toggleSelfJoin=function(t){c.stop(t),this.model.setPref("selfJoin",!this.model.getPref("selfJoin")),this.model.save(),h("Board Menu","Settings","Toggle Allow Org Join")},e}(l)},{}],299:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j=function(t,e){function r(){this.constructor=t}for(var n in e)S.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},S={}.hasOwnProperty;n=t("jquery"),o=t(116),i=t(129),s=t(229),a=t(22),u=t(11),c=t(288),d=t(317),h=t(433),m=t(452),l=t(290),f=t(435),g=t(88),v=t(99),y=t(421),b=t(115),w=t("underscore"),C=t(418),x=t(34),k=t(75),_=t(69),e.exports=p=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return j(e,t),e.prototype.viewTitleKey="menu",e.prototype.className="board-menu-content-frame",e.prototype.headerDisplayTypeClass="is-board-menu-default-view",e.prototype.initialize=function(t){return this.sidebarView=t.sidebarView,this.showAllMembers=!1,this.numActionsToShow=6,b.fTallHeight&&(this.numActionsToShow=8),this.makeDebouncedMethods("render","renderActionCount"),this.listenTo(this.model.memberList,{"change:status":this.renderMembers,"add remove reset":this.renderDebounced}),this.listenTo(this.model,{"change:memberships":this.renderDebounced,"change:prefs:canInvite":this.renderDebounced,"change:prefs.selfJoin":this.renderDebounced,"change:prefs.invitations":this.renderDebounced,"change:powerUps":this.renderEnabledPowerUpCount}),this.listenTo(this.model.boardPluginList,{"add remove reset":this.renderEnabledPowerUpCount}),this.actionListView=this.collectionSubview(s,new i([],{modelCache:this.modelCache}),{renderOpts:{limit:this.numActionsToShow,context:this.model,compact:!0,truncateComments:!0,excludeTypes:["copyCommentCard"]}}),this.waitForId(this.model,function(t){return function(){return t.listenTo(t.modelCache,"add:Action:"+t.model.id+" remove:Action:"+t.model.id+" change:Action:"+t.model.id,function(){return t.renderActionCountDebounced(),t.actionListView.collection.reset(o.getListForModel(t.modelCache,t.model))}),t.actionListView.collection.reset(o.getListForModel(t.modelCache,t.model))}}(this))},e.prototype.events={"click .js-open-manage-board-members":"openAddMembers","click .js-show-extra-members":"showExtraMembers","click .js-hide-extra-members":"hideExtraMembers","click .js-show-observers":"showObservers","click .js-join-board":"joinBoard","click .js-change-background":"changeBackground","click .js-open-power-ups":"showPowerUps","click .js-open-stickers":"openStickers","click .js-open-card-filter":"showCardFilter","click .js-open-activity":"openActivity","click .js-open-more":"openMore"},e.prototype.render=function(){var t,e,r,n;return e=a.me(),this.showAllMembers=!1,t=this.model.toJSON(),t.canJoin=this.model.canJoin(),t.canInviteMembers=this.model.canInviteMembers(),t.confirmed=e.get("confirmed"),r=this.model.getOrganization(),(this.model.owned()||(null!=r?r.isFeatureEnabled("superAdmins"):void 0)&&(null!=r?r.owned():void 0))&&(t.canCloseBoard=!0),t.canLeaveBoard=("normal"===(n=this.model.getExplicitMemberType(e))||"admin"===n||"observer"===n)&&e.getMembershipData(this.model).canRemove,t.isShortHeight=b.fShortHeight,this.$el.html(C.fill("board_menu_default",t,{editable:this.model.editable(),owned:this.model.owned()})),this.renderMembers(),this.actionListView.setElement(this.$(".js-menu-action-list")[0]),this.renderActions(),this.renderActionCount(),this.renderEnabledPowerUpCount(),this.renderBackgroundPreview(),this},e.prototype.renderBackgroundPreview=function(){var t,e,r,n,o,i,s;return t=this.$(".js-fill-background-preview").css({"background-image":"","background-color":""}),null!=(null!=(n=u[this.model.getPref("background")])?n.tile:void 0)?r=this.model.getPref("backgroundImage"):null!=this.model.getPref("backgroundImageScaled")||null!=this.model.getPref("backgroundImage")?r=null!=(o=null!=(i=null!=(s=v.previewBetween(this.model.getPref("backgroundImageScaled"),90,60,600,400))?s.url:void 0)?i:this.model.get("fullSizeUrl"))?o:this.model.getPref("backgroundImage"):e=null!=this.model.getPref("backgroundColor")?this.model.getClientBackgroundColor(this.model.getPref("background")):this.model.getClientBackgroundColor("blue"),t.css({"background-image":"url("+r+")","background-color":e}),this},e.prototype.getDateLastViewedActionsStorageKey=function(){return this.model.id?"timeLastViewedActions-"+this.model.id:null},e.prototype.setDateLastViewedActions=function(t){var e;null!=(e=this.getDateLastViewedActionsStorageKey())&&g.set(e,t.toISOString())},e.prototype.setDateLastViewedActionsAsNow=function(){this.setDateLastViewedActions(new Date)},e.prototype.getDateLastViewedActions=function(){var t,e;return null!=(e=this.getDateLastViewedActionsStorageKey())&&null!=(t=g.get(e))?new Date(t):null},e.prototype.renderActionCount=function(){var t,e,r,n,i,s,u,c,l,d;for(this.$(".js-unread-activity-count").empty(),i=this.getDateLastViewedActions(),l=50,null==i&&(i=new Date,this.setDateLastViewedActions(i)),u=function(t){return function(t){var e,r;return e=new Date(t.get("date"))>i,r=t.get("idMemberCreator")!==a.me().id,e&&r}}(this),e=0,d=o.getListForModel(this.modelCache,this.model),s=0,c=d.length;c>s;s++)t=d[s],u(t)&&e++;return e>0&&e<=this.numActionsToShow&&this.setDateLastViewedActionsAsNow(),r=e,e>=l&&(r=l+"+"),e>this.numActionsToShow&&this.$(".js-unread-activity-count").text(r),n={count:r,hasCount:e>this.numActionsToShow},this.$(".js-fill-activity-button").empty().append(C.fill("board_menu_more_activity_button",n)),this},e.prototype.getEnabledPowerUpCount=function(){return this.model.get("powerUps").length+this.model.boardPluginList.length},e.prototype.renderEnabledPowerUpCount=function(){var t;return t=this.getEnabledPowerUpCount(),this.$(".js-enabled-power-up-count").text(t?_(t):""),this},e.prototype.renderMembers=function(){var t,e,r,n,o,i,s,a,u;return t=this.$(".js-list-board-members").empty(),i=9,b.fSmall&&(i=7),s=3,b.fShortHeight&&(s=2),n=i*s,e=i*(s+1),u=this.model.orderedVisibleMembers(),r=u.length>e,r&&!this.showAllMembers?(this.$(".js-fill-extras-length").text("("+(u.length-n)+")"),u=u.slice(0,n),this.$(".js-show-extra-members-button").addClass("is-shown"),this.$(".js-hide-extra-members-button").removeClass("is-shown")):r&&this.showAllMembers?(this.$(".js-show-extra-members-button").removeClass("is-shown"),this.$(".js-hide-extra-members-button").addClass("is-shown")):(this.$(".js-show-extra-members-button").removeClass("is-shown"),this.$(".js-hide-extra-members-button").removeClass("is-shown")),a=function(){var t,e,r;for(r=[],t=0,e=u.length;e>t;t++)o=u[t],r.push(this.subview(m,o,{board:this.model}));return r}.call(this),this.appendSubviews(a,t),this.renderObservers(),this.defer(function(){return h.refreshDraggableSidebarMembers()}),this},e.prototype.showExtraMembers=function(t){v.stop(t),this.showAllMembers=!0,this.renderMembers()},e.prototype.hideExtraMembers=function(t){v.stop(t),this.showAllMembers=!1,this.renderMembers()},e.prototype.renderObservers=function(){var t,e,r;return t=this.$(".js-list-observers"),r=this.model.getObserverList().length,e=k("observers",r),r>0?t.html(C.fill("board_observer_count",{localizedObserverCount:e})):t.empty(),this},e.prototype.showObservers=function(t){v.stop(t),x("Board Menu","Show Observers"),f.toggle({elem:this.$(".js-show-observers"),view:d,options:{model:this.model,modelCache:this.modelCache},shown:function(){return h.refreshDraggableSidebarMembers()}})},e.prototype.renderActions=function(){return this.actionListView.render(),this},e.prototype.showPowerUps=function(t){v.stop(t),this.sidebarView.pushView("powerUps"),x("Board Menu","Open Power-Ups")},e.prototype.showCardFilter=function(t){v.stop(t),this.sidebarView.pushView("filter"),x("Board Menu","Open Card Filter Menu")},e.prototype.openStickers=function(t){v.stop(t),this.sidebarView.pushView("stickers"),x("Board Menu","Open Stickers","Via Default Menu")},e.prototype.changeBackground=function(t){v.stop(t),this.sidebarView.pushView("background"),x("Board Menu","Open Change Background")},e.prototype.openActivity=function(t){v.stop(t),this.sidebarView.pushView("activity"),this.setDateLastViewedActionsAsNow(),x("Board Menu","View All Board Activity")},e.prototype.openMore=function(t){v.stop(t),this.sidebarView.pushView("more"),x("Board Menu","More Menu")},e.prototype.joinBoard=function(t){v.stop(t),this.$(".js-join-board").remove(),this.model.joinBoard(),x("Board Menu","Join Board via Sidebar")},e.prototype.openAddMembers=function(t){var e;v.stop(t),x("Board Menu","Add Members via Sidebar Button"),e=new c({model:this.model,modelCache:this.modelCache}),e.loadOrgData(),f.toggle({elem:n(t.target).closest(".js-open-manage-board-members"),view:e})},e.prototype.remove=function(){return this.setDateLastViewedActionsAsNow(),e.__super__.remove.apply(this,arguments)},e}(y)},{}],300:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x=function(t,e){function r(){this.constructor=t}for(var n in e)j.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},j={}.hasOwnProperty;n=t("jquery"),o=t(241),i=t(287),s=t(289),l=t(299),u=t(295),c=t(298),a=t(290),p=t(60),h=t(301),m=t(303),f=t(14),g=t(435),v=t(313),y=t(419),b=t(99),w=t(421),_=t("underscore"),k=t(418),C=t(34),e.exports=d=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return x(e,t),e.prototype.initialize=function(){y.addHandler(this,{scope:"board_sidebar"}),this.defaultView=this.subview(l,this.model,{sidebarView:this}),this.viewStack=[["default",this.defaultView]]},e.prototype.events={"click .js-hide-sidebar":"hideSidebar","click .js-pop-widget-view":"popView",shortcut:"shortcut"},e.prototype.shortcut=function(t){switch(t){case f.F:return this.pushView("filter"),"F - Search and Filter Cards"}},e.prototype.className="board-menu-container",e.prototype.render=function(){return this.$el.html(k.fill("board_sidebar")),this.renderView(),this},e.prototype.sidebarSubviews=function(){return{default:l,filter:h,archive:o,stickers:v,labels:i,background:m,activity:s,powerUps:u,more:a,settings:c}},e.prototype.hackySidebarLifetimeEvents={filter:{didBecomeVisible:function(t){var e;return e=t.$(".js-autofocus")[0],b.setCaretAtEnd(e)}},more:{didBecomeVisible:function(t){return t.selectUrl()}},archive:{didBecomeVisible:function(t){var e;return e=t.$(".js-autofocus")[0],b.setCaretAtEnd(e)}}},e.prototype.viewNamed=function(t){var e,r,n,o,i,s,a,u;for(i=this.viewStack,e=0,r=i.length;r>e;e++)if(s=i[e],o=s[0],u=s[1],t===o)return u;if(a=_.result(this,"sidebarSubviews")[t],null==a)throw new Error("Unknown sidebar view "+t);return n="filter"===t?this.model.filter:this.model,new a({model:n,modelCache:this.modelCache,sidebarView:this})},e.prototype.topSidebarView=function(){return _.last(this.viewStack)[1]},e.prototype.renderView=function(t,e){var r,o,i,s,a,u;return i=this.$(".js-board-menu-title"),s=this.$(".js-board-menu-title-text").empty(),o=this.$(".js-board-menu-content-wrapper").empty().scrollTop(0),u=this.topSidebarView(),null!=u.headerDisplayTypeClass?this.$(".js-board-menu-title").addClass(u.headerDisplayTypeClass):this.$(".js-board-menu-title").removeClass("is-board-menu-default-view"),r=u.render().$el,null!=t&&r.addClass(t),a=u.getViewTitle(),a?(i.addClass("is-in-frame"),s.append(a)):i.removeClass("is-in-frame"),o.append(r),null!=e&&n(".board-menu-content-frame").one("transitionend webkitTransitionEnd",function(t){return function(t){return e(u)}}(this)),this.defer(function(e){return function(){return null!=t?r.removeClass(t):void 0}}(this)),u.delegateEvents(),this},e.prototype.pushView=function(t){var e,r,o,i,s,a,u,c;c=this.viewNamed(t),r=null!=(s=null!=(a=this.hackySidebarLifetimeEvents)&&null!=(u=a[t])?u.didBecomeVisible:void 0)?s:function(){},o=c===this.topSidebarView(),i=this.model.viewState.get("showSidebar"),i?o?r(c):e=r:n(".board-menu").one("transitionend webkitTransitionEnd",function(t){return function(t){return r(c)}}(this)),i||this.model.viewState.setShowSidebar(!0),o||(this.viewStack.push([t,c]),this.renderView("is-right-of-frame",e),g.hide())},e.prototype.popView=function(){1!==this.viewStack.length&&(this.topSidebarView().remove(),this.viewStack.pop(),this.renderView("is-left-of-frame"),g.hide(),C("Board Menu","Go Back a View"))},e.prototype.hideSidebar=function(){this.model.viewState.setShowSidebar(!1)},e}(w)},{}],301:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p=function(t,e){function r(){this.constructor=t}for(var n in e)h.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},h={}.hasOwnProperty;n=t("jquery"),i=t(73),s=t(14),a=t(99),u=t(421),c=t("underscore"),d=t(418),l=t(76),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.viewTitleKey="filter cards",e.prototype.className="board-menu-content-frame",e.prototype.initialize=function(){return this.listenTo(this.model.board,"change:labelNames change:memberships",this.renderFilterOptions),this.listenTo(this.model,"change",this.renderFilterOptions)},e.prototype.events={"click .js-toggle-label-filter":"toggleLabelFilter","click .js-select-member":"toggleMemberFilter","click .js-show-all-labels":"showAllLabels","click .js-show-all-members":"showAllMembers","click .js-clear-all":"clearFilter","click .js-due-filter":"toggleDateFilter","mouseenter .js-filter-search-results li":"hoverSelect","mouseenter .js-clear-all":"clearAllSelected","mouseenter .js-show-all-members":"clearAllSelected","keydown .js-input":"keyDownEvent","keyup .js-input":"keyUpEvent"},e.prototype.render=function(){var t;return this.isFiltering=!1,t=this.model.toJSON(),this.$el.html(d.fill("filter_cards",t)),this.renderFilterOptions(),this},e.prototype.renderFilterOptions=function(){var t,e,r,n,o,i,s;return t=this.model.toJSON({board:!0,expanded:!0}),r=c.any(t.labels,function(t){return t.matchesFilter}),n=c.any(t.members,function(t){return t.matchesFilter}),e=this.model.get("title")&&(r||n),e?(t.limitMembers=!1,t.limitLabels=!1):(o=6,(null!=(i=this.model.get("limitMembers"))?i:!0)&&(t.remainingMembers=Math.max(0,t.members.length-o),t.members=c.first(t.members,o),t.limitMembers=t.remainingMembers>0),(null!=(s=this.model.get("limitLabels"))?s:!0)&&(t.remainingLabels=Math.max(0,t.labels.length-o),t.labels=c.first(t.labels,o),t.limitLabels=t.remainingLabels>0)),c.extend(t,{filtering:e,showHelper:!e,showLabels:!e||r,showMembers:!e||n,showDueTimes:!e,isFiltering:this.model.isFiltering(),labels:t.labels.map(function(t){var e;return e=t.color?l(["labels",t.color]):"",c.extend({defaultColorName:e},t)})}),this.$(".js-filter-search-results").html(d.fill("filter_cards_search_results",t,{},{member:d.member,select_member:d.select_member})),null===this.model.get("title")&&this.$(".js-input").val(""),this},e.prototype.keyDownEvent=function(t){var e,r;r=i.getKey(t),r===s.Enter&&(e=this.$(".item.selected, .label-list-item.selected").first(),e.find("a").click())},e.prototype.keyUpEvent=function(t){var e;return e=i.getKey(t),e!==s.Escape&&e!==s.Enter&&e!==s.ArrowUp&&e!==s.ArrowDown?this.model.save({title:this.$(".js-input").val(),limitMembers:!0,limitLabels:!0}):void 0},e.prototype.showAllMembers=function(t){this.model.save("limitMembers",!1)},e.prototype.showAllLabels=function(t){this.model.save("limitLabels",!1)},e.prototype._clearAndFocusInput=function(){
return this.model.save({title:""}),this.$(".js-input").val("").focus()},e.prototype.toggleLabelFilter=function(t){var e,r;return e=this.model.toJSON({expanded:!0}),c.any(e.labels,function(t){return t.matchesFilter})&&this._clearAndFocusInput(),r=n(t.target).closest("a").attr("data-idlabel"),this.model.toggleIdLabel(r)},e.prototype.toggleMemberFilter=function(t){var e;return e=this.model.toJSON({expanded:!0}),c.any(e.members,function(t){return t.matchesFilter})&&this._clearAndFocusInput(),a.stop(t),this.model.toggleMember(n(t.target).closest("a").attr("idMember"))},e.prototype.toggleDateFilter=function(t){var e;return e=n(t.target).closest("a").attr("time"),this.model.get("due")===e?this.model.save("due",null):this.model.save("due",e)},e.prototype.clearFilter=function(t){return this.model.clear()},e.prototype.clearAllSelected=function(){return this.$("li").removeClass("selected")},e.prototype.hoverSelect=function(t,e){return this.clearAllSelected(),a.selectMenuItem(n(t.currentTarget).closest("ul"),"li",n(t.currentTarget))},e}(u)},{}],302:[function(t,e,r){var n,o,i=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;o=t(305),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.viewTitleKey="add member permissions",e.prototype.getTemplate=function(){return"board_menu_invitations"},e.prototype.getPerm=function(){return"invitations"},e}(o)},{}],303:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v=function(t,e){function r(){this.constructor=t}for(var n in e)y.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},y={}.hasOwnProperty;n=t(429),o=t(22),i=t(11),s=t(121),u=t(27),c=t(311),l=t(312),d=t(99),p=t(421),h=t("underscore"),f=t(418),g=t(34),m=t(76),e.exports=a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return v(e,t),e.prototype.viewTitleKey="change background",e.prototype.className="board-menu-content-frame",e.prototype.events={"change .js-upload-image":"setUploadImage",'click a[href="/gold"]':function(){return g("Board Menu","Open Trello Gold Promo - via Change Background")},'click a[href="/business-class"]':function(){return g("Board Menu","Open Business Class Promo - via Change Background")}},e.prototype.initialize=function(){var t;e.__super__.initialize.apply(this,arguments),this.makeDebouncedMethods("render","renderCustomBackgrounds"),this.listenTo(o.me().boardBackgroundList,"change add remove reset",this.renderCustomBackgroundsDebounced),(o.me().isFeatureEnabled("customBoardBackgrounds")||(null!=(t=this.model.getOrganization())?t.isFeatureEnabled("customBoardBackgrounds"):void 0))&&u.loadMemberCustomBackgrounds(o.myId()).done()},e.prototype.fillBackgroundList=function(t,e,r){var n;null==r&&(r=c),t.find(".js-select-background:not(.js-uploader)").remove(),this.appendSubviews(function(){var t,o,i;for(i=[],t=0,o=e.length;o>t;t++)n=e[t],i.push(this.subview(r,n,{board:this.model}));return i}.call(this),t)},e.prototype.render=function(){var t,e,r,n,a,u,c;return n=this.model.toJSON(),n.enabled_additionalBackgrounds=o.me().isFeatureEnabled("additionalBoardBackgrounds")||(null!=(u=this.model.getOrganization())?u.isFeatureEnabled("additionalBoardBackgrounds"):void 0),n.enabled_customBoardBackgrounds=o.me().isFeatureEnabled("customBoardBackgrounds")||(null!=(c=this.model.getOrganization())?c.isFeatureEnabled("customBoardBackgrounds"):void 0),n.idMember=o.myId(),this.$el.html(f.fill("board_change_background",n)),a=function(t){return function(t,e){var r,n,o,a;a=[];for(n in i)r=i[n],r.type!==t||(null!=(o=r.pack)?o.name:void 0)!==e||r.discontinued||a.push(new s(h.extend({name:n},r)));return a}}(this),t=this.$(".js-default-list"),r=this.$(".js-gold-photos-list"),e=this.$(".js-gold-patterns-list"),this.fillBackgroundList(t,a("default")),this.fillBackgroundList(r,a("premium","Photos")),this.fillBackgroundList(e,a("premium","Patterns and Textures")),n.enabled_additionalBackgrounds||(r.append(f.fill("product_promo_button")),e.append(f.fill("product_promo_button"))),this.renderCustomBackgrounds(),this},e.prototype.renderCustomBackgrounds=function(){var t,e,r,n,i;return r=o.me().isFeatureEnabled("customBoardBackgrounds")||(null!=(i=this.model.getOrganization())?i.isFeatureEnabled("customBoardBackgrounds"):void 0),t=this.$(".js-custom-list"),r?(n=this.modelCache.get("Member",o.myId()),e=n.boardBackgroundList.filter(function(t){return"custom"===t.get("type")}),this.fillBackgroundList(t,e,l),t.find(".js-uploader").appendTo(t)):t.append(f.fill("product_promo_button")),this},e.prototype.uploadBackgroundsAndAddPreviews=function(t){var e,r,i,s,a;for(a=[],r=i=0,s=t.length;s>i;r=++i)e=t[r],a.push(function(t){return function(r){var i,s,a;return a=new FileReader,i={file:e},d.validFileSize(e)?(s=new FormData,s.append("token",o.myToken()),s.append("file",e),a.onload=function(e){return t.modelCache.get("Member",o.myId()).boardBackgroundList.create({type:"custom",fullSizeUrl:e.target.result},{data:s,processData:!1,contentType:!1,error:function(e){return e.set("error","Failed"),t.setTimeout(function(){return e.destroy()},5e3)},success:function(e){var r;return r=t.model,h.extend(r.attributes.prefs,{backgroundColor:e.get("color"),backgroundImage:e.get("fullSizeUrl"),backgroundImageScaled:e.get("scaled"),backgroundTile:e.get("tile"),backgroundBrightness:e.get("brightness")}),r.setPref("background",e.id)}})},a.readAsDataURL(e)):void n.flash("file too large","error")}}(this)(r));return a},e.prototype.setUploadImage=function(t){var e,r;return d.stop(t),e=this.$(".js-upload-image"),g("Board Menu","Upload Custom Background"),null==e.prop("files")&&e.val()?void d.uploadFile(o.myToken(),e,function(){}):(r=e[0].files,void(r.length>0&&this.uploadBackgroundsAndAddPreviews(r)))},e}(p)},{}],304:[function(t,e,r){var n,o,i=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;o=t(305),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.viewTitleKey="commenting permissions",e.prototype.getTemplate=function(){return"board_menu_commenting"},e.prototype.getPerm=function(){return"comments"},e}(o)},{}],305:[function(t,e,r){var n,o,i,s,a,u,c,l,d=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;n=t("jquery"),o=t(395),s=t(435),a=t(99),u=t(421),c=t(418),l=t(34),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return d(e,t),e.prototype.viewTitleKey="change permissions",e.prototype.initialize=function(){this.listenTo(this.model,"change",this.frameDebounce(this.render))},e.prototype.events={"click .js-select":"selectPerm"},e.prototype.render=function(){var t,e,r,n;return t=this.model.toJSON({prefs:!0,url:!0}),t.cardCovers=t.prefs.cardCovers,e=this.model.getOrganization(),t.hasOrg=null!=(null!=e?e.id:void 0),t.orgCanSee=t.hasOrg&&("public"===(r=this.model.getPref("permissionLevel"))||"org"===r),t.premium=null!=e?e.isFeatureEnabled("observers"):void 0,t.voting_showObservers=(t.premium||t.voting_observers)&&t.hasOrg,t.comments_showObservers=(t.premium||t.comments_observers)&&t.hasOrg,t.pLevelClass=o.getPermLevelIconClassForBoard(this.model),(null!=e?e.owned():void 0)?(t.orgOwner=!0,t.orgName=e.get("displayName"),this.model.owned()||(t.setOrgNull=!0)):this.model.owned()||(t.noEditOrg=!0),n=this.getTemplate(),this.$el.html(c.fillMenu(n,t,{editable:this.model.editable(),owned:this.model.owned()})),this},e.prototype.selectPerm=function(t){var e,r,o;a.stop(t),l("Board","Change "+this.getPerm()),e=n(t.target).closest(".js-select"),e.hasClass("disabled")||e.closest(".js-disabled").length||(r=this.getPerm(),o=e.attr("name"),this.model.setPref(r,o),this.model.save(),s.popView())},e}(u)},{}],306:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h=function(t,e){function r(){this.constructor=t}for(var n in e)m.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},m={}.hasOwnProperty;n=t("jquery"),o=t(395),i=t(296),a=t(435),u=t(99),c=t(421),d=t(418),p=t(34),l=t(76),e.exports=s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return h(e,t),e.prototype.viewTitleKey=function(){return this.model.owned()?"change visibility":"visibility"},e.prototype.tagName="ul",e.prototype.initialize=function(){this.listenTo(this.model,"change",this.render)},e.prototype.className="pop-over-list",e.prototype.events={"click .js-select":"selectVis"},e.prototype.render=function(){var t,e,r,n,i,s;for(t=this.model.toJSON({prefs:!0,url:!0}),n=this.model.getOrganization(),t.hasOrg=null!=n,t.disabledVis_private=!this.model.owned()||null!=n&&!n.canSetVisibility("private")||null==n&&!this.model.getPref("canBePrivate"),t.disabledVis_org=!this.model.owned()||null!=n&&!n.canSetVisibility("org")||null==n&&!this.model.getPref("canBeOrg"),t.disabledVis_public=!this.model.owned()||null!=n&&!n.canSetVisibility("public")||null==n&&!this.model.getPref("canBePublic"),i=["private","org","public"],e=0,r=i.length;r>e;e++)s=i[e],t["permText_"+s]=o.getPermLevelAltText(s,n),t["iconClass_"+s]=o.getPermLevelIconClass(s,n),t["disabledVis_"+s]&&null!=n&&!n.canSetVisibility(s)&&this.model.owned()&&(t["showVisRestriction_"+s]=!0);return t.visRestrictionText=l("change board illegal visibility"),this.$el.html(d.fill("board_menu_vis",t,{editable:this.model.editable(),owned:this.model.owned()})),this},e.prototype.selectVis=function(t){var e,r;if(u.stop(t),e=n(t.target).closest(".js-select"),!e.hasClass("disabled")&&!e.closest(".js-disabled").length){if(r=e.attr("name"),"org"===r&&!this.model.getOrganization())return void a.pushView({view:i,options:{model:this.model,modelCache:this.modelCache,disableNone:!0}});this.model.setPref("permissionLevel",r),this.model.save(),p("Board","Change Board Visibility",r),a.popView()}},e}(c)},{}],307:[function(t,e,r){var n,o,i,s,a,u,c,l=function(t,e){function r(){this.constructor=t}for(var n in e)d.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},d={}.hasOwnProperty;n=t("jquery"),o=t(430),s=t(99),a=t(421),u=t(418),c=t(34),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.viewTitleKey="background options",e.prototype.initialize=function(){return this.listenTo(this.model,"change",this.render)},e.prototype.events={"click .js-delete-background":"deleteBackground","click .js-select-option":"selectOption"},e.prototype.render=function(){var t,e;return e=this.model.toJSON(),e.tile=this.model.get("tile"),t=this.model.get("brightness"),e.brightnessLight="light"===t,e.brightnessDark="dark"===t,this.$el.html(u.fill("board_background_options",e)),this},e.prototype.selectOption=function(t){var e,r;e=n(t.target).closest(".js-select-option"),null!=e.attr("data-board-brightness")?this.model.update("brightness",e.attr("data-board-brightness")):null!=e.attr("data-background-display-type")&&(r=e.attr("data-background-display-type"),this.model.update("tile","tile"===r))},e.prototype.deleteBackground=function(t){return s.stop(t),o.pushView("delete background",{elem:n(t.target).closest(".js-delete-background"),model:this.model,confirmBtnClass:"negate",fxConfirm:function(t){return function(e){return t.model.destroy(),t.remove(),c("Board Menu","Change Background","Delete Uploaded Background")}}(this)})},e}(a)},{}],308:[function(t,e,r){var n,o,i,s,a,u,c,l,d=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;n=t("jquery"),o=t(429),i=t(430),a=t(99),u=t(421),l=t(418),c=t(76),e.exports=s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return d(e,t),e.prototype.viewTitleKey="add cards via email",e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.listenTo(this.modelCache,"add:List remove:List change:List:closed reset:List",this.frameDebounce(this.render)),this.listenTo(this.model,"change:myPrefs",this.frameDebounce(this.render)),this.allowEmail=!0,null==this.model.getPref("emailKey")?this.model.generateEmailKey():void 0},e.prototype.events={"change .js-select-position":"updatePosition","change .js-select-list":"updateList","click .js-generate-address":"generateAddress","click .js-send-address":"sendAddressEmail","click .js-autofocus":"focusInput"},e.prototype.render=function(){var t,e,r,n,o,i,s,a,u;return e=this.model.getPref("idEmailList"),u="None",o=!1,i=function(){var t,i,s,a;for(s=this.model.openLists(),a=[],t=0,i=s.length;i>t;t++)n=s[t],r={id:n.id,name:n.get("name")},n.id===e&&(o=!0,r.selected=!0,u=r.name),a.push(r);return a}.call(this),null==e||o||(n=this.modelCache.get("List",e),null!=n?(s=c("archived list",{listName:n.get("name")}),u=s,i.push({id:n.id,name:s,selected:!0})):(u=c("unknown list placeholder"),i.push({id:null,name:u,selected:!0}))),t={email:null!=(a=this.model.getPref("fullEmail"))?a:"",lists:i,listName:u,positionName:c(["email position",this.model.getPref("emailPosition")])},t["position_"+this.model.getPref("emailPosition")]=!0,this.$el.html(l.fill("board_menu_email",t)),this},e.prototype.focusInput=function(t){n(t.target).focus().select()},e.prototype.updateValue=function(t,e){var r;return r=this.$el.find(t).val(),null!=r&&r!==this.model.getPref(e)?this.model.setPref(e,r):void 0},e.prototype.updatePosition=function(){return this.updateValue(".js-select-position","emailPosition")},e.prototype.updateList=function(){return this.updateValue(".js-select-list","idEmailList"),this.allowEmail=!0},e.prototype.generateAddress=function(t){a.stop(t),i.pushView("regenerate email address",{model:this.model,confirmBtnClass:"negate",popOnClick:!0,fxConfirm:function(t){return function(e){return t.model.set({"myPrefs/emailKey":null}),t.allowEmail=!0,t.model.generateEmailKey()}}(this)})},e.prototype.sendAddressEmail=function(t){a.stop(t),this.allowEmail&&(this.allowEmail=!1,this.model.api({method:"emailKey/message",type:"post"},function(t){return function(t){return t?o.show("could not send email","error","email",5e3):o.flash("email sent","confirm")}}(this)))},e}(u)},{}],309:[function(t,e,r){var n,o,i,s,a,u=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;i=t(421),a=t(418),s=t(25).locales,n=t(74),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.initialize=function(t){this.powerUp=t.powerUp},e.prototype.getViewTitle=function(){return this.powerUp.displayName},e.prototype.render=function(){var t;return t={about:a.fill(this.powerUp.aboutTemplate),showScreenshots:n.matches(s[0],"en"),screenshots:this.powerUp.screenshots},this.$el.html(a.fill("power_up_item_details",t)),this},e}(i)},{}],310:[function(t,e,r){var n,o,i,s,a,u,c=function(t,e){function r(){this.constructor=t}for(var n in e)l.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},l={}.hasOwnProperty;n=t(435),i=t(99),s=t(421),a=t(418),u=t(34),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.viewTitleKey="rename board",e.prototype.events={"click .js-rename-board":"rename","submit form":"rename"},e.prototype.render=function(t){var e;return e={},e.boardName=this.model.get("name"),this.$el.html(a.fill("popover_rename_board",e)),this},e.prototype.rename=function(t){var e,r;return i.stop(t),e=this.$(".js-board-name"),r=e.val().trim(),""===r?void e.focus().select():(u("Board","Successfully Rename Board"),this.model.update("name",r),void n.hide())},e}(s)},{}],311:[function(t,e,r){var n,o,i,s,a,u,c=function(t,e){function r(){this.constructor=t}for(var n in e)l.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},l={}.hasOwnProperty;o=t(99),i=t(421),s=t("underscore"),a=t(418),u=t(34),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.listenTo(this.model,"change:error",this.render)},e.prototype.className="board-background-select js-select-background",e.prototype.events={click:"selectBackground","click .js-background-attribution":"clickAttribution"},e.prototype.render=function(){var t,e,r;return t=this.model.toJSON(),t.pending=null==this.getId()&&null==t.error,null==t.color&&(t.backgroundImageThumbnail=null!=(e=null!=(r=o.previewBetween(this.model.get("scaled"),90,60,600,400))?r.url:void 0)?e:this.model.get("fullSizeUrl")),this.$el.html(a.fill("board_background_selection",t)),this.$el.toggleClass("is-still-uploading-background",t.pending),this},e.prototype.clickAttribution=function(t){return t.stopPropagation(),u("Board Menu","Change Background","Clicked Attribution")},e.prototype.getId=function(){return this.model.get("name")},e.prototype.selectBackground=function(t){var e,r,n;o.stop(t),null!=this.getId()&&(e=this.options.board,s.extend(e.attributes.prefs,{backgroundColor:this.model.get("color"),backgroundImage:this.model.get("fullSizeUrl"),backgroundImageScaled:this.model.get("scaled"),backgroundTile:null!=(r=this.model.get("tile"))?r:!1,backgroundBrightness:null!=(n=this.model.get("brightness"))?n:"unknown"}),e.setPref("background",this.getId()),u("Board Menu","Change Background",this.getId()))},e}(i)},{}],312:[function(t,e,r){var n,o,i,s,a,u=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;n=t(307),o=t(435),i=t(311),a=t(99),e.exports=s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.listenTo(this.model,"change:id",this.render)},e.prototype.events={"click .js-options":"openOptions",click:"selectBackground"},e.prototype.openOptions=function(t){return a.stop(t),o.toggle({elem:this.$(".js-options"),view:new n({model:this.model,modelCache:this.modelCache})})},e.prototype.getId=function(){return this.model.id},e}(i)},{}],313:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_=function(t,e){function r(){this.constructor=t}for(var n in e)k.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},k={}.hasOwnProperty;n=t("jquery"),o=t(429),i=t(22),s=t(548),a=t(433),u=t(27),c=t("bluebird"),l=t(174),h=t(20),p=t(550),m=t(99),f=t(421),g=t("underscore"),b=t(418),w=t(34),y=t(76),v=t(57),e.exports=d=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return _(e,t),e.prototype.viewTitleKey="stickers",e.prototype.className="board-menu-content-frame",e.prototype.initialize=function(){return v(i.isLoggedIn(),"Can't show the StickerPickerView when not logged in!"),this.me=i.me(),u.loadMemberCustomStickers(this.me.id).done(),this.listenTo(this.me.customStickerList,"change add remove reset",this.renderCustomStickers)},e.prototype.events={"change .js-upload-image":"setUploadImage",'click a[href="/gold"]':function(){return w("Board Menu","Open Trello Gold Promo - via Sticker Picker")},'click a[href="/business-class"]':function(){return w("Board Menu","Open Business Class Promo - via Sticker Picker")}},e.prototype.render=function(){return this.$el.html(b.fill("sticker_select")),this.renderStandardStickers(),this.renderPremiumStickers(),this.renderCustomStickers(),this.defer(function(){return a.refreshDraggableStickers()}),this},e.prototype._getStickers=function(t){var e;return e=h[t].premium,h[t].stickers.map(function(t){return new l(g.extend({premium:e},t),{modelCache:this.modelCache})})},e.prototype._loadStickers=function(t){var e,r,o;return o="sticker-list-loading",t.addClass(o),r=t.find(".sticker-select-image").get(),e=r.map(function(t){var e;return e=n(t),new c(function(t){return e.load(t),e.error(t)})}),c.all(e).then(function(){return t.removeClass(o)}).done()},e.prototype.renderStandardStickers=function(){var t,e;return t=this.$(".js-standard-sticker-list"),e=this._getStickers("standard").map(function(t){return function(e){return t.subview(p,e)}}(this)),this.appendSubviews(e,t),this._loadStickers(t),this},e.prototype.renderPremiumStickers=function(){var t,e,r,o,i,s,a,u,c;i=null!=(u=this.model.getOrganization())?u:null,t=this.$(".js-premium-stickers"),o=this.me.isFeatureEnabled("additionalStickers")||(null!=i?i.isFeatureEnabled("additionalStickers"):void 0);for(s in h)a=h[s].premium,a&&(e=n(b.fill("sticker_pack_selection_list",{displayName:y(["sticker packs",s])})),r=e.filter(".js-sticker-list"),c=this._getStickers(s).map(function(t){return function(e){return t.subview(p,e,{org:i})}}(this)),this.appendSubviews(c,r),this._loadStickers(r),t.append(e),o||r.append(b.fill("product_promo_button")));return this},e.prototype.renderCustomStickers=function(){var t,e,r,n,o;return r=null!=(n=this.model.getOrganization())?n:null,t=this.$(".js-custom-sticker-list"),t.children().detach(),e=this.me.isFeatureEnabled("customStickers")||(null!=r?r.isFeatureEnabled("customStickers"):void 0),e?(o=this.me.customStickerList.map(function(t){return function(e){return t.subview(s,e,{org:r})}}(this)),this.appendSubviews(o,t)):t.append(b.fill("product_promo_button")),t.append(b.fill("sticker_select_item_upload",{id:this.me.id})),this.defer(function(){return a.refreshDraggableStickers()}),this},e.prototype.setUploadImage=function(t){var e,r;return m.stop(t),e=this.$(".js-upload-image"),null==e.prop("files")&&e.val()?void m.uploadFile(i.myToken(),e,function(){}):(r=e[0].files,void(r.length>0&&this.uploadStickers(r)))},e.prototype.uploadStickers=function(t){var e,r,n,s,a,u;for(s=0,a=t.length;a>s;s++)n=t[s],u=new FileReader,e={file:n},m.validFileSize(n)?(r=new FormData,r.append("token",i.myToken()),r.append("file",n),u.onload=function(t){return function(e){var n;return n=e.target.result,t.me.customStickerList.create({url:n},{data:r,processData:!1,contentType:!1,error:function(e){return e.set("error","Failed"),t.setTimeout(function(){return e.destroy()},5e3)}})}}(this),u.readAsDataURL(n)):o.flash("file too large","error")},e}(f)},{}],314:[function(t,e,r){var n,o,i,s,a,u,c,l,d=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;n=t("jquery"),i=t(435),s=t(99),a=t(421),u=t("underscore"),c=t(418),l=t(34),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return d(e,t),e.prototype.viewTitleKey="add list",e.prototype.events={"change .js-select-list-pos":"renderValue","click .js-add-list":"addList","submit form":"addList","click .js-cancel":"cancel"},e.prototype.initialize=function(t){return this.didAddList=t.didAddList,e.__super__.initialize.apply(this,arguments)},e.prototype.getLists=function(){return this.lists=this.model.openLists(),this.listsLength=this.lists.length+1},e.prototype.render=function(){var t;return t=this,this.$el.html(c.fill("popover_add_list")),this.setTimeout(function(t){return function(){return t.getClosestListPos(),t.getLists(),t.updateListList()}}(this),10),this},e.prototype.getClosestListPos=function(){var t,e,r;return e=n(".js-list"),r=[],this.closestListIdx=0,e.each(function(t){return function(t){var o;return o=parseInt(Math.abs(n(e[t]).offset().left+n(e[t]).width()/2-i.el_left),10),r.push(o)}}(this)),this.closestListIdx=u.indexOf(r,u.min(r)),t=n(e[this.closestListIdx]),t.length>0&&i.el_left>t.offset().left+t.width()/2&&this.closestListIdx<e.length?this.closestListIdx+=1:void 0},e.prototype.updateListList=function(){var t,e,r,o,i,s,a;for(a=this,t=n(a.el),r=t.find(".js-select-list-pos"),o=i=0,s=this.listsLength;s>=0?s>i:i>s;o=s>=0?++i:--i)n("<option>").val(o).text(o+1).appendTo(r);return e=r.find("option:last"),e=r.find("option:eq("+this.closestListIdx+")"),e.attr("selected","selected"),this.renderValue()},e.prototype.renderValue=function(){var t;t=parseInt(this.$(".js-select-list-pos").val(),10)+1,n(".js-pos-value").text(t.toString())},e.prototype.addList=function(t){var e,r,n,o,a;return s.stop(t),o=this.$(".js-list-name").val().trim(),""===o?void this.$(".js-list-name").focus().select():(e=this.$(".js-select-list-pos"),a=parseInt(e.find("option:selected").val(),10),n=a===this.listsLength-1?!1:!0,r="List"===o?!1:!0,i.hide(),void this.model.listList.create({name:o,pos:this.model.calcPos(a),closed:!1},{success:function(t){return function(e){return r&&n?l("Board","Add List","Successfully Add List - Changed Name, Changed Position"):r?l("Board","Add List","Successfully Add List - Changed Name, Default Position"):n?l("Board","Add List","Successfully Add List - Default Name, Changed Position"):l("Board","Add List","Successfully Add List - Default Name, Default Position"),t.didAddList(e)}}(this)}))},e.prototype.cancel=function(t){s.stop(t),i.hide(),l("Board Menu","Add List Menu","Click Cancel Button")},e}(a)},{}],315:[function(t,e,r){var n,o,i,s,a,u,c=function(t,e){function r(){this.constructor=t}for(var n in e)l.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},l={}.hasOwnProperty;n=t("jquery"),i=t(400),s=t(78),a=t(99),u=t(418),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.initialize=function(){this.makeDebouncedMethods("render"),this.listenTo(this.model,"change:name change:desc",this.renderDebounced)},e.prototype.events={"click .js-edit-desc":"editDesc"},e.prototype.render=function(){var t,e,r;return e=this.model.get("desc"),r=this.model.get("descData"),t={hasDesc:!!e},this.$el.html(u.fillFromModel("board_desc",this.model,t)),t.hasDesc&&n(this.el).find(".board-description>div.current").html(s.markdownAsHtml(e,{textData:r})),this},e.prototype.editDesc=function(t){a.stop(t),this.edit("desc")},e}(i)},{}],316:[function(t,e,r){var n,o,i,s,a,u,c=function(t,e){function r(){this.constructor=t}for(var n in e)l.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},l={}.hasOwnProperty;o=t(297),i=t(435),s=t(421),a=t(418),u=t(34),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.getViewTitle=function(){return this.model.getOrganization().get("displayName")},e.prototype.events={"click .js-change-org":"openChangeOrg","click .js-view-org":"viewOrg"},e.prototype.render=function(){var t,e;return e=this.model.getOrganization(),t=e.toJSON(),t.canChangeOrg=(null!=e?e.owned():void 0)||this.model.owned(),(null!=e?e.owned():void 0)&&!this.model.owned()&&(t.setOrgNull=!0),this.$el.html(a.fill("popover_board_header_org_menu",t)),this},e.prototype.openChangeOrg=function(t){var e,r;this.model.owned()?(i.pushView({view:o,options:{model:this.model,modelCache:this.modelCache}}),u("Board Header","Change Org from Board Header Org Menu")):(e=this.model.get("idOrganization"),null!=(r=this.modelCache.get("Organization",e))&&r.boardList.remove(this.model),this.model.update("idOrganization",""),i.hide(),u("Board Header","Remove Org from Board Header Org Menu"))},e.prototype.viewOrg=function(){return u("Board Header","View Org From Board Header Org Menu")},e}(s)},{}],317:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p=function(t,e){function r(){this.constructor=t}for(var n in e)h.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},h={}.hasOwnProperty;n=t("jquery"),o=t(448),s=t(435),a=t(483),u=t(99),c=t(421),l=t(418),d=t(34),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.viewTitleKey="observers",e.prototype.events={"click .js-select-member":"showMemberMenu","mouseenter .js-select-member":"hoverItem","mouseleave .js-list":"deselectMembers"},e.prototype.render=function(){return this.$el.html(l.fillFromModel("observer_list",this.model)),this.renderObservers(),this},e.prototype.hoverItem=function(t){var e;return this.deselectMembers(),e=n(t.target).closest(".item"),u.selectMenuItem(this.$(".js-list"),".item",e)},e.prototype.deselectMembers=function(t){return this.$(".js-list .item").removeClass("selected")},e.prototype.showMemberMenu=function(t){var e,r;u.stop(t),d("Board Menu","Show Observer Menu"),e=n(t.target).closest("a").attr("idmember"),r=this.modelCache.get("Member",e),s.pushView({view:new o({board:this.model,model:r})})},e.prototype.renderObservers=function(){var t,e,r;return t=this.$(".js-list"),r=function(){var t,r,n,o;for(n=this.model.getObserverList(),o=[],t=0,r=n.length;r>t;t++)e=n[t],o.push(this.subview(a,e,{showUnconfirmed:!0}));return o}.call(this),this.appendSubviews(r,t),this},e}(c)},{}],318:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,B,M,T,O,L,P,A,E,D,V,I,N,$,z,F,R,U,q,H=function(t,e){function r(){this.constructor=t}for(var n in e)K.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},K={}.hasOwnProperty,W=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};n=t("jquery"),o=t(314),i=t(22),s=t(315),a=t(395),u=t(316),c=t(300),d=t(335),p=t(126),h=t(356),m=t(361),f=t(306),g=t(430),v=t(5),y=t(432),b=t(433),w=t(65),_=t(23),k=t(440),C=t(14),x=t(434),j=t(443),S=t(446),B=t(465),M=t(27),T=t(185),O=t(531),L=t(435),P=t(310),A=t(419),E=t(99),D=t(421),V=t(115),I=t("underscore"),z=t(31),F=t(102),U=t(418),N=t(577),R=t(578),q=t(34),$=t(76),e.exports=l=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return H(e,t),e.prototype.className="board-wrapper",e.prototype.events={sortcommit:"sortCommit","click .js-rename-board":"renameBoard","click .js-open-org-menu":"openOrgMenu","click .js-change-vis":"changeVis","click .js-open-desc":"openDesc","click .js-close-calendar":"toggleCalendar","click .js-calendar":"toggleCalendar","click .js-filter-cards-indicator":"openFilter","click .js-filter-card-clear":"clearFilters","click .js-board-header-subscribed":"openUnsubscribe","click .js-star-board":"toggleStarred","click .js-show-sidebar":"setSidebarShow","dblclick #board":"dblClickAddListMenu","click .js-reopen":"reopen",shortcut:"shortcut"},e.prototype.initialize=function(){e.__super__.initialize.apply(this,arguments),this.sidebarView=this.subview(c,this.model),this.inlineListComposerView=this.subview(k,this.model),this.makeDebouncedMethods("refreshOrganization","render","renderBoardBackground","renderBoardHeader","renderBoardHeaderCalendar","renderBoardHeaderDescription","renderBoardHeaderSubscribed","renderLists","renderPermissionLevel","updateControllerTitle"),this.listenTo(this.model,{"change:closed":this.renderDebounced,"change:desc":this.renderBoardHeaderDescriptionDebounced,"change:idOrganization":this.refreshOrganizationDebounced,"change:memberships":this.renderPermissionLevelDebounced,"change:name":function(t){return function(){return t.renderBoardHeaderDebounced(),t.updateControllerTitleDebounced()}}(this),"change:powerUps":function(){return this.renderBoardHeaderCalendarDebounced(),W.call(this.model.get("powerUps"),"calendar")>=0?void 0:this.closeCalendar()},"change:prefs.cardCovers":this.renderListsDebounced,"change:prefs.permissionLevel":function(t){return function(){return t.renderListsDebounced(),t.renderPermissionLevelDebounced()}}(this),"change:prefs.background change:prefs.backgroundTile change:prefs.backgroundBrightness":function(t){return function(){return t.renderBoardBackgroundDebounced(!0);
}}(this),"change:subscribed":this.renderBoardHeaderSubscribedDebounced,permChange:this.permChange,ownedChange:this.renderBoardHeaderDebounced}),this.listenTo(this.model.viewState,{"change:showSidebar":this.renderSidebarState,"change:sidebarDisplayType":this.renderSidebarDisplayType}),this.listenTo(i.me().boardStarList,"add remove reset",function(t){return function(){return t.renderBoardHeaderStarred()}}(this)),this.memberTypeMe=this.model.getMemberType(i.me()),this.refreshOrganization(),this.listScrollLeft=null,this.savingScroll=!1,this.calcState={},this.listenTo(this.model.filter,"change",this.renderFilteringStatus),A.addHandler(this,{scope:"board"}),this.listListView=this.collectionSubview(j,this.model.listList,{id:"board",className:"u-fancy-scrollbar js-no-higher-edits",resetCallback:function(t){return function(){return t.postListListRender()}}(this)}),this.listenTo(this.listListView,{mouseMoveCardView:function(t,e){return this.ignoreMouseCardSelects||L.isVisible||b.sorting?void 0:this.model.viewState.selectCard(e.model)},mouseLeaveCardView:function(t,e){return this.ignoreMouseCardSelects||L.isVisible||b.sorting?void 0:this.model.viewState.selectCard(null)},moveCard:this.moveCardRequested,copyCard:this.copyCardRequested})},e.prototype.permChange=function(t){"none"===t?v.memberBoardsView():(this.render(),this.model.editable()||this.model.composer.save("vis",!1))},e.prototype.shortcut=function(t){var e,r,o,s,a;switch(r=this.model.editable(),s=i.isLoggedIn(),t){case C.Q:if(s)return this.model.filter.toggleQuietMode(),"Q - My cards";break;case C.X:return this.model.filter.clear(),"X - Clear All Filters";case C.W:return this.toggleSidebar(),"W - Toggle Board Sidebar";case C.ArrowDown:case C.J:return this.moveCard("down"),["Keyboard Nav","Down"];case C.ArrowUp:case C.K:return this.moveCard("up"),["Keyboard Nav","Up"];case C.ArrowRight:return this.moveCard("right"),["Keyboard Nav","Right"];case C.ArrowLeft:return this.moveCard("left"),["Keyboard Nav","Left"];case C.N:if(r&&(a=this.model.viewState.getList(),e=this.model.viewState.getCard(),null!=a&&null!=e))return o=I.indexOf(a.cardList.openCards(),e),this.model.composer.save({list:a,index:o+1,vis:!0}),"N - Insert Card";break;case C.Escape:if(r)return b.sorting?b.abort():x.isEditing()||L.isVisible||y.isVisible||(this.model.composer.get("vis")?this.model.composer.save("vis",!1):this.model.viewState.get("listComposerOpen")?this.model.viewState.set("listComposerOpen",!1):this.sidebarView.popView()),v.showingCalendar(this)&&n(".calendar-day.active").removeClass("active"),!0}},e.prototype.openListComposer=function(){return this.model.viewState.openListComposer()},e.prototype.scrollToList=function(t){E.scrollElementIntoView(this.$("#board")[0],this.viewForList(t).el,{horizontal:!0,animated:!0})},e.prototype.viewForList=function(t){var e;return e=this.collectionSubview(j,this.model.listList),e.viewForModel(t)},e.prototype.scrollToCard=function(t){var e;return e=t.getList(),this.scrollToList(e),this.viewForList(e).scrollToCard(t)},e.prototype.preventScrollSelection=function(){var t,e;this.ignoreMouseCardSelects||(e=function(t){var e,r,n;return e=t.originalEvent,r=e.movementX,n=e.movementY,0!==r||0!==n},this.ignoreMouseCardSelects=!0,(t=function(r){return function(){return n(document).one("mousemove",function(n){e(n)?r.ignoreMouseCardSelects=!1:t()})}}(this))())},e.prototype.moveCard=function(t){var e,r,n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_;if(this.preventScrollSelection(),w=this.model.viewState.getCard(),null==w)return l=I.find(this.model.openLists(),function(t){return!I.isEmpty(t.openCards())}),void(null!=l&&l.selectFirstCardInList());if(_=w.getList(),g=_.cardList.openCards(),r=I.indexOf(g,w),o=function(t){return function(e,r,n,o){var i;if(i=e+r,t.model.filter.isFiltering)for(;i>=0&&n>i&&!o(i);)i+=r;return i}}(this),"up"===t||"down"===t){if(s="up"===t?-1:1,d=o(r,s,g.length,function(t){return function(e){return t.model.filter.satisfiesFilter(g[e])}}(this)),d>=0&&d<g.length)return e=g[d],this.scrollToCard(e),this.model.viewState.selectCard(e)}else if(("left"===t||"right"===t)&&(v=I.filter(this.model.openLists(),function(t){return t.cardList.openCards().length>0}),u=I.indexOf(v,_),c="left"===t?-1:1,m=o(u,c,v.length,function(t){return function(e){return I.any(v[e].cardList.openCards(),function(e){return t.model.filter.satisfiesFilter(e)})}}(this)),m>=0&&m<v.length)){for(h=v[m],f=h.cardList.openCards(),p=Math.min(r,f.length-1),y=[1,-1],b=[],i=0,a=y.length;a>i;i++){if(n=y[i],d=o(p-n,n,f.length,function(t){return function(e){return t.model.filter.satisfiesFilter(f[e])}}(this)),d>=0&&d<f.length){e=f[d],this.model.viewState.selectCard(e),this.scrollToCard(e);break}b.push(void 0)}return b}},e.prototype.renderClosed=function(){this.$el.html(U.fillFromModel("board_closed",this.model)),this.defaultBoardBackground()},e.prototype.renderOpen=function(){var t,e,r,o,s;for(t={},t.url=v.getBoardUrl(this.model),s=this.model.prefNames.concat(this.model.myPrefNames),e=0,r=s.length;r>e;e++)o=s[e],t[o+"_"+this.model.getPref(o)]=!0;t.canJoin=this.model.canJoin(),t.canInviteMembers=this.model.canInviteMembers(),t.confirmed=i.me().get("confirmed"),this.listListView.$el.detach(),this.$el.html(U.fillFromModel("board",this.model)),this.renderBoardHeader(),this.renderBoardBackground(),this.model.viewState.get("showSidebar")&&this.$el.addClass("is-show-menu"),this.appendSubview(this.sidebarView,this.$(".js-fill-board-menu")),this.renderSidebarState(),this.renderLists(),v.setLocation({title:t.name}),this.defer(function(t){return function(){return t.$("#board").dragscrollable({fxIgnore:function(t){var e,r,o;return e=n(t.target).closest("#board"),o=t.offsetY>e.height()-11,r=n(t.target).closest(".js-list-content").length>0,o||r}}),b.refreshListSortable()}}(this))},e.prototype.render=function(){return this.model.get("closed")?this.renderClosed():this.renderOpen(),this},e.prototype.renderFilteringStatus=function(){var t;return t=this.model.filter.isFiltering(),this.$(".js-filter-cards-indicator").toggleClass("hide",!t),this.$(".js-num-cards").toggleClass("hide",!t),this.$("#board").toggleClass("filtering",t)},e.prototype.removeSidebarDisplayTypes=function(){this.$el.removeClass("sidebar-display-wide")},e.prototype.renderSidebarDisplayType=function(){var t;t=this.model.viewState.getSidebarDisplayType(),this.$el.addClass(t)},e.prototype.renderSidebarState=function(){this.renderSidebarDisplayType(),this.model.viewState.get("showSidebar")?this.showSidebar():this.hideSidebar()},e.prototype.toggleSidebar=function(){return this.model.viewState.setShowSidebar(!this.model.viewState.get("showSidebar"))},e.prototype.setSidebarShow=function(){this.model.viewState.setShowSidebar(!0)},e.prototype.showSidebar=function(){this.renderSidebarDisplayType(),clearTimeout(this._sidebarHideTimeout),this.$(".js-fill-board-menu").removeClass("hide"),this.defer(function(t){return function(){return t.$el.addClass("is-show-menu")}}(this))},e.prototype.hideSidebar=function(){this.$el.removeClass("is-show-menu"),clearTimeout(this._sidebarHideTimeout),this._sidebarHideTimeout=this.setTimeout(function(t){return function(){return t.$(".js-fill-board-menu").addClass("hide")}}(this),250)},e.prototype.refreshOrganization=function(){var t,e,r,n,o,i;if(r=this.modelCache.get("Organization",this.model.previous("idOrganization")),n=this.model.getOrganization(),null!=r&&this.stopListening(r),null!=n)for(i=["name","logoHash","displayName"],t=0,e=i.length;e>t;t++)o=i[t],this.listenTo(n,"change:"+o,this.frameDebounce(this.renderBoardHeader));return this.renderBoardHeader()},e.prototype.renderBoardHeader=function(){var t,e,r,n;return r=this.model.isPremOrgAdmin(i.me()),e={name:this.model.get("name"),canRename:r||this.model.owned(),isLoggedIn:i.isLoggedIn()},n=this.model.getOrganization(),null!=n&&(e.orgDisplayName=n.get("displayName"),e.orgName=n.get("name"),t=n.get("logoHash"),t&&(e.orgLogoUrl=logoDomain+"/"+t+"/30.png"),e.hasBusinessClass=n.isPremium()),this.$(".js-board-header").html(N(e)),this.renderPermissionLevel(),this.renderBoardHeaderDescription(),this.renderBoardHeaderCalendar(),this.renderBoardHeaderSubscribed(),this.renderFilteringStatus(),this.renderBoardHeaderStarred(),this.renderPluginButtons(),this},e.prototype.renderPluginButtons=function(){var t;return t=this.subview(O,this.model),this.appendSubview(t,this.$(".js-plugin-header-btns")),this},e.prototype.renderBoardHeaderStarred=function(){return this.$(".js-star-board").toggleClass("board-header-btn-enabled",this.model.isStarred()),this},e.prototype.toggleStarred=function(){var t;return t=i.me().boardStarList,null!=t.getBoardStar(this.model.id)?(t.unstarBoard(this.model.id),q("Board Header","Unstar Board")):(t.starBoard(this.model.id),q("Board Header","Star Board")),this},e.prototype.renderBoardHeaderCalendar=function(){var t;return t=this.model.isPowerUpEnabled("calendar"),this.$(".js-calendar").toggleClass("hide",!t),this},e.prototype.getAllBackgroundClasses=function(){return["body-custom-board-background","body-custom-board-background-tiled","body-light-board-background","body-dark-board-background","body-default-header"].join(" ")},e.prototype.defaultBoardBackground=function(){this.clearBoardBackground(),n("body").addClass("body-default-header")},e.prototype.clearBoardBackground=function(){var t,e;e=this.model.get("prefs"),t=this.getAllBackgroundClasses(),n("body").removeClass(t).css({"background-image":"","background-color":""})},e.prototype.renderBoardBackground=function(t){var e,r,o,i,s,a,u,c;return null==t&&(t=!1),this.clearBoardBackground(),i=this.model.get("prefs"),e=n("body"),null!=i.backgroundColor?(o=this.model.getClientBackgroundColor(i.background),e.css({"background-color":o}),w.setBackground({color:o})):(c=i.backgroundImage,u=i.backgroundTile?c:null!=(s=null!=(a=E.smallestPreviewBiggerThan(i.backgroundImageScaled,64,64))?a.url:void 0)?s:i.backgroundImage,r=function(t){return function(){var t;switch(e.addClass("body-custom-board-background"),i.backgroundTile&&e.addClass("body-custom-board-background-tiled"),t=i.backgroundBrightness){case"light":e.addClass("body-light-board-background");break;case"dark":e.addClass("body-dark-board-background")}return e.css({"background-image":'url("'+c+'")'}),w.setBackground({url:u,tiled:i.backgroundTile})}}(this),t?E.waitForImageLoad(c,r):r())},e.prototype.renderBoardHeaderSubscribed=function(){var t;return t=this.model.get("subscribed"),this.$(".js-board-header-subscribed").toggleClass("hide",!t),this},e.prototype.renderBoardHeaderDescription=function(){var t,e,r;return t=this.$(".js-fill-desc"),(e=this.model.get("desc"))?(e?r=e:this.model.editable()&&(r=$("click to add a description")),t.attr("title",r),t.removeClass("hide"),this):(t.addClass("hide"),this)},e.prototype.renameBoard=function(t){E.stop(t),q("Board Header","Open Rename Board From Title"),L.toggle({elem:n(t.target).closest("a"),view:new P({model:this.model,modelCache:this.modelCache})})},e.prototype.openOrgMenu=function(t){E.stop(t),q("Board Header","Open Org Menu"),L.toggle({elem:n(t.target).closest("a"),view:new u({model:this.model,modelCache:this.modelCache})})},e.prototype.renderPermissionLevel=function(){var t,e,r;return t=this.$("#permission-level"),r={permIconClass:a.getPermLevelIconClassForBoard(this.model),permText:$(["board perms",this.model.getPermLevel(),"name"])},t.html(R(r)),t.attr("title",a.getPermLevelAltTextForBoard(this.model)),e=this.model.canInvite(i.me()),this.$(".js-manage-board-members").toggle(e),this},e.prototype.postListListRender=function(){return z("render","rendering inline composer and calculating list layout"),this.renderInlineListComposer(),this.renderFilteringStatus(),b.refreshListCardSortable()},e.prototype.renderLists=function(){return this.listListView.render(),this.listListView.$el.toggleClass("js-list-sortable",this.model.editable()),this.$(".board-canvas").append(this.listListView.el),this.postListListRender(),this},e.prototype.renderInlineListComposer=function(){this.$(".js-add-list").remove(),this.model.editable()&&this.appendSubview(this.inlineListComposerView,this.$("#board"))},e.prototype.sortCommit=function(t,e){return e.item.trigger("movelist",e)},e.prototype.changeVis=function(t){E.stop(t),q("Board Header","Open Change Visibilty via Header"),L.toggle({elem:this.$(".js-change-vis"),view:f,options:{model:this.model,modelCache:this.modelCache}})},e.prototype.openDesc=function(t){E.stop(t),q("Board Header","Edit Description Button via Header"),y.show({view:new s({model:this.model,modelCache:this.modelCache}),maxWidth:500})},e.prototype.toggleCalendar=function(){return this.calendarView?this.navigateToBoardEvent():this.navigateToCalendarEvent()},e.prototype.navigateToCalendarEvent=function(){return q("Board Header","Open Calendar View via Header"),this.navigateToCalendar()},e.prototype.navigateToCalendar=function(){var t;return t=v.getBoardUrl(this.model.id,"calendar"),v.navigate(t,{trigger:!0})},e.prototype.navigateToBoardEvent=function(){return q("Board Header","Close Calendar View via Header"),this.navigateToBoard()},e.prototype.navigateToBoard=function(){var t;return t=v.getBoardUrl(this.model.id),v.navigate(t,{trigger:!0})},e.prototype.isShowingCalendar=function(){return null!=this.calendarView},e.prototype.showMemberProfile=function(t){v.saveMemberBoardProfileLocation(t,this.model.id),y.show({view:new B({model:t,board:this.model,modelCache:this.modelCache}),maxWidth:500,hide:function(t){return function(){return v.setBoardLocation(t.model.id)}}(this)})},e.prototype.showCalendar=function(t){return this.model.isPowerUpEnabled("calendar")&&!this.isShowingCalendar()?(this.$(".calendar-btn").addClass("board-header-btn-enabled"),this.$("#board").addClass("hide"),this.calendarView=new d({model:this.model,modelCache:this.modelCache}),this.$(".board-canvas").append(this.calendarView.render(t).el),this.calendarView.addedToDOM()):void 0},e.prototype.closeDetailView=function(){y.hide(!0),this.closeCalendar()},e.prototype.closeCalendar=function(){null!=this.calendarView&&(this.calendarView.remove(),this.calendarView=null,this.navigateToBoard(),this.$(".calendar-btn").removeClass("board-header-btn-enabled"),this.$("#board").removeClass("hide"))},e.prototype.getCardViews=function(){var t,e,r,n,o,i,s,a,u,c,l;for(a=this.collectionSubview(j,this.model.listList),r=[],c=a.subviewsOfType(S),n=0,i=c.length;i>n;n++)for(u=c[n],t=u.collectionSubview(h,u.model.cardList),l=t.subviewsOfType(m),o=0,s=l.length;s>o;o++)e=l[o],r.push(e);return r},e.prototype.openFilter=function(t){E.stop(t),q("Board Header","Open Filtering via Header"),this.sidebarView.pushView("filter")},e.prototype.clearFilters=function(t){E.stop(t),q("Board Header","Clear Filtering via Header"),this.model.filter.clear()},e.prototype.openUnsubscribe=function(t){E.stop(t),g.toggle("unsubscribe",{elem:n(t.target).closest(".js-board-header-subscribed")[0],model:this.model,confirmBtnClass:"negate",fxConfirm:function(t){return function(e){return q("Board Header","Unsubscribe"),t.model.subscribe(!1)}}(this)})},e.prototype.dblClickAddListMenu=function(t){E.stop(t),this.model.isMember(i.me())&&0===n(t.target).closest(".js-list-content").length&&(q("Board View","Open Add List Menu via Double Click"),L.show({clientx:t.clientX,clienty:t.clientY,view:new o({model:this.model,modelCache:this.modelCache,didAddList:function(t){return function(e){return t.scrollToList(e)}}(this)})}))},e.prototype.reopen=function(){return this.model.reopen()},e.prototype.updateControllerTitle=function(){return v.title(this.model.get("name"))},e.prototype._insertCardPosition=function(t){var e;return e=this.model.viewState.getCard(),null!=e?{idList:e.get("idList"),index:e.getIndexInList()}:{idList:t,index:this.model.listList.get(t).cardList.length}},e.prototype.moveCardRequested=function(t,e){var r,n,o,i,s,a;return a=e.shortLink,n=e.idList,i=this._insertCardPosition(n),n=i.idList,o=i.index,r=null!=(s=_.getId("Card",a))?s:a,p.load(r,T.cardMinimal,this.modelCache).then(function(t){return function(e){return e.moveToList(t.model.listList.get(n),o)}}(this)).done()},e.prototype.copyCardRequested=function(t,e){var r,n,o,i,s,a;return a=e.shortLink,n=e.idList,i=this._insertCardPosition(n),n=i.idList,o=i.index,r=null!=(s=_.getId("Card",a))?s:a,p.load(r,T.cardMinimal,this.modelCache).then(function(t){return function(e){return e.copyTo({idList:n,pos:t.model.listList.get(n).calcPos(o,e)})}}(this)).done()},e}(D)},{}],319:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_=function(t,e){function r(){this.constructor=t}for(var n in e)k.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},k={}.hasOwnProperty,C=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};n=t("jquery"),o=t(429),i=t(22),s=t(11),a=t(395),u=t(5),l=t(498),d=t(74),p=t(27),h=t(320),m=t(435),f=t(99),g=t(421),v=t("underscore"),b=t(418),w=t(34),y=t(76),e.exports=c=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return _(e,t),e.prototype.viewTitleKey=function(){return this.options.copyBoard?"copy board":"create board"},e.prototype.events={'change select[name="org-id"]':"changeOrg","click .js-helper-add-org":"helperAddOrg","submit form":"submit","click .js-submit":"submit","click .js-create-org":"newOrg","click .js-change-vis":"openChangeVis","click .js-select":"selectVis"},e.prototype.getOrganization=function(){switch(this.model.typeName){case"Organization":return this.model;case"Board":return this.model.getOrganization();default:return this.options.organization}},e.prototype.render=function(){var t,e,r,n,o,s,a,u,c,l;for(a=v.map(i.me().organizationList.models,function(t){return t.toJSON()}),n=null!=(c=this.getOrganization())?c.id:void 0,r=0,o=a.length;o>r;r++)s=a[r],s.id===n?s.selectOrg=!0:s.selectOrg=!1;return e=null!=n,t={orgs:a,hasOrg:e,canAddToOrgs:0!==a.length,isCopyBoard:this.options.copyBoard},u=Math.floor(13*Math.random()).toString(),t.placeholder=y(["board name placeholder",u]),this.options.term&&(t.name=this.options.term),t.pLevel="private",this.options.copyBoard&&this.model.owned()?t.pLevel=this.model.get("prefs").permissionLevel:e&&(t.pLevel="org"),(null!=(l=this.options)?l.newOrgBoard:void 0)&&(t.hideOrg=!0),this.$el.html(b.fill("board_new",t)),this.renderBoardVisChooser(),this},e.prototype.renderBoardVisDisplay=function(t){var e,r,n,o;return o=this.getPermissionLevel(),n=function(t){return"<p>"+y(t)+"</p>"},t?r=n("checking visibility permissions"):""!==o?(e={visIconClass:a.getPermLevelIconClass(o),visDisplayText:y(["board perms",o,"name"])},r=b.fill("board_new_vis",e)):r=n("there was an error setting the visibility"),this.$(".js-vis-display").html(r),this},e.prototype.renderBoardVisChooser=function(t){var e,r,n,o,i,s,u,c,l;for(o=this.$('select[name="org-id"]').val(),n=o&&""!==o?this.modelCache.get("Organization",o):null,c={},i=["private","org","public"],e=0,r=i.length;r>e;e++)u=i[e],c["permText_"+u]=a.getPermLevelAltText(u,n),c["iconClass_"+u]=a.getPermLevelIconClass(u,n);return c.visRestrictionText=y("create board illegal visibility"),c.hasOrg=null!=n,(null!=n?n.isFeatureEnabled("restrictVis"):void 0)?null!=n&&null!=n.get("memberships")&&null!=n.get("products")&&(null!=n?n.isFeatureEnabled("restrictVis"):void 0)?(this.disableSubmit(),c=v.extend(c,this.getAdditionalVisPermissions(t,n)),this._renderBoardVisChooser(c),this.renderBoardVisDisplay()):(this.disableSubmit(),this.renderBoardVisDisplay(!0),p.loadOrganizationMinimal(o).then(function(e){return function(){c=v.extend(c,e.getAdditionalVisPermissions(t,n)),e._renderBoardVisChooser(c),e.renderBoardVisDisplay()}}(this)).done()):(s=["private","public"],null!=n?s.unshift("org"):c.disabledVis_org=!0,C.call(s,t)>=0?l=t:this.options.copyBoard&&this.model.owned()&&(l=this.model.get("prefs").permissionLevel),C.call(s,l)<0&&(l=s[0]),c["permissionLevel_"+l]=!0,this.setPermissionLevel(l),this.enableSubmit(),this._renderBoardVisChooser(c),this.renderBoardVisDisplay()),this},e.prototype.enableSubmit=function(){return this.$(".js-submit").removeClass("disabled")},e.prototype.disableSubmit=function(){return this.$(".js-submit").addClass("disabled")},e.prototype._renderBoardVisChooser=function(t){return this.$(".js-vis-chooser").html(b.fill("board_menu_vis",t)),this},e.prototype.resetVisChooser=function(){this.$(".js-no-valid-org-privs").addClass("hide")},e.prototype.disableSubmitDueToVisRestrictions=function(t){var e,r;r=t.owned(),e=this.$(".js-no-valid-org-privs"),r?e.html(y("board create restriction admin",{urlSettings:"/"+t.get("name")+"/account"})):e.text(y("board create restriction not admin")),e.removeClass("hide"),this.$(".js-vis-chooser").addClass("hide"),this.$(".js-vis-display").addClass("hide")},e.prototype.getAdditionalVisPermissions=function(t,e){var r,n,o;if(r={},o="org",null!=e?e.isFeatureEnabled("restrictVis"):void 0){if(n=[],v.each(["private","org","public"],function(t){return function(o){return t.canChangeOrg(e,o)?n.push(o):(r["disabledVis_"+o]=!0,r["showVisRestriction_"+o]=!0)}}(this)),0===n.length)return this.setPermissionLevel(""),void this.disableSubmitDueToVisRestrictions(e);o=C.call(n,t)>=0?t:C.call(n,"org")>=0?"org":v.first(n),this.enableSubmit()}else null!=t?o=t:this.options.copyBoard&&this.model.owned()&&(o=this.model.get("prefs").permissionLevel);return this.setPermissionLevel(o),r["permissionLevel_"+o]=!0,r},e.prototype.openChangeVis=function(t){f.stop(t),this.$(".js-vis-display").addClass("hide"),this.$(".js-vis-chooser").removeClass("hide")},e.prototype.selectVis=function(t){var e,r;f.stop(t),e=n(t.target).closest(".js-select"),e.hasClass("disabled")||(this.$(".js-vis-display").removeClass("hide"),this.$(".js-vis-chooser").addClass("hide"),r=e.attr("name"),this.renderBoardVisChooser(r),w("New Board","Change Visibility",r))},e.prototype.setPermissionLevel=function(t){return this.$('input[name="permissionLevel"]').val(t)},e.prototype.getPermissionLevel=function(){var t;return null!=(t=this.$('input[name="permissionLevel"]').val())?t:""},e.prototype.canChangeOrg=function(t,e){var r,n,o,s;return r=i.me(),(null!=t?t.isFeatureEnabled("restrictVis"):void 0)?(s=t.getMembershipFor(r).memberType,n=function(){switch(s){case"admin":return 2;case"normal":return 1}}(),o=function(){var r,n;switch(null!=(r=t.get("prefs"))&&null!=(n=r.boardVisibilityRestrict)?n[e]:void 0){case"none":return 3;case"admin":return 2;default:return 1}}(),n>=o):!0},e.prototype.changeOrg=function(t){return this.resetVisChooser(),this.$(".js-vis-display").removeClass("hide"),this.$(".js-vis-chooser").addClass("hide"),w("New Board","Change Org"),this.renderBoardVisChooser(this.getPermissionLevel())},e.prototype.helperAddOrg=function(t){f.stop(t),m.pushView({view:new h({model:this.model,modelCache:this.modelCache})}),w("New Board","Open Add Org Helper")},e.prototype.defaultBackgroundColor=function(){var t,e,r;return d.is("en")&&(r=new Date,e=r.getMonth(),t=r.getDate(),2===e&&17===t)?"green":"blue"},e.prototype.submit=function(t){var e,r,n,a,c,l,d,p,h,g,y;return f.stop(t),this.$(".js-submit").hasClass("disabled")?void 0:(e=this.$('input[name="name"]'),l=e.val().trim(),""===l?void e.focus().select():(a=null!=(h=this.$('select[name="org-id"]').val())?h:"",n={name:l,idOrganization:a,closed:!1},p=this.$('input[name="permissionLevel"]').val(),y=""!==a&&"private"!==p,r=this.defaultBackgroundColor(),g=v.extend({prefs_permissionLevel:p,prefs_selfJoin:y,defaultLists:!1},n),c=v.extend({prefs:{background:r,backgroundBrightness:s[r].brightness,backgroundColor:s[r].color,backgroundTile:!1,canInvite:!0,comments:"members",invitations:"members",permissionLevel:p,selfJoin:y},myPrefs:{showSidebar:!0,showSidebarActivity:!0,showSidebarBoardActions:!0,showSidebarMembers:!0},powerUps:[],memberships:[{deactivated:!1,idMember:i.myId(),memberType:"admin",unconfirmed:!1}]},n),this.options.copyBoard&&(g.idBoardSource=this.model.id,g.keepFromSource=this.$("input:checkbox:checked").map(function(){return this.name}).get().join()),this.options.copyBoard?w("New Board","Copy"):w("New Board","New"),d=i.me().boardList.create(c,{modelCache:this.modelCache,requestData:g,success:function(t){return function(e){var r,n;t.options.copyBoard&&o.hide("copying"),n=e.id,C.call(r=i.me().get("idBoards"),n)<0&&i.me().set("idBoards",r.concat(e.id)),t.options.copyBoard&&u.displayBoard({idBoard:e.id}).done()}}(this)}),this.options.copyBoard?o.show("copying","info","copying"):u.displayBoard({newBoard:d}).done(),m.hide()))},e.prototype.newOrg=function(t){f.stop(t),m.pushView({view:new l({model:this.model,modelCache:this.modelCache})}),w("New Board","Open Create Org")},e}(g)},{}],320:[function(t,e,r){var n,o,i,s,a,u,c=function(t,e){function r(){this.constructor=t}for(var n in e)l.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},l={}.hasOwnProperty;n=t(498),i=t(435),s=t(99),a=t(421),u=t(418),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.viewTitleKey="add an organization",e.prototype.events={"click .js-create-org":"newOrg"},e.prototype.render=function(){var t;return t=this,this.$el.html(u.fill("popover_helper_new_board_add_org")),this},e.prototype.newOrg=function(t){return s.stop(t),i.pushView({view:new n({model:this.model,modelCache:this.modelCache})})},e}(a)},{}],321:[function(t,e,r){var n,o,i,s,a,u,c=function(t,e){function r(){this.constructor=t}for(var n in e)l.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},l={}.hasOwnProperty;n=t(435),i=t(99),s=t(421),a=t(418),u=t(34),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.viewTitleKey="print and export",e.prototype.events={"click .js-print":"printModel","click .js-export-json":"exportJSON","click .js-export-csv":"exportCSV"},e.prototype.render=function(){var t,e,r;return r=this,e=this.model.getOrganization(),t=this.model.toJSON(),t.hasCsvExport=!1,null!=e&&(null!=e?e.isFeatureEnabled("csvExport"):void 0)&&(t.hasCsvExport=!0,t.csvURL="/b/"+this.model.get("shortLink")+".csv"),(null!=e?e.isPremium():void 0)&&!(null!=e?e.isFeatureEnabled("csvExport"):void 0)&&(t.needsUpgradeForCsv=!0,t.upgradeUrl="/"+e.get("name")+"/billing"),t.jsonURL="/b/"+this.model.get("shortLink")+".json",this.$el.html(a.fill("popover_share",t)),this},e.prototype.printModel=function(t){i.stop(t),u("Board Menu","Print and Export Menu","Print"),n.hide(),this.defer(function(){return window.print()})},e.prototype.exportJSON=function(t){return u("Board Menu","Print and Export Menu","Export JSON")},e.prototype.exportCSV=function(t){return u("Board Menu","Print and Export Menu","Export CSV")},e}(s)},{}],322:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p=function(t,e){function r(){this.constructor=t}for(var n in e)h.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},h={}.hasOwnProperty;n=t(22),i=t(5),s=t(228),a=t(99),u=t(421),d=t(34),c=t(416)("board_list_item"),l=c.renderable(function(t){var e,r,n,o,i,s,a,u,l,d;return s=t.isLoggedIn,a=t.name,u=t.orgname,d=t.url,i=t.current,l=t.recent,n=t.backgroundImageThumbnail,r=t.backgroundColor,e=t.backgroundBrightness,o=t.backgroundTile,c.div(".compact-board-tile-wrapper",function(){var t,p;return p={},n&&(p["background-image"]=c.urlify(n)),r&&(p["background-color"]=r),c.span({class:c.classify({"mod-tiled":o,"compact-board-tile-background":!0}),style:c.stylify(p)}),c.span(".compact-board-tile-fade"),t={"js-open-board":!0,current:i,"compact-board-tile-link":!0},e&&(t[e]=!0),c.a({class:c.classify(t),href:d},function(){return c.span(".compact-board-tile-link-thumbnail",{style:c.stylify(p)}),c.span({class:c.classify({"compact-board-tile-link-text":!0,details:!0,"has-sub-name":u})},function(){return c.span(".compact-board-tile-link-text-name",{title:a},function(){return c.text(a)}),u?c.span(".compact-board-tile-link-text-sub-name",{title:u},function(){return c.text(u)}):void 0}),s?c.span({class:"compact-board-tile-link-options"},function(){return c.span(".compact-board-tile-link-options-unread.js-unread",{title:c.l("there-is-new-activity-on-this-board")}),l&&c.icon("close",{class:"js-remove-board compact-board-tile-link-options-remove"}),c.icon("star",{class:"compact-board-tile-link-options-star js-star-board",title:c.l("click-to-star-this-board-it-will-show-up-at-top-of-your-boards-list")})}):void 0})})}),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.tagName="li",e.prototype.className="compact-board-tile",e.prototype.initialize=function(){var t;return this.listenTo(this.model,"change:prefs change:name change:idOrganization",this.frameDebounce(this.render)),this.listenTo(n.me().boardStarList,"add remove reset",this.frameDebounce(this.renderStarred)),this.listenTo(this.model,"change:dateLastActivity change:dateLastView",this.frameDebounce(this.renderUnread)),(null!=(t=this.options)?t.showOrgName:void 0)?(this.listenTo(this.model,"change:idOrganization",function(t){return function(){var e;return e=t.modelCache.get("Organization",t.model.previous("idOrganization")),null!=e&&t.stopListening(e,"change:displayName"),t.listenToOrgNameChange(),t.render()}}(this)),this.listenToOrgNameChange()):void 0},e.prototype.listenToOrgNameChange=function(){return null!=this.model.getOrganization()?this.listenTo(this.model.getOrganization(),"change:displayName",this.render):void 0},e.prototype.events={"click .js-open-board":"openBoard","click .js-star-board":"starBoard","click .js-remove-board":"removeRecent",moveto:"moveTo"},e.prototype.render=function(){var t,e,r,o,s,u;return e=this.model.toJSON({prefs:!0}),e.url=i.getBoardUrl(this.model),this.model.getPref("backgroundTile")?(e.backgroundTile=!0,e.backgroundImageThumbnail=this.model.getPref("backgroundImage")):e.backgroundImageThumbnail=null!=(r=null!=(o=a.smallestPreviewBiggerThan(this.model.getPref("backgroundImageScaled"),400,200))?o.url:void 0)?r:this.model.getPref("backgroundImage"),null==e.backgroundImageThumbnail&&(e.backgroundColor=this.model.getClientBackgroundColor("blue")),null!=this.model.getPref("backgroundColor")&&(t=this.model.getPref("background"),e.backgroundColor=this.model.getClientBackgroundColor(t)),e.backgroundBrightness=this.model.getPref("backgroundBrightness"),(null!=(s=this.options)?s.showOrgName:void 0)&&(e.orgname=null!=(u=this.model.getOrganization())?u.get("displayName"):void 0),e.isLoggedIn=n.isLoggedIn(),e.recent=this.options.recent,this.$el.html(l(e)),this.renderStarred(),this.renderUnread(),this},e.prototype.trackBoardClick=function(){return d("Header","Boards Menu","Opened Board")},e.prototype.openBoard=function(t){return s.getPinSidebar()||s.hideSidebar(),this.trackBoardClick()},e.prototype.starBoard=function(t){var e,r;a.stop(t),r=this.model.id,e=n.me().boardStarList,null==e.getBoardStar(r)?e.starBoard(r):e.unstarBoard(r)},e.prototype.removeRecent=function(t){return a.stop(t),s.pullBoard(this.model.id)},e.prototype.renderUnread=function(){var t;return t=this.model.hasUnseenActivity()&&!i.onBoardView(this.model.id),this.$(".js-unread").toggleClass("any",t),this.$el.toggleClass("has-unread-activity",t),this},e.prototype.moveTo=function(t,e){var r,o;o=e.item.closest(".js-board-list").find("li"),r=o.index(e.item),n.me().boardStarList.updateStarBoard(this.model.id,r)},e.prototype.renderStarred=function(){return null!=n.me().boardStarList.getBoardStar(this.model.id)?(this.$el.addClass("starred"),this.$(".icon-star").addClass("icon-star-active")):(this.$el.removeClass("starred"),this.$(".icon-star").removeClass("icon-star-active")),this},e}(u)},{}],323:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p=function(t,e){function r(){this.constructor=t}for(var n in e)h.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},h={}.hasOwnProperty;n=t(22),i=t(325),s=t(327),a=t(328),u=t(329),c=t(332),l=t(27),d=t(599),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments);
}return p(e,t),e.prototype.initialize=function(){return this.listenTo(this.model.organizationList,"add remove reset",this.frameDebounce(this.renderBoardsSections))},e.prototype.renderOnce=function(){return this.$el.html(d()),this.renderBoardsSections(),this},e.prototype.renderBoardsSections=function(){return this.renderStarredBoardsSection(),this.renderRecentBoardsSection(),this.renderAllBoardsSection(),this},e.prototype.renderAllBoardsSection=function(){var t,e,r,o,i,u,c,l;if(t=this.$(".js-all-boards"),r=function(){var t,r,n,o;for(n=this.model.boardList.models,o=[],t=0,r=n.length;r>t;t++)e=n[t],e.get("closed")||o.push(e);return o}.call(this),0===r.length)u=function(t){return function(){return t.stopListening(n.me().boardList,"add reset",u),t.renderAllBoardsSection()}}(this),this.listenTo(n.me().boardList,"add reset",u);else for(this.appendSubview(this.subview(s,n.me(),{},"my-boards"),t),l=this.model.organizationList.models,o=0,i=l.length;i>o;o++)c=l[o],this.appendSubview(this.subview(a,n.me(),{org:c},"group-"+c.id),t);return this},e.prototype.renderStarredBoardsSection=function(){return this.appendSubview(this.subview(c,n.me(),{},"starred-boards"),this.$(".js-starred-boards")),this},e.prototype.renderRecentBoardsSection=function(){return l.waitFor("boardsData",function(t){return function(){return t.appendSubview(t.subview(u,n.me(),{},"recent-boards"),t.$(".js-recent-boards"))}}(this)),this},e}(i)},{}],324:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f=function(t,e){function r(){this.constructor=t}for(var n in e)g.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},g={}.hasOwnProperty;n=t(22),i=t(246),s=t(319),a=t(432),u=t(27),c=t(435),l=t(228),d=t(99),p=t(421),h=t(600),m=t(34),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return f(e,t),e.prototype.initialize=function(){return this.listenTo(l,"change:pinBoardsListSidebar",function(){return this.updatePinned()})},e.prototype.events={"click .js-add-board":"addBoard","click .js-pin":"pinDrawer","click .js-unpin":"unpinDrawer","click .js-open-closed-boards":"openClosedBoards"},e.prototype.renderOnce=function(){return this.$el.html(h()),this.updatePinned(),this},e.prototype.addBoard=function(t){m("Boards Drawer","Add Board"),c.toggle({elem:this.$(".js-add-board"),view:s,options:{model:this.model,modelCache:this.modelCache}})},e.prototype.unpinDrawer=function(){return m("Boards Drawer","Unpin Drawer"),l.hidePinSidebar()},e.prototype.pinDrawer=function(){return m("Boards Drawer","Pin Drawer"),l.showPinSidebar()},e.prototype.updatePinned=function(){return this.$(".js-pin").toggleClass("hide",l.getPinSidebar()),this.$(".js-unpin").toggleClass("hide",!l.getPinSidebar())},e.prototype.openClosedBoards=function(t){d.stop(t),l.hideSidebar(),a.show({view:new i({model:n.me(),modelCache:this.modelCache})}),u.loadClosedBoards().done(),m("Boards Drawer","Open Closed Boards")},e}(p)},{}],325:[function(t,e,r){var n,o,i,s,a,u,c=function(t,e){function r(){this.constructor=t}for(var n in e)l.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},l={}.hasOwnProperty;n=t("jquery"),i=t(73),s=t(435),a=t(99),u=t(421),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.events={"mouseenter .sidebar-boards-list li":"hoverItem","mouseleave .sidebar-boards-list":"deselectBoards"},e.prototype.hoverItem=function(t){var e;e=n(t.target).closest("li"),a.selectMenuItem(n(".sidebar-boards-list"),"li",e)},e.prototype.deselectBoards=function(t){var e;e=n(".sidebar-boards-list li").removeClass("selected")},e.prototype.arrowKeyEvent=function(t){var e;e=i.getKey(t),a.navMenuList(n(".sidebar-boards-list"),"li:visible",e)},e.prototype.enterKeyEvent=function(t){var e;e=n(".sidebar-boards-list li.selected:visible:first a"),e.length>0&&(e.click(),s.hide())},e}(u)},{}],326:[function(t,e,r){var n,o,i,s,a,u,c,l,d=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty,h=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};n=t(322),o=t(325),s=t(228),a=t(99),u=t("underscore"),c=t(197),l=t(601),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return d(e,t),e.prototype.initialize=function(t){var e;return e=t.searchText,this.searchText=e.map(function(t){return t.toLowerCase().trim()}),this.subscribe(this.searchText,this.renderResults),this.makeDebouncedMethods("renderResults"),this.listenTo(this.model.boardList,"add remove reset change:idOrganization",this.renderResultsDebounced),this.listenTo(s,"change:idRecentBoards",this.renderResultsDebounced),this.listenTo(this.model.boardStarList,"add remove reset",function(){return this.renderResultsDebounced})},e.prototype.renderOnce=function(){return this.$el.html(l()),this.renderResults(),this},e.prototype.renderResults=function(){var t,e,r,o,i;for(t=this.$(".js-board-results"),t.empty(),i=this.getBoardsForTerm(this.searchText.get()),r=0,o=i.length;o>r;r++)e=i[r],this.appendSubview(this.subview(n,e,{showOrgName:!0}),t);return a.selectMenuItem(this.$(".sidebar-boards-list"),"li",this.$(".sidebar-boards-list li:first")),this},e.prototype.getBoardsForTerm=function(t){var e,r,n;return r=this.model.boardStarList.getBoardIds(),e=s.getRecentBoards(),n=a.buildFuzzyMatcher(t),u.chain(this.model.boardList.models).union(this.model.boardStarList.getBoards()).union(this.modelCache.get("Board",e)).compact().filter(function(t){return n(t.get("name"))}).filter(function(t){return!t.get("closed")}).value().sort(function(t,n){var o,i,s,a,u,c,l,d;return o=t.id,h.call(r,o)>=0&&(i=n.id,h.call(r,i)<0)?-1:(s=n.id,h.call(r,s)>=0&&(a=t.id,h.call(r,a)<0)?1:(u=t.id,h.call(e,u)>=0&&(c=n.id,h.call(e,c)<0)?-1:(l=n.id,h.call(e,l)>=0&&(d=t.id,h.call(e,d)<0)?1:t.get("name")<n.get("name")?-1:t.get("name")>n.get("name")?1:0)))}).slice(0,7)},e}(o)},{}],327:[function(t,e,r){var n,o,i,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty,u=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};o=t(331),i=t(76),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.listenTo(this.model.boardList,"add remove reset change:idOrganization",this.debouncedRenderBoards)},e.prototype.getBoards=function(){var t,e,r,n,o,i;for(r=function(t){return function(e){var r,n;return r=null!=(n=e.getOrganization())?n.id:void 0,null!=r&&u.call(t.model.get("idOrganizations"),r)>=0}}(this),o=this.model.boardList.models,i=[],e=0,n=o.length;n>e;e++)t=o[e],r(t)||t.get("closed")||i.push(t);return i},e.prototype.sectionId=function(){return"my-boards"},e.prototype.getHeaderInfo=function(){return{title:i("board section title.my boards"),iconClass:"board"}},e}(o)},{}],328:[function(t,e,r){var n,o,i,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=t(331),i=t(5),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.listenTo(this.model.boardList,"add remove reset change:idOrganization",this.debouncedRenderBoards),this.listenTo(this.getOrg(),"change:name change:displayName change:logoHash",this.render)},e.prototype.getOrg=function(){return this.options.org},e.prototype.sectionId=function(){return"org-"+this.getOrg().get("id")},e.prototype.getBoards=function(){var t,e,r,n,o,i;for(n=this.model.boardList.models,i=[],e=0,r=n.length;r>e;e++)t=n[e],(null!=(o=t.getOrganization())?o.id:void 0)!==this.getOrg().id||t.get("closed")||i.push(t);return i},e.prototype.getHeaderInfo=function(){var t,e,r;return e={},r=this.getOrg(),null!=r&&(e=r.toJSON(),e.isOrg=!0,e.url=i.getOrganizationUrl(r.get("name")),t=r.get("logoHash"),t&&(e.orgLogoUrl=logoDomain+"/"+t+"/30.png")),e},e.prototype.postRenderBoardsEvent=function(){this.renderBCStatus()},e.prototype.renderBCStatus=function(){this.$(".js-has-business-class").toggleClass("hide",!this.getOrg().isPremium())},e}(o)},{}],329:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m=function(t,e){function r(){this.constructor=t}for(var n in e)f.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},f={}.hasOwnProperty;o=t(22),s=t(331),a=t(27),u=t(185),c=t("bluebird"),l=t(228),d=t("underscore"),p=t(76),h=t(102),n=t(179),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return m(e,t),e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.listenTo(l,"change:idRecentBoards",function(){return this.debouncedRenderBoards()}),this.listenTo(this.model.boardStarList,"add remove reset",function(){return this.debouncedRenderBoards()}),this._idBoardsFetching=[]},e.prototype.sectionId=function(){return"recent-boards"},e.prototype.showOrgName=function(){return!0},e.prototype.isRecent=function(){return!0},e.prototype.getBoards=function(){var t;return t=o.me(),d.chain(l.getRecentBoards()).difference(this.model.boardStarList.getBoardIds()).tap(function(t){return function(e){return t.fetchUnknownBoards(e)}}(this)).map(function(t){return function(e){return t.modelCache.get("Board",e)}}(this)).compact().filter(function(e){return function(e){return e.isViewableBy(t)}}(this)).take(7).value()},e.prototype.fetchUnknownBoards=function(t){var e,r;return r=d.chain(t).difference(this._idBoardsFetching).reject(function(t){return function(e){return null!=t.modelCache.get("Board",e)}}(this)).value(),0!==r.length?(this._idBoardsFetching=this._idBoardsFetching.concat(r),e=r.map(function(t){return function(t){return a.loadBoardData(t,u.boardMinimal).catch(n.NotFound,n.Unauthorized,function(){return l.pullBoard(t)})}}(this)),c.all(e).then(function(t){return function(){t._idBoardsFetching=d.difference(t._idBoardsFetching,r),t.debouncedRenderBoards()}}(this)).done()):void 0},e.prototype.getHeaderInfo=function(){return{title:p("board section title.recent boards"),iconClass:"clock"}},e}(s)},{}],330:[function(t,e,r){var n,o,i,s,a,u,c,l=function(t,e){function r(){this.constructor=t}for(var n in e)d.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},d={}.hasOwnProperty;o=t(319),i=t(435),s=t(421),u=t(602),a=t(76),c=t(34),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.initialize=function(t){var e;return e=t.searchText,this.searchText=e.map(function(t){return t.trim()})},e.prototype.events={"click .js-add-board-with-name":"addBoardWithName"},e.prototype.renderOnce=function(){return this.$el.html(u()),this.subscribe(this.searchText,function(t){return this.$(".js-add-board-with-name").text(a("add board named",{boardName:t}))}),this},e.prototype.addBoardWithName=function(){var t;c("Boards Drawer","Add Board - With Name"),t=this.searchText.get(),i.toggle({elem:this.$(".js-add-board-with-name"),view:o,options:{model:this.model,modelCache:this.modelCache,term:t}})},e}(s)},{}],331:[function(t,e,r){var n,o,i,s,a,u,c,l=function(t,e){function r(){this.constructor=t}for(var n in e)d.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},d={}.hasOwnProperty;n=t(322),i=t(228),s=t(421),a=t("underscore"),u=t(416)(),c=u.renderable(function(t){var e,r,n,o,i,s,a;return s=t.title,r=t.iconClass,a=t.url,n=t.isOrg,o=t.orgLogoUrl,e=t.displayName,i=t.sectionId,u.div(".sidebar-section-header.quiet.js-sidebar-section-header",function(){return null==n?s&&(r&&u.icon(r,{class:"sidebar-section-header-icon"}),u.span(".sidebar-section-header-title",function(){return u.text(s)})):u.a(".dark-hover",{href:a},function(){return o?u.img({class:"sidebar-section-header-icon",src:o,alt:e}):u.icon("organization",{class:"sidebar-section-header-icon"}),u.span(".sidebar-section-header-title.mod-clickable",function(){return u.text(e)}),u.icon("business-class",{class:"sidebar-section-header-bc-icon hide js-has-business-class"})}),i?(u.icon("remove",{class:"sidebar-section-header-toggle-icon dark-hover js-collapse-section hide"}),u.icon("add",{class:"sidebar-section-header-toggle-icon dark-hover js-expand-section hide"})):void 0}),u.ul(".sidebar-boards-list.js-board-list")}),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.events={"click .js-collapse-section":"collapseSection","click .js-expand-section":"expandSection"},e.prototype.initialize=function(){return this.debouncedRenderBoards=this.debounce(this.renderBoards,10),this.debouncedPostRenderBoardsEvent=this.debounce(this.postRenderBoardsEvent,150),this.sectionId=this.sectionId(),this.initedSortable=!1,this.listenTo(i,"change:collapsedDrawerSections",function(){return this.renderCollapsed()}),this.listenTo(this.model.boardList,"add remove reset change:closed",this.debouncedRenderBoards)},e.prototype.render=function(){var t;return t=this.getHeaderInfo(),t.sectionId=this.sectionId,this.$el.html(c(t)),this.renderBoards(),this.renderCollapsed(),this},e.prototype.getBoards=function(){return[]},e.prototype.getHeaderInfo=function(){return"Boards"},e.prototype.sectionId=function(){return null},e.prototype.showOrgName=function(){return!1},e.prototype.isRecent=function(){return!1},e.prototype.postRenderBoardsEvent=function(){},e.prototype.collapseSection=function(t){return i.collapseSection(this.sectionId)},e.prototype.expandSection=function(t){return i.expandSection(this.sectionId)},e.prototype.renderCollapsed=function(){var t;t=i.isCollapsed(this.sectionId),this.$(".js-collapse-section").toggleClass("hide",t),this.$(".js-expand-section").toggleClass("hide",!t),this.$(".js-board-list").toggleClass("hide",t),this.$(".js-sidebar-section-header").toggleClass("bold",!t)},e.prototype.renderBoards=function(){var t,e,r,o,i,s;if(t=this.$(".js-board-list").empty(),o=a.filter(this.getBoards(),function(t){return!(null!=t?t.get("closed"):void 0)}),o.length>0){for(this.$el.removeClass("hide"),r=[],i=0,s=o.length;s>i;i++)e=o[i],r.push(this.subview(n,e,{showOrgName:this.showOrgName(),recent:this.isRecent()},"board-"+e.id));this.appendSubviews(r,t)}else this.$el.addClass("hide");return this.debouncedPostRenderBoardsEvent(),this},e}(s)},{}],332:[function(t,e,r){var n,o,i,s,a,u=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;n=t(331),i=t(60),s=t(433),a=t(76),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.listenTo(this.model.boardStarList,"add remove reset change:pos",function(){return this.debouncedRenderBoards()})},e.prototype.getBoards=function(){return this.model.boardStarList.getBoards()},e.prototype.showOrgName=function(){return!0},e.prototype.sectionId=function(){return"starred-boards"},e.prototype.getHeaderInfo=function(){return{title:a("board section title.starred boards"),iconClass:"star"}},e.prototype.postRenderBoardsEvent=function(){var t;return i.isTouch()?void 0:(t=this.$(".js-board-list"),this.initedSortable?s.refreshIfInitialized(t):(this.initedSortable=!0,t.sortable({axis:"y",containment:"parent",delay:75,distance:7,forcePlaceholderSize:!0,items:"> li",placeholder:"placeholder",scroll:!0,helper:"clone",stop:function(t){return function(e,r){t.defer(function(){return r.item.trigger("moveto",r)})}}(this),tolerance:"pointer"})))},e}(n)},{}],333:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S=function(t,e){function r(){this.constructor=t}for(var n in e)B.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},B={}.hasOwnProperty;n=t("jquery"),o=t(22),s=t(324),i=t(323),a=t(326),u=t(330),l=t(5),d=t("hearsay"),p=t(73),h=t(14),m=t(27),f=t(82),g=t(185),v=t(435),y=t(228),b=t(419),w=t(99),_=t(421),k=t("underscore"),C=t(197),j=t(598),x=t(76),e.exports=c=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return S(e,t),e.prototype.UNREAD_POLL_RATE_ACTIVE=w.getMs({minutes:5}),e.prototype.UNREAD_POLL_RATE_IDLE=w.getMs({minutes:60}),e.prototype.className=function(){return"boards-drawer"},e.prototype.initialize=function(){this.searchText=this.slot(""),this.isSearching=this.searchText.map(C.compose(C.not,k.isEmpty)).distinct(),Object.defineProperty(this,"$searchInput",{get:function(){return this.$(".js-search-boards")}}),this.listenTo(y,"change:showBoardsListSidebar",function(){return this.renderSidebarState(),this.ensureUnreadData(),y.getShowSidebar()||y.getPinSidebar()?this.defer(function(t){return function(){return t.focusInput()}}(this)):this.searchText.set("")}),this.listenTo(y,"change:pinBoardsListSidebar",function(){return this.renderSidebarState(),this.updatePinned(),this.updateHeight(),this.ensureUnreadData()}),b.addHandler(this,{scope:"header"}),this.ensureUnreadData(),this.filteredBoardsView=this.subview(a,this.model,{searchText:this.searchText}).render(),this.allBoardsView=this.subview(i,this.model).render(),this.activeBoardsSubview=d.if(this.isSearching,d.const(this.filteredBoardsView),d.const(this.allBoardsView)),this.searchingButtonsView=this.subview(u,this.model,{searchText:this.searchText}).render(),this.boardsButtonsView=this.subview(s,this.model).render(),this.activeButtonsSubview=d.if(this.isSearching,d.const(this.searchingButtonsView),d.const(this.boardsButtonsView)),this.subscribe(l.currentModel.distinct(),function(){return y.getPinSidebar()?void 0:y.hideSidebar()})},e.prototype.events={"keyup .js-search-boards":"keyEvent","input .js-search-boards":function(){return this.searchText.set(this.$searchInput.val())},shortcut:"shortcut"},e.prototype.renderOnce=function(){return this.$el.html(j()),this.renderSidebarState(),this.updatePinned(),n(window).bind(["resize",this.uniqueId()].join("."),this.debounce(function(t){return function(){return t.updateHeight()}}(this),300)),this.subscribeChanges(this.activeBoardsSubview,{out:function(t){return t.$el.detach()},in:function(t){return this.$(".js-board-drawer-boards").append(t.el)}}),this.subscribeChanges(this.activeButtonsSubview,{out:function(t){return t.$el.detach()},in:function(t){return this.$(".js-board-drawer-buttons").append(t.el)}}),this},e.prototype.remove=function(){return n(window).unbind(["resize",this.uniqueId()].join(".")),e.__super__.remove.apply(this,arguments)},e.prototype.ensureUnreadData=function(){var t;if(t=function(t){return function(){return"active"===f.getStatus()?t.UNREAD_POLL_RATE_ACTIVE:t.UNREAD_POLL_RATE_IDLE}}(this),null!=this._lastPoll&&Date.now()-this._lastPoll>1.5*t()&&(this.refreshUnreadData(),this._lastPoll=Date.now()),y.getShowSidebar()||y.getPinSidebar()){if(null==this._unreadTimeout)return this._unreadTimeout=this.setTimeout(function(t){return function(){return t.refreshUnreadData(),t._unreadTimeout=null,t._lastPoll=Date.now(),t.ensureUnreadData()}}(this),t())}else if(null!=this._unreadTimeout)return clearTimeout(this._unreadTimeout),this._unreadTimeout=null},e.prototype.shortcut=function(t){switch(t){case h.B:return y.getPinSidebar()?this.focusInput():y.getShowSidebar()?y.hideSidebar():y.showSidebar(),!0}},e.prototype.clearSearch=function(){this.$searchInput.val("")},e.prototype.focusInput=function(){return this.$searchInput.focus().select()},e.prototype.refreshUnreadData=function(){var t,e,r,n,i;for(m.loadMyBoardsUnreadData().done(),n=o.me(),i=y.getRecentBoards(),t=0,r=i.length;r>t;t++)e=i[t],n.boardList.get(e)||n.boardStarList.getBoardStar(e)||m.loadBoardData(e,g.boardUnread).done()},e.prototype.renderSidebarState=function(){return y.getShowSidebar()||y.getPinSidebar()?(this.$el.addClass("is-shown"),v.hide()):(this.$el.removeClass("is-shown"),this.clearSearch()),this},e.prototype.updateHeight=function(){var t;return t=y.getPinSidebar()?n(window).height()-50:n(window).height()-64,this.$(".board-drawer-content").css({"max-height":t})},e.prototype.updatePinned=function(){return this.$el.toggleClass("boards-drawer-pinned",y.getPinSidebar()),this.updateHeight()},e.prototype.keyEvent=function(t){var e;return e=p.getKey(t),e===h.ArrowUp||e===h.ArrowDown?(this.activeBoardsSubview.get().arrowKeyEvent(t),void this.focusInput()):void(e===h.Enter&&(this.activeBoardsSubview.get().enterKeyEvent(t),this.focusInput()))},e}(_)},{}],334:[function(t,e,r){var n,o,i=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;o=t(361),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.onCalendar=!0,e}(o)},{}],335:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g=function(t,e){function r(){this.constructor=t}for(var n in e)v.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},v={}.hasOwnProperty,y=[].slice;n=t("jquery"),o=t(345),s=t(338),a=t(221),u=t(341),c=t(61),l=t(435),d=t(99),p=t(421),h=t(115),f=t(418),m=t("moment"),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return g(e,t),e.prototype.className="calendar-wrapper",e.prototype.events={"click .js-week-view":"switchToWeekViewFromMonth","click .js-month-view":"switchToMonthViewFromWeek","click .js-left-arrow":"navigatePrevious","click .js-right-arrow":"navigateNext","click .js-today":"navigateToday","click .js-open-card-composer":"openComposer"},e.prototype.initialize=function(){return this.monthView=this.subview(s,this.model),this.weekView=this.subview(u,this.model),this.localState=new a({id:"calendar"+this.model.id}),this.localState.fetch(),this.model.viewState.clearSelectedCard()},e.prototype.render=function(t){var e;return null==t&&(t=new Date),e=c.getDaysOfWeek(t).map(function(t){return m(t).format("ddd")}),this.$el.html(f.fill("calendar_toolbar",{days:e})),this.localState.getMode()===u.prototype.VIEWSTATE_PREF_STR?this.showView(this.weekView,t):this.showView(this.monthView,t),this},e.prototype.remove=function(){return this.stopSubscriptions(),this.model.viewState.clearSelectedCard(),e.__super__.remove.apply(this,arguments)},e.prototype.openComposer=function(t){var e,r,i;return d.stop(t),e=n(t.target).closest(".day-cell, .day-column"),i=new Date(parseInt(e.attr("name"))),r=new o({model:this.model.composer,modelCache:this.modelCache}),r.setDate(i),l.show({clientx:t.clientX,clienty:t.clientY,view:r})},e.prototype.showView=function(t,e){var r;return this.currentSubView=t,r=this.$(".calendar-header").removeClass("week-view month-view").addClass(this.currentSubView.HEADER_CLASS_NAME),this.$(".calendar-content").empty().append(this.currentSubView.render(e).el),this.model.viewState.clearSelectedCard(),this.localState.setMode(this.currentSubView.VIEWSTATE_PREF_STR),this.currentSubView.delegateEvents(),this.currentSubView.updateRoute()},e.prototype.switchToWeekViewFromMonth=function(){return this.showView(this.weekView,this.monthView.currentCenterWeek),this.addedToDOM()},e.prototype.switchToMonthViewFromWeek=function(){return this.showView(this.monthView,this.weekView.currentWeek),this.addedToDOM()},e.prototype.setSubscriptions=function(){this.stopSubscriptions(),this.currentSubView===this.monthView?this.monthView.setSubscriptions():(n(h).on("windowClassChange."+this.uniqueId(),function(t){return function(){var e;return e=1<=arguments.length?y.call(arguments,0):[],t.weekSmallWindowResizeCheck.apply(t,e)}}(this)),this.weekView.setSubscriptions())},e.prototype.stopSubscriptions=function(){return this.weekView.stopSubscriptions(),this.monthView.stopSubscriptions(),n(h).off("."+this.uniqueId())},e.prototype.delegateEvents=function(){var t;return e.__super__.delegateEvents.apply(this,arguments),null!=(t=this.currentSubView)?t.delegateEvents():void 0},e.prototype.addedToDOM=function(){return this.setSubscriptions(),this.currentSubView.addedToDOM()},e.prototype.navigateToday=function(){return this.currentSubView.navigateToday()},e.prototype.navigatePrevious=function(){return this.currentSubView.navigatePrevious()},e.prototype.navigateNext=function(){return this.currentSubView.navigateNext()},e.prototype.weekSmallWindowResizeCheck=function(t,e){return h.fSmall&&this.currentSubView===this.weekView?this.switchToMonthViewFromWeek():void 0},e}(p)},{}],336:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m=function(t,e){function r(){this.constructor=t}for(var n in e)f.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},f={}.hasOwnProperty;n=t("jquery"),i=t(61),s=t(433),a=t(435),u=t(99),c=t(421),l=t("underscore"),h=t(418),p=t("moment"),d=t(75),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return m(e,t),e.prototype.events={sortreceive:"sortReceive",sortstop:"sortStop","click .js-expand-day:not(.active)":"expand","click .js-toggle-day":"clickToggleDay"},e.prototype.initialize=function(t){return this.data=t.data,this.getCardView=t.getCardView,this.$el.attr("name",i.getMidnightInt(this.data.day)),this.cardsDue=this.data.cardsDueOnDate},e.prototype.remove=function(){return delete this.getCardView,e.__super__.remove.apply(this,arguments)},e.prototype.render=function(t){var e,r,n;return null==t&&(t={}),e=this.data.day,r=i.isFirstOfMonth(e)||i.isLastOfMonth(e),n={date:p(e).format(r?"llll":"D"),isToday:p().isSame(e,"day")},l.extend(t,n),this.$el.html(h.fill("calendar_day",t,{editable:this.model.editable()})),this.renderCardsAndHeaders(),this},e.prototype.renderCardsAndHeaders=function(){return this.updateHeader(),this.renderCardsAndListHeaders()},e.prototype.cardListMap=function(){return l.groupBy(this.cardsDue,function(t){return t.getList().id})},e.prototype.updateHeader=function(){var t;return t=this.cardsDue.length,this.$(".day-cards-header").empty(),t>0?this.$(".day-cards-header").text(d("cards",t)):void 0},e.prototype.renderCardsAndListHeaders=function(){var t,e,r,o,i,a,u,c,l,d,p,m;t=this.$(".calendar-day-list"),t.empty(),a=[],m=this.cardListMap();for(p in m)if(f.call(m,p))for(i=m[p],u={listID:p,listName:this.model.getList(p).get("name")},c=h.fill("calendar_day_list_header",u),a.push(c),l=0,d=i.length;d>l;l++)e=i[l],r=this.getCardView(e),r.$el.hasClass("ui-sortable-helper")||(o=r.render().el,n(o).attr("name",e.cid),r.delegateEvents(),a.push(o));return t.append(a),this.model.editable()?s.refreshIfInitialized(this.$(".js-calendar-sortable")):void 0},e.prototype.sortReceive=function(t,e){var r;return r=function(t){var e;return e=document.elementFromPoint(t.left,t.top),n(".calendar-drag-area")[0].contains(e)},r(e.offset)?e.item.trigger("moveToCalendarDay",[e,this]):(s.abort(),s.refreshIfInitialized(this.$(".js-calendar-sortable")))},e.prototype.sortStop=function(t,e){return e.item.trigger("moveInCalendarDay",[e,this])},e.prototype.clickToggleDay=function(t){return this.$(".calendar-day").hasClass("active")?this.contract(t):this.expand(t)},e.prototype.expand=function(t){var e;return u.stop(t),s.sorting?void 0:(n(".calendar-day.active").removeClass("active"),e=this.$(".calendar-day").addClass("active"),a.hide())},e.prototype.contract=function(t){return u.stop(t),this.$(".calendar-day").removeClass("active"),a.hide()},e}(c)},{}],337:[function(t,e,r){var n,o,i=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=t(336),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.tagName="td",e.prototype.className="day-cell",e.prototype.initialize=function(t){return this.scrollIntoView=t.scrollIntoView,e.__super__.initialize.apply(this,arguments)},e.prototype.render=function(){return e.__super__.render.call(this,{monthView:!0})},e.prototype.expand=function(){var t;return e.__super__.expand.apply(this,arguments),t=this.$(".calendar-day"),this.scrollIntoView({top:this.$el.prop("offsetTop"),height:t.outerHeight()})},e}(n)},{}],338:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g=function(t,e){function r(){this.constructor=t}for(var n in e)v.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},v={}.hasOwnProperty;n=t("jquery"),o=t(337),s=t(339),a=t(5),u=t(61),c=t(433),l=t(435),d=t(99),p=t(115),h=t("underscore"),f=t(418),m=t("moment"),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return g(e,t),e.prototype.className=d.extendParentClassName("calendar-month"),e.prototype.WEEK_WRAPPER_ELEMENT="tr",e.prototype.VIEWSTATE_PREF_STR="month",e.prototype.HEADER_CLASS_NAME="month-view",e.prototype.WEEKS_FROM_EDGE_BEFORE_RENDER_NEW_DAYS=5,e.prototype.WEEKS_TO_RENDER_UPON_SCROLL_THRESHHOLD=5,e.prototype.MINIMUM_WEEKS_KEPT_IN_DOM=20,e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.DAY_VIEW_TYPE=o,this.today=new Date,this.currentMonthCells=[],this.scrollLock=!1,this.weeksKeptInDOM=this.MINIMUM_WEEKS_KEPT_IN_DOM,this.makeDebouncedMethods("shadeDaysUpdateHeader")},e.prototype.render=function(t){var e;return null==t&&(t=this.today),this.$el.html(f.fill("calendar_month")),this.renderBaseWeek(t),this.currentCenterWeek=t,this.currentMonth=u.getFirstOfMonth(t),e=Math.floor(this.weeksKeptInDOM/2),this.renderWeeks(e),this.renderWeeks(-1*e),this.shadeDays(),this.setSubscriptions(),this},e.prototype.getDayView=function(t,r){return e.__super__.getDayView.call(this,t,h.extend({scrollIntoView:this.scrollIntoView.bind(this)},r))},e.prototype.addedToDOM=function(){return e.__super__.addedToDOM.apply(this,arguments),this.calculateVariables(),this.windowResizeCheck(),this.updateHeader(),this.scrollToDay(this.currentCenterWeek)},e.prototype.updateRoute=function(){var t,e,r;return e=u.dateToObj(this.currentMonth),r=e.year,t=e.month,t=d.lpad(t,2,"0"),a.setBoardLocation(this.model.id,"calendar",[r,t],{replace:!0})},e.prototype.setSubscriptions=function(){return this.stopSubscriptions(),n(p).on("windowClassChange."+this.uniqueId(),this.windowClassChangeCheck.bind(this)),n(window).on("resize."+this.uniqueId(),function(t){return function(){return t.windowResizeCheck()}}(this)),n(".calendar-month").on("scroll."+this.uniqueId()+" ",function(t){return function(){return t.scrollCheck()}}(this))},e.prototype.stopSubscriptions=function(){return n(p).off("."+this.uniqueId()),n(window).off("."+this.uniqueId()),n(".calendar-month").off("."+this.uniqueId())},e.prototype.windowClassChangeCheck=function(t,e){var r;return p.fSmall?(n(".calendar-day.active").removeClass("active"),r=new Date(this.currentCenterWeek),this.calculateVariables(),this.windowResizeCheck(),this.scrollCheck(),this.scrollToDay(r)):void 0},e.prototype.calculateVariables=function(){var t;return this.tableSpacing=null!=(t=parseInt(this.$(".calendar-table").css("border-spacing")))?t:5,this.dayCellHeight=this.$(".day-cell").prop("clientHeight")+this.tableSpacing},e.prototype.windowResizeCheck=function(){var t,e,r,o,i;i=n(window).outerHeight(),r=n("#header").outerHeight(),t=n("#board-header").outerHeight(),e=n(".calendar-header").outerHeight(),this.calendarContentHeight=i-(r+t+e),o=Math.ceil(this.calendarContentHeight/this.dayCellHeight),this.weeksKeptInDOM=Math.max(5*o,this.MINIMUM_WEEKS_KEPT_IN_DOM)},e.prototype.updateHeader=function(){var t;return t=""+m(this.currentMonth).format("MMMM YYYY"),n(".js-calendar-header").text(t);
},e.prototype.renderBaseWeek=function(t){var e;return e=this.weekRowEl(t),n(".calendar-month").off("."+this.uniqueId()),this.$(".calendar-table").append(e),this.calculateFirstAndLastWeeksFromDOM()},e.prototype.renderWeeks=function(t){var e,r;return t>0&&(e=m(this.lastRenderedSaturday).add(t,"weeks").toDate(),this.renderUpToDay(e)),0>t?(r=m(this.firstRenderedWeek).add(t,"weeks").toDate(),this.renderUpToDay(r)):void 0},e.prototype.renderUpToDay=function(t){var e,r,n,o,i;for(e=this.$(".calendar-table"),r=u.getEndOfWeek(t),o=[];this.lastRenderedSaturday<r;)this.lastRenderedSaturday=m(this.lastRenderedSaturday).add(1,"weeks").toDate(),o.push(this.weekRowEl(this.lastRenderedSaturday));for(e.append(o),n=u.getStartOfWeek(t),i=[];this.firstRenderedWeek>n;)this.firstRenderedWeek=m(this.firstRenderedWeek).subtract(1,"weeks").toDate(),i.unshift(this.weekRowEl(this.firstRenderedWeek));return e.prepend(i),this.scroll(this.dayCellHeight*i.length),this.deleteExcessWeeks(),this.calculateFirstAndLastWeeksFromDOM()},e.prototype.deleteExcessWeeks=function(){var t,e,r,o,i,s,a,u,c,l,d,p,h;if(t=n(".week"),t.length>this.weeksKeptInDOM){if(h=this.$(".calendar-table").outerHeight(),p=n(".calendar-month").prop("scrollTop"),o=h/2>p){for(l=[],r=i=a=t.length-1,u=this.weeksKeptInDOM;u>=a?u>=i:i>=u;r=u>=a?++i:--i)l.push(n(t[r]).remove());return l}for(e=t.length-this.weeksKeptInDOM,this.scroll(-1*this.dayCellHeight*e),d=[],r=s=0,c=e;c>=0?c>s:s>c;r=c>=0?++s:--s)d.push(n(t[r]).remove());return d}},e.prototype.scrollToDay=function(t,e){var r,n,o,i,s,a,c,l;return this.scrollLock?void 0:(i=this.calendarContentHeight/2/this.dayCellHeight,l=m(t).startOf("week"),o=l.clone().subtract(Math.ceil(i),"weeks").toDate(),s=l.clone().add(Math.ceil(i),"weeks").toDate(),this.firstRenderedWeek<=o&&this.lastRenderedWeek>=s?(c=l.clone().subtract(Math.floor(i),"weeks").toDate(),n=u.getMidnightInt(c),r=this.$("[name='"+n+"']"),a=r.prop("offsetTop"),this.scrollTo(a-this.tableSpacing+1,e)):(this.render(t),this.addedToDOM(),this.delegateEvents()),this.updateRoute())},e.prototype.completeAnimatedScroll=function(){return this.enableRenderNewDays()},e.prototype.scrollIntoView=function(t){var e,r,o,i,s,a;return a=t.top,o=t.height,r=a+o,e=n(".calendar-month"),s=e.scrollTop(),i=s+e.height(),s>a?this.scroll(a-s-this.tableSpacing+1,this.SCROLL_ANIMATION_TIME):r>i?this.scroll(r-i+this.tableSpacing+1,this.SCROLL_ANIMATION_TIME):void 0},e.prototype.scroll=function(t,e){var r,o;return r=n(".calendar-month"),o=r.prop("scrollTop"),this.scrollTo(o+t,e)},e.prototype.scrollTo=function(t,e){var r;return r=n(".calendar-month"),e?(this.scrollLock=!0,r.animate({scrollTop:t},{duration:e,complete:function(t){return function(){return t.completeAnimatedScroll()}}(this)})):r.scrollTop(t)},e.prototype.navigatePrevious=function(){return this.scrollMonth(-1)},e.prototype.navigateNext=function(){return this.scrollMonth(1)},e.prototype.scrollMonth=function(t){var e;return this.scrollLock?void 0:(e=m(this.currentMonth).add(t,"months").startOf("month").add(15,"days").toDate(),this.scrollToDay(e,this.SCROLL_ANIMATION_TIME))},e.prototype.enableRenderNewDays=function(){return this.checkRenderDays(),this.scrollLock=!1},e.prototype.scrollCheck=function(){var t,e,r,o,i,s,a,c,d,p,h,f;return l.hide(),t=n(".calendar-month"),r=t.outerHeight(),d=t.prop("scrollTop"),this.scrollLock||this.checkRenderDays(),o=r/2,f=Math.floor((d+o)/this.dayCellHeight),c=m(this.firstRenderedWeek).add(f,"weeks").toDate(),m(this.currentCenterWeek).isSame(c,"day")||(this.currentCenterWeek=c,i=u.getEndOfWeek(this.currentCenterWeek),(this.currentMonth.getMonth()!==this.currentCenterWeek.getMonth()||this.currentMonth.getMonth()!==i)&&(i.getMonth()===this.today.getMonth()?this.currentMonth=u.getFirstOfMonth(i):this.currentMonth=u.getFirstOfMonth(this.currentCenterWeek),this.shadeDaysUpdateHeaderDebounced()),this.updateRoute()),p=u.getMidnightInt(this.today),e=this.$("[name='"+p+"']"),h=e.prop("offsetTop"),s=h<(a=o+d)&&a<h+this.dayCellHeight,n(".today-button").toggleClass("on-today",s)},e.prototype.shadeDaysUpdateHeader=function(){return this.updateHeader(),this.shadeDays()},e.prototype.checkRenderDays=function(){var t,e,r,o,i,s,a;return t=n(".calendar-month"),e=t.outerHeight(),s=t.prop("scrollTop"),a=this.$(".calendar-table").outerHeight(),r=a-e-s,i=this.dayCellHeight*this.WEEKS_FROM_EDGE_BEFORE_RENDER_NEW_DAYS,i>r&&(o=!0,this.renderWeeks(this.WEEKS_TO_RENDER_UPON_SCROLL_THRESHHOLD)),i>s&&(o=!0,this.renderWeeks(-1*this.WEEKS_TO_RENDER_UPON_SCROLL_THRESHHOLD)),o&&this.model.editable()?this.defer(function(){return c.refreshCalendarCardSortable()}):void 0},e.prototype.shadeDays=function(){var t,e,r,o,i,s,a,u,c;for(t=this.$(".day-cell"),a=this.currentMonthCells,r=0,i=a.length;i>r;r++)e=a[r],n(e).removeClass("current-month");for(this.currentMonthCells=h.filter(t,this.cellInCurrentMonth,this),u=this.currentMonthCells,c=[],o=0,s=u.length;s>o;o++)e=u[o],c.push(n(e).addClass("current-month"));return c},e.prototype.cellInCurrentMonth=function(t){var e;return e=parseInt(n(t).attr("name")),new Date(e).getMonth()===this.currentMonth.getMonth()},e}(s)},{}],339:[function(t,e,r){var n,o,i,s,a,u,c,l,d=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;n=t("jquery"),o=t(334),s=t(61),a=t(433),u=t(421),c=t("underscore"),l=t("moment"),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return d(e,t),e.prototype.className="u-fancy-scrollbar calendar-drag-area",e.prototype.SCROLL_ANIMATION_TIME=400,e.prototype.initialize=function(){var t;return t=this.listenToListChanges.bind(this),this.model.listList.each(t),this.listenTo(this.model.listList,"add remove",t)},e.prototype.addedToDOM=function(){return this.model.editable()?this.defer(function(){return a.refreshCalendarCardSortable()}):void 0},e.prototype.delegateEvents=function(){var t,r,n,o,i;for(e.__super__.delegateEvents.apply(this,arguments),o=this.subviewsOfType(this.DAY_VIEW_TYPE),i=[],r=0,n=o.length;n>r;r++)t=o[r],i.push(t.delegateEvents());return i},e.prototype.setSubscriptions=function(){throw new Error("CalendarView::setSubscriptions is an abstract method")},e.prototype.stopSubscriptions=function(){throw new Error("CalendarView::stopSubscriptions is an abstract method")},e.prototype.listenToListChanges=function(t){return this.listenTo(t.cardList,"add remove",function(t){var e;return this.cardsWithDueDates([t]).length>0?(e=new Date(t.get("due")),this.renderCardsOnDates([e])):void 0}),this.listenTo(t.cardList,"change:due",function(t,e){var r,n,o,i,s;return s=t.previousAttributes().due,o=t.get("due"),i=new Date(null!=s?s:null),e=new Date(null!=o?o:null),l(i).isSame(e,"day")?void 0:(n=function(){var t,e,n,i;for(n=[s,o],i=[],t=0,e=n.length;e>t;t++)r=n[t],null!=r&&i.push(new Date(r));return i}(),this.renderCardsOnDates(n))}),this.listenTo(t.cardList,"reset",function(t,e){var r,n,o,i;return o=t.models,i=e.previousModels,n=c.difference(o,i).concat(c.difference(i,o)),this.renderCardsOnDates(function(){var t,e,o;for(o=[],t=0,e=n.length;e>t;t++)r=n[t],o.push(new Date(r.get("due")));return o}())})},e.prototype.navigateToday=function(){return this.scrollToDay(this.today,this.SCROLL_ANIMATION_TIME)},e.prototype.getCardView=function(t){return this.subview(o,t,t.cid)},e.prototype.cardsWithDueDates=function(t){return t.filter(function(t){return null!=t.get("due")})},e.prototype.cardsDueOnDate=function(t,e){return this.cardsWithDueDates(t).filter(function(t){return l(t.get("due")).isSame(e,"day")})},e.prototype.cardSubviews=function(){var t,e,r;return r=this.subviewsOfType(this.DAY_VIEW_TYPE),t=c.flatten(function(){var t,n,i;for(i=[],t=0,n=r.length;n>t;t++)e=r[t],i.push(e.subviewsOfType(o));return i}())},e.prototype.calculateFirstAndLastWeeksFromDOM=function(){var t;return t=this.$(".week"),this.firstRenderedWeek=new Date(parseInt(t.first().attr("name"))),this.lastRenderedWeek=new Date(parseInt(t.last().attr("name"))),this.lastRenderedSaturday=s.getEndOfWeek(this.lastRenderedWeek)},e.prototype.renderCardsOnDates=function(t){var e,r,n,o,i,a,u;if(this.$(".week").length>0){for(u=[],i=0,a=t.length;a>i;i++)r=t[i],this.firstRenderedWeek<r&&r<this.lastRenderedSaturday&&(e=this.cardsDueOnDate(this.model.openCards(),r),n=s.getMidnightInt(r),o=this.existingSubview(this.DAY_VIEW_TYPE,this.model,n),o.cardsDue=e,u.push(o.renderCardsAndHeaders()));return u}},e.prototype.renderDayViews=function(t){var e,r,n,o;for(o=[],r=0,n=t.length;n>r;r++)e=t[r],o.push(this.getDayView(e).render().el);return o},e.prototype.getDayView=function(t,e){var r;return r={day:t,cardsDueOnDate:this.cardsDueOnDate(this.model.openCards(),t)},this.subview(this.DAY_VIEW_TYPE,this.model,c.extend({data:r,getCardView:this.getCardView.bind(this)},e),s.getMidnightInt(t))},e.prototype.weekRowEl=function(t){var e,r;return r=this.renderDayViews(s.getDaysOfWeek(t)),e=n(document.createElement(this.WEEK_WRAPPER_ELEMENT)),e.attr("name",s.getMidnightInt(s.getStartOfWeek(t))).addClass("week").append(r),e},e}(u)},{}],340:[function(t,e,r){var n,o,i=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=t(336),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.className="day-column",e}(n)},{}],341:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h=function(t,e){function r(){this.constructor=t}for(var n in e)m.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},m={}.hasOwnProperty;n=t("jquery"),o=t(339),i=t(340),a=t(5),u=t(61),c=t(433),l=t(99),p=t(418),d=t("moment"),e.exports=s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return h(e,t),e.prototype.className=l.extendParentClassName("calendar-week"),e.prototype.WEEK_WRAPPER_ELEMENT="div",e.prototype.VIEWSTATE_PREF_STR="week",e.prototype.HEADER_CLASS_NAME="week-view",e.prototype.WEEKS_KEPT_IN_DOM=5,e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.DAY_VIEW_TYPE=i,this.today=new Date,this.scrollLock=!1},e.prototype.render=function(t){return null==t&&(t=this.today),this.$el.html(p.fill("calendar_week")),this.currentWeek=u.getStartOfWeek(t),this.appendWeekEl(this.currentWeek),this.prependWeekEl(d(this.currentWeek).subtract(1,"weeks").toDate()),this.appendWeekEl(d(this.currentWeek).add(1,"weeks").toDate()),this},e.prototype.addedToDOM=function(){return e.__super__.addedToDOM.apply(this,arguments),this.weekWidth=n(".calendar-content").outerWidth(),this.resizeWeekCanvas(),this.scrollToDay(this.currentWeek),this.updateToolbar()},e.prototype.updateRoute=function(){var t,e,r,n;return r=u.dateToObj(this.currentWeek),n=r.year,e=r.month,t=r.day,e=l.lpad(e,2,"0"),t=l.lpad(t,2,"0"),a.setBoardLocation(this.model.id,"calendar",[n,e,t],{replace:!0})},e.prototype.setSubscriptions=function(){return n(window).on("resize."+this.uniqueId(),function(t){return function(){return t.resizeCheck()}}(this)),n(".board-menu").on("transitionend."+this.uniqueId()+" webkitTransitionEnd."+this.uniqueId(),function(t){return function(){return t.resizeCheck()}}(this))},e.prototype.stopSubscriptions=function(){return n(window).off("."+this.uniqueId()),n(".board-menu").off("."+this.uniqueId())},e.prototype.resizeCheck=function(){return this.weekWidth=n(".calendar-content").outerWidth(),this.resizeWeekCanvas(),this.scrollToDay(this.currentWeek)},e.prototype.resizeWeekCanvas=function(){var t;return t=this.$(".week").length,n(".week-horizontal-canvas").width(this.weekWidth*t),n(".week").width(this.weekWidth)},e.prototype.updateToolbar=function(){var t,e,r,o,i;return i=d(u.getEndOfWeek(this.currentWeek)),e=d(this.currentWeek),r=e.format("LL")+" - "+i.format("LL"),n(".js-calendar-header").text(r),t=n(".today-button"),o=d(this.today).isSame(this.currentWeek,"week"),t.toggleClass("on-today",o)},e.prototype.appendWeekEl=function(t){var e,r;return r=this.$(".week-horizontal-canvas"),r.append(this.weekRowEl(t)),this.resizeWeekCanvas(),e=this.$(".week"),e.length>this.WEEKS_KEPT_IN_DOM&&(e.first().remove(),this.scrollLeft(-1*this.weekWidth)),this.calculateFirstAndLastWeeksFromDOM()},e.prototype.prependWeekEl=function(t){var e,r;return r=this.$(".week-horizontal-canvas"),r.prepend(this.weekRowEl(t)),e=this.$(".week"),e.length>this.WEEKS_KEPT_IN_DOM&&e.last().remove(),this.resizeWeekCanvas(),this.scrollLeft(this.weekWidth),this.calculateFirstAndLastWeeksFromDOM()},e.prototype.navigatePrevious=function(){return this.navigateWeek({backwards:!0})},e.prototype.navigateNext=function(){return this.navigateWeek({backwards:!1})},e.prototype.navigateWeek=function(t){var e,r,n,o,i;return r=(null!=t?t:{}).backwards,this.scrollLock?void 0:(i=r?-1:1,e=r?this.$(".week").first():this.$(".week").last(),this.currentWeek=d(this.currentWeek).add(i,"weeks"),o=e.attr("name"),n=new Date(parseInt(o)),d(this.currentWeek).isSame(n,"day")&&(r?this.prependWeekEl(d(this.currentWeek).subtract(1,"weeks").toDate()):this.appendWeekEl(d(this.currentWeek).add(1,"weeks").toDate()),this.model.editable()&&this.defer(function(){return c.refreshCalendarCardSortable()})),this.scrollToDay(this.currentWeek,this.SCROLL_ANIMATION_TIME))},e.prototype.scrollLeft=function(t,e){var r,o;return r=n(".calendar-week"),o=r.prop("scrollLeft"),this.scrollLeftTo(o+t,e)},e.prototype.scrollLeftTo=function(t,e){var r;return r=n(".calendar-week"),e?(this.scrollLock=!0,r.animate({scrollLeft:t},{duration:e,complete:function(t){return function(){return t.completeAnimatedScroll()}}(this)})):r.scrollLeft(t)},e.prototype.scrollToDay=function(t,e){var r,n,o;return this.firstRenderedWeek<t&&t<this.lastRenderedSaturday?(o=u.getMidnightInt(u.getStartOfWeek(t)),r=this.$(".week[name='"+o+"']"),n=r.prop("offsetLeft"),this.scrollLeftTo(n,e),this.currentWeek=new Date(o),this.updateToolbar()):(this.render(t),this.addedToDOM(),this.delegateEvents()),this.updateRoute()},e.prototype.completeAnimatedScroll=function(){return this.scrollLock=!1},e}(o)},{}],342:[function(t,e,r){var n,o;o=null!=(n=window.URL)?n:window.webkitURL,e.exports=new(function(){function t(){this.stream=null}return t.prototype.supportsGetUserMedia=function(){return null!=navigator.getUserMedia||null!=navigator.webkitGetUserMedia},t.prototype.connected=function(){return null!=this.stream},t.prototype.getStream=function(){return this.stream},t.prototype.getError=function(){return this.error},t.prototype.connect=function(t){var e,r;return null!=this.stream?t(null,this.stream):(this.error=null,e=function(e){return function(r){return e.error=r,e.stream=null,t("Could not connect")}}(this),r={video:!0},null!=navigator.getUserMedia?navigator.getUserMedia(r,function(e){return function(r){return e._setRawStream(r),e.stream=r,t(null,e.stream)}}(this),e):null!=navigator.webkitGetUserMedia?navigator.webkitGetUserMedia(r,function(e){return function(r){return e._setRawStream(r),e.stream=o.createObjectURL(r),t(null,e.stream)}}(this),e):void 0)},t.prototype._setRawStream=function(t){return this.stop(),this.rawStream=t},t.prototype.stop=function(){var t;return null!=(t=this.rawStream)&&"function"==typeof t.stop&&t.stop(),this.stream=null,this.rawStream=null},t}())},{}],343:[function(t,e,r){var n,o,i,s,a,u=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;n=t("jquery"),i=t(435),s=t(421),a=t(418),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.viewTitleKey="crop photo",e.prototype.events=function(){return{"click .js-done":"done","click .js-back":"back"}},e.prototype.setImage=function(t){return this.url=t},e.prototype.render=function(){return this.$el.html(a.fill("crop_photo")),this.$(".crop-image").attr("src",this.url).css({"max-width":4096,"max-height":4096}).crop({width:270,height:270}).on("mousewheel",function(t){var e;return e=n(this).data("crop"),t.originalEvent.wheelDelta<0?e.zoomIn():e.zoomOut()}).on("crop",function(t){return function(e){return t.cropX=e.cropX,t.cropY=e.cropY,t.cropW=e.cropW,t.cropH=e.cropH}}(this)),this},e.prototype.done=function(){var t,e,r;return r=this.$(".crop-image")[0],t=n("<canvas>").attr({width:270,height:270}),e=t[0].getContext("2d"),e.drawImage(r,this.cropX,this.cropY,this.cropW,this.cropH,0,0,270,270),i.popView(),this.trigger("done",t[0].toDataURL("image/png"))},e.prototype.back=function(){return i.popView(),this.trigger("back")},e}(s)},{}],344:[function(t,e,r){var n,o,i,s,a,u,c,l=function(t,e){function r(){this.constructor=t}for(var n in e)d.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},d={}.hasOwnProperty;n=t("jquery"),o=t(342),i=t(343),s=t(435),u=t(421),c=t(418),e.exports=a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.events={"click .js-connect-camera":"connectCamera","click .js-snap":"snap"},e.prototype.willBePopped=function(){return o.stop()},e.prototype.viewTitleKey="take a photo",e.prototype.render=function(){var t,e;return t={error:o.getError(),connected:o.connected()},this.$el.html(c.fill("take_photo",t)),o.connected()&&(e=this.$(".video")[0],e.src=o.getStream(),e.play()),this},e.prototype.connectCamera=function(){return o.connect(function(t){return function(e){return t.render()}}(this))},e.prototype.snap=function(){var t,e,r,a;return a=this.$(".video")[0],t=n("<canvas>").attr({width:640,height:480}),e=t[0].getContext("2d"),e.drawImage(a,0,0,640,480),r=new i({model:this.model,modelCache:this.modelCache}),r.setImage(t[0].toDataURL("image/png")),o.stop(),s.pushView({view:r}),this.listenTo(r,"done",function(t){return function(e){return s.popView(),t.trigger("done",e)}}(this)),this.listenTo(r,"back",function(t){return function(){return t.render(),t.connectCamera()}}(this))},e}(u)},{}],345:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p=function(t,e){function r(){this.constructor=t}for(var n in e)h.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},h={}.hasOwnProperty;n=t("jquery"),i=t(73),s=t(14),a=t(435),u=t(99),c=t(421),l=t("underscore"),d=t(418),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.className="calendar-card-composer",e.prototype.initialize=function(){return this.board=this.model.getBoard()},e.prototype.events={"change .js-select-list":"updatePositionList","change .js-select-position":"renderValues","click .js-add-card":"addCard",keydown:"keydownEvent"},e.prototype.viewTitleKey="add card",e.prototype.setDate=function(t){return this.date=t,this.date.setHours(12)},e.prototype.remove=function(){var t;return t={title:this.$(".js-card-title").val(),idList:this.$(".js-select-list").val(),pos:this.$(".js-select-position").val()},this.model.set(t).save(),e.__super__.remove.apply(this,arguments)},e.prototype.render=function(){var t;return t={title:this.model.get("title")},this.$el.html(d.fill("popover_card_from_calendar",t)),this.updateListList(),this.updatePositionList(),this.defer(function(t){return function(){return u.setCaretAtEnd(t.$(".js-card-title")[0])}}(this)),this},e.prototype.keydownEvent=function(t){i.getKey(t)===s.Enter&&this.addCard(t)},e.prototype.addCard=function(t){var e,r,o,i;return u.stop(t),(r=n.trim(this.$(".js-card-title").val()))?(a.hide(),this.model.moveToNext(),o=this.selectedList(),i=parseInt(this.$(".js-select-position").val()),e={closed:!1,dateLastActivity:new Date,due:this.date.toString(),idList:o.id,pos:o.calcPos(i),name:r},o.cardList.create(e)):void 0},e.prototype.updateListList=function(){var t,e;return t=this.$(".js-select-list"),t.empty(),e=this.board.openLists(),l.each(e,function(e){return n("<option>").val(e.id).text(e.get("name")).appendTo(t)}),t.val(this.model.get("idList")),t.val()||t.find("option").first().prop("selected",!0),this.renderValues()},e.prototype.updatePositionList=function(){var t,e,r,o,i;return t=this.$(".js-select-position"),r=this.selectedList(),t.empty(),o=r.cardList.length,e=function(){i=[];for(var t=0;o>=0?o>=t:t>=o;o>=0?t++:t--)i.push(t);return i}.apply(this),l.each(e,function(r){var o;return o=function(){switch(r){case 0:return" (Top)";case e.length-1:return" (Bottom)";default:return""}}(),n("<option>").val(r).text(r+1+o).appendTo(t)}),t.val(this.model.get("pos")),t.val()||t.find("option").last().prop("selected",!0),this.renderValues()},e.prototype.selectedList=function(){var t;return t=this.$(".js-select-list").val(),l.findWhere(this.board.listList.models,{id:t})},e.prototype.renderValues=function(){var t;return this.$el.find(".js-list-value").text(this.selectedList().get("name")),t=parseInt(this.$(".js-select-position").val()),this.$el.find(".js-pos-value").text(t+1)},e}(c)},{}],346:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_=function(t,e){function r(){this.constructor=t}for(var n in e)k.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},k={}.hasOwnProperty;n=t("jquery"),o=t(60),s=t(347),a=t(348),u=t(349),c=t(350),l=t(430),d=t(5),p=t(73),h=t(14),m=t(435),f=t(99),g=t(421),v=t("underscore"),b=t(418),w=t(34),y=t(76),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return _(e,t),e.prototype.className="card-composer",e.prototype.initialize=function(){return this.listenTo(this.model,"change:idLabels change:idMembers",this.renderSelectedItems),this.listenTo(this.model,"change:vis",this.frameDebounce(this.renderVisibility)),this.listenTo(this.model.labelList,"add remove reset change",this.frameDebounce(this.renderSelectedItems))},e.prototype.events={"click .js-add-card":"submitCard","click .js-cancel":"clearAndHide","click .js-cc-menu":"openMenu",keyup:"keyupEvent",paste:"pasteEvent",keydown:"keydownEvent"},e.prototype.render=function(t,e){var r,n;return n=this,r=this.model.toJSON({board:!0}),this.renderVisibility(),this.$el.html(b.fill("card_composer_inline",r)),this.renderSelectedItems(),this.defer(function(t){return function(){return f.setCaretAtEnd(t.$(".js-card-title")[0]),"function"==typeof e?e():void 0}}(this)),this.$(".js-card-title").autosize(),this},e.prototype.renderVisibility=function(){return this.$el.toggleClass("hide",!this.model.get("vis")),this},e.prototype.clearTextField=function(){return n(".js-card-title").val("")},e.prototype.submitCard=function(t){var e,r,o,i,s;return t&&f.preventDefault(t),m.hide(),s=n.trim(this.$(".js-card-title").val()),""===s?void this.$el.find(".js-card-title").focus().select():(i=t.shiftKey===!0,e=v.compact(s.split(/\r\n|\r|\n/)),o=e.length,r=o.toString(),void(1===o?(this.createCard(s,i),this.clearTextField()):100>=o?l.toggle("create many cards",{elem:n(t.target),text:y("confirm.create many cards.text",{count:r}),confirmText:y("confirm.create many cards.confirm",{count:r}),fxConfirm:function(t){return function(r){return t.clearTextField(),t.createMultipleCards(e,i)}}(this),fxCancel:function(t){return function(e){var r;return t.createCard(s,i,!1,r=!0)}}(this)}):l.toggle("too many cards",{elem:n(t.target),text:y("confirm.too many cards.text",{count:r}),fxConfirm:function(t){return function(t){return m.hide()}}(this)})))},e.prototype.createCard=function(t,e,r,n){var o,i,s,a,u,c;t=t.trim(),n&&(t=t.replace(/(\r\n|\n|\r)/gm," ")),u=v.clone(this.model.get("idMembers")),a=v.pluck(this.model.labelList.models,"id"),""!==t&&(c={name:t,pos:this.model.getList().calcPos(this.model.get("index")),closed:!1,idLabels:a,idMembers:u,dateLastActivity:Date.now()},this.model.moveToNext(),o=a.length>0,s=this.model.getList().cardList.create(c,{success:function(t){return function(t){o&&u.length>0?w("Card Composer","Card Added","With Members and Labels"):u.length>0?w("Card Composer","Card Added","With Members"):o?w("Card Composer","Card Added","With Labels"):w("Card Composer","Card Added","No items included")}}(this),modelCache:this.modelCache}),i=this.model.getBoard(),i.filter.addNewCard(s),r&&i.viewState.selectCard(s),e&&d.showCardDetail(s))},e.prototype.createMultipleCards=function(t,e){var r,n,o,i,s,a;for(i=t.length,r=n=0,o=t.length;o>n;r=++n)a=t[r],t.length-1===r?this.createCard(a,e,s=!0):this.createCard(a);w("Card Composer","Added Mulitple Cards",i)},e.prototype.pasteEvent=function(){this.$(".js-card-title").focus().keyup().trigger("autosize.resize")},e.prototype.keydownEvent=function(t){var e,r,o,i,c,l,d,g;return c=p.getKey(t),e=this.$(".js-card-title"),i=n(t.target).closest(".js-card-title").hasClass("js-card-title"),o=n(t.target).closest(".js-add-card").hasClass("js-add-card"),!i&&!o||m.isVisible||c!==h.Enter?void((c===h.Tab||c===h.Enter)&&(e.focus(),g=f.getWordFromCaret(e[0]),l=n(null!=(d=m.view)?d.el:void 0),r=!1,m.view instanceof a?(l.find(".js-members-list .item.selected:first .js-select-member").first().click(),r=!0):m.view instanceof s?(l.find(".js-select-label.selected").first().click(),r=!0):m.view instanceof u?l.find(".js-pos-results").length>0&&(l.find(".js-pos-results li.selected:first a").first().click(),r=!0):c===h.Tab&&""===e.val()&&(f.stop(t),this.hide(),t.shiftKey?n(this.el).closest(".js-list").find(".editable:first .current").click():n(this.el).closest(".js-list").next().find(".editable:first .current").click()),r&&(f.stop(t),f.insertSelection(e,"",g.start,g.end),this.model.set("title",e.val())),this.renderSelectedItems(),m.hide())):(f.stop(t),void this.submitCard(t))},e.prototype.keyupEvent=function(t){var e,r,i,c,l,d,g,y,b,w,_,k,C,x,j;if(e=this.$(".js-card-title"),y=p.getKey(t),y!==h.Tab&&y!==h.Enter){if(y===h.Escape&&e.focus(),p.isArrow(y))return f.stop(t),w=n(null!=(k=m.view)?k.el:void 0),void(m.view instanceof a?f.navMenuList(w.find(".js-members-list"),".item",y):m.view instanceof s?f.navMenuList(w,".js-select-label",y):m.view instanceof u&&w.find(".js-pos-results").length>0&&f.navMenuList(w.find(".js-pos-results"),"li",y));if(!o.isTouch()&&n(t.target).closest(".js-card-title").hasClass("js-card-title")){if(j=f.getWordFromCaret(e[0]),d=/^@\S/.test(j.str.substring(0,2)),l=/^\#\S/.test(j.str.substring(0,2)),g=/^\^\S/.test(j.str.substring(0,2)),C=j.str.substring(1).toLowerCase(),!(d||l||g))return this.model.set("title",this.$(".js-card-title").val()),m.hide();if(y===h.Shift||y===h.Alt||y===h.Control);else{if(d)return x=new a({model:this.model,modelCache:this.modelCache}),i=v.pluck(this.model.getBoard().memberList.filterDeactivated({force:!0}).models,"id"),c=f.filterMembers(this.modelCache,C,i),c.length>0?(m.load(x),x.render(c,!0),m.show({elem:this.$(".js-cc-menu"),view:x,preloaded:!0}),e.focus(),r=n(x.el).find(".js-members-list .item:first"),f.selectMenuItem(n(x.el).find(".js-members-list"),".item",r)):m.hide();if(l)return x=new s({model:this.model,modelCache:this.modelCache}),b=this.model.getBoard().filterLabels(C),b.length>0?(m.load(x),x.render(b),m.show({elem:this.$(".js-cc-menu"),view:x,preloaded:!0}),e.focus(),r=n(x.el).find(".edit-labels-pop-over .js-select-label:first"),f.selectMenuItem(n(x.el).find(".edit-labels-pop-over"),"li",r)):m.hide();if(g)return x=new u({model:this.model,modelCache:this.modelCache}),_=x.filterPos(C),_.hasData?(m.load(x),x.renderPositionResults(_),m.show({elem:this.$(".js-cc-menu"),view:x,preloaded:!0}),e.focus(),r=n(x.el).find(".js-pos-results li:first"),f.selectMenuItem(n(x.el).find(".js-pos-results"),"li",r)):m.hide()}}}},e.prototype.renderSelectedItems=function(){var t,e,r,n,o,i,s,a,u,c,l,d,p,h;for(o=this.model.get("idMembers"),n=!v.isEmpty(o),e=this.$(".js-list-card-composer-members").empty(),p=this.modelCache.get("Member",o),i=0,c=p.length;c>i;i++)d=p[i],e.append("<div class='member js-remove-member' idMember='"+d+"'>"+b.fill("member",d.toJSON())+"</div>");for(u=this.model.get("labels"),r=!v.isEmpty(u),t=this.$(".js-list-card-composer-labels").empty(),h=this.model.labelList.models,s=0,l=h.length;l>s;s++)a=h[s],v.isEmpty(a.get("color"))||t.append("<div class='card-label card-label-"+a.get("color")+"'></div>");this.$(".js-clear-all-items").toggle(r||n)},e.prototype.openMenu=function(t){return f.stop(t),w("Card Composer","Open Selector Menu"),m.toggle({elem:t.target,view:new c({model:this.model,modelCache:this.modelCache})})},e.prototype.clearItems=function(t){return this.model.clearItems()},e.prototype.hide=function(t){this.model.save("vis",!1)},e.prototype.clearAndHide=function(t){return this.clearItems(),this.hide()},e.prototype.scrollIntoView=function(){var t,e;return e=this.$el.offset().top,t=this.$el.closest(".list-cards"),t.scrollTop(e+this.$el.height())},e}(g)},{}],347:[function(t,e,r){var n,o,i,s,a,u,c,l=function(t,e){function r(){this.constructor=t}for(var n in e)d.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},d={}.hasOwnProperty;n=t("jquery"),i=t(99),s=t(421),a=t("underscore"),u=t(418),c=t(34),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.viewTitleKey="select labels",e.prototype.tagName="ul",e.prototype.className="edit-labels-pop-over",e.prototype.events={"mouseenter .item":"hoverLabelSelect","click .card-label":"addOrRemoveLabel"},e.prototype.render=function(t){var e,r,n,o,s,c;return c=this,s=[],e=this.model.getLabels(),t||(t=this.model.getBoard().getLabels()),s=function(){var r,i,s;for(s=[],r=0,i=t.length;i>r;r++)o=t[r],n=a.include(e,o),s.push({id:o.id,color:o.get("color"),name:o.get("name"),isActive:n});return s}(),r={labels:s},this.$el.html(u.fill("select_labels",r)),i.selectMenuItem(this.$(".edit-labels-pop-over"),".js-select-label",this.$(".js-select-label").first()),this},e.prototype.hoverLabelSelect=function(t){return i.selectMenuItem(this.$(".edit-labels-pop-over"),".js-select-label",n(t.target).closest(".js-select-label"))},e.prototype.addOrRemoveLabel=function(t){var e,r;i.stop(t),e=n(t.target).closest(".js-select-label"),e.toggleClass("active"),r=e.attr("data-idlabel"),this.model.toggleLabel(this.modelCache.get("Label",r))?c("Card Composer","Add Label"):c("Card Composer","Remove Label")},e}(s)},{}],348:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m=function(t,e){function r(){this.constructor=t}for(var n in e)f.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},f={}.hasOwnProperty;n=t("jquery"),i=t(73),s=t(14),a=t(481),u=t(99),c=t(421),l=t("underscore"),p=t(418),h=t(34),d=t(76),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return m(e,t),e.prototype.viewTitleKey="select members",e.prototype.events={"mouseenter .item":"hoverMemberSelect","click .item":"addOrRemoveMember",keyup:"keyupEvent"},e.prototype.render=function(t,e){var r,n;return n=this,t=t?t:l.pluck(this.model.getBoard().memberList.filterDeactivated({force:!0}).models,"id"),r={},r.showSearch=!0,(t.length<=5||e)&&(r.showSearch=!1),this.$el.html(p.fill("popover_member_searcher",r)),this.fillMems(t),this.$(".js-filter-emoji").length>0&&this.setTimeout(function(t){return function(){return t.$(".js-filter-emoji").focus().select()}}(this),20),this.$(".js-filter-members").length>0&&this.setTimeout(function(t){return function(){return t.$(".js-filter-members").focus().select()}}(this),20),this},e.prototype.fillMems=function(t){var e,r,n,o,i,s;for(e=this.$(".js-members-list"),e.empty(),s=t.slice(0,5),r=0,o=s.length;o>r;r++)n=s[r],i=this.modelCache.get("Member",n),this.appendSubview(this.subview(a,i,{card:this.model}),e)},e.prototype.filterAndFillMembers=function(t){var e,r,n;r=l.pluck(this.model.getBoard().memberList.models,"id"),n=u.filterMembers(this.modelCache,t,r),n.length>0?(this.fillMems(n),e=this.$(".js-members-list .item:first"),u.selectMenuItem(this.$(".js-members-list"),".item",e)):this.$(".js-members-list").html('<li><p class="empty"></p></li>').find("p").text(d("no matched members"))},e.prototype.hoverMemberSelect=function(t){var e;return e=n(t.target).closest(".item"),
u.selectMenuItem(this.$(".js-members-list"),".item",e)},e.prototype.keyupEvent=function(t){var e,r;r=i.getKey(t),e=n(".js-filter-members").val().trim().toLowerCase(),r===s.Tab||r===s.Enter?(u.stop(t),this.$(".js-members-list .item.selected:first .js-select-member").first().click()):r===s.ArrowUp||r===s.ArrowDown?(u.stop(t),u.navMenuList(this.$(".js-members-list"),".item",r)):this.filterAndFillMembers(e)},e.prototype.addOrRemoveMember=function(t){var e,r,o;u.stop(t),o=n(t.target).closest(".item"),o.toggleClass("active"),r=o.find(".username").text(),e=o.find("[idMember]").attr("idMember"),this.model.toggle("idMembers",e)?h("Card Composer","Add Member"):h("Card Composer","Remove Member")},e}(c)},{}],349:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p=function(t,e){function r(){this.constructor=t}for(var n in e)h.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},h={}.hasOwnProperty;n=t("jquery"),i=t(435),s=t(99),a=t(421),u=t("underscore"),l=t(418),d=t(34),c=t(76),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.viewTitleKey="select position",e.prototype.events={"change .js-select-list":"changeList","change .js-select-position":"changePosition","mouseenter .js-pos-results li":"hoverPosResultsSelect","click .js-select-pos-keyword":"selectPosResult","click .js-select-pos-pos":"selectPosResult","click .js-select-pos-list":"selectPosResult"},e.prototype.render=function(){var t,e;return e=this,t={hideBoard:!0},this.$el.html(l.fill("move_card_controls",t)),this.updateListList(),this},e.prototype.hoverPosResultsSelect=function(t){var e;return e=n(t.target).closest("li"),s.selectMenuItem(this.$(".js-pos-results"),"li",e)},e.prototype.selectPosResult=function(t){var e,r,o,a,u,c;s.stop(t),u=n(t.target).closest("a"),c=u.attr("name"),a=this.model.getList(),r=a.cardList.openCards().length,e=r+1,u.hasClass("js-select-pos-keyword")?"top"===c?(this.model.set("index",0),d("Card Composer","Select Position in List by Autocomplete",'Top of List - Used "Top"')):"bottom"===c&&(this.model.set("index",e),d("Card Composer","Select Position in List by Autocomplete",'Bottom of List - Used "Bottom"')):u.hasClass("js-select-pos-pos")?(this.model.set("index",parseInt(c,10)-1),d("Card Composer","Select Position in List by Autocomplete","Selected Position - Used Number")):u.hasClass("js-select-pos-list")&&(o=r===this.model.get("pos"),this.model.set("list",this.model.getBoard().getList(c)),o?(this.model.set("index",r),d("Card Composer","Select List by Autocomplete","Bottom")):d("Card Composer","Select List by Autocomplete","Not Bottom")),i.hide()},e.prototype.filterPos=function(t){var e,r,n,o,i,a,c,l,d,p,h;for(h=RegExp("^"+s.escapeForRegex(t)),l=RegExp("^"+s.escapeForRegex(t)+"$"),e=this.model.getList().cardList.openCards(),r={keywordList:function(){var t,e,r,n;for(r=["top","bottom"],n=[],t=0,e=r.length;e>t;t++)i=r[t],h.test(i)&&n.push(i);return n}(),indexList:function(){var t,r,o;for(o=[],n=t=1,r=e.length+1;r>=1?r>=t:t>=r;n=r>=1?++t:--t)l.test(String(n))&&o.push(n);return o}(),listList:[]},d=this.model.getBoard().openLists(),o=0,a=d.length;a>o;o++)c=d[o],p=u.compact(c.get("name").toLowerCase().split(/\s+/)),u.find(p,function(t){return h.test(t)})&&r.listList.push(c);return r.hasData=!u.isEmpty(r.keywordList)||!u.isEmpty(r.indexList)||!u.isEmpty(r.listList),r},e.prototype.renderPositionResults=function(t){var e;e={keywordList:t.keywordList.map(function(t){return function(e){return{value:e,indexString:e,listName:t.model.get("list").get("name")}}}(this)),indexList:t.indexList.map(function(t){return function(e){return{value:e,indexString:String(e),listName:t.model.get("list").get("name")}}}(this)),listList:t.listList.map(function(t){return function(e){return{value:e.get("id"),indexString:String(t.model.get("index")+1),listName:e.get("name")}}}(this))},this.$el.html(l.fill("popover_filter_pos_results",e))},e.prototype.updateListList=function(){var t,e,r,o,i,s,a,l,d,p;for(l=this.model.getList(),i=l.id,r=this.model.getBoard(),e=this.$(".js-select-list"),e.empty(),p=u.sortBy(r.openLists(),function(t){return t.get("pos")}),s=0,a=p.length;a>s;s++)l=p[s],d=l.get("name"),o=l.id===i?c("selected list",{listName:d}):d,t=n("<option>").val(l.id).text(o),e.append(t),l.id===i&&(t.attr("selected","selected"),this.$(".js-list-value").text(d));return this.updatePositionList()},e.prototype.updatePositionList=function(){var t,e,r,o,i,s,a,u,c,l,d;if(e=this.$(".js-select-list"),r=this.$(".js-select-position"),a=e.find("option:selected").val(),r.empty(),c=this.model.getList(),l=this.model.getBoard().listList.get(a),o=c.cardList.openCards(),this.model.get("index")>o.length&&this.model.set("index",o.length),0===o.length)return t=n("<option>").val("0").text("1").appendTo(r),void this.$(".js-pos-value").text("1");for(s=u=0,d=o.length;d>=0?d>=u:u>=d;s=d>=0?++u:--u)i=String(s+1),t=n("<option>").val(s).text(i).appendTo(r),s===this.model.get("index")&&t.attr("selected","selected");this.$(".js-pos-value").text(this.model.get("index").toString())},e.prototype.changeList=function(){var t,e,r,n,o,s,a;n=this.model.get("index"),e=this.model.getList().openCards().length,o=e===n,t=this.$(".js-select-list"),r=t.find("option:selected").val(),a=this.model.getBoard().getList(r),this.model.set("list",a),s=a.openCards().length,o?(this.model.set("index",s),d("Card Composer","Change Position by Click","Change List - Bottom")):(this.model.set("index",Math.min(s,n)),d("Card Composer","Change Position by Click","Change List - Not Bottom")),i.hide()},e.prototype.changePosition=function(){var t,e;t=this.$(".js-select-position"),e=parseInt(t.find("option:selected").val(),10),this.model.set("index",e),d("Card Composer","Change Position by Click","Change Position in List"),i.hide()},e}(a)},{}],350:[function(t,e,r){var n,o,i,s,a,u,c,l,d=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;n=t(423),o=t(357),i=t(349),a=t(435),u=t(99),c=t(421),l=t(418),e.exports=s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return d(e,t),e.prototype.viewTitleKey="options",e.prototype.events={"click .js-mem-selector":"openMemSelector","click .js-label-selector":"openLabelSelector","click .js-pos-selector":"openPosSelector"},e.prototype.render=function(){var t;return t=this,this.$el.html(l.fill("popover_selector_menu")),this},e.prototype.openMemSelector=function(t){return u.stop(t),a.pushView({view:o,options:{model:this.model,modelCache:this.modelCache}})},e.prototype.openLabelSelector=function(t){return u.stop(t),a.pushView({view:n,options:{model:this.model,modelCache:this.modelCache,hideOnSelect:!1}})},e.prototype.openPosSelector=function(t){return u.stop(t),a.pushView({view:i,options:{model:this.model,modelCache:this.modelCache}})},e}(c)},{}],351:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p=function(t,e){function r(){this.constructor=t}for(var n in e)h.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},h={}.hasOwnProperty;n=t("jquery"),c=t(216),s=t("bluebird"),i=t(435),a=t(99),u=t(421),l=t(609),d=t("xtend"),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.initialize=function(t){var e;return e=t.links,this.links=e,this.listenTo(this.model.attachmentList,"add remove reset",this.render)},e.prototype.viewTitleKey="attach links",e.prototype.events={"click .js-attach:not([disabled])":"attach"},e.prototype.render=function(){var t,e;return t=function(){var t,r,n,o;for(n=this.links,o=[],t=0,r=n.length;r>t;t++)e=n[t],o.push(d(e,{domain:c(e.url).host,attached:this.model.attachmentList.any(function(t){return t.get("url")===e.url})}));return o}.call(this),this.$el.html(l(t)),this},e.prototype.attach=function(t){var e,r,o;return e=n(t.currentTarget),o=e.attr("data-url"),r=e.attr("data-text"),e.attr("disabled","disabled"),this.model.uploadUrl({url:o,name:r})},e}(u)},{}],352:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S=function(t,e){function r(){this.constructor=t}for(var n in e)B.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},B={}.hasOwnProperty;n=t("jquery"),o=t(429),i=t(180),a=t(22),c=t(72),l=t(73),d=t(435),p=t("bluebird"),h=t(88),m=t(367),f=t(99),g=t(421),v=t("underscore"),C=t(416)("attachment_type_picker"),j=t(34),w=t(76),_=t(102),b=t(197),y=t(205),k=t(403),u=y("AttachmentTypePickerView::FileTooLarge"),x=C.renderable(function(t){var e,r,n,o,i;r=t.hasLargeAttachments,n=t.id,e=t.googleDriveReady,i=t.tipKey,o=t.tipData,null==i&&(i="tip-you-can-drag-and-drop-files-and-links-onto-cards-to-upload-them"),null==o&&(o={}),C.div(".error.js-file-too-large",{style:"margin: 12px 0 6px; display:none;"},function(){r?C.format("that-file-size-exceeds-the-250mb-limit"):C.div(".gold-promo",function(){C.format("that-file-size-exceeds-the-10mb-limit-but-if-you-upgrade-to"),C.icon("trello-gold","trello-gold-you-can-upload-files-up-to-250mb")})}),C.ul(".pop-over-list",function(){C.li(".uploader",function(){return C.a(".fakefile",{href:"#"},function(){return C.format("computer")}),C.form(".realfile",{action:"/1/card/"+n+"/attachments",method:"post",enctype:"multipart/form-data"},function(){return C.input({type:"hidden",name:"token",value:""}),C.input({type:"hidden",name:"format",value:"http"}),C.input(".js-attach-file",{type:"file",name:"file",tabindex:"-1",multiple:""})})}),C.li(function(){return C.a(".js-google-drive-attachment",{href:"#",class:C.classify({disabled:!e})},function(){return C.format("google-drive")})}),C.li(function(){return C.a(".js-dropbox-attachment",{href:"#"},function(){return C.format("dropbox")})}),C.li(function(){return C.a(".js-box-attachment",{href:"#"},function(){return C.format("box")})}),C.li(function(){return C.a(".js-one-drive-attachment",{href:"#"},function(){return C.format("onedrive")})})}),C.hr(),C.label({for:"addLink"},function(){C.format("attach-a-link")}),C.input(".attachment-add-link-input.js-attachment-url.js-autofocus",{type:"text",id:"addLink",placeholder:C.l("paste-any-link-here-ellipsis")}),C.input(".attachment-add-link-submit.js-add-attachment-url",{type:"submit",value:C.l("attach")}),C.hr(),C.p(".quiet.u-bottom",function(){C.format(i,o)})}),e.exports=s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return S(e,t),e.prototype.viewTitleKey="attach from",e.prototype.initialize=function(){return this.listenTo(c,"loaded",this.render)},e.prototype.events={"click .js-google-drive-attachment:not(.disabled)":"openGoogleDriveFilePicker","click .js-dropbox-attachment":"openDropboxFilePicker","click .js-one-drive-attachment":"openOneDriveFilePicker","click .js-box-attachment":"openBoxFilePicker","change .js-attach-file":"startUpload","click .js-add-attachment-url":"addUrl","keydown .js-attachment-url":"keydown",'click a[href^="/gold"]':function(){return j("Attachment","Open Trello Gold Promo - via Attachment Upload Limit")},'click a[href^="/business-class"]':function(){return j("Card Detail","Attachments BC Ad")}},e.prototype._scripts={dropbox:"https://www.dropbox.com/static/api/1/dropbox.js",box:"https://app.box.com/js/static/select.js",oneDrive:"https://js.live.net/v5.0/wl.js"},e.prototype.getData=function(){var t,e,r;e=this._scripts;for(t in e)r=e[t],this._loadOnce(r,function(){})},e.prototype.render=function(){var t,e,r,n;return e=null!=(r=this.model.getBoard())?r.getOrganization():void 0,t={id:this.model.id,hasLargeAttachments:(null!=(n=a.me())?n.isFeatureEnabled("largeAttachments"):void 0)||(null!=e?e.isFeatureEnabled("largeAttachments"):void 0),googleDriveReady:c.loaded},null!=e&&e.isFeatureEnabled("plugins")||(t.tipKey="tip-you-can-attach-other-things-with-bc",t.tipData={url:"/business-class?utm_source=trello&utm_medium=inapp&utm_content=attachments-menu&utm_campaign=bc-upgrade"}),this.$el.html(x(t)),this},e.prototype.startUpload=function(t){var e,r,i,s;return e=n(t.target),r=this.$(".js-file-too-large").hide(),i=v.toArray(e[0].files),s=i.length>0?v.any(i,function(t){return!a.me().canUploadAttachment(t)})?p.reject(u()):p.resolve(i).each(function(t){return function(e){var r;return r=e.name||k(),_(t.model,"upload",e,r)}}(this)):_(f,"uploadFile",a.myToken(),e),s.then(function(){return j("Card Detail","Upload Attachment Complete - Via Picker"),o.show("finished uploading","info","AjaxQueueUpload",2e3),d.hide()}).catch(u,function(){return r.show(),j("Card Detail","Attachment","Upload Error - File Too Large")}).done()},e.prototype._loadOnce=function(t,e){return null==this._loadedScripts&&(this._loadedScripts={}),this._loadedScripts[t]?e():n.getScript(t,function(r){return function(){return r._loadedScripts[t]=!0,e()}}(this))},e.prototype.attachLinks=function(t,e,r){return e?p.resolve(e).call("map",r).each(function(e){return function(r){return i({url:"/1/cards/"+e.model.id+"/attachments",type:"post",data:v.pick(r,"url","mimeType","name")}).then(function(){return j("Card Detail","Upload "+t)}).catch(function(){})}}(this)).then(function(){return d.hide()}).done():void 0},e.prototype.openGoogleDriveFilePicker=function(t){return f.stop(t),_(gapi,"load","picker").then(function(){var t;return t=c.validToken(),_(c,"authorize",t)}).then(function(t){return function(e){var r,o;return r=new google.picker.DocsView,r.setIncludeFolders(!0),o=(new google.picker.PickerBuilder).enableFeature(google.picker.Feature.MULTISELECT_ENABLED).addView(r).setOAuthToken(e).setCallback(function(e){return t.attachLinks("Google drive file",e.docs,b.id)}).build(),o.setVisible(!0),n("iframe.picker-frame[src*=authserviceid]").attr("src",function(){return n(this).attr("src").replace(/authserviceid/g,"fixgoogle")})}}(this)).done()},e.prototype.openDropboxFilePicker=function(t){f.stop(t),this._loadOnce(this._scripts.dropbox,function(t){return function(){Dropbox.init({appKey:window.dropboxClientAppKey}),Dropbox.choose({linkType:"preview",iframe:!0,success:function(e){return t.attachLinks("Dropbox file",e,function(t){return{url:t.link,name:t.name}})}}),n('iframe[src^="https://www.dropbox.com/chooser"]').parent().css("overflow","auto")}}(this))},e.prototype.openOneDriveFilePicker=function(t){var e,r;f.stop(t),e="one drive csrf key",r=Math.random().toString(),this._loadOnce(this._scripts.oneDrive,function(t){return function(){WL.init({client_id:window.oneDriveClientId,redirect_uri:siteDomain+"/onedrive_callback.html"}),h.set(e,r),WL.login({scope:"wl.skydrive wl.signin",redirect_uri:siteDomain+"/onedrive_callback.html?csrf="+r}).then(function(){return WL.fileDialog({mode:"open",select:"single"})}).then(function(e){var r;return t.attachLinks("OneDrive file",null!=e&&null!=(r=e.data)?r.files:void 0,function(t){return{url:t.link,name:t.name}})})}}(this))},e.prototype.openBoxFilePicker=function(t){return f.stop(t),this._loadOnce(this._scripts.box,function(t){return function(){var e,r;return e=new BoxSelect({clientId:window.boxClientId,linkType:"shared",multiselect:!0}),r=function(n){return e.unregister(e.SUCCESS_EVENT_TYPE,r),t.attachLinks("Box file",n,b.id)},e.success(r),e.launchPopup()}}(this))},e.prototype.keydown=function(t){return l.isSubmitEvent(t)?this.addUrl():void 0},e.prototype.addUrl=function(t){var e;e=this.$(".js-attachment-url").val().split(/\s+/),e=v.filter(e,function(t){return/\S/.test(t)}),!v.isEmpty(e)&&e.length<10&&(d.pushView({view:m}),this.attachLinks("link",e,function(t){return{url:t}}))},e}(g)},{}],353:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y=function(t,e){function r(){this.constructor=t}for(var n in e)b.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},b={}.hasOwnProperty;n=t(22),i=t(5),s=t(73),a=t(14),u=t(27),c=t(435),l=t(366),d=t(99),p=t(421),m=t(81),g=t(418),v=t(34),f=t(216),h=t(197),e.exports=m(l,o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return y(e,t),e.prototype.viewTitleKey="copy card",e.prototype.initialize=function(t){var e;return this.onCopy=null!=(e=t.onCopy)?e:function(){}},e.prototype.showCurrentPosition=!0,e.prototype.events={"change .js-select-position":"renderValues","change .js-select-list":"updatePositionList","change .js-select-board":"updateBoardData",'keydown textarea[name="name"]':"keydownEvent","click .js-submit":"submit","submit form":"submit"},e.prototype.render=function(){var t,e,r,o,i,s,a,u,c,l,d,p;for(e=this.model.toJSON(),e.numChecklists=this.model.checklistList.length,e.numMembers=e.idMembers.length,e.numLabels=null!=(c=null!=(l=e.idLabels)?l.length:void 0)?c:0,e.numAttachments=e.badges.attachments,e.numComments=e.badges.comments,e.numStickers=e.stickers.length,e.hasChecklists=e.numChecklists>0,e.hasMembers=e.idMembers.length>0,e.hasLabels=e.numLabels>0,e.hasAttachments=e.badges.attachments>0,e.hasComments=e.badges.comments>0,e.hasStickers=e.stickers.length>0,e.hasStuff=e.numChecklists+e.idMembers.length+e.numLabels+e.badges.attachments+e.badges.comments+e.stickers.length>0,e.loading=this.loading,e.organizations=n.me().getOpenBoardsByOrg(!0),d=e.organizations,r=0,i=d.length;i>r;r++)for(a=d[r],p=a.boards,o=0,s=p.length;s>o;o++)t=p[o],t.id===this.model.get("idBoard")&&(t.selected=!0);return u={move_card_controls:g.move_card_controls},this.$el.html(g.fill("card_copy",e,{editable:this.model.editable()},u)),this.updateBoardData(),this},e.prototype.getData=function(){return this.loading=!0,u.loadCardCopyData(this.model.get("idBoard"),this.model.id).finally(function(t){return function(){return t.loading=!1,t.render()}}(this)).done()},e.prototype.keydownEvent=function(t){s.getKey(t)===a.Enter&&(d.stop(t),this.submit(t))},e.prototype.submit=function(t){var e,r,n,o;return d.stop(t),n=this.$('textarea[name="name"]'),""===n.val().trim()?void n.focus().select():(r=["due"],o=this.$("input:checkbox:checked").get().map(h.get("name")),e=r.concat(o),void this.model.copyTo({name:n.val().trim(),idList:this.$(".js-select-list").find("option:selected").val(),pos:this.$(".js-select-position").find("option:selected").val(),keepFromSource:e}).then(function(t){return function(){return c.hide(),t.onCopy(),v("Card","Copy Card")}}(this)))},e}(p))},{}],354:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f=function(t,e){function r(){this.constructor=t}for(var n in e)g.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},g={}.hasOwnProperty;n=t(395),o=t(353),s=t(430),a=t(61),u=t(432),c=t(435),l=t(99),d=t(421),h=t(418),m=t(34),p=t("underscore"),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return f(e,t),e.prototype.viewTitleKey="more",e.prototype.events={"click .js-copy-card":"copyCard","click .js-delete":"deleteCard","click .js-short-url, .js-email":function(t){return this.focusUrl(t.currentTarget)},"click .js-print":"printModel","click .js-export-json":"exportJSON"},e.prototype.initialize=function(){return this.listenTo(this.model,"change:shortUrl",this.render)},e.prototype.copyCard=function(t){m("Card Detail","Card Copy Button","Via More Menu"),c.pushView({view:o,options:{model:this.model,modelCache:this.modelCache}})},e.prototype.focusUrl=function(t){return this.$(t).focus().select()},e.prototype.getShortLinkData=function(){null==this.model.get("shortUrl")&&this.model.fetch({fields:["shortUrl"]})},e.prototype.deleteCardConfirm=function(t){s.pushView("delete card",{model:this.model,confirmBtnClass:"negate",fxConfirm:function(t){return function(e){return u.hide(),t.model.destroy(),m("Card","Delete")}}(this)})},e.prototype.render=function(){var t,e;return e={dateAdded:l.idToDate(this.model.id),jsonURL:"/"+this.model.typeName.toLowerCase()+"/"+this.model.id+"/"+l.makeSlug(this.model.get("name"))+".json"},t=this.model.getBoard(),null!=t&&p.extend(e,{pLevelClass:n.getPermLevelIconClassForBoard(t),pLevelAltText:n.getPermLevelAltTextForBoard(t)}),this.$el.html(h.fillFromModel("card_detail_more_menu",this.model,e,{meta:h.card_menu_meta})),this.getShortLinkData(),a.update(this.el),this.focusUrl(this.$(".js-autofocus")[0]),this},e.prototype.deleteCard=function(t){l.stop(t),m("Card Detail","Delete Button","Via More Menu"),this.deleteCardConfirm()},e.prototype.printModel=function(t){l.stop(t),c.hide(),m("Card Detail","Print","Via More Menu"),this.defer(function(){return window.print()})},e.prototype.exportJSON=function(t){return m("Card Detail","Export JSON")},e}(d)},{}],355:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,B,M,T,O,L,P,A,E,D,V,I,N,$,z,F,R,U,q,H,K,W,J,G,Q,Y,X,Z,tt,et,rt,nt,ot,it,st,at,ut,ct,lt,dt,pt,ht,mt,ft,gt,vt,yt,bt,wt,_t=function(t,e){function r(){this.constructor=t}for(var n in e)kt.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},kt={}.hasOwnProperty;n=t("jquery"),o=t(229),i=t(368),s=t(429),a=t(247),u=t(352),c=t(248),l=t(22),d=t(388),p=t(389),h=t(60),m=t(353),f=t(354),v=t(423),y=t(357),b=t(358),w=t(359),_=t(371),k=t(391),C=t(430),x=t(5),j=t(362),S=t(61),B=t(432),t(397),M=t(433),T=t(399),O=t(400),L=t(363),P=t("hearsay"),A=t(73),E=t(14),D=t(163),V=t(427),I=t(434),N=t(226),$=t(479),z=t(26),F=t(27),R=t(82),U=t(526),q=t(528),H=t(408),K=t(411),W=t(536),J=t(435),G=t("bluebird"),Q=t(551),Y=t(88),X=t(79),Z=t(99),tt=t(115),et=t("underscore"),ct=t(197),lt=t(401),mt=t(31),ft=t(81),bt=t(34),gt=t("moment"),dt=t(76),ht=t(75),yt=t(403),wt=t(422),vt=t(102),st=t(612),ot=t(614),nt=t(613),it=t(616),pt=t(665),at=t(617),rt=t(563),ut=t(635),e.exports=ft(d,k,w,g=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return _t(e,t),e.prototype.className="card-detail-window u-clearfix",e.prototype.defaultActionLimit=50,e.prototype.maxActionLimit=1e3,e.prototype.maximumCommentLength=16384,e.prototype.initialize=function(){this.makeDebouncedMethods("render","renderCover","renderStickers","renderName","renderDescription","renderArchived","renderLabels","renderList","renderVotes","renderDueDate","renderSubscribe","renderAttachments","renderMembers","renderAging"),this.listenTo(this.model,{"change:name":this.renderNameDebounced,"change:desc":this.renderDescriptionDebounced,"change:closed":this.renderArchivedDebounced,"change:labels":this.renderLabelsDebounced,"change:idList":this.renderListDebounced,"change:idMembersVoted":this.renderVotesDebounced,"change:due":this.renderDueDateDebounced,"change:subscribed":this.renderSubscribeDebounced,"change:dateLastActivity":this.renderAgingDebounced,"change:idAttachmentCover":function(){return this.renderCoverDebounced()},remove:this.closeDialog}),this.listenTo(this.model.labelList,"add remove reset change",function(t){return function(){return t.renderLabelsDebounced()}}(this)),this.listenTo(this.model.memberList,{"add remove reset":this.renderMembersDebounced}),this.listenTo(this.model.memberVotedList,{"add remove reset":this.renderVotesDebounced}),this.listenTo(this.model.checklistList,{"add reset":this.renderChecklists,remove:this.removeChecklist,sort:this.sortChecklists}),this.listenTo(this.model.attachmentList,{"add remove reset":this.renderAttachmentsDebounced}),this.listenTo(this.model.stickerList,{"add remove reset change sort":this.renderStickersDebounced}),this.listenTo(this.model.memberEditingList,{"add remove reset change:action":this.renderEditing}),this.listenTo(this.model.getBoard(),{"change:labelNames":this.renderLabelsDebounced,"change:labels":this.renderLabelsDebounced,"change:prefs":function(t){var e,r;return e=function(e){var r,n;return(null!=(r=t.get("prefs"))?r[e]:void 0)!==(null!=(n=t.previous("prefs"))?n[e]:void 0)},e("cardCovers")&&this.renderCover(),r=e("cardAging")||e("comments")||e("voting"),r&&0===this.$(".editing").length?this.renderDebounced():void 0}}),this.getData(),this.numAttachmentsProcessing=this.slot(0),this.watch("numAttachmentsProcessing",this.renderProcessingAttachments),this.actionListView=this.collectionSubview(o,this.model.actionList,{renderOpts:{context:this.model,compact:!1}}),this.markNotificationsReadOnActive(),this.listenTo(z,"add:Notification",this.markNotificationsReadOnActive),this.listenTo(I,"cancelEdits",this.saveCommentDraft),n(window).on("beforeunload.CardDetailView-"+this.model.cid,ct(this,"saveCommentDraft"))},e.prototype.remove=function(){this.saveCommentDraft(),n(window).off(".CardDetailView-"+this.model.cid),e.__super__.remove.apply(this,arguments)},e.prototype.markNotificationsReadOnActive=function(){"active"!==R.getStatus()||R.getHidden()?this.listenToOnce(R,"setStatus visibilitychange",this.markNotificationsReadOnActive):this.markRelatedNotificationsRead()},e.prototype.markRelatedNotificationsRead=function(){var t,e,r,n,o;for(e=function(t){return function(e){var r,n;return e.get("unread")&&(null!=(r=e.get("data"))&&null!=(n=r.card)?n.id:void 0)===t.model.id}}(this),o=this.modelCache.all("Notification"),t=0,r=o.length;r>t;t++)n=o[t],e(n)&&n.markRead()},e.prototype.events={"click .js-edit-labels":"editLabelsSidebar","click .js-change-card-members":"changeMembersSidebar","click .js-add-checklist-menu":"addChecklistSidebar","click .js-add-due-date":"dueDateSidebar","click .js-attach":"openAttachPicker","click .js-move-card":"moveCard","click .js-copy-card":"copyCard","click .js-subscribe":"subscribeToCard","click .js-unsubscribe":"unsubscribeFromCard","click .js-vote":"vote","click .js-unvote":"unvote","click .js-archive-card":"archiveCard","click .js-unarchive-card":"unarchiveCard","click .js-delete-card":"deleteCardSidebar","click .js-more-menu":"showMoreMenu","click .js-open-card-cover-in-viewer":"openCoverInViewer","click .js-open-move-from-header":"openMoveFromHeader","click .js-details-edit-members":"editMembersMain","click .js-details-edit-labels":"editLabelsMain","click .js-edit-label .card-label":"editLabelsMainSingleLabel","click .js-details-edit-due-date":"showDueDateBadgeMenu","click .js-show-votes":"showVotes","click .js-edit-desc":"editDesc","click .js-member-on-card-menu":"openMemberOnCardMenu","click .js-format-help":"openFormatHelp","click .js-view-some-attachments":"showFewerAttachments","click .js-view-all-attachments":"showMoreAttachments","click .js-show-all-actions":"showAllActions","keydown .js-new-comment-input":"keydownCommentEvent","input .js-new-comment-input":"commentInputEvent","mutated .js-new-comment-input":"commentInputEvent","click .js-add-comment:not(:disabled)":"submitComment","click .js-attach-comment":"attachComment","click .js-truncate-comment":"truncateComment","click .js-new-comment":"inputComment","focus .js-new-comment-input":"inputComment","keyup .js-new-comment-input":"keyAutoMention",click:"clickAwayFromComment","click .js-new-comment .js-comment-add-attachment":"commentAddAttachment","click .js-new-comment .js-comment-mention-member":"commentMentionMember","click .js-new-comment .js-comment-add-emoji":"commentAddEmoji","click .js-new-comment .js-comment-add-card":"commentAddCard","dd-enter:files":"dragenter","dd-leave:files":"dragleave","dd-drop:files":"dropFiles","dd-enter:url":"dragenter","dd-leave:url":"dragleave","dd-drop:url":"dropUrl","userinput-paste:files":"dropFiles","userinput-paste:url":"dropUrl","sortstop .js-checklist-list":"sortStop",shortcut:"shortcut",replyToAction:"replyToAction"},e.prototype.shortcut=function(t){var e,r,n,o,i,s,a;switch(e=this.model.getBoard(),r=this.model.editable(),o=l.isLoggedIn(),t){case E.Space:if(r)return this.model.toggleMember(l.myId()),["Space - Toggle Assigning Self","Card Detail"];break;case E.A:case E.M:if(r)return this.changeMembersSidebar(),["A - Assign Members","Card Detail"];break;case E.E:if(r)return this.editDesc(),["E - Edit Description","Card Detail"];break;case E.L:if(r)return this._openEditLabelsSidebar({hideOnSelect:!1}),["L - Edit Labels","Card Detail"];break;case E.D:if(r)return null!=this.model.get("due")?this.showDueDateBadgeMenu():this.dueDateSidebar(),["D - Due Dates","Card Detail"];break;case E.C:case E.Delete:if(r)return this.archiveCard(),["C / Delete - Archive Card"];break;case E.T:if(r)return this.editTitle(),"T - Edit Title";break;case E.AngleRight:case E.Period:if(r)return this.model.moveToNextList(),"> - Move to Next List";break;case E.AngleLeft:case E.Comma:if(r)return this.model.moveToPrevList(),"< - Move to Previous List";break;case E._0:case E._1:case E._2:case E._3:case E._4:case E._5:case E._6:case E._7:case E._8:case E._9:if(r)return n=function(t){return function(e){return t._openEditLabelsSidebar({searchInit:e,hideOnSelect:!0})}}(this),V.setLabelFromKey(t,this.model,n),"0-9 - Toggle Specific Label";break;case E.V:if(e.canVote(l.me()))return this.model.toggleVote(),"V - Vote";break;case E.S:if(o)return a=this.model.get("subscribed"),this.model.subscribe(!a),["S - Subscribe",a?"Unsubscribe":"Subscribe"];break;case E.J:if(null!=(i=this.model.nextCard()))return x.showCardDetail(i,null,!0),"J - Down";break;case E.K:if(null!=(s=this.model.prevCard()))return x.showCardDetail(s,null,!0),"K - Up"}},e.prototype.incrementNumAttachmentsProcessing=function(t){return null==t&&(t=1),this.numAttachmentsProcessing.update(ct.add(t))},e.prototype.decrementNumAttachmentsProcessing=function(t){return null==t&&(t=1),this.numAttachmentsProcessing.update(ct.sub(t))},e.prototype.getData=function(){this.loading=!0,this.$(".js-loading-card-actions").show(),this.waitForId(this.model,function(t){return function(){var e;return e=t.fShowAllActions?t.maxActionLimit:t.defaultActionLimit,F.loadCardDetails(t.model.id,e).finally(function(){return t.loading=!1,t.$(".js-loading-card-actions").hide()}).then(function(){return t.renderShowAllActionsButton()}).done()}}(this))},e.prototype.render=function(){var t;return this.fShowAllAttachments=!1,this.fShowAllActions=!1,t=et.extend(this.model.toJSON(),{canComment:this.model.getBoard().canComment(l.me()),canVote:this.model.getBoard().canVote(l.me()),canSubscribe:l.isLoggedIn(),hasAttachments:this.model.attachmentList.length>0,dateAdded:null!=this.model.id?Z.idToDate(this.model.id):new Date,me:l.me().toJSON(),loading:this.loading,editable:this.model.editable()}),t.showActions=t.canVote||t.canSubscribe,this.$el.html(st(t)),this.actionListView.setElement(this.$(".js-list-actions")[0]),this.commentInput=this.$(".js-new-comment-input")[0],this.renderCover().renderStickers().renderName().renderDescription().renderList().renderActionList().renderMembers().renderArchived().renderChecklists().renderSubscribe().renderVotes().renderDueDate().renderAttachments().renderLabels().renderAging().renderEditing().renderPluginBadges().renderPluginButtons(),t.canComment&&this.recallDrafts(),this.$(".js-new-comment-input").autosize(),this.defer(et.bind(this.fixSidebar,this)),S.update(this.el),this},e.prototype._commentDraftKey=function(){return"draft_"+this.model.id+"_comment"},e.prototype.recallDrafts=function(){var t;return t=Y.get(this._commentDraftKey()),t&&this.$(".js-new-comment-input").val(t),this.renderCommentSubmitAbility(),e.__super__.recallDrafts.apply(this,arguments)},e.prototype.saveCommentDraft=function(){var t,e;t=this.$(".js-new-comment-input"),0!==t.length&&(e=t.val(),e?Y.set(this._commentDraftKey(),e):Y.unset(this._commentDraftKey()))},e.prototype.setRelativeSidebarPos=function(){return this.fFixed=!1,this.fRelative=!0,this.$(".window-sidebar").css({left:"",top:"",position:"relative"})},e.prototype.setFixedSidebarLeftPos=function(){var t,e;return this.fFixed?(e=parseFloat(n(".window").offset().left),t=e+n(".window").width()-this.$(".window-sidebar").outerWidth(),this.$(".window-sidebar").css({left:t})):void 0},e.prototype.setFixedSidebarPos=function(){return this.fFixed=!0,this.fRelative=!1,this.setFixedSidebarLeftPos(),this.$(".window-sidebar").css({top:0,position:"fixed"})},e.prototype.fixSidebar=function(){var t,e,r,o,i;t=n(".window-overlay").off("scroll.fixSidebar"),this.fFixed=!1,this.fRelative=!1,e=parseInt(n(".window").css("margin-top")),r=parseInt(this.$(".window-sidebar").css("padding-top")),i=function(o){return function(){var i,s,a,u,c,l;a=o.$(".window-header").outerHeight(),
s=null!=(u=o.$(".window-cover:visible").outerHeight())?u:0,i=null!=(c=o.$(".window-archive-banner:visible").outerHeight())?c:0,l=e+a+s+i+r,t.scrollTop()<=l||tt.fSmall||o.$(".window-sidebar").height()>n(window).height()?o.fRelative||o.setRelativeSidebarPos():o.fFixed||o.setFixedSidebarPos()}}(this),o=this.throttle(i,32),t.on("scroll.fixSidebar",o)},e.prototype.editDesc=function(t){Z.stop(t),this.edit("desc")},e.prototype.editTitle=function(t){this.$(".card-detail-title .current").click()},e.prototype.archiveCard=function(t){this.model.close(),bt("Card Detail","Sidebar","Archive Button")},e.prototype.unarchiveCard=function(t){bt("Card Detail","Sidebar","Re-Open Button"),this.model.reopen()},e.prototype.deleteCardSidebar=function(t){C.toggle("delete card",{elem:t.target,model:this.model,confirmBtnClass:"negate",fxConfirm:function(t){return function(e){return B.hide(),t.model.destroy(),bt("Card","Delete")}}(this)}),bt("Card Detail","Sidebar","Open Delete Confirm")},e.prototype.showMoreMenu=function(t){Z.stop(t),J.toggle({elem:this.$(".js-more-menu"),view:f,options:{model:this.model,modelCache:this.modelCache}}),bt("Card Detail","Sidebar","Open More Menu")},e.prototype.openCoverInViewer=function(t){var e;Z.stop(t),this.showCover()&&(e=this.model.attachmentList.get(this.model.get("idAttachmentCover")),new c({model:this.model,modelCache:this.modelCache,attachmentModel:e}).render(),bt("Card Detail","Open Attachment Viewer via Cover",e.getType()))},e.prototype.openMoveMenu=function(t){J.toggle({elem:t,view:b,options:{model:this.model,modelCache:this.modelCache}})},e.prototype.openMoveFromHeader=function(t){Z.stop(t),this.openMoveMenu(this.$(".js-open-move-from-header"),20),bt("Card Detail","Move Button (via Header)")},e.prototype.moveCard=function(t){Z.stop(t),this.openMoveMenu(this.$(".js-move-card"),35),bt("Card Detail","Sidebar","Open Move Menu")},e.prototype.copyCard=function(t){Z.stop(t),J.toggle({elem:this.$(".js-copy-card"),view:m,options:{model:this.model,modelCache:this.modelCache}}),bt("Card Detail","Sidebar","Open Copy Menu")},e.prototype.openLabelsPopOver=function(t,e){J.toggle({elem:t,view:v,options:et.extend({model:this.model,modelCache:this.modelCache},e)})},e.prototype.editLabelsMainSingleLabel=function(t){Z.stop(t),this.openLabelsPopOver(this.$(t.target).closest(".card-label")),bt("Card Detail","Edit Labels Main Column - Single Label")},e.prototype.editLabelsMain=function(t){Z.stop(t),this.openLabelsPopOver(this.$(".js-details-edit-labels")),bt("Card Detail","Edit Labels Main Column - Plus Button")},e.prototype.editLabelsSidebar=function(t){return Z.stop(t),bt("Card Detail","Sidebar","Edit Labels Button"),this._openEditLabelsSidebar()},e.prototype._openEditLabelsSidebar=function(t){return this.openLabelsPopOver(this.$(".js-edit-labels"),t)},e.prototype.showVotes=function(t){Z.stop(t),J.toggle({elem:this.$(".js-show-votes"),view:$,options:{model:this.model,modelCache:this.modelCache}}),bt("Card Detail","Header Vote Button")},e.prototype.doClicks=function(){return!M.sorting},e.prototype.showCover=function(){return this.model.getBoard().getPref("cardCovers")&&this.model.hasCover()},e.prototype.checkShowCover=function(){var t,e;t=this.showCover(),e=this.model.hasStickers(),t?this.$(".js-card-cover-box").removeClass("hide window-cover-stickers-only").addClass("is-covered"):e?this.$(".js-card-cover-box").removeClass("hide is-covered").addClass("window-cover-stickers-only"):this.$(".js-card-cover-box").addClass("hide")},e.prototype.clearCover=function(){var t;return this.$(".js-card-cover-box").css({"background-color":"","background-image":""}),t=["dialog-close-button-light","dialog-close-button-dark"],n(".dialog-close-button").removeClass(t.join(" "))},e.prototype.renderCover=function(){var t,e,r,o,i,s,a,u,c,l,d,p,m,f,g,v,y,b,w,_;return this.clearCover(),this.showCover()&&(i=this.model.attachmentList.get(this.model.get("idAttachmentCover")),o=40,e=160,r=730,null!=i&&(h.isHighDPI()?(f=2*r,m=2*e):(f=r,m=e),v=i.get("previews"),g=null!=(b=Z.previewBetween(v,0,m,f,1/0))?b:Z.biggestPreview(v),c=null!=g?g.url:i.get("url"),t=this.$(".js-card-cover-box"),null!=(l=i.get("edgeColor"))&&(w=l.match(/[0-9a-f]{2}/gi).map(function(t){return parseInt(t,16)}),y=w[0],d=w[1],a=w[2],t.css("background-color","rgb("+y+", "+d+", "+a+")"),s=(y+d+a)/3,s>150?u="dark":105>s&&(u="light"),null!=u&&n(".dialog-close-button").addClass("dialog-close-button-"+u)),p=Math.max(o,Math.min(null!=(_=null!=g?g.height:void 0)?_:e,e)),this.$(".js-card-cover-box").css({"background-image":'url("'+c+'")',height:p,"background-size":(null!=g?g.height:void 0)<p?"initial":"contain"}))),this.checkShowCover(),this},e.prototype.renderPluginButtons=function(){var t;return t=this.subview(U,this.model),this.appendSubview(t,this.$(".js-plugin-buttons")),this},e.prototype.renderPluginBadges=function(){var t;return t=this.subview(q,this.model),this.appendSubview(t,this.$(".js-plugin-badges")),this},e.prototype.renderStickers=function(){var t,e,r,n,o;return t=this.$(".js-display-stickers").empty(),n=this.model.stickerList.models,e=n.length>0,e&&(o=function(){var t,e,o;for(o=[],t=0,e=n.length;e>t;t++)r=n[t],o.push(this.subview(Q,r,{board:this.model}));return o}.call(this),this.appendSubviews(o,t)),this.checkShowCover(),this},e.prototype.renderName=function(){var t,e;return e=this.model.get("name"),t=this.model.getBoard().get("name"),this.$(".js-card-title").text(e),x.title(et.unescape(dt("card detail title",{cardName:e,boardName:t}))),this},e.prototype.renderDescription=function(){var t,e,r,n;return e=this.model.get("desc"),r=X.description.format(null!=e?e:"",{textData:this.model.get("descData")}).output,t=this.$(".js-card-desc"),t.empty().append(r).data("unmarkeddown",e),lt(t[0],this.model.getBoard()),n=!/^\s*$/.test(r),this.$(".js-show-with-desc").toggleClass("hide",!n),this.$(".js-hide-with-desc").toggleClass("hide",n),this},e.prototype.renderList=function(){var t;return t=this.model.getList(),null!=t&&this.$(".js-current-list").removeClass("hide").html(ot({listName:t.get("name"),editable:this.model.editable()})),this},e.prototype.renderArchived=function(){var t;return t=this.model.get("closed")===!0,this.$(".js-archive-banner").toggleClass("hide",!t),this.$(".js-archive-card").toggleClass("hide",t),this.$(".js-unarchive-card").toggleClass("hide",!t),this.$(".js-delete-card").toggleClass("hide",!t),this},e.prototype.showAllActions=function(t){return this.fShowAllActions=!0,this.renderShowAllActionsButton(),this.getData()},e.prototype.renderShowAllActionsButton=function(){var t,e;return e=this.model.actionList.models.length>=this.defaultActionLimit,t=this.fShowAllActions||!e,this.$(".js-show-all-actions").toggleClass("hide",t)},e.prototype.renderActionList=function(){return this.waitForId(this.model,function(t){return function(){return t.actionListView.render()}}(this)),this},e.prototype.renderMembers=function(t){var e,r,n,o;return e=this.$(".js-card-detail-members-list").empty(),o=this.model.memberList.filterDeactivated({model:this.model.getBoard()}).models,n=function(){var t,e,n;for(n=[],t=0,e=o.length;e>t;t++)r=o[t],n.push(this.getMemberOnCardHtml(r));return n}.call(this).join(""),e.html(n),this.model.editable()&&e.append(nt({klass:"js-details-edit-members"})),this.$(".js-card-detail-members").toggleClass("hide",0===o.length),this},e.prototype.renderLabels=function(){var t,e,r,n;return e=this.model.getLabels().sort(D.compare),t=this.$(".js-card-detail-labels-list").empty(),n=function(){var t,n,o;for(o=[],t=0,n=e.length;n>t;t++)r=e[t],o.push(pt(this.model.dataForLabel(r)));return o}.call(this),t.append(n),this.model.editable()&&t.append(nt({klass:"js-details-edit-labels"})).addClass("editable-labels js-edit-label"),this.$(".js-card-detail-labels").toggleClass("hide",0===e.length),this},e.prototype.renderSubscribe=function(){var t,e,r;return t=this.$(".js-subscribe-sidebar-button"),e={subscribed:this.model.get("subscribed")||(null!=(r=this.model.get("badges"))?r.subscribed:void 0)},t.html(it(e)),this.$(".js-subscribed-indicator-header").toggleClass("hide",!e.subscribed),this},e.prototype.renderAging=function(){var t,e,r,n;return r=this.model.getBoard(),e=r.isPowerUpEnabled("cardAging"),t=this.$(".js-card-detail-age-badge").removeClass(this.model.getAllAgingClasses()),e&&(n=this.model.getAgingData(),t.removeData("date").attr("dt",this.model.get("dateLastActivity")),"pirate"===n.mode&&t.addClass(n.agingClassesToAdd),S.update(this.$(".js-card-detail-age"))),this.$(".js-card-detail-age").toggleClass("hide",!e),this},e.prototype.renderDueDate=function(){var t,e,r,n;return(e=this.model.get("due"))?(n=gt(e).calendar(),r=T.relativeInfoForDueDate(e),null!=r&&(n+=" ("+r+")"),t=[],t.push(T.classForDueDate(e)),this.model.editable()&&t.push("js-details-edit-due-date","is-clickable"),this.$(".js-card-detail-due-date-badge").removeClass(function(t,e){return(e.match(/is-due-\S+/g)||[]).join(" ")}).addClass(t.join(" ")).attr("title",T.titleForDueDate(e)).text(n),this.$(".js-card-detail-due-date").removeClass("hide"),this):(this.$(".js-card-detail-due-date").addClass("hide"),this)},e.prototype.renderVotes=function(){var t,e,r,n,o,i,s;return e={voted:this.model.voted(),canVote:this.model.getBoard().canVote(l.me())},t=this.$(".js-vote-sidebar-button"),t.html(at(e)),r=null!=(n=null!=(o=this.model.get("badges"))?o.votes:void 0)?n:0,r&&this.$(".js-card-detail-votes-badge").text(ht("votes",r)).toggleClass("is-voted",null!=(i=null!=(s=this.model.get("badges"))?s.viewingMemberVoted:void 0)?i:!1),this.$(".js-card-detail-votes").toggleClass("hide",0===r),this},e.prototype.sortChecklists=function(){var t;return t=this.$(".js-checklist-list"),Z.withoutAlteringSelection(function(e){return function(){return e.model.checklistList.forEach(function(r){var n;return n=e.existingSubview(_,r),t.append(n.el)})}}(this)),this},e.prototype.removeChecklist=function(t){return this.deleteSubview(this.existingSubview(_,t))},e.prototype.renderChecklists=function(){var t,e,r,o;return mt("render","rendering checklists"),t=this.$(".js-checklist-list").empty(),o=function(){var t,r,n,o;for(n=this.model.checklistList.models,o=[],t=0,r=n.length;r>t;t++)e=n[t],o.push(this.subview(_,e,{card:this.model}));return o}.call(this),this.appendSubviews(o,t),M.refreshIfInitialized(t),(null!=(r=this.model)?r.editable():void 0)&&this.$(".js-checklist-list").sortable({axis:"y",handle:".window-module-title",delay:75,distance:7,tolerance:"pointer",placeholder:"checklist placeholder",items:".checklist",start:function(t,e){var r;return r=n(e.helper).outerHeight(),n(e.placeholder).height(r)}}),this},e.prototype.showFewerAttachments=function(t){Z.stop(t),this.fShowAllAttachments=!1,this.renderAttachments()},e.prototype.showMoreAttachments=function(t){Z.stop(t),this.fShowAllAttachments=!0,this.renderAttachments()},e.prototype.renderAttachments=function(){var t,e;return null!=(e=this._renderAttachmentsPromise)&&e.cancel(),t=et.clone(this.model.attachmentList.models),this._renderAttachmentsPromise=G.try(function(e){return function(){return K.all({timeout:1e3,command:"attachment-sections",card:e.model,board:e.model.getBoard(),options:{entries:H.attachments(t)}})}}(this)).cancellable().then(function(e){return function(r){var n,o,i,s,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k;return d={},k={},u=e.$(".js-plugin-sections"),_=function(){var t,e,n,o,i,s;for(s=[],t=0,n=r.length;n>t;t++){for(y=r[t],i=y.claimed,e=0,o=i.length;o>e;e++)p=i[e],d[p.id]=!0;w=y.id||y.title,k[w]&&(w=et.uniqueId(w)),k[w]=!0,b=this.subview(W,this.model,{},w),b.updateSection(y),s.push(b)}return s}.call(e),e.ensureSubviews(_,u),v=et.reject(t,function(t){return d[t.id]}),g=4,h=v.length>0,l=v.slice(0,g),m=v.length>g,o=e.$(".js-attachments-section"),n=o.find(".js-attachment-list"),f=(v.length-g).toString(),o.find(".js-view-all-attachments").text(dt("view all attachments",{hiddenCount:f})),i=o.find(".js-show-fewer-attachments").addClass("hide"),s=o.find(".js-show-more-attachments").addClass("hide"),o.toggleClass("hide",!h),_=[],h&&(m&&(e.fShowAllAttachments?(i.removeClass("hide"),l=e.model.attachmentList.models):s.removeClass("hide")),_=function(){var t,e,r;for(r=[],t=0,e=l.length;e>t;t++)c=l[t],r.push(this.subview(a,c));return r}.call(e)),e.ensureSubviews(_,n)}}(this)).catch(G.CancellationError,function(){}),this._renderAttachmentsPromise.done(),this},e.prototype.renderProcessingAttachments=function(t){return this.$(".js-attachment-thumb-processing").remove(),et.times(t,this.addProcessingAttachmentElement)},e.prototype.addProcessingAttachmentElement=function(){var t;t=this.$(".js-attachments-section .js-attachment-list"),t.prepend(rt())},e.prototype.renderEditing=function(){var t,e,r,n;return n=this.model.memberEditingList.models,t={members:function(){var t,o,i;for(i=[],t=0,o=n.length;o>t;t++)e=n[t],l.isMe(e)||null==e.get("editing")||(r=e.toJSON(),r.icon=function(){switch(e.get("editing").action){case"commenting":return"comment";case"editing":return"edit";default:return"edit"}}(),i.push(r));return i}()},this.$(".js-editing-members").empty().append(ut(t)).toggleClass("hide",0===t.members.length),this},e.prototype.sortStop=function(t,e){Z.stopPropagation(t),e.item.trigger("movechecklist",[e])},e.prototype.keydownEvent=function(t){return e.__super__.keydownEvent.apply(this,arguments),l.me().editing({idBoard:this.model.getBoard().id,idCard:this.model.id,action:"editing"})},e.prototype.keydownCommentEvent=function(t){var e;return l.me().editing({idBoard:this.model.getBoard().id,idCard:this.model.id,action:"commenting"}),e=A.getKey(t),e!==E.Tab||!n(t.target).hasClass("new-comment-input")||!this.model.editable()||J.view instanceof p||""!==n(t.target).val()||(Z.stop(t),this.submitComment(t)),A.isForceSubmitEvent(t)?this.submitComment(t):this.checkInsert(t)},e.prototype.checkLength=function(t){var e;return e=this.$(".js-new-comment-input").val().length>this.maximumCommentLength,this.$(".js-add-comment").prop("disabled",e),this.$(".comment-too-long-warning").toggleClass("is-shown",e),this.$(".comment-too-long-warning").find(".js-attach-comment").toggle("undefined"!=typeof Blob&&null!==Blob)},e.prototype.renderCommentSubmitAbility=function(t){var e;return e=0===this.$(".js-new-comment-input").val().length,this.$(".js-add-comment").prop("disabled",e),this},e.prototype._cancelEditing=function(){return l.me().editing({idBoard:this.model.getBoard().id})},e.prototype.commentInputEvent=function(t){return this.checkLength(),this.renderCommentSubmitAbility(),this},e.prototype.submitComment=function(t){var e,r;return bt("Card Detail","Comment","Submit Comment"),Z.stop(t),e=n(this.commentInput),r=e.val(),e.val("").css("height",""),this._cancelEditing(),this.model.addComment(r),I.cancelEdits(),this.collapseComment(),this.renderCommentSubmitAbility(),!1},e.prototype.clearEdits=function(){return this._cancelEditing(),e.__super__.clearEdits.apply(this,arguments)},e.prototype.commitEdits=function(){return this._cancelEditing(),e.__super__.commitEdits.apply(this,arguments)},e.prototype.stopEditing=function(){return this._cancelEditing(),e.__super__.stopEditing.apply(this,arguments)},e.prototype.truncateComment=function(t){var e;return e=this.$(".js-new-comment-input"),e.val(e.val().substr(0,this.maximumCommentLength)),this.checkLength()},e.prototype.attachComment=function(t){var e;return e=new Blob([this.$(".js-new-comment-input").val()],{type:"text/plain"}),this.incrementNumAttachmentsProcessing(),this.model.upload(e,"comment.txt",this.decrementNumAttachmentsProcessing.bind(this)),I.cancelEdits(),this.collapseComment()},e.prototype.inputComment=function(t){var e;e=this.$(".js-new-comment"),I.cancelEdits(this.commentInput),e.addClass("is-focused")},e.prototype.clickAwayFromComment=function(t){var e,r;if(!J.isVisible&&(r=t.target,e=this.$(".js-new-comment"),!n(r).closest(e).length||0!==r.children.length))return this.collapseComment()},e.prototype.collapseComment=function(){return this.$(".js-new-comment").removeClass("is-focused")},e.prototype.replyToAction=function(t,e){var r,o;o=null!=(r=this.modelCache.get("Member",e.get("idMemberCreator")))?r.get("username"):void 0,null!=o&&(I.cancelEdits(this.commentInput),this.$(".js-new-comment").addClass("is-focused"),RegExp("@"+o+"(\\W|$)").test(n(this.commentInput).val())?n(this.commentInput).focus():Z.insertSelection(this.commentInput,"@"+o+" "))},e.prototype.getCard=function(){return this.model},e.prototype.getTextInput=function(){return this.$(".js-new-comment-input")},e.prototype.getMentionTarget=function(){return this.$(".js-comment-mention-member:visible")[0]},e.prototype.getEmojiTarget=function(){return this.$(".js-comment-add-emoji:visible")[0]},e.prototype.getCardTarget=function(){return this.$(".js-comment-add-card:visible")[0]},e.prototype.openEditMembersPopOver=function(t){J.toggle({elem:t,view:y,options:{model:this.model,modelCache:this.modelCache}})},e.prototype.editMembersMain=function(t){Z.stop(t),this.openEditMembersPopOver(this.$(".js-details-edit-members")),bt("Card Detail","Edit Members via Main Column")},e.prototype.changeMembersSidebar=function(t){Z.stop(t),this.openEditMembersPopOver(this.$(".js-change-card-members")),bt("Card Detail","Sidebar","Open Manage Member Menu")},e.prototype.addChecklistSidebar=function(t){return Z.preventDefault(t),J.toggle({elem:t.target,view:i,options:{model:this.model,modelCache:this.modelCache,cardView:this}}),bt("Card Detail","Add Checklist Button","Open Add Checklist Menu"),!1},e.prototype.showDueDateBadgeMenu=function(t){Z.stop(t),J.toggle({elem:this.$(".js-details-edit-due-date"),view:j,options:{model:this.model,modelCache:this.modelCache}}),bt("Card Detail","Due Date Badge","Open Due Date Menu")},e.prototype.openAttachPicker=function(t){var e,r;return Z.stop(t),e=n(t.target).closest(".js-attach"),J.toggle({elem:e,view:u,options:{model:this.model,modelCache:this.modelCache}}),r=n(e).hasClass("inline")?"Inline":"Sidebar",bt("Card Detail","Open Attachment Type Picker","Via "+r+" Button"),!1},e.prototype.dueDateSidebar=function(t){return Z.preventDefault(t),J.toggle({elem:this.$(".js-add-due-date"),view:j,options:{model:this.model,modelCache:this.modelCache}}),bt("Card Detail","Sidebar","Open Due Date Menu"),!1},e.prototype.subscribeToCard=function(t){return this.model.subscribe(!0),bt("Card Detail","Sidebar","Subscribe"),!1},e.prototype.unsubscribeFromCard=function(t){return this.model.subscribe(!1),bt("Card Detail","Sidebar","Unsubscribe"),!1},e.prototype.vote=function(t){return Z.preventDefault(t),this.model.vote(!0),bt("Card Detail","Sidebar","Vote"),!1},e.prototype.unvote=function(t){return Z.preventDefault(t),bt("Card Detail","Sidebar","Unvote"),this.model.vote(!1),!1},e.prototype.openFormatHelp=function(t){return bt("Card Detail","Formatting Help"),J.toggle({elem:this.$(".js-format-help"),view:L,options:{model:this.model,modelCache:this.modelCache},keepEdits:!0}),!1},e.prototype.dragenter=function(t){var e;if(this.model.editable())return this.$el.addClass("is-drophover"),e=n(".window-overlay").scrollTop()+200,this.$(".dropzone").css({"padding-top":e+"px"})},e.prototype.dragleave=function(t){return this.$el.removeClass("is-drophover")},e.prototype.dropFiles=function(t){var e;if(this.model.editable()&&(bt("Card Detail","Drop Attachment Upload"),e=t.detail,!wt(this.model.getBoard(),e)))return this.incrementNumAttachmentsProcessing(e.length),G.resolve(e).each(function(t){return function(e){var r;return r=e.name||yt(),vt(t.model,"upload",e,r).finally(function(){return t.decrementNumAttachmentsProcessing()})}}(this)).catch(function(){}).done(),t.stopPropagation()},e.prototype.dropUrl=function(t){var e;if(this.model.editable())return bt("Card Detail","Drop Attachment Url"),e=t.detail,this.incrementNumAttachmentsProcessing(),this.model.uploadUrl(e,function(t){return function(){return t.decrementNumAttachmentsProcessing()}}(this)),t.stopPropagation()},e.prototype.focusChecklistAdd=function(t){return this.existingSubview(_,t).focusNewTaskInput()},e.prototype.closeDialog=function(){return B.hide()},e}(O))},{}],356:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f=function(t,e){function r(){this.constructor=t}for(var n in e)g.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},g={}.hasOwnProperty;n=t("jquery"),o=t(60),s=t(361),a=t(396),u=t(433),l=t(421),d=t("underscore"),m=t(31),c=t("bluebird"),h=t(197),p=function(t,e){var r;for(t=d.clone(t),r=[];t.length>0;)r.push(t.splice(0,e));return r},e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return f(e,t),e.prototype.viewType=s,e.prototype.getModels=function(){return this.collection.openCards()},e.prototype.render=function(){return m("render","rendering "+this.getModels().length+" "+this.collection.model.name+"s into "+this.viewType.name),c.resolve(p(this.getModels(),20)).each(function(t){return function(e){var r;return t.appendSubviews(function(){var t,n,o;for(o=[],t=0,n=e.length;n>t;t++)r=e[t],o.push(this.subview(this.viewType,r));return o}.call(t)),new c(h(t,"defer"))}}(this)).tap(function(t){return function(){var e;"chrome"!==(e=o.browserStr)&&"firefox"!==e&&"opera"!==e&&"windows"===o.osStr&&(t.defer(function(){return n("#board").css("bottom",1)}),t.setTimeout(function(){return n("#board").css("bottom",0)},150))}}(this)).done(),this},e.prototype.insertSubview=function(t,e,r){var n;return null==r&&(r=this.$el),m("render","inserting "+t.$el.find("h2").text()+" at position "+e),"number"==typeof e?e=0>=e?r.children().eq(0):e<r.children().length?r.children().eq(e):void 0:e instanceof l&&(e=e.$el),n=t.model,t.$el.is(":empty")?(t.delegateEvents(),t.render()):r.hasClass("hide")||n.getBoard().filter.satisfiesFilter(n)||t.renderFiltered(),(null!=e?e.length:void 0)>0?t.$el.insertBefore(e):r.append(t.$el),u.refreshIfInitialized(this.$el)},e}(a)},{}],357:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g=function(t,e){function r(){this.constructor=t}for(var n in e)v.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},v={}.hasOwnProperty;n=t("jquery"),o=t(22),s=t(73),a=t(14),u=t(435),c=t(481),l=t(99),d=t(421),p=t("underscore"),m=t(418),f=t(34),h=t(76),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return g(e,t),e.prototype.viewTitleKey="members",e.prototype.events={"click .js-select-member":"selectMem","mouseenter .pop-over-member-list .item":"hoverMemberSelect",keyup:"keyupEvent",keydown:"keydownEvent"},e.prototype.render=function(){var t,e,r;return r=this,e=n(this.el),e.html(m.fill("popover_select_members",{},{})),this.memListEl=this.$(".js-mem-list"),t=this.model.getBoard().memberList.filterDeactivated({force:!0}).models,this.allMembers=l.sortMembers(t,o.me()),this.fillMems(this.allMembers),this},e.prototype.filterMembers=function(t){var e,r,n,o,i,s,a;if(""===t)return this.allMembers;for(a=RegExp("^"+l.escapeForRegex(t.toLowerCase())),o=[],i=this.allMembers,e=0,r=i.length;r>e;e++)n=i[e],s=l.getMemNameArray(this.modelCache,n.id),p.find(s,function(t){return a.test(t)})&&o.push(n);return o.slice(0,8)},e.prototype.fillMems=function(t){var e,r,o,i,s,a;if(s=this.model,this.memListEl.empty(),e=t.length>9,a=!1,e!==this.memListEl.hasClass("collapsed")&&this.memListEl.toggleClass("collapsed",e),0===t.length)return void n('<p class="empty" style="padding: 24px 6px;"></p>').text(h("no results")).appendTo(this.memListEl);for(r=0,o=t.length;o>r;r++)i=t[r],this.appendSubview(this.subview(c,i,{showUnconfirmed:!0,card:this.model}),this.memListEl)},e.prototype.hoverMemberSelect=function(t){var e;return e=n(t.target).closest(".item"),l.selectMenuItem(this.memListEl,".item",e)},e.prototype.keydownEvent=function(t){var e;((e=s.getKey(t))===a.Tab||e===a.Enter)&&(l.stop(t),this.$(".js-mem-list .item.selected:first .js-select-member").first().click(),n(".js-search-mem").val("").focus(),this.fillMems(this.allMembers))},e.prototype.keyupEvent=function(t){var e,r,o,i;return r=s.getKey(t),r!==a.Tab&&r!==a.Enter&&r!==a.Shift&&r!==a.Control&&r!==a.Alt&&r!==a.CapsLock&&r!==a.Escape?r===a.ArrowUp||r===a.ArrowDown?l.navMenuList(this.memListEl,".item",r):(i=n(".js-search-mem").val().trim(),o=this.filterMembers(i),this.fillMems(o),this.focusSearch(),o.length<this.allMembers.length?(e=this.memListEl.find(".item").first(),l.selectMenuItem(this.memListEl,".item",e)):void 0):void 0},e.prototype.selectMem=function(t){var e,r,o,i;return l.preventDefault(t),i=this.model,r=n(t.target).closest(".js-select-member"),e=r.closest(".item"),o=r.attr("idMember"),e.hasClass("active")?(i.removeMember(o),e.removeClass("active"),f(i.typeName,"Change Member","Remove Member")):(i.addMember(o),e.addClass("active"),f(i.typeName,"Change Member","Add Member")),this.focusSearch(),!1},e.prototype.focusSearch=function(){return n(".js-search-mem").focus()},e}(d)},{}],358:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m=function(t,e){function r(){this.constructor=t}for(var n in e)f.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},f={}.hasOwnProperty;n=t(178),o=t(22),s=t(432),a=t(23),u=t(435),c=t(366),l=t(421),d=t(81),p=t(418),h=t(34),e.exports=d(c,i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return m(e,t),e.prototype.viewTitleKey="move card",e.prototype.initialize=function(t){var e;return e=t.onCommit,this.onCommit=null!=e?e:function(){},this.listenTo(o.me().boardList,"add remove reset",this.render)},e.prototype.events={"change .js-select-position":"renderValues","change .js-select-list":"updatePositionList","change .js-select-board":"updateBoardData","click .js-submit":"commitChange"},e.prototype.render=function(){var t,e,r,n,i,s,a,u,c,l;for(e={organizations:o.me().getOpenBoardsByOrg(!0)},c=e.organizations,r=0,i=c.length;i>r;r++)for(a=c[r],l=a.boards,n=0,s=l.length;s>n;n++)t=l[n],t.id===this.model.get("idBoard")&&(t.selected=!0);return u={move_card_controls:p.move_card_controls},this.$el.html(p.fill("popover_move_card",e,{},u)),this.updateBoardData(),this},e.prototype.commitChange=function(t){var e,r,o,i,c,l,d,p;e=this.$(".js-select-board"),r=this.$(".js-select-list"),o=this.$(".js-select-position"),i=e.find("option:selected").val(),c=r.find("option:selected").val(),p=o.find("option:selected").val(),l=parseInt(o.find("option:selected").prop("index"),10),i===this.model.getBoard().id?(d=this.model.getBoard().listList.get(c),this.model.moveToList(d,l),h("Card","Move Menu","Same Board")):null!=i&&null!=c&&null!=p&&(h("Card","Move Menu","Changed Board"),this.model.getList().cardList.remove(this.model),s.hide(),n({url:"/1/cards/"+this.model.id,type:"put",data:{idList:c,idBoard:i,pos:p},success:function(t){return function(e){return t.model.board=null,t.model.set("idBoard",e.idBoard),t.model.set("idList",e.idList),t.model.set("pos",e.pos),a.setBoardIdForCard(t.model.id,e.idBoard)}}(this)})),this.onCommit(),u.hide()},e}(l))},{}],359:[function(t,e,r){var n,o,i,s,a;n=t(449),i=t(435),s=t(99),a=t(418),e.exports=o=function(){function t(){}return t.prototype.openMemberOnCardMenu=function(t){var e,r,o,a;s.stop(t),r=this.$(t.target).closest(".member"),o=r.attr("data-idmem"),a=this.modelCache.get("Member",o),e=this.model,i.toggle({elem:r,view:n,options:{model:a,modelCache:this.modelCache,card:e}})},t.prototype.getMemberOnCardHtml=function(t){var e,r,n;return e=t.toJSON(),r=this.model.getBoard().getOrganization(),e.isVirtual=(null!=r?r.isVirtual(t):void 0)||(null!=(n=this.model.getBoard())?n.isVirtual(t):void 0),null!=r&&(e.isDeactivated=r.isDeactivated(t)),a.fill("member_on_card",e,"",{member:a.member})},t}()},{}],360:[function(t,e,r){var n,o,i,s,a,u,c;o=t(60),n=t(251),i=t(163),c=t(418),a=t(253),s=t("underscore"),u=t(665),e.exports={renderCover:function(){var t,e,r,n,i,s,a,u,c,l;return this.showCover()&&(r=this.model.attachmentList.get(this.model.get("idAttachmentCover"))),null!=r?(a=o.isHighDPI()?600:300,u=null!=(c=r.smallestPreviewBiggerThan(a))?c:r.biggestPreview(),i=null!=u?u.url:r.get("url"),t=this.$(".js-card-cover"),t.css({"background-color":null!=(l=r.get("edgeColor"))?l:"transparent","background-image":'url("'+i+'")'}).toggleClass("is-no-preview-size",null==u),null!=u&&(e=this.$(".js-card-stickers"),s=Math.min(u.height,260),n=245*u.height/u.width,s>=n?(t.css({height:n,"background-size":"cover"}),e.css("height",n)):(t.css({height:s,"background-size":"contain"}),e.css("height",s)))):this.$(".js-card-cover").css({"background-image":"","background-color":"",height:""}).removeClass("is-no-preview-size"),this.$el.toggleClass("is-covered",null!=r),this},renderBadges:function(){var t;return t=this.subview(n,this.model,{badges:a}),this.$(".badges").replaceWith(t.render().el),this},renderMembers:function(t){var e,r,n,o;return e="",o=this.model.getBoard().getOrganization(),n=function(){var t,e,n;for(e=this.model.memberList.models,n=[],t=e.length-1;t>=0;t+=-1)r=e[t],n.push(this.getMemberOnCardHtml(r));return n}.call(this),this.$(".js-list-card-members").empty().append(n.join("")),this},labelsData:function(){return s.chain(this.model.getLabels()).sort(i.compare).map(function(t){return function(e){return t.model.dataForLabel(e)}}(this)).filter(function(t){return!s.isEmpty(t.color)}).value()},renderLabels:function(){var t,e;return e=function(){var e,r,n,o;for(n=this.labelsData(),o=[],e=0,r=n.length;r>e;e++)t=n[e],o.push(u(t));return o}.call(this).join(""),this.$(".js-card-labels").empty().append(e),this}}},{}],361:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,B,M,T,O,L,P,A,E,D,V,I,N,$,z=function(t,e){function r(){this.constructor=t}for(var n in e)F.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},F={}.hasOwnProperty;n=t("jquery"),o=t(429),i=t(22),s=t(60),a=t(423),u=t(357),l=t(359),d=t(360),p=t(5),h=t(362),t(397),m=t(433),g=t(14),v=t(427),y=t(435),b=t(436),w=t("bluebird"),k=t(365),_=t("promise-queue"),C=t(551),x=t(419),j=t(99),S=t(421),B=t("underscore"),L=t(31),P=t(81),I=t(418),N=t(34),A=t("moment"),O=t(76),$=t(422),D=t(403),V=t(105),E=t(102),T=t(197),f=new _(1),M=function(t){f.add(function(){return new w(function(e){t.hookDroppable(),B.defer(e)})})},e.exports=P(l,c=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return z(e,t),B.extend(e.prototype,d),e.prototype.className="list-card js-member-droppable",e.prototype.filterDeactivated=!0,e.prototype.showMemberStatus=!1,e.prototype.applyBoardCardFilter=!0,e.prototype.events={moveto:"moveTo",movein:"moveIn",moveToCalendarDay:"moveToCalendarDay",moveInCalendarDay:"moveInCalendarDay","click .js-open-quick-card-editor":"openQuickCardEditor","click .js-member-on-card-menu":"openMemberOnCardMenu",click:"showDetail",mouseenter:function(){return this.trigger("mouseEnterCardView")},mousemove:function(){return this.trigger("mouseMoveCardView")},mouseleave:function(){return this.trigger("mouseLeaveCardView")},"dd-enter:files":"dragenter","dd-leave:files":"dragleave","dd-drop:files":"dropFiles","dd-enter:url":"dragenter","dd-leave:url":"dragleave","dd-drop:url":"dropUrl",shortcut:"shortcut","userinput-paste:files":"dropFiles","userinput-paste:url":"dropUrl"},e.prototype.initialize=function(){var t,e,r,n,o;for(o=["filterDeactivated","showMemberStatus","applyBoardCardFilter"],e=0,r=o.length;r>e;e++)n=o[e],null!=this.options[n]&&(this[n]=this.options[n]);this.makeDebouncedMethods("renderName","renderLabels","renderCover","renderFiltered","renderPowerUpEffects","renderStickers"),this.listenTo(this.model,{"change:name":this.renderNameDebounced,"change:labels":this.renderLabelsDebounced,"change:idAttachmentCover":this.renderCoverDebounced,"change:name change:labels change:idLabels change:due":this.renderFilteredDebounced,"change:dateLastActivity":this.renderPowerUpEffectsDebounced}),this.listenTo(this.model.memberList,"add remove reset",this.frameDebounce(function(){return this.renderMembers(),this.renderFiltered()})),this.listenTo(this.model.labelList,"add remove reset change",this.renderLabelsDebounced),this.listenTo(this.model.stickerList,{"add remove reset change sort":this.renderStickersDebounced
}),t=this.model.getBoard(),this.listenTo(t,"change:powerUps change:prefs.cardAging",this.renderPowerUpEffectsDebounced),this.listenTo(t.filter,"change",this.renderFilteredDebounced),this.listenTo(t,"change:labels",this.renderLabelsDebounced),b.enqueue("initialize_"+this.cid,function(e){return function(){return e.listenTo(t.viewState,"change:idActiveCard",e.renderActiveState),e.listenTo(e,"mouseEnterCardView",function(){return M(this)})}}(this))},e.prototype.renderActiveState=function(){var t;null!=this.$el&&(t=this.model.getBoard().viewState.isCardSelected(this.model),this.$el.toggleClass("active-card",t),t?x.addHandler(this,{scope:"card"}):x.removeHandler(this))},e.prototype.shortcut=function(t){var e,r,n,o,s;switch(n=i.isLoggedIn(),e=this.model.editable(),o=this.onCalendar,t){case g.Enter:return this.showDetail(),"Enter - Open Card";case g.E:if(e)return this.openQuickCardEditor(),"E - Open Quick Card Editor";break;case g.T:return p.showCardDetail(this.model,"editTitle"),"T - Open Card and Edit Title";case g.D:if(e)return this.showPopOver(h),["D - Due Dates","On Board View"];break;case g.L:if(e)return this.showPopOver(a,{hideOnSelect:!1}),["L - Edit Labels","On Board View"];break;case g._0:case g._1:case g._2:case g._3:case g._4:case g._5:case g._6:case g._7:case g._8:case g._9:if(e)return r=function(t){return function(e){return t.showPopOver(a,{searchInit:e,hideOnSelect:!0})}}(this),v.setLabelFromKey(t,this.model,r),"0-9 - Toggle Specific Label";break;case g.A:case g.M:if(e)return this.showPopOver(u),["A - Assign Members","Board View"];break;case g.Space:if(e)return this.model.toggleMember(i.myId()),"Space - Toggle Assigning Self";break;case g.C:case g.Delete:if(e)return this.model.close(),"C / Delete - Archive Card";break;case g.AngleRight:case g.Period:if(e&&!o)return this.model.moveToNextList(),"> - Move to Next List";break;case g.AngleLeft:case g.Comma:if(e&&!o)return this.model.moveToPrevList(),"< - Move to Previous List";break;case g.V:if(n)return this.model.toggleVote(),"V - Vote";break;case g.S:if(n)return s=this.model.get("subscribed"),this.model.subscribe(!s),["S - Subscribe",s?"Unsubscribe":"Subscribe"]}},e.prototype.showPopOver=function(t,e){return null==e&&(e={}),y.toggle({elem:this.$(".js-card-menu"),view:t,options:B.extend({model:this.model,modelCache:this.modelCache,hideOnSelect:!0},e)})},e.prototype.render=function(){var t,e,r,n,o,i,s;for(L("render","rendering card "+this.model.get("name")),t=this.model.toJSON(),t.showCover=this.showCover(),t.showEditor=this.model.editable()&&!this.options.hideMenu,this.model.hasStickers()&&(t.hasStickers=!0),t.labels=this.labelsData(),o=this.model.getBoard().getOrganization(),t.members=[],s=this.model.memberList.models,e=s.length-1;e>=0;e+=-1)r=s[e],n=r.toJSON(),n.isVirtual=(null!=o?o.isVirtual(r):void 0)||this.model.getBoard().isVirtual(r),null!=o&&(n.isDeactivated=o.isDeactivated(r)),t.members.push(n);return this.$el.toggleClass("js-archive-card",this.model.get("closed")),this.showCover()&&this.model.hasCover()&&this.$el.addClass("is-covered"),this.model.hasStickers()&&this.$el.addClass("is-stickered"),i={member_on_card:I.member_on_card,member:I.member},this.el.innerHTML=I.fill("card_in_list",t,{editable:this.model.editable()},i),this.renderActiveState(),this.renderFiltered(),this.renderBadges(),b.enqueue("render_"+this.cid,function(t){return function(){return t.renderCover(),t.renderStickers(),t.renderPowerUpEffects(),t.waitForId(t.model,function(){return t.renderLink()}),t._droppableHookedSinceRender=!1,M(t)}}(this)),this},e.prototype.hookDroppable=function(){var t;s.isTouch()||null!=this.$el&&(this._droppableHookedSinceRender||(this._droppableHookedSinceRender=!0,s.isTouch()||(t=this.throttle(function(){return n(".board-canvas")[0].getBoundingClientRect()},100,{trailing:!1}),this.$el.droppable({refreshPositions:!0,inBounds:function(e){var r,n,o;return r=t(),r.left<=(n=e.pageX)&&n<r.right&&r.top<=(o=e.pageY)&&o<r.bottom},accept:".js-list-draggable-board-members .member, .js-draggable-sticker",hoverClass:"active-card",drop:function(t){return function(e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b;r.draggable.hasClass("member")?(a=r.draggable.data("id"),s=r.draggable.clone(),u=t.model.memberList.detect(function(t){return t.id===a}),u||(t.model.addMember(a),N("Card","Add Member by Board Sidebar"))):r.draggable.hasClass("js-draggable-sticker")&&(h=r.draggable.data("sticker"),i=n=o=1,f=r.helper.offset(),g={top:t.$el.offset().top+i,left:t.$el.offset().left+n},v=t.$el.outerWidth()-n-o,l=f.left-g.left,d=f.top-g.top,c=l/v*100,m=t.$(".js-card-stickers").height(),y=t.$el.hasClass("is-stickered")||t.$el.hasClass("is-covered")?d/m*100:0,y>m&&(y=m),b=j.getElemTransformMatrix(r.helper.find(".sticker-select-fixed")),p=null!=b?j.getMatrixDegrees(b)%360:0,t.addNewStickerToList(h,c,y,p))}}(this)}))))},e.prototype.addNewStickerToList=function(t,e,r,n){var o,i;o=null!=(i=t.id)?i:t.get("image"),N("Card","Sticker",o),this.model.stickerList.create({image:o,left:V(e),top:V(r),rotate:n,zIndex:this.model.stickerList.nextZIndex(),imageUrl:t.get("url"),imageScaled:t.get("scaled")},{modelCache:this.modelCache})},e.prototype.showStickers=function(){return!this.onCalendar},e.prototype.renderStickers=function(t){var e,r,n,o,i;return this.showStickers()?(r=this.$(".list-card-stickers-area"),e=this.$(".js-card-stickers").empty(),n=this.model.hasStickers(),n?(this.$el.addClass("is-stickered"),r.removeClass("hide"),i=function(){var t,e,r,n;for(r=this.model.stickerList.models,n=[],t=0,e=r.length;e>t;t++)o=r[t],n.push(this.subview(C,o));return n}.call(this),this.appendSubviews(i,e)):(this.$el.removeClass("is-stickered"),r.addClass("hide")),this):void this.$el.removeClass("is-stickered")},e.prototype.renderName=function(){var t,e;return t=this.model.toJSON(),e=I.fill("card_title_on_card_front",t),this.$(".js-card-name").html(e),this},e.prototype.renderLink=function(){var t;return t=p.getCardUrl(this.model),this.$(".js-card-name").attr("href",t),this},e.prototype.showCover=function(){return this.model.getBoard().getPref("cardCovers")&&this.model.hasCover()&&!this.onCalendar},e.prototype.renderFiltered=function(t){var e,r;if(null==this.options.dontFilter)return null==this._visible&&(this._visible=!0),e=this.model.getBoard(),r=null==e||!p.onBoardView(e.id)||!this.applyBoardCardFilter||e.filter.satisfiesFilter(this.model),this._visible!==r&&(this.$el.toggleClass("hide",!r).height(r?"":0),this._visible=r),this},e.prototype.renderPowerUpEffects=function(){var t,e;return t=this.model.getBoard(),this.$el.removeClass(this.model.getAllAgingClasses()),t.isPowerUpEnabled("cardAging")&&!this.model.get("closed")?(e=this.model.getAgingData(),this.$el.addClass(e.agingClassesToAdd)):void 0},e.prototype.openQuickCardEditor=function(t){return j.stop(t),y.hide(),k.open(this),N("Card Front","Open Quick Card Editor"),this},e.prototype.moveToCalendarDay=function(t,e,r){var n;return r.getCardView(this.model).delegateEvents(),n=new Date(r.data.day),this.model.changeDueDateMaintainTime(n),r.updateHeader(),r.renderCardsAndListHeaders()},e.prototype.moveInCalendarDay=function(t,e,r){return r.getCardView(this.model).delegateEvents(),r.renderCardsAndListHeaders()},e.prototype.moveTo=function(t,e,r,n){var o,i;return 0===e.item.parents(".js-list").length?void(null!=r&&r.renderCards()):(o=e.item.parents(".js-list").find(".list-card:not(.placeholder,.js-composer)"),i=o.index(e.item),n||e.item.remove(),void this.model.moveToList(r.model,i))},e.prototype.moveIn=function(t,e,r){r.model.id===this.model.get("idList")&&this.moveTo(t,e,r,!0)},e.prototype.showDetail=function(t){return t&&(t.ctrlKey||t.metaKey||t.shiftKey)||!this.doClicks()?void 0:(j.stop(t),p.showCardDetail(this.model))},e.prototype.dragenter=function(t){var e;if(this.model.editable())return e=this.$el.outerHeight(),this.$(".list-card-dropzone").css({height:e+"px","line-height":e+"px"}),this.$el.addClass("is-drophover")},e.prototype.dragleave=function(t){return this.$el.removeClass("is-drophover")},e.prototype.dropFiles=function(t){var e;if(this.model.editable()&&(e=t.detail,!$(this.model.getBoard(),e)))return w.resolve(e).each(function(t){return function(e){var r;return r=e.name||D(),E(t.model,"upload",e,r)}}(this)).catch(function(){}).done(),t.stopPropagation()},e.prototype.dropUrl=function(t){var e;if(this.model.editable())return e=t.detail,this.model.uploadUrl(e),t.stopPropagation()},e.prototype.doClicks=function(){return!m.sorting},e}(S))},{}],362:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y=function(t,e){function r(){this.constructor=t}for(var n in e)b.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},b={}.hasOwnProperty;o=t(61),s=t(435),a=t(99),u=t(421),c=t(115),l=t("underscore"),f=t(632),v=t(34),m=t("moment"),i=t("pikaday"),h=t(76),d=function(){return{previousMonth:h("prev month button text"),nextMonth:h("next month button text"),months:m.months(),weekdays:m.weekdays(),weekdaysShort:m.weekdaysMin()}},g="LT",p=function(t){return m(t,g).isValid()},e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return y(e,t),e.prototype.viewTitleKey="change due date",e.prototype.tagName="form",e.prototype.className="dpicker-widget u-clearfix",e.prototype.events={"click .js-remove-date":"removeDueDate","input .js-dpicker-time-input":"validateTimeInput","change .js-dpicker-time-input":"normalizeTimeInput",submit:function(t){return t.preventDefault(),this.submitDueDate()},"click .js-enable-calendar-powerup":function(t){return t.preventDefault(),this.enableCalendarPowerUp()}},e.prototype.initialize=function(){return this.listenTo(this.model.getBoard(),"change:powerUps",this.renderCalendarPowerUp)},e.prototype.getSelectedDueDateMoment=function(){var t,e;return t=this.picker.getMoment(),t.isValid()?(t.year()<1e3&&t.add(2e3,"years"),e=this.selectedTimeMoment(),t.hour(e.hour()).minute(e.minute())):null},e.prototype.submitDueDate=function(){var t;return t=this.getSelectedDueDateMoment(),null!=t?this.setDueDate(t.toDate()):this.removeDueDate()},e.prototype.setDueDate=function(t){return e.lastDueDate=t,this.model.update("due",t.getTime()),s.hide()},e.prototype.removeDueDate=function(){return this.model.update("due",null),s.hide()},e.prototype.renderCalendarPowerUp=function(){var t,e,r,n,o;e=this.$(".js-cal-enabled").addClass("hide"),t=this.$(".js-enable-cal").addClass("hide"),r=this.model.getBoard(),n=r.isPowerUpEnabled("calendar"),o=r.owned()&&!n,n?e.removeClass("hide"):o&&t.removeClass("hide")},e.prototype.vigor=e.VIGOR.NONE,e.prototype.renderOnce=function(){var t,r,n,o,s;return t=this.model.getBoard(),s=m().startOf("day").add(1,"days").hour(12).toDate(),r=null!=(n=null!=(o=this.model.getDueDate())?o:e.lastDueDate)?n:s,this.$el.html(f(t.owned())),this.picker=new i({field:this.$(".js-dpicker-date-input")[0],container:this.$(".js-dpicker-cal")[0],bound:!1,format:"l",firstDay:m.localeData().firstDayOfWeek(),i18n:d()}),this.picker.setDate(r),this.$timeInput().val(m(r).format(g)),this.renderCalendarPowerUp(),this},e.prototype.validateTimeInput=function(){return this.$timeInput().toggleClass("input-error",!this.isTimeInputValid())},e.prototype.normalizeTimeInput=function(){return this.$timeInput().val(this.selectedTimeMoment().format(g)),this.validateTimeInput()},e.prototype.selectedTimeMoment=function(){return this.isTimeInputValid()?m(this.$timeInput().val(),g):m().hours(12).minutes(0)},e.prototype.$timeInput=function(){return this.$(".js-dpicker-time-input")},e.prototype.isTimeInputValid=function(){return p(this.$timeInput().val())},e.prototype.enableCalendarPowerUp=function(){this.model.getBoard().addToSet("powerUps","calendar"),v("Card Detail","Enable Calendar via Due Date Menu")},e}(u)},{}],363:[function(t,e,r){var n,o,i,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=t(421),i=t(418),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.viewTitleKey="formatting help",e.prototype.render=function(){return this.$el.html(i.fill("formatting_help")),this},e}(o)},{}],364:[function(t,e,r){var n,o,i,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;n=t(361),i=t(421),s=t(418),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.initialize=function(t){return this.showBoard=t.showBoard,this.cardView=this.subview(n,this.model,{filterDeactivated:!1,showMemberStatus:!1})},e.prototype.className="list-card-container",e.prototype.render=function(){var t;return t={listName:this.model.getList().get("name"),boardName:this.model.getBoard().get("name"),showBoard:this.showBoard},this.$el.html(s.fill("member_cards_card",t)),this.appendSubview(this.cardView,this.$(".js-card")),this},e}(i)},{}],365:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C=function(t,e){function r(){this.constructor=t}for(var n in e)x.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},x={}.hasOwnProperty;n=t("jquery"),o=t(353),i=t(423),s=t(357),a=t(358),u=t(359),c=t(360),l=t(362),d=t(73),p=t(14),h=t(435),f=t(549),g=t(419),v=t(99),y=t(421),b=t("underscore"),_=t(418),k=t(34),w=t(81),e.exports=w(u,m=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return C(e,t),b.extend(e.prototype,c),e.prototype.className="quick-card-editor",e.open=function(t){var r,n,o;return this.close(),r=t.$el,n=r.offset(),o={width:r.width(),left:n.left,top:n.top},this.current=new e({model:t.model,modelCache:t.modelCache}).render(o)},e.close=function(){var t;return null!=(t=this.current)&&t.closeEditor(),this.current=null},e.prototype.initialize=function(){return this.makeDebouncedMethods("renderStickers","renderLabels"),this.listenTo(this.model,{"change:labels":this.renderLabelsDebounced,"change:idLabels":this.renderLabelsDebounced}),this.listenTo(this.model.labelList,"add remove reset change",function(t){return function(){return t.renderLabelsDebounced()}}(this)),this.listenTo(this.model.memberList,"add remove reset",this.frameDebounce(this.renderMembers)),this.listenTo(this.model.stickerList,"add remove reset change sort",function(){return this.renderStickersDebounced()})},e.prototype.events={"keydown .js-edit-card-title":"quickCardEditKeydown","click .js-save-edits":"saveEdits","click .js-stop":"stopCard","click .js-edit-labels":"editLabels","click .js-edit-members":"editMembers","click .js-move-card":"moveCard","click .js-copy-card":"copyCard","click .js-edit-due-date":"editDueDate","click .js-archive":"archive",click:"checkCloseEditor","click .js-close-editor":"closeEditor"},e.prototype.showCover=function(){return this.model.getBoard().getPref("cardCovers")&&this.model.hasCover()},e.prototype.showStickers=function(){return!0},e.prototype.shortcut=function(t){switch(t){case p.Escape:return this.checkCloseEditor(),["Esc - Close Quick Card Editor","Quick Card Editor"];case p.Enter:return this.save(),["Enter - Save Quick Card Edits","Quick Card Editor"]}},e.prototype.render=function(t){var e,r,o,i,s;return r=this.model.toJSON(),r.labels=this.model.getLabels(),r.showCover=this.showCover(),r.hasStickers=this.model.hasStickers(),r.quickEdit=!0,o={card:_.card_in_list,member_on_card:_.member_on_card},r.left=this.cLeft=t.left,r.top=this.cTop=t.top,r.width=this.cWidth=t.width,e=this.cWidth+this.cLeft+160,i=n(window).height(),s=n(window).width(),e>s&&(r.leftButtons=!0),this.$el.html(_.fill("quick_card_editor",r,{},o)),this.renderStickers().renderCover().renderLabels().renderBadges().renderMembers().checkShowCover(),n("body").append(this.$el),this.calcHeight(),this.focusInput(),g.addHandler(this,{scope:"quick_card_editor",modal:!0}),this.defer(function(t){return function(){return t.$(".quick-card-editor-buttons").addClass("fade-in")}}(this)),this.$(".js-edit-card-title").autosize(),this},e.prototype.calcHeight=function(){var t,e,r,o,i,s,a;s=n(window).height(),a=n(window).width(),o=this.$(".quick-card-editor-card").outerHeight(),this.cTop+o>s&&(i=s-o-8,this.$(".quick-card-editor-card").css({top:i})),t=this.$(".quick-card-editor-buttons"),e=t.outerHeight(),r=t.offset(),e+r.top>s&&t.css({top:-36})},e.prototype.renderStickers=function(){var t,e,r;return this.$(".sticker.moving, .sticker.rotating").length>0?this:(t=this.$(".js-card-stickers").empty(),r=function(){var t,r,n,o;for(n=this.model.stickerList.models,o=[],t=0,r=n.length;r>t;t++)e=n[t],o.push(this.subview(f,e));return o}.call(this),this.appendSubviews(r,t),this.$(".list-card").toggleClass("is-stickered",this.model.hasStickers()),this)},e.prototype.checkShowCover=function(){return this.$(".list-card").toggleClass("is-covered",this.showCover()).toggleClass("is-stickered",this.model.hasStickers()),this},e.prototype.focusInput=function(){return this.$(".js-edit-card-title").focus().select()},e.prototype.showPopOver=function(t,e,r,o){null==o&&(o={}),v.stop(t),h.toggle({elem:n(t.target).closest("a"),view:new e(b.extend({model:this.model,modelCache:this.modelCache},o))}),k("Quick Card Editor",r)},e.prototype.editLabels=function(t){return this.showPopOver(t,i,"Open Label Edit")},e.prototype.editMembers=function(t){return this.showPopOver(t,s,"Open Member Edit")},e.prototype.copyCard=function(t){return this.showPopOver(t,o,"Open Copy Card",{onCopy:this.closeEditor.bind(this)})},e.prototype.editDueDate=function(t){return this.showPopOver(t,l,"Open Due Date Edit")},e.prototype.moveCard=function(t){var e;return v.stop(t),e=this.closeEditor.bind(this),h.toggle({elem:n(t.target).closest("a"),view:new a({model:this.model,modelCache:this.modelCache,onCommit:e})}),k("Quick Card Editor","Open Move Card")},e.prototype.archive=function(t){v.stop(t),this.model.close(),this.closeEditor(),k("Quick Card Editor","Archive")},e.prototype.quickCardEditKeydown=function(t){return d.getKey(t)===p.Enter?this.saveEdits(t):void 0},e.prototype.saveEdits=function(t){var e;v.stop(t),e=this.$(".js-edit-card-title").val().trim(),e===this.model.get("name")?this.closeEditor():""!==e?(this.model.update({name:e}),this.closeEditor(),k("Quick Card Editor","Save Name")):this.$(".js-edit-card-title").focus().select()},e.prototype.checkCloseEditor=function(t){h.isVisible?h.hide():this.$(".sticker.editing").length>0?this.stopEditingStickers():this.closeEditor(t)},e.prototype.closeEditor=function(t){this.remove(),h.hide(),k("Quick Card Editor","Close")},e.prototype.stopEditingStickers=function(){var t,e,r,n;for(r=b.clone(this.model.stickerList.models),t=0,e=r.length;e>t;t++)n=r[t],n.trigger("stopEditing")},e.prototype.stopCard=function(t){v.stopPropagation(t),h.hide()},e}(y))},{}],366:[function(t,e,r){var n,o,i,s,a,u,c;n=t("jquery"),o=t(27),i=t(185),a=t(99),u=t("underscore"),c=t(76),e.exports=s=function(){function t(){}return t.prototype.renderValues=function(){var t,e,r,o,i,s,a;r=this.$(".js-select-board option:selected").val(),o=this.$(".js-select-list option:selected").val(),a=parseInt(this.$(".js-select-position option:selected").prop("index"),10)+1,t=this.modelCache.get("Board",r),e=t.get("name"),i=u.find(t.listList.models,function(t){return function(t){return t.id===o}}(this)),this.$(".js-board-value").text(e),null!=i?(s=i.get("name"),a=a.toString(),this.$(".js-list-value").text(s),this.$(".js-pos-value").text(a),this.$(".js-select-list,.js-select-position,.js-commit-position,.js-submit").removeAttr("disabled")):(this.$(".js-list-value").empty().append(n("<i></i>").text(c("no lists"))),this.$(".js-pos-value").empty().append(n("<i></i>").text(c("n/a"))),this.$(".js-select-list,.js-select-position,.js-commit-position,.js-submit").attr("disabled","disabled"))},t.prototype.updateBoardData=function(){var t,e,r,n,s,a,u;if(t=this.$(".js-select-board"),r=t.find("option:selected").val(),e={},r===this.model.getBoard().id){for(this._boardData=this.model.getBoard(),u=this._boardData.listList.models,n=0,s=u.length;s>n;n++)a=u[n],a.cardCount=this._boardData.listList.get(a.id).cardList.openCards().length;this.updateListList()}else null!=r&&(this.$(".js-submit").attr("disabled","disabled"),o.loadBoardData(r,i.cardsAndListsMinimal).then(function(t){return function(){return t._boardData=t.modelCache.get("Board",r),t.updateListList()}}(this)).done())},t.prototype.updateListList=function(){var t,e,r,o,i,s,a,u,l,d,p,h;for(e=this.$(".js-select-board"),r=this.$(".js-select-list").empty(),i=e.find("option:selected").val(),s=this.model.getList().id,a=i===this.model.getBoard().id?s:null!=(p=this._boardData.listList.at(0))?p.id:void 0,h=this._boardData.openLists(),u=0,l=h.length;l>u;u++)d=h[u],o=d.id===s?c("current list",{listName:d.get("name")}):d.get("name"),t=n("<option>").val(d.id).text(o).appendTo(r),d.id===a&&t.attr("selected","selected");return this.updatePositionList()},t.prototype.updatePositionList=function(){var t,e,r,o,i,s,a,l,d,p,h,m,f,g,v,y;if(e=this.$(".js-select-list"),r=this.$(".js-select-position").empty(),a=e.find("option:selected").val(),null==a)return void this.renderValues();for(p=null!=(f=this._boardData.listList.get(a))?f:this._boardData.listList.at(0),v=(null!=p?p.id:void 0)===this.model.getList().id,h=this._boardData.listList.get(a).cardList.length,v?(o=u.indexOf(this.model.getList().cardList.openCards(),this.model),y=o,this.showCurrentPosition||(h-=1)):(o=-1,y=h),s=d=0,g=h;g>=0?g>=d:d>=g;s=g>=0?++d:--d)l=String(s+1),i=s===o?c("current position",{index:l}):l,m=0===s?"top":s===h?"bottom":p.calcPos(s),t=n("<option>").val(m).text(i).appendTo(r),s===y&&t.attr("selected","selected");this.$(".js-pos-value").text(String(y)),this.renderValues()},t}()},{}],367:[function(t,e,r){var n,o,i=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;o=t(421),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.viewTitleKey="sending links",e.prototype.render=function(){return this.$el.html('<div class="spinner loading"></div>'),this},e}(o)},{}],368:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p=function(t,e){function r(){this.constructor=t}for(var n in e)h.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},h={}.hasOwnProperty;o=t(435),i=t(99),s=t(421),a=t("underscore"),l=t(418),d=t(34),u=function(t){return function(e,r){return e.get(t).localeCompare(r.get(t))}},c=function(t){return t.checkItemList.length>0},e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.viewTitleKey="add checklist",e.prototype.initialize=function(t){this.cardView=t.cardView},e.prototype.events={"click .js-add-checklist":"addChecklist","submit form":"addChecklist"},e.prototype.render=function(){var t,e;return t=this.modelCache.find("Card",function(t){return function(e){return e.get("idBoard")===t.model.getBoard().id&&!e.get("closed")&&e.checklistList.any(c)}}(this)).sort(u("name")).map(function(t){var e;return e=t.toJSON(),e.checklists=a.clone(t.checklistList.models).sort(u("name")).filter(c).map(function(t){var e;return e=t.checkItemList.length.toString(),a.extend(t.toJSON(),{length:e})}),e}),e={checklistCards:t,hasChecklistCards:t.length>0},this.$el.html(l.fill("checklist_add_menu",e)),this},e.prototype.addChecklist=function(t){var e,r,n,s,a;return i.stop(t),a=this.$(".js-checklist-title").val(),s=this.$(".js-checklist-copy-source").val(),0===a.length?void this.$(".js-checklist-title").focus().select():(r=""!==s?"Copied Checklist Items":"No Checklist Items Copied",n="Checklist"===a?"Default Title (Checklist), "+r+")":"Renamed Title, "+r+")",d("Checklist","Create",""+n),e=this.model.checklistList.create({name:a,idChecklistSource:s,idCard:this.model.id}),this.cardView.focusChecklistAdd(e),void o.hide())},e}(s)},{}],369:[function(t,e,r){var n,o,i,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=t(370),i=t(396),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.viewType=o,e}(i)},{}],370:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f=function(t,e){function r(){this.constructor=t}for(var n in e)g.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},g={}.hasOwnProperty;n=t(388),i=t(391),s=t(400),a=t(394),u=t(435),c=t(79),l=t(99),d=t(401),p=t(81),h=t(418),m=t(34),e.exports=p(n,i,o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return f(e,t),e.prototype.className="checklist-item",e.prototype.allowNewlines=!1,e.prototype.initialize=function(){return this.listenTo(this.model,{"change:name":this.renderName,"change:state":this.renderState}),e.__super__.initialize.apply(this,arguments)},e.prototype.events={"keyup .js-checkitem-input":"keyAutoMention","click .js-toggle-checklist-item":"toggleState","click .js-delete-item":"delete","click .js-convert-item-to-card":"convertToCard","click .js-open-editing-menu":"openEditingMenu",movecheckitem:"moveCheckItem"},e.prototype.getCard=function(){return this.model.getCard()},e.prototype.render=function(){var t,e;return e=this,t=this.model,this.$el.html(h.fill("checklist_item",{},{editable:this.model.editable()})),this.renderName(),this.renderState(),this.recallDrafts(),this},e.prototype.getTextInput=function(){return this.$(".js-checkitem-input")},e.prototype.getMentionTarget=function(){return this.$(".js-open-editing-menu:visible")[0]},e.prototype.getEmojiTarget=function(){return this.$(".js-open-editing-menu:visible")[0]},e.prototype.getCardTarget=function(){return this.$(".js-open-editing-menu:visible")[0]},e.prototype.renderName=function(t){var e,r;r=c.checkItems.format(this.model.get("name"),{textData:this.model.get("nameData")}).output,e=this.$(".js-checkitem-name"),e.empty().append(r),d(e[0],this.model.getBoard())},e.prototype.renderState=function(t){var e;e=this.model.toJSON(),e.checked="complete"===e.state,this.$el.toggleClass("checklist-item-state-complete",e.checked)},e.prototype.toggleState=function(t){var e,r;this.model.editable()&&(e="complete"===this.model.get("state"),r=e?"incomplete":"complete","complete"===r?(this.$el.addClass("checklist-item-fade-out"),this.setTimeout(function(t){return function(){return t.model.update("state",r),t.$el.removeClass("checklist-item-fade-out")}}(this),200)):(this.$el.removeClass("checklist-item-fade-out"),this.model.update("state",r)),m("Checklist","Toggle Checklist Item State",r))},e.prototype.delete=function(t){l.stop(t),this.model.destroy(),m("Checklist","Delete Single Checklist Item")},e.prototype.convertToCard=function(t){l.stop(t),this.model.run("convertToCard"),this.model.getChecklist().checkItemList.remove(this.model),m("Checklist","Convert Checklist Item to Card")},e.prototype.moveCheckItem=function(t,e,r,n){var o,i,s;if(n||this.model.getChecklist()===r)return o=e.item.parent().children(),i=o.index(e.item),s=r.calcPos(i,this.model),n?(this.model.update({pos:s,idChecklist:r.id}),this.model.collection.remove(this.model),r.checkItemList.add(this.model)):this.model.update("pos",s),r.checkItemList.sort({silent:!0}),m("Checklist","Reorder Checklist Item")},e.prototype.openEditingMenu=function(t){return l.stop(t),u.toggle({elem:t.target,view:a,options:{model:this.model,modelCache:this.modelCache,parent:this},keepEdits:!0})},e}(s))},{}],371:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,B,M=function(t,e){function r(){this.constructor=t}for(var n in e)T.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},T={}.hasOwnProperty;n=t("jquery"),o=t(22),i=t(388),s=t(389),a=t(369),c=t(391),l=t(430),d=t(433),p=t(400),h=t(392),m=t(394),f=t(73),g=t(434),v=t(226),y=t(435),b=t("bluebird"),w=t(99),_=t("underscore"),C=t(31),x=t(81),S=t(418),B=t(34),k=t(76),j=t(102),e.exports=x(i,c,u=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return M(e,t),e.prototype.className="checklist",e.prototype.initialize=function(){return this.makeDebouncedMethods("renderCheckedState"),this.listenTo(this.model.checkItemList,{"add remove reset change:state":function(){return this.renderProgress(),this.renderCheckedStateDebounced()}}),this.listenTo(v,{"change:idCollapsedChecklists":this.renderCheckedStateDebounced}),this.listenTo(this.model,{"change:name":this.renderName})},e.prototype.events={"keydown .js-new-checklist-item-input":"keydownChecklistEvent","click .js-add-checklist-item":"submitTask","click .js-cancel-checklist-item":"cancelItemEditing","click .js-new-checklist-item-input":"focusNewTaskInput","click :not(.focus) .js-new-checklist-item-input":function(t){return n(t.currentTarget).select()},"click .js-confirm-delete":"confirmDeleteChecklist","click .js-hide-checked-items":"hideCheckedItems","click .js-show-checked-items":"showCheckedItems","sortstop .js-checklist-items-list":"sortStop","sortreceive .js-checklist-items-list":"sortReceive",movechecklist:"moveChecklist","click .js-open-editing-menu":"openEditingMenu","keyup .js-new-checklist-item-input":"keyAutoMention"},e.prototype.render=function(){var t,e;return C("render","rendering checklist state "+this.model.get("name")),this.$el.html(S.fillFromModel("checklist",this.model)),t=this.$(".js-checklist-items-list"),(null!=(e=this.getCard())?e.editable():void 0)&&t.sortable({axis:"y",delay:"75",distance:"7",tolerance:"pointer",placeholder:"checklist-item placeholder",items:".checklist-item",connectWith:".js-checklist-items-list",start:function(t,e){var r;return d.sorting=!0,r=n(e.helper).outerHeight(),n(e.placeholder).height(r)},stop:function(t){return function(){return t.defer(function(){return d.sorting=!1})}}(this)}),this.$newCheckItemInput=this.$(".js-new-checklist-item-input").autosize(),this.renderName(),this.renderCheckItems(),this.renderCheckedState(),this},e.prototype.renderName=function(){return this.$("div.checklist-title[attr=name] .current").text(this.model.get("name")),this},e.prototype.renderProgress=function(){var t,e,r,n;return e=this.model.getCompletedCount(this.getCard()),r=this.model.checkItemList.length,n=r>0?Math.round(100*e/r):0,t=e===r&&r>0,this.$(".js-checklist-progress-bar").width(n+"%"),this.$(".js-checklist-progress-percent").text(n+"%"),this.$(".js-checklist-progress-bar").toggleClass("checklist-progress-bar-current-complete",t),this},e.prototype.renderCheckItems=function(){var t,e;return t=this.$(".js-checklist-items-list"),e=this.collectionSubview(a,this.model.checkItemList,{el:t}),e.render(),d.refreshIfInitialized(t),this.renderProgress(),this},e.prototype.isChecklistCollapsed=function(){return v.inSet("idCollapsedChecklists",this.model.id)},e.prototype.renderCheckedState=function(t){var e,r,n,o;return n=this.model.checkItemList.length,r=this.model.getCompletedCount(this.getCard()),o=n>0,e=n===r&&n>0,this.$(".js-show-checked-items").text(k("show checked items",{count:r.toString()})),this.$(".js-completed-message").addClass("hide"),0!==r&&o?this.isChecklistCollapsed()?(this.$el.addClass("hide-completed-items"),this.$(".js-show-checked-items").removeClass("hide"),this.$(".js-hide-checked-items").addClass("hide"),this.$(".js-completed-message").toggleClass("hide",!e)):(this.$el.removeClass("hide-completed-items"),this.$(".js-show-checked-items").addClass("hide"),this.$(".js-hide-checked-items").removeClass("hide")):(this.$el.removeClass("hide-completed-items"),this.$(".js-show-checked-items").addClass("hide"),this.$(".js-hide-checked-items").addClass("hide")),this},e.prototype.hideCheckedItems=function(t){w.stop(t),v.pushCollapsedChecklist(this.model.id),B("Checklist","Hide Checked Items")},e.prototype.showCheckedItems=function(t){
w.stop(t),v.pullCollapsedChecklist(this.model.id),B("Checklist","Show Checked Items")},e.prototype.getCard=function(){return this.options.card},e.prototype.cancelItemEditing=function(t){return n(t.target).closest(".js-new-checklist-item").find(".js-new-checklist-item-input").val(""),g.cancelEdits(),!1},e.prototype.focusNewTaskInput=function(t){g.cancelEdits(this.$newCheckItemInput),this.$newCheckItemInput.focus(),this.$(".js-new-checklist-item").addClass("focus")},e.prototype.keydownChecklistEvent=function(t){if(n(t.target).hasClass("js-new-checklist-item-input")){if(y.view instanceof h||y.view instanceof s)return this.checkInsert(t);if(f.isSubmitEvent(t))return this.submitTask(t)}},e.prototype.getTextInput=function(){return this.$(".js-new-checklist-item-input")},e.prototype.getMentionTarget=function(){return this.$(".js-open-editing-menu:visible")[0]},e.prototype.getEmojiTarget=function(){return this.$(".js-open-editing-menu:visible")[0]},e.prototype.getCardTarget=function(){return this.$(".js-open-editing-menu:visible")[0]},e.prototype.submitTask=function(t){var e,r,n,i;return w.stop(t),n=this.$newCheckItemInput.val().trim(),/^\s*$/.test(n)?(w.stop(t),this.focusNewTaskInput(),!1):(i=_.compact(n.split(/\r\n|\r|\n/)),e=this.model,b.using(e.modelCache.getLock(),function(t){return function(){return b.resolve(i).each(function(t){var r;return r=e.checkItemList.length>0?e.checkItemList.last().get("pos")+w.spacing:w.spacing,r+=Math.floor(1024*Math.random()),j(e.checkItemList,"create",{name:t.trim(),pos:r,nameData:{emoji:o.me().allCustomEmoji()}}).catch(function(){})})}}(this)).done(),this.$newCheckItemInput.val("").trigger("autosize.resize"),this.focusNewTaskInput(),r=1===i.length?"Single Item":"Multiple Items",void B("Checklist","Add Checklist Item",r))},e.prototype.sortStop=function(t,e){w.stopPropagation(t),e.item.trigger("movecheckitem",[e,this.model,!1])},e.prototype.sortReceive=function(t,e){w.stopPropagation(t),e.item.trigger("movecheckitem",[e,this.model,!0])},e.prototype.confirmDeleteChecklist=function(t){var e;w.stop(t),e=this.model.get("name"),l.toggle("delete checklist",{elem:this.$(t.target).closest(".js-confirm-delete"),model:this.model,title:k("confirm.delete checklist.title",{checklistName:e}),confirmBtnClass:"negate",fxConfirm:function(t){return function(e){return B("Checklist","Delete Checklist"),t.model.destroy()}}(this)})},e.prototype.moveChecklist=function(t,e){var r,n,o;r=this.model.getCard(),null!=r&&(n=e.item.parent().children(),o=n.index(e.item),this.model.update("pos",r.calcChecklistPos(o,this.model)),this.model.collection.sort({silent:!0}),B("Checklist","Reorder Checklist"))},e.prototype.openEditingMenu=function(t){return w.stop(t),y.toggle({elem:t.target,view:m,options:{model:this.model,modelCache:this.modelCache,parent:this},keepEdits:!0})},e}(p))},{}],372:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m=function(t,e){function r(){this.constructor=t}for(var n in e)f.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},f={}.hasOwnProperty;n=t("jquery"),o=t(117),a=t(88),u=t(421),p=t(644),h=t(34),d=t("moment"),l=t(25).locales,s=t(74),c=t(197),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return m(e,t),e.prototype.initialize=function(){return this.listenTo(o,"add remove reset",this.frameDebounce(this.render))},e.prototype.viewTitleKey="announcements",e.prototype.events={"click .js-blog":"clickBlog","click .js-t":"clickTwitter","click .js-fb":"clickFacebook","click .js-g":"clickGoogle","click a":"openAnnouncementLink"},e.prototype.render=function(){var t,e,r,n;for(e=o.forLocale(l[0]),r=0,n=e.length;n>r;r++)t=e[r],t.isUnread()&&t.markRead();return a.set("tacoShow",d().add(1,"hours").valueOf()),this.$el.html(p(e.map(c.method("toJSON")))),this},e.prototype.clickBlog=function(){return h("Header","Announcements Menu","Trello Blog")},e.prototype.clickTwitter=function(){return h("Header","Announcements Menu","Twitter Link")},e.prototype.clickFacebook=function(){return h("Header","Announcements Menu","Facebook Link")},e.prototype.clickGoogle=function(){return h("Header","Announcements Menu","Google+ Link")},e.prototype.openAnnouncementLink=function(t){return n(t.target).closest("a").is(".js-blog, .js-t, .js-fb, .js-g, .js-close-popover")?void 0:h("Info","Announcements","Open Announcement Link")},e}(u)},{}],373:[function(t,e,r){var n,o,i,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=t(430),i=t(483),e.exports=o=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.template="confirm_merge"}return s(e,t),e.prototype.render=function(){return e.__super__.render.apply(this,arguments),this.appendSubview(this.subview(i,this.model),this.$(".js-member")),this},e}(n)},{}],374:[function(t,e,r){var n,o,i,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;n=t(178),i=t(387),s=t(418),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.initialize=function(){var t,e,r,o;r={gmail:/@(gmail|googlemail).com$/,yahoo:/@(yahoo|ymail).com$/,live:/@(hotmail|live).com$/,mac:/@(me|mac).com$/},t={gmail:"http://gmail.com",yahoo:"http://mail.yahoo.com",live:"http://live.com",mac:"https://www.icloud.com/"};for(e in r)if(o=r[e],o.test(this.model.get("email"))){this.emailInboxUrl=t[e];break}return null==this.emailInboxUrl?n({url:"/checkYourEmail",data:{email:this.model.get("email")},dataType:"json",success:function(t){return function(e){return null==e.error?(t.emailInboxUrl=e.url,t.render()):void 0}}(this)}):void 0},e.prototype.render=function(){var t;return t=this.model.toJSON(),null!=this.emailInboxUrl&&(t.emailInboxUrl=this.emailInboxUrl,t.knownEmailProvider=!0),this.$el.html(s.fill("header_warning_banner",t)),this},e}(i)},{}],375:[function(t,e,r){var n,o,i,s,a,u,c,l=function(t,e){function r(){this.constructor=t}for(var n in e)d.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},d={}.hasOwnProperty;n=t(319),o=t(498),s=t(435),a=t(421),u=t(418),c=t(34),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.viewTitleKey="create",e.prototype.events={"click .js-new-board":"newBoard","click .js-new-org":"newOrg","click .js-new-bc-org":"newBCOrg"},e.prototype.render=function(){return this.$el.html(u.fill("header_add_menu")),this},e.prototype.newBoard=function(){return c("Header","Add Menu","New Board"),s.pushView({view:new n({model:this.model,modelCache:this.modelCache})})},e.prototype.newOrg=function(){return c("Header","Add Menu","New Org"),s.pushView({view:new o({model:this.model,modelCache:this.modelCache})})},e.prototype.newBCOrg=function(){var t;return c("Header","Add Menu","New Business Class Org"),t={isBusinessClass:!0},s.pushView({view:new o({model:this.model,modelCache:this.modelCache,createOpts:t})})},e}(a)},{}],376:[function(t,e,r){var n,o,i,s,a,u,c=function(t,e){function r(){this.constructor=t}for(var n in e)l.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},l={}.hasOwnProperty;o=t(228),i=t(99),s=t(421),a=t(418),u=t(34),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.className="header-boards-button",e.prototype.events={"click .js-boards-menu":"toggleBoardsSidebar"},e.prototype.render=function(){return this.$el.html(a.fill("header_boards_menu_button")),this},e.prototype.toggleBoardsSidebar=function(t){i.stop(t),u("Header","Boards Menu","Toggle Boards Menu"),o.getShowSidebar()?o.hideSidebar():o.showSidebar()},e}(s)},{}],377:[function(t,e,r){var n,o,i,s,a,u,c,l,d=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty,h=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};n=t("jquery"),o=t(178),s=t(380),a=t(435),u=t(99),c=t(421),l=t(418),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return d(e,t),e.prototype.CHANNELS=["stable","beta","alpha"],e.prototype.viewTitleKey="switch channels",e.prototype.events={"click .js-select":"selectChannel","click .js-select-dev":"showDev","click .js-remove-cookie":"removeCookie"},e.prototype.initialize=function(){var t,e;return t=this.model.get("channels"),this.channels=function(){var r,n,o,i;for(o=this.CHANNELS,i=[],r=0,n=o.length;n>r;r++)e=o[r],h.call(t.allowed,e)>=0&&i.push({name:e,displayName:u.capitalize(e),active:e===t.active});return i}.call(this),this.isDev=t.dev},e.prototype.selectChannel=function(t){var e;return e=t.target.name,o({url:"/1/members/me/channels/active",type:"PUT",data:{value:e},success:function(t){return function(){return t.model.get("channels").active=e,a.hide(),document.location.reload()}}(this)})},e.prototype.removeCookie=function(t){return u.stop(t),n.cookie("head",null,{path:"/"}),this.render()},e.prototype.render=function(){var t;return t=!!n.cookie("head"),t&&this.isDev&&this.defer(function(t){return function(){return t.showDev()}}(this)),this.$el.html(l.fill("header_channel_picker",{channels:this.channels,cookie:t,dev:this.isDev})),this},e.prototype.showDev=function(){return a.pushView({view:s}),this},e}(c)},{}],378:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v=function(t,e){function r(){this.constructor=t}for(var n in e)y.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},y={}.hasOwnProperty,b=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};n=t(22),i=t(458),o=t(456),s=t(5),u=t(435),c=t(99),l=t(421),h=t(31),d=t(197),m=t(649),p=t(25).locales,f=d(t(34),"Header","User Menu"),g=function(t){return function(){return f(t)}},e.exports=a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return v(e,t),e.prototype.initialize=function(){return this.listenTo(this.model,"change:loginTypes",this.frameDebounce(this.render))},e.prototype.getViewTitle=function(){return this.model.getMemberViewTitle()},e.prototype.events={"click .js-profile":g("Profile"),"click .js-cards":g("Cards"),"click .js-billing":g("Billing"),"click .js-account":g("Settings"),"click .js-help":g("Help"),"click .js-platforms":g("Platforms"),"click .js-shortcuts":g("Shortcuts"),"click .js-reco":g("Recommend"),"click .js-guide":g("Getting Started with Trello Guide"),"click .js-blog":g("Trello Blog"),"click .js-change-locale":"changeLocale","click .js-logout":"logout"},e.prototype.render=function(){var t;return h("render","rendering HeaderMemberMenuView"),t={profileUrl:s.getMemberProfileUrl(),cardsUrl:s.getMemberCardsUrl(),billingUrl:s.getMemberBillingUrl(),accountUrl:s.getMemberAccountUrl(),canLogOut:n.canLogIn(),hasAccount:this.model.hasMemberOrOrgAccount(),blogUrl:b.call(p,"pt-BR")>=0?"http://br.blog.trello.com":"http://blog.trello.com"},this.$el.html(m(t)),this},e.prototype.changeLocale=function(t){f("Change Locale"),u.pushView({view:new o({model:this.model,modelCache:this.modelCache,onChange:function(t,e){return e===t?u.popView():document.location.reload()}})})},e.prototype.logout=function(t){return n.canLogIn()?(n.logoutPost(),f("Log Out")):(u.pushView({view:new i({model:this.model,modelCache:this.modelCache})}),c.stop(t))},e}(l)},{}],379:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C=function(t,e){function r(){this.constructor=t}for(var n in e)x.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},x={}.hasOwnProperty;n=t(22),o=t(5),i=t(431),s=t(432),a=t(375),u=t(377),c=t(378),d=t(487),p=t(27),h=t(168),m=t(435),f=t("bluebird"),g=t(89),v=t(99),y=t(421),b=t("underscore"),w=t(31),_=t(418),k=t(34),e.exports=l=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return C(e,t),e.prototype.className="header-user",e.prototype.initialize=function(){var t;return this.listenTo(this.modelCache,"add:Notification change:Notification remove:Notification",this.renderUnreadNotifications),this.listenTo(this.model,"change:initials change:avatarHash change:avatarSource change:fullName change:username",this.renderAvatar),this.idLastNotification=null!=(t=b.chain(this.modelCache.all("Notification")).pluck("id").compact().sort().last().value())?t:"",this.listenTo(this.modelCache,"add:Notification",this.showDesktopNotification),e.__super__.initialize.apply(this,arguments)},e.prototype.events={"click .js-open-header-notifications-menu":"viewNotificationsMenu","click .js-open-header-member-menu":"viewMemberMenu","click .js-open-add-menu":"openAddMenu","click .js-open-channel-picker":"viewChannelPicker"},e.prototype.render=function(){var t;return w("render","rendering header"),t={hasCrown:this.model.isFeatureEnabled("crown"),showChannelPicker:n.isLoggedIn()&&this.model.get("channels").allowed.length>1,escapedReturnUrl:v.escapedReturnUrl()},this.$el.html(_.fill("header_user",t,{},{header_signup_login:_.header_signup_login})),this.renderUnreadNotifications(),this.renderAvatar(),this.renderMemberName(),this},e.prototype.renderMemberName=function(){var t;return this.$(".js-member-name").text(null!=(t=this.model.get("fullName"))?t:this.model.get("username"))},e.prototype.renderAvatar=function(){return w("render","rendering avatar"),this.$(".member").html(_.fill("member",this.model.toJSON())),this},e.prototype.renderUnreadNotifications=function(){var t;return t=h.unreadCount(this.modelCache),this.$(".js-open-header-notifications-menu").toggleClass("new-notifications",t>0),o.title(),this},e.prototype.viewNotificationsMenu=function(t){v.stop(t),k("Header","Notifications Menu","Open Notifications Menu"),m.toggle({elem:this.$(".js-open-header-notifications-menu"),view:d,hidden:b.bind(this.model.clearAllNotifications,this.model),options:{model:this.model,modelCache:this.modelCache}})},e.prototype.openAddMenu=function(t){v.stop(t),k("Header","Add Menu","Open"),m.toggle({elem:this.$(".js-open-add-menu"),view:new a({model:n.me(),modelCache:this.modelCache})})},e.prototype.viewMemberMenu=function(t){var e;v.stop(t),k("Header","User Menu","Open User Menu"),e=new c({model:n.me(),modelCache:this.modelCache}),m.toggle({elem:this.$(".js-open-header-member-menu"),view:e})},e.prototype.viewChannelPicker=function(t){v.stop(t),m.toggle({elem:this.$(".js-open-channel-picker"),view:new u({model:n.me(),modelCache:this.modelCache})})},e.prototype.showDesktopNotification=function(t){return!i.enabled()||t.id<=this.idLastNotification?void 0:(this.idLastNotification=t.id,f.try(function(){var e;return e=Date.now()-g.serverToClient(t.get("date")),e<v.getMs({minutes:1})?t:p.loadNotification(t.id)}).then(function(t){return t.get("unread")?new i(t):void 0}).done())},e}(y)},{}],380:[function(t,e,r){var n,o,i,s,a,u,c=function(t,e){function r(){this.constructor=t}for(var n in e)l.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},l={}.hasOwnProperty;n=t("jquery"),i=t(99),s=t(421),a=t(418),u=t("xtend"),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.viewTitleKey="select client version",e.prototype.LATEST_VERSION={"0.0":!0},e.prototype.events={"change .js-select-head":"updateHead","change .js-select-version":"updateVersion"},e.prototype.initialize=function(){var t,e;return this.active=function(){try{return JSON.parse(n.cookie("head"))}catch(t){}}()||{},this.active.version&&(this.active.version=[null!=(t=this.active.version)?t:0,null!=(e=this.active.patch)?e:0].join(".")),n.getJSON("/web/deployments").done(function(t){return function(e){return t.deployments=e,t.render()}}(this))},e.prototype.render=function(){return null!=this.deployments?this.$el.html(a.fill("header_version_picker",{active:this.formatActive(),heads:[null].concat(this.listHeads()),versions:[null].concat(this.listVersions())})):this.$el.text("Loading..."),this},e.prototype.formatVersion=function(t){return"0.0"===t?"latest":t},e.prototype.formatActive=function(){return{name:this.active.name,version:this.formatVersion(this.active.version)}},e.prototype.listHeads=function(){var t,e,r,n;e=this.deployments,r=[];for(t in e)n=e[t],r.push({displayName:t,value:t,selected:this.active.name===t});return r},e.prototype.listVersions=function(){var t,e,r,n,o;e=this.deployments[this.active.name],r=u(this.LATEST_VERSION,e),n=[];for(o in r)t=r[o],n.push({displayName:this.formatVersion(o),value:o,selected:this.active.version===o,active:t});return n},e.prototype.updateHead=function(t){return this.active.name=n(t.target).val(),this.active.version=null,this.render()},e.prototype.updateVersion=function(t){var e,r,o,i;return this.active.version=n(t.target).val(),this.render(),o=this.active.version.split("."),i=o[0],r=o[1],e={name:this.active.name,version:i,patch:r},parseInt(i)>=0?(n.cookie("head",JSON.stringify(e),{path:"/"}),document.location.reload()):void 0},e}(s)},{}],381:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b=function(t,e){function r(){this.constructor=t}for(var n in e)w.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},w={}.hasOwnProperty,_=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};n=t(117),o=t(372),i=t(119),s=t(22),c=t(435),l=t(88),d=t(99),p=t(421),h=t("underscore"),v=t(418),y=t(34),f=t(76),g=t(25).locales,u=t(74),m=t(197),e.exports=a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return b(e,t),e.prototype.initialize=function(){return this.makeDebouncedMethods("renderTacoState"),this.listenTo(i,"add remove reset",this.renderTacoStateDebounced),this.listenTo(n,"add remove reset change:unread",this.renderTacoStateDebounced),this.updateAllAnnouncements=h.debounce(this.updateAllAnnouncements,6e4,!0),this.setInterval(function(t){return function(){return t.renderTacoState()}}(this),3e4)},e.prototype.events={click:"openAnnouncement",mouseover:"updateAllAnnouncements"},e.prototype.render=function(){return this.$el.html(v.fill("woof_header")),this.renderTacoState(),this},e.prototype.renderTacoState=function(){var t,e,r,n;r={alert:"woof-alert",unread:"woof-up",recentlyRead:"woof-crouch",none:"woof-hide"},t=this.$(".header-btn");for(n in r)e=r[n],t.removeClass(e);_.call(h.pluck(i.toJSON(),"type"),"downtime")>=0?(t.find(".js-phrase").text(f("announcements.maintenance")),t.addClass(r.alert)):t.find(".js-phrase").text(f("announcements.new stuff")),t.addClass(this.interestingAnnouncementCount()>0?r.unread:l.get("tacoShow")>Date.now()?r.recentlyRead:r.none)},e.prototype.interestingAnnouncementCount=function(){return i.forLocale(g[0]).filter(m.method("isUnread")).length},e.prototype.updateAllAnnouncements=function(){return n.fetch()},e.prototype.openAnnouncement=function(t){d.stop(t),this.updateAllAnnouncements(),c.toggle({elem:this.$(".header-btn"),view:new o({model:s.me(),modelCache:this.modelCache})}),y("Header","Announcement","Unread",this.interestingAnnouncementCount())},e}(p)},{}],382:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b=function(t,e){function r(){this.constructor=t}for(var n in e)w.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},w={}.hasOwnProperty;n=t("jquery"),o=t(429),i=t(178),s=t(22),a=t(125),u=t(373),c=t(432),d=t(383),p=t(27),h=t(99),m=t(387),f=t("underscore"),v=t(647),y=t(34),g=t(76),e.exports=l=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return b(e,t),e.prototype.events={"click .js-join-model":"joinModel","click .js-ignore-invite":"ignoreInvite","click .js-switch-accounts":"switchAccounts","click .js-create-new-account":"createNewAccount"},e.prototype.className="header-banner mod-warning mod-invited",e.prototype.initialize=function(){return this.boardOrOrg=this.options.idBoard?this.modelCache.get("Board",this.options.idBoard):this.modelCache.get("Organization",this.options.idOrganization),p.loadMemberEmail(this.getGhost().id).then(function(t){return function(e){var r;if(null!=(r=e.get("email")))return i({url:"/1/search/members/",type:"get",data:{query:r},dataType:"json",success:function(e){return f.isEmpty(e)||"normal"!==e[0].memberType?void 0:t.hasAccount=!0}})}}(this)).finally(function(t){return function(){return t.render()}}(this)).done()},e.prototype.getInviteToken=function(){return h.inviteTokenFor(this.boardOrOrg.id)},e.prototype.getMemberAdder=function(){var t;return t=this.getInviteToken().split("-")[1],this.modelCache.get("Member",t)},e.prototype.getGhost=function(){var t;return t=this.getInviteToken().split("-")[0],this.modelCache.get("Member",t)},e.prototype.render=function(){var t,e,r;return t=this.model.toJSON(),t.isLoggedIn=s.isLoggedIn(),this.boardOrOrg instanceof a?(t.isBoard=!0,t.modelName=this.boardOrOrg.get("name")):t.modelName=this.boardOrOrg.get("displayName"),t.modelType=this.boardOrOrg.typeName,e=this.getMemberAdder(),null!=e&&(t.memberAdder=e.toJSON(),t.isInviter=s.isMe(e)),t.ghost=null!=(r=this.getGhost())?r.toJSON():void 0,this.$el.html(v(t)),this},e.prototype.joinModel=function(t){var e;return h.stop(t),s.isLoggedIn()?(e=this.getGhost().get("email"),u.toggle("add email",{elem:n(t.target),model:this.model,text:g("confirm.add email.text",{ghostEmail:e}),data:this.model.toJSON(),fxConfirm:function(t){return function(){var e,r,n;return n=t.options.idBoard?"board":"organization",e=null!=(r=t.options.idBoard)?r:t.options.idOrganization,i({url:"/associate-json/"+n+"/"+e+"/"+h.inviteTokenFor(e),dataType:"json",type:"post",success:function(e){var r;return null==e.error?(t.deleteTokenCookie(),t.hideHeader(),r=function(){switch(n){case"board":return"accepted board invite";case"organization":return"accepted org invite"}}(),o.show(r,"info",null,5e3)):void 0}})}}(this)})):this.showLoginOrSignupDialog()},e.prototype.deleteTokenCookie=function(){var t;return n.cookie("invite-token-"+(null!=(t=this.options.idBoard)?t:this.options.idOrganization),null,{path:"/"})},e.prototype.hideHeader=function(){return n(this.el).hide(),h.calcBoardLayout()},e.prototype.ignoreInvite=function(t){var e,r,n,i;return h.stop(t),null!=(e=this.getGhost())?(i=this.options.idBoard?"board":"organization",r=null!=(n=this.options.idBoard)?n:this.options.idOrganization,this.boardOrOrg.memberList.remove(this.getGhost(),{invite:!0,success:function(t){return function(){var e;return t.hideHeader(),t.deleteTokenCookie(),e=function(){switch(i){case"board":return"rejected board invite";case"organization":return"rejected org invite"}}(),o.show(e,"error",null,5e3)}}(this)})):void 0},e.prototype.createNewAccount=function(t){return h.stop(t),y("Header","Login/Signup Menu","Open Login/Signup Menu: Create New"),this.showLoginOrSignupDialog(!0)},e.prototype.switchAccounts=function(t){return h.stop(t),y("Header","Login/Signup Menu","Open Login/Signup Menu"),this.showLoginOrSignupDialog()},e.prototype.showLoginOrSignupDialog=function(t){var e;return e=t?!1:this.hasAccount,c.show({displayType:"mod-login-signup-dialog",view:new d({model:this.modelCache.get("Member",s.myId()),modelCache:this.modelCache,idGhost:this.getGhost().id,idModel:this.boardOrOrg.id,hasAccount:e,modelType:this.options.idBoard?"board":"organization"})})},e}(m)},{}],383:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h=function(t,e){function r(){this.constructor=t}for(var n in e)m.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},m={}.hasOwnProperty;n=t("jquery"),o=t(178),i=t(22),s=t(60),u=t(437),c=t(99),l=t(421),d=t(418),p=t(34),e.exports=a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return h(e,t),e.prototype.className="login-signup-form",e.prototype.remove=function(){return this.$el.remove(),this},e.prototype.events={"mouseenter .js-default-active":"addMouseenterFormPartEvent","click .js-form-part":"clickFormPart","click .js-tabs a":"clickTab","click .js-create-account":"createAccount"},e.prototype.render=function(){var t,e;return e=this.modelCache.get("Member",this.options.idGhost),t=e.toJSON(),t.hasAccount=this.options.hasAccount,t.escapedReturnUrl=c.escapedReturnUrl(),n(this.el).html(d.fill("hybrid_signup_login",t)),this.defer(function(t){return function(){return t.setDefaultActive()}}(this)),this.$(".js-insert-tooltip").html(this.subview(u,i.me()).render().el),this},e.prototype.setDefaultActive=function(){return this.setFocusTo(this.$(".js-default-active")),this.$(".js-active-box").removeClass("start")},e.prototype.addMouseenterFormPartEvent=function(){return this.$(".js-default-active").unbind("mouseenter"),this.$(".js-form-part").bind("mouseenter",this.mouseenterFormPart.bind(this))},e.prototype.disableCreateAccount=function(){return this.createDisabled=!0,this.$(".js-create-account").attr("disabled","disabled")},e.prototype.enableCreateAccount=function(){return this.createDisabled=!1,this.$(".js-create-account").removeAttr("disabled")},e.prototype.createAccount=function(t){var e;return c.stop(t),this.createDisabled?void 0:(p("Invite Header","Create Account"),this.$(".js-bad-password").hide(),this.$(".js-bad-full-name").hide(),this.$(".js-bad-email").hide(),this.$(".js-used-email").hide(),e=n(t.target).closest("form"),this.disableCreateAccount(),o({type:"POST",dataType:"json",url:"/signup-invitation",data:{email:e.find('input[name="email"]').val(),idModel:this.options.idModel,type:this.options.modelType,fullName:e.find('input[name="fullName"]').val(),password:e.find('input[name="password"]').val(),inviteToken:c.inviteTokenFor(this.options.idModel)},success:function(t){return function(e){return e.success?("function"==typeof window.ga&&window.ga("send","pageview","/createAccount"),t.setTimeout(function(){return location.reload()},30)):/invalid invitation/.test(e.error)?location.reload():/password/.test(e.error)?(t.$(".js-bad-password").show(),t.enableCreateAccount()):/fullName/.test(e.error)?(t.$(".js-bad-full-name").show(),t.enableCreateAccount()):/email/.test(e.error)?(t.enableCreateAccount(),/in use/.test(e.error)?t.$(".js-used-email").show():t.$(".js-bad-email").show()):void 0}}(this)}))},e.prototype.mouseenterFormPart=function(t){return s.isTouch()||0!==this.$("*:input:focus").length||0!==this.$(".js-tooltip-content.active").length?void 0:this.setFocusTo(n(t.target).closest(".js-form-part"))},e.prototype.clickFormPart=function(t){return s.isTouch()?void 0:this.setFocusTo(n(t.target).closest(".js-form-part"))},e.prototype.setFocusTo=function(t){var e,r,n,o,i;for(t.siblings(".js-form-part").removeClass("active"),t.addClass("active"),this.$(".js-tab").removeClass("active"),this.$(".js-tab[data-content="+this.$(".js-form-part.active").attr("data-id")+"]").addClass("active"),o=["js-signup-form-pos","js-login-form-pos"],i=[],e=0,r=o.length;r>e;e++)n=o[e],i.push(this.$(".js-active-box").toggleClass(n,t.hasClass(n)));return i},e.prototype.clickTab=function(t){var e;return e=this.$("."+n(t.target).attr("data-content")),this.setFocusTo(e)},e}(l)},{}],384:[function(t,e,r){var n,o,i,s,a,u,c,l=function(t,e){function r(){this.constructor=t}for(var n in e)d.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},d={}.hasOwnProperty;i=t(57),o=t(387),u=t(416)(),s=t(197),c=s(t(34),"Header","New Locale Banner"),a={"pt-BR":{mainText:"Trello agora está disponível em Português!",switchText:"Confira aqui",dismissText:"Não Obrigado"},es:{mainText:"¡Trello disponible ahora en español!",switchText:"Pruébalo",dismissText:"No Gracias"},de:{mainText:"Trello gibt es jetzt auch auf Deutsch!",switchText:"Probier's aus!",dismissText:"Nein, danke."},fr:{mainText:"Trello est maintenant disponible en français!",switchText:"Changez de langue",dismissText:"Non, Merci"}},e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.initialize=function(t){this.locale=t.locale},e.prototype.events={"click .js-switch-language":function(){return c("Set locale to "+this.locale),this.setLocale()},"click .js-dismiss":function(){return c("Dismiss "+this.locale),this.dismiss(function(){})}},e.prototype.setLocale=function(){return this.model.setPref("locale",this.locale,function(t){return function(){return t.dismiss(function(){return document.location.reload()})}}(this))},e.prototype.dismiss=function(t){return this.model.dismissLanguageBannerFor(this.locale,function(e){return function(){return e.remove(),t()}}(this))},e.prototype.render=function(){var t;return t=a[this.locale],i(null!=t,"Attempt to show a NewLocaleBanner with an unrecognized locale"),this.$el.html(u.render(function(){return u.text(t.mainText),u.text(" "),u.a({href:"#",class:"quiet primary js-switch-language"},t.switchText),u.text(" - "),u.a({href:"#",class:"quiet js-dismiss"},t.dismissText)})),this},e}(o)},{}],385:[function(t,e,r){var n,o,i,s,a,u=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;n=t(5),i=t(387),a=t(418),s=t(76),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.initialize=function(){return this.listenTo(this.model,"change:prefs",this.frameDebounce(this.render))},e.prototype.render=function(){var t,e,r,o,i,u;return r=this.model.toJSON(),i=this.model.get("prefs"),e="public"===i.voting,t="public"===i.comments,o=e&&t?"subscribe vote comment":e?"subscribe vote":t?"subscribe comment":"subscribe",r.interactionText=s(["public interactions",o]),u=encodeURIComponent(n.getBoardUrl(this.model)),r.signupUrl="/signup?returnUrl="+u+"&source=public-board-banner",r.tourUrl="/tour?board="+u+"&source=public-board-banner",this.$el.html(a.fill("header_public_board",r)),this},e}(i)},{}],386:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p=function(t,e){function r(){this.constructor=t}for(var n in e)h.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},h={}.hasOwnProperty;n=t("jquery"),o=t(22),i=t(458),s=t(435),u=t(99),c=t(387),l=t(418),d=t(34),e.exports=a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.initialize=function(){return this.listenTo(this.model,"change:loginTypes",function(t){return function(){return t.$el.toggle(!o.canLogIn()),n(window).triggerHandler("resize")}}(this))},e.prototype.events={"click .js-change-password":"changePassword"},e.prototype.render=function(){return this.$el.html(l.fill("header_warning_password",this.model.toJSON())),this},e.prototype.changePassword=function(t){return u.stop(t),s.toggle({elem:this.$(".js-change-password"),view:new i({model:this.model,modelCache:this.modelCache})}),d("Header","Password Banner","Open Change Password Menu")},e}(c)},{}],387:[function(t,e,r){var n,o,i=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=t(421),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.className="header-banner mod-warning",e}(n)},{}],388:[function(t,e,r){var n,o,i,s,a,u,c,l;n=t("jquery"),i=t(60),s=t(73),a=t(14),u=t(435),c=t(99),l=t("underscore"),e.exports=o=function(){function t(){}return t.prototype.checkInsert=function(t){var e,r,o,l,d,p,h,m;if(d=s.getKey(t),u.isVisible&&!i.isTouch())if(t.shiftKey&&(d===a.ArrowUp||d===a.ArrowDown)||t.altKey&&(d===a.ArrowUp||d===a.ArrowDown));else if(d===a.Escape)c.stop(t),u.hide();else for(r=[{listClass:".js-available-members",itemClass:".js-select-member"},{listClass:".js-available-emoji",
itemClass:".js-select-emoji"},{listClass:".js-card-list",itemClass:".js-select-card"}],o=0,p=r.length;p>o;o++)if(m=r[o],h=m.listClass,l=m.itemClass,e=n(".pop-over").find(h),e.length>0){if(d===a.Enter||d===a.Tab)return c.stop(t),e.find(".item:first").hasClass("selected")&&(this.keyAutoMention(t),e=n(".pop-over").find(h)),e.find(".item.selected:first "+l).first().click(),u.hide(),!1;if(d===a.ArrowUp||d===a.ArrowDown)return c.stop(t),c.navMenuList(e,".item",d),!1}},t.prototype.keyAutoMention=function(t){var e,r,n,o,a,d,p;if(!i.isTouch()){if(s.isArrow(s.getKey(t)))return;if(p=c.getWordFromCaret(this.getTextInput()),/^@\S/.test(p.str.substring(0,2))){if(e=this.getAutoMentionerView("input"),u.load(e),0===e.idMatchMems.length)return;return u.show({elem:this.getMentionTarget(),view:e,preloaded:!0,keepEdits:!0}),void(this.getTextInput().is(":focus")||this.getTextInput().focus())}return/^:[a-z0-9_]+$/.test(p.str)?(r=this.getEmojiCompleterView("input"),u.load(r),u.show({elem:this.getEmojiTarget(),view:r,preloaded:!0,keepEdits:!0}),void(this.getTextInput().is(":focus")||this.getTextInput().focus())):(n=c.getLineFromCaret(this.getTextInput()),d=/^(?:.*\s)?\#((?!\s)[^\#\.,;:@]{0,32})$/,null!=(o=null!=(a=d.exec(n.str))?a[1]:void 0)?(null==this.debouncedCardSearch&&(this.debouncedCardSearch=l.debounce(function(t){return function(e){var r,n;return r=t.getInputCardCompleterView(),n=function(){return u.show({elem:t.getCardTarget(),view:r,preloaded:!0,keepEdits:!0})},t._lastQuery=e,r.search(e,function(o,i){return e===t._lastQuery?o||l.isEmpty(i)?u.hide():(u.load(r),n()):void 0})}}(this),200)),void this.debouncedCardSearch(o)):this.setTimeout(function(){return u.hide()},5))}},t}()},{}],389:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f=function(t,e){function r(){this.constructor=t}for(var n in e)g.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},g={}.hasOwnProperty;n=t("jquery"),o=t(22),s=t(73),a=t(14),u=t(435),c=t(483),l=t(99),d=t(421),p=t("underscore"),h=t(418),m=t(34),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return f(e,t),e.prototype.viewTitleKey="mention",e.prototype.events={"mouseenter .js-select-member":"hoverItem","click .js-select-member":"insertMember","click .js-select-all-card-members":"selectAllCardMembers","mouseenter .js-select-all-card-members":"deselectMember","click .js-select-all-board-members":"selectAllBoardMembers","mouseenter .js-select-all-board-members":"deselectMember","click .js-select-all-commenters":"selectAllCommenters","mouseenter .js-select-all-commenters":"deselectMember",keydown:"keydownEvent","keyup .js-filter-mentionables":"keyupEvent"},e.prototype.render=function(){var t,e,r,n,o;return o=this,this.getMembers(),t={},this.options.input&&(t.input=!0),this.options.button&&(t.button=!0),t.showAllCardMembers=0<(e=this.idCardMems.length)&&12>e,t.showAllBoardMembers=0<(r=this.idBoardMems.length)&&12>r,t.showAllCommenters=0<(n=this.idCommenters.length)&&12>n,this.$el.html(h.fill("popover_auto_mentioner",t)),this.$memList=this.$(".js-available-members"),t.button&&(this.$(".js-select-all-card-members .mem-count").text("("+this.idCardMems.length+")"),this.$(".js-select-all-board-members .mem-count").text("("+this.idBoardMems.length+")"),this.$(".js-select-all-commenters .mem-count").text("("+this.idCommenters.length+")"),(t.showAllCardMembers||t.showAllBoardMembers||t.showAllCommenters)&&this.$(".js-select-multiple-options").removeClass("hide")),this.options.button?this.fillMembers(this.idAllMembers):this.options.input&&this.filterMentionables(),this},e.prototype.getCard=function(){return this.options.card},e.prototype.getTextInput=function(){return n(this.options.target)},e.prototype.getMembers=function(){var t,e,r;r=o.myId(),e=this.getCard(),t=e.getBoard(),this.idCardMems=p.without(e.getIdCardMems(),r),this.idBoardMems=p.without(t.getIdBoardMems(),r),this.idCommenters=p.without(e.getIdCommenters(),r),this.idAllMembers=p.uniq(this.idCardMems.concat(this.idBoardMems).concat(this.idCommenters))},e.prototype.clearMemberList=function(){return this.$memList.empty()},e.prototype.keydownEvent=function(t){var e;((e=s.getKey(t))===a.Enter||e===a.Tab)&&(l.stop(t),this.$memList.find(".item.selected:first .js-select-member").click())},e.prototype.keyupEvent=function(t){var e;if(e=s.getKey(t),e===a.Enter||e===a.Tab||e===a.ArrowLeft||e===a.ArrowRight);else{if(e!==a.ArrowUp&&e!==a.ArrowDown)return this.filterMentionables();l.stop(t),l.navMenuList(this.$memList,".item",e)}},e.prototype.filterMentionables=function(t){var e,r,o,i,s,a,c,d,h;for(this.clearMemberList(),this.options.button?c=n(".js-filter-mentionables").val().trim().toLowerCase():this.options.input&&(e=this.getTextInput(),h=l.getWordFromCaret(e),c=h.str.substring(1).toLowerCase()),d=RegExp("^"+l.escapeForRegex(c)),o=this.idAllMembers,this.idMatchMems=[],r=0,i=o.length;i>r;r++)s=o[r],a=l.getMemNameArray(this.modelCache,s),p.find(a,function(t){return d.test(t)})&&this.idMatchMems.push(s);return this.options.input&&(1===this.idMatchMems.length&&c===this.modelCache.get("Member",this.idMatchMems[0]).get("username")||0===this.idMatchMems.length)?void this.setTimeout(function(){return u.hide()},5):(this.fillMembers(this.idMatchMems),l.selectMenuItem(this.$memList,".item",this.$memList.find(".item").first()))},e.prototype.hoverItem=function(t){var e;return e=n(t.target).closest(".item"),l.selectMenuItem(this.$memList,".item",e)},e.prototype.deselectMember=function(t){return this.$memList.find(".item").removeClass("selected")},e.prototype._membersFromIds=function(t){return p.compact(p.map(t,function(t){return function(e){return t.modelCache.get("Member",e)}}(this)))},e.prototype.fillMembers=function(t){var e,r,n,o;for(o=this._membersFromIds(t).slice(0,6),this.$memList.empty(),e=0,r=o.length;r>e;e++)n=o[e],this.appendSubview(this.subview(c,n),this.$memList);this.$(".js-empty-list").toggleClass("hide",o.length>0)},e.prototype.insertMember=function(t){var e,r,o;l.stop(t),m("Card Detail","Mention Member Autocomplete","Insert"),r=n(t.target).closest(".js-select-member").find(".username").text(),e=this.getTextInput(),this.options.button?l.insertSelection(e,"@"+r+" "):this.options.input&&(o=l.getWordFromCaret(e),l.insertSelection(e,"@"+r+" ",o.start,o.end)),u.hide()},e.prototype.selectAllCardMembers=function(t){var e,r,n,o,i,s,a;for(l.stop(t),m("Card Detail","Mention Member Autocomplete","Insert - All Card Members"),e=this.getTextInput().focus(),n="",s=this.idCardMems,r=0,o=s.length;o>r;r++)i=s[r],a=this.modelCache.get("Member",i).get("username"),n+="@"+a+" ";l.insertSelection(e,n),u.hide()},e.prototype.selectAllBoardMembers=function(t){var e,r,n,o,i,s,a;for(l.stop(t),m("Card Detail","Mention Member Autocomplete","Insert - All Board Members"),e=this.getTextInput().focus(),n="",s=this.idBoardMems,r=0,o=s.length;o>r;r++)i=s[r],a=this.modelCache.get("Member",i).get("username"),n+="@"+a+" ";l.insertSelection(e,n),u.hide()},e.prototype.selectAllCommenters=function(t){var e,r,n,o,i,s,a;for(l.stop(t),m("Card Detail","Mention Member Autocomplete","Insert - All Commenters"),e=this.getTextInput().focus(),n="",s=this._membersFromIds(this.idCommenters),r=0,o=s.length;o>r;r++)i=s[r],a=i.get("username"),n+="@"+a+" ";l.insertSelection(e,n),u.hide()},e}(d)},{}],390:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v=function(t,e){function r(){this.constructor=t}for(var n in e)y.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},y={}.hasOwnProperty;n=t("jquery"),s=t(73),a=t(14),u=t(27),c=t(435),l=t("bluebird"),d=t(99),p=t(421),h=t("underscore"),m=t(102),f=t(418),g=t(34),o=t(179),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return v(e,t),e.prototype.viewTitleKey="add card",e.prototype.events={"mouseenter .js-select-card":"hoverItem","click .js-select-card":"selectCard",keydown:"keydownEvent","keyup .js-search":"keyupEvent","input .js-search":"updateSearch"},e.prototype.initialize=function(){return this.cards=[],this.debouncedSearch=this.debounce(this.search,200).bind(this)},e.prototype.render=function(){var t,e;return e=this,t={},this.options.input&&(t.input=!0),this.options.button&&(t.button=!0,t.hideLoading=!0),this.$el.html(f.fill("popover_card_completer",t)),this.renderCards()},e.prototype.renderCards=function(){var t,e,r,n,o;return t=this.$(".js-card-list").empty(),n=function(){var t,n,i,s;for(i=this.cards,s=[],t=0,n=i.length;n>t;t++)r=i[t],o=r.toJSON(),e=r.getBoard(),null!=e&&(o.boardName=e.get("name")),s.push(f.fill("select_card",o));return s}.call(this),t.append(n),this.$(".js-loading").addClass("hide"),d.selectMenuItem(t,".item",t.find(".item").first()),this},e.prototype.keyupEvent=function(t){var e;e=s.getKey(t),(e===a.ArrowUp||e===a.ArrowDown)&&(d.stop(t),d.navMenuList(this.$(".js-card-list"),".item",e))},e.prototype.updateSearch=function(t){var e;return e=this.$(".js-search").val(),this.debouncedSearch(e)},e.prototype.keydownEvent=function(t){var e,r,n;return e=this.$(".js-card-list"),((n=s.getKey(t))===a.Enter||n===a.Tab)&&(d.stop(t),r=e.find(".item.selected:first .js-select-card"),r.length>0)?r.click():void 0},e.prototype.getTextInput=function(){return n(this.options.target)},e.prototype.search=function(t,e){var r,n,i,s,a;if(null==e&&(e=function(){}),t!==this._lastQuery){if(this._lastQuery=t,""===t)return this.cards=[],this.renderCards(),void e(null,[]);if(d.isShortId(t)&&(n=this.options.card,r=null!=n?n.getBoard():void 0,null!=r))return i=null!=(s=r.getCard(t))?l.resolve(s):u.loadCardData(r.id,t),void i.then(function(t){return[t]}).catch(o.NotFound,o.Unauthorized,function(){return[]}).tap(function(t){return function(e){return t.cards=e}}(this)).nodeify(e).catch(function(){}).done();a={query:t,modelTypes:"cards",partial:!0},u.loadSearchData(a).nodeify(function(r){return function(o,i){return t===r._lastQuery?null==o?(r.cards=function(){var t,e,r,o;for(r=i.cards,o=[],t=0,e=r.length;e>t;t++)n=r[t],o.push(this.modelCache.get("Card",n.id));return o}.call(r),r.options.input&&h.isEmpty(r.cards)&&c.hide(),r.renderCards(),e(null,i.cards)):(r.options.input&&c.hide(),e(o)):void 0}}(this))}},e.prototype.hoverItem=function(t){var e,r;return e=this.$(".js-card-list"),r=n(t.target).closest(".item"),d.selectMenuItem(e,".item",r)},e.prototype.selectCard=function(t){var e,r;d.stop(t),r=n(t.target).closest(".js-select-card").attr("id"),e=this.modelCache.get("Card",r),null!=e&&this.insertCard(e),c.hide()},e.prototype.insertCard=function(t){var e,r,n,o,i;return o=t.get("url"),e=this.getTextInput(),this.options.input?(i=d.getLineFromCaret(e),n=i.str.lastIndexOf("#"),-1!==n&&(i.start+=n)):(r=d.getCaretPosition(e),r&&(i={start:r,end:r})),d.insertSelection(e,o+" ",null!=i?i.start:void 0,null!=i?i.end:void 0),g("Card Detail","Comment Box - Added Card",this.options.input?"inline":"via menu")},e}(p)},{}],391:[function(t,e,r){var n,o,i,s,a,u,c,l,d;n=t("jquery"),o=t(352),i=t(389),s=t(390),u=t(392),c=t(435),l=t(99),d=t(34),e.exports=a=function(){function t(){}return t.prototype.openEmojiCompleter=function(t){return l.stop(t),c.pushView({view:this.getEmojiCompleterView("button")})},t.prototype.openAutoMentioner=function(t){return l.stop(t),c.pushView({view:this.getAutoMentionerView("button")}),d("Card Detail","Mention Autocomplete","Open Menu - With Click")},t.prototype.getAutoMentionerView=function(t){var e;return e=this.getCard(),new i({model:e,button:"button"===t,input:"input"===t,target:this.getTextInput(),card:e,modelCache:this.modelCache})},t.prototype.getEmojiCompleterView=function(t){var e;return e=this.getCard(),new u({model:e,button:"button"===t,input:"input"===t,target:this.getTextInput(),card:e,modelCache:this.modelCache})},t.prototype.getCardCompleterView=function(t){var e;return e=this.getCard(),new s({model:e,button:"button"===t,input:"input"===t,target:this.getTextInput(),card:e,modelCache:this.modelCache})},t.prototype.getInputCardCompleterView=function(){var t;return t=this.getCard(),new s({input:!0,target:this.getTextInput(),card:t,modelCache:this.modelCache})},t.prototype.commentAddAttachment=function(t){var e;t.preventDefault(),e=this.getCard(),c.toggle({elem:n(t.currentTarget),keepEdits:!0,view:o,options:{model:e,modelCache:this.modelCache}}),d("Card Detail","Comment Box - Open Attachment Type Picker")},t.prototype.commentMentionMember=function(t){t.preventDefault(),c.toggle({elem:n(t.currentTarget),keepEdits:!0,view:this.getAutoMentionerView("button")}),d("Card Detail","Comment Box - Mention Members")},t.prototype.commentAddEmoji=function(t){t.preventDefault(),c.toggle({elem:n(t.currentTarget),keepEdits:!0,view:this.getEmojiCompleterView("button")}),d("Card Detail","Comment Box - Add Emoji")},t.prototype.commentAddCard=function(t){t.preventDefault(),c.toggle({elem:n(t.currentTarget),keepEdits:!0,view:this.getCardCompleterView("button")}),d("Card Detail","Comment Box - Add Card")},t}()},{}],392:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y=function(t,e){function r(){this.constructor=t}for(var n in e)b.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},b={}.hasOwnProperty,w=[].slice;n=t("jquery"),o=t(22),s=t(393),a=t(73),u=t(14),c=t(27),l=t(435),p=t(99),h=t(421),m=t("underscore"),g=t(418),v=t(34),d=t("emoji-map"),f=t(76),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return y(e,t),e.prototype.viewTitleKey="emoji",e.prototype.events={"mouseenter .js-select-emoji":"hoverItem","click .js-select-emoji":"selectEmoji",keydown:"keydownEvent","keyup .js-filter-emoji":"keyupEvent","click .js-upload-emoji":"openEmojiUploader"},e.prototype.initialize=function(){this._customEmoji={},o.me().isFeatureEnabled("customEmoji")&&(this.listenTo(o.me().customEmojiList,"change add remove reset",this.updateCustomEmoji),this.updateCustomEmoji())},e.prototype.render=function(){var t,e;return e=this,t={},this.options.input&&(t.input=!0),this.options.button&&(t.button=!0),this.$el.html(g.fill("popover_emoji_completer",t)),this.$emojiList=this.$(".js-available-emoji"),this.options.input&&this.filterEmoji(this.getInput()),this.options.button&&this.fillDefaultEmojiList(),this},e.prototype.keyupEvent=function(t){var e,r;return r=a.getKey(t),r===u.ArrowUp||r===u.ArrowDown?(p.stop(t),void p.navMenuList(this.$emojiList,".item",r)):r!==u.Enter&&r!==u.Tab?(e=this.getInput(),this.filterEmoji(e)):void 0},e.prototype.keydownEvent=function(t){var e,r;return((r=a.getKey(t))===u.Enter||r===u.Tab)&&(p.stop(t),e=this.$emojiList.find(".item.selected:first .js-select-emoji"),e.length>0)?e.click():void 0},e.prototype.updateCustomEmoji=function(){return this._customEmoji=m.object(o.me().customEmojiList.map(function(t){return[t.get("name"),t.get("value")]})),this.render()},e.prototype.getTextInput=function(){return n(this.options.target)},e.prototype.getInput=function(){var t,e;return this.options.button?this.$(".js-filter-emoji").val():(t=this.getTextInput(),e=p.getWordFromCaret(t),e.str.substring(1))},e.prototype.filterEmoji=function(t){return this.clearEmojiList(),this.fillEmojiList(t)?p.selectMenuItem(this.$emojiList,".item",this.$emojiList.find(".item").first()):void 0},e.prototype.renderEmojiList=function(t){var e,r,n,o,i;for(n=0,o=t.length;o>n;n++)r=t[n],e={name:r,image:null!=(i=this._customEmoji[r])?i:d[r]},this.$emojiList.append(g.fill("select_emoji",e));return this},e.prototype.fillDefaultEmojiList=function(t){var e;e=["thumbsup","smile","warning","sunglasses","ballot_box_with_check","facepalm"],this.renderEmojiList(e)},e.prototype.fillEmojiList=function(t){var e,r;return r=t.replace(/\W+/g,""),""===t?(this.fillDefaultEmojiList(),!1):/[A-Z]/.test(r)&&this.options.input?(l.hide(),!1):(r=r.toLowerCase(),this.$(".js-upload-emoji").text(f("upload emoji named",{emojiName:r})).attr("data-emojiname",r),this.$(".js-no-matching-emoji-helper").text(f("no matching emoji helper",{emojiName:r})),e=this.getEmojiSuggestions(r).slice(0,6),e.length>0?(this.$(".js-results").removeClass("hide"),this.$(".js-no-results").addClass("hide"),this.renderEmojiList(e)):(this.$(".js-results").addClass("hide"),this.$(".js-no-results").removeClass("hide")),0!==e.length)},e.prototype.clearEmojiList=function(){return this.$emojiList.empty()},e.prototype.getEmojiSuggestions=function(t){var e,r,n,o,i,s,a,u,c;if(a=RegExp("^"+p.escapeForRegex(t)),e=function(){var t;t=[];for(i in this._customEmoji)a.test(i)&&t.push(i);return t}.call(this),c=function(){var t;t=[];for(i in d)a.test(i)&&t.push(i);return t}(),null==this._sortOverride)for(u=["thumbsup","smile","warning","sunglasses","facepalm","question","thumbsdown","wink","smiley","smile_cat","bowtie","heart","laughing","bug","cry","dancer","dancers","clap","shipit","white_check_mark","star","arrow_down","point_down","point_up","point_left","metal"],this._sortOverride={},o=n=0,s=u.length;s>n;o=++n)r=u[o],this._sortOverride[r]=o+1;return m.uniq(w.call(e).concat(w.call(c))).sort(function(t){return function(e,r){var n,o;return n=t._sortOverride[e],o=t._sortOverride[r],n&&!o?-1:o&&!n?1:(n&&o&&(e=n,r=o),r>e?-1:e>r?1:0)}}(this))},e.prototype.hoverItem=function(t){var e;return e=n(t.target).closest(".item"),p.selectMenuItem(this.$emojiList,".item",e)},e.prototype.selectEmoji=function(t){var e;p.stop(t),e=n(t.target).closest(".js-select-emoji").find(".emoji-name").text(),this.insertEmoji(e),l.hide()},e.prototype.insertEmoji=function(t){var e,r,n;return e=this.getTextInput(),this.options.input?n=p.getWordFromCaret(e):(r=p.getCaretPosition(e),r&&(n={start:r,end:r})),p.insertSelection(e,":"+(""+t).trim()+": ",null!=n?n.start:void 0,null!=n?n.end:void 0),v("Emoji Select",t)},e.prototype.openEmojiUploader=function(t){var e;p.stop(t),e=this.$(t.target).attr("data-emojiname"),l.pushView({keepEdits:!0,view:s,options:{model:o.me(),emojiName:e,completerView:this}}),v("Card Detail","Open Custom Emoji Uploader")},e}(h)},{}],393:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p=function(t,e){function r(){this.constructor=t}for(var n in e)h.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},h={}.hasOwnProperty;n=t("jquery"),o=t(429),i=t(22),a=t(435),u=t(99),c=t(421),d=t(418),l=t(76),e.exports=s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.viewTitleKey="upload emoji",e.prototype.events=function(){return{"click .js-upload-emoji":"uploadEmoji","change .js-upload-emoji-file":"fileChange","input .js-emoji-name":"nameChange"}},e.prototype.initialize=function(t){var e,r,n,o,i;for(this.completerView=t.completerView,this.hasGold=this.model.isFeatureEnabled("customEmoji"),this.hasBCGold=!1,o=this.model.organizationList.models,i=[],e=0,r=o.length;r>e&&(n=o[e],this.hasBCGold=n.isFeatureEnabled("goldMembers"),!this.hasBCGold);e++)i.push(void 0);return i},e.prototype.render=function(){var t,e;return e=this,t=this.model.toJSON(),t.emojiName=this.options.emojiName,t.hasGold=this.hasGold,t.hasBCGold=this.hasBCGold,t.canUpload=this.hasGold||this.hasBCGold,this.$el.html(d.fill("popover_emoji_uploader",t)),this._validate(),this.renderEmoji(),this},e.prototype.getName=function(){return this.$(".js-emoji-name").val().trim().toLowerCase().replace(/\s+/g,"_")},e.prototype.renderEmoji=function(){var t,e,r,n,o;return this.$(".js-emoji-preview-name").text(":"+(this.getName()||"???")+":"),t=this.$(".js-emoji-preview"),e=this.$(".js-upload-emoji-file"),r=null!=(o=e.prop("files"))?o[0]:void 0,/^image\/.*/.test(null!=r?r.type:void 0)?(n=new FileReader,n.onload=function(t){return function(e){return t.$(".js-emoji-conversion").removeClass("hide"),t.$(".js-emoji-preview").attr("src",e.target.result)}}(this),n.readAsDataURL(r)):this.$(".js-emoji-conversion").addClass("hide"),this},e.prototype.fileChange=function(t){var e,r,o,i,s,a,u;return r=this.$(".js-emoji-name"),e=this.$(".js-upload-emoji-file"),""===r.val()&&(i=n(t.target),o=null!=(a=e.prop("files"))?a[0]:void 0,null!=o?s=o.name:e.val()&&(s=null!=(u=/[^\/]+$/.exec(e.val()))?u[0]:void 0),null==s&&(s=""),s=s.split(".")[0],s=s.toLowerCase().replace(/[^a-z0-9_]/g,""),r.val(s),this.$(".js-emoji-name").focus().select()),this.renderEmoji(),this._validate()},e.prototype.nameChange=function(t){return this.renderEmoji(),this._validate()},e.prototype._validate=function(t){var e,r,n,o,i,s;return n=this.getName(),e=this.$(".js-upload-emoji-file"),o=/^[a-z0-9_\s]+$/.test(n),r=(null!=(i=e.prop("files"))?i.length:void 0)>0||e.val(),s=o&&r&&(this.hasGold||this.hasBCGold),this.$(".js-invalid-name").toggleClass("hide",o||""===n),this.$(".js-upload-emoji").toggleClass("disabled",!s)},e.prototype.uploadEmoji=function(t){var e,r,s,c,l,d,p;if(u.stop(t),!n(".js-upload-emoji").hasClass("disabled")){if(this.$(".error").addClass("hide"),e=this.$(".js-upload-emoji-file"),s=null!=(p=e.prop("files"))?p[0]:void 0,c=this.getName(),l=function(t){return function(){return t.completerView.insertEmoji(c),a.hide()}}(this),!s&&e.val())return void u.uploadFile(i.myToken(),e,l);if(null!=s&&!u.validFileSize(s))return void o.flash("file too large","error");if(null!=s&&c)return d=new FileReader,r=new FormData,r.append("token",i.myToken()),r.append("file",s),r.append("name",c),d.onload=function(t){return function(e){return t.model.customEmojiList.create({url:e.target.result,name:c},{data:r,processData:!1,contentType:!1,success:l,error:function(){return this.$(".error").removeClass("hide")}})}}(this),d.readAsDataURL(s)}},e}(c)},{}],394:[function(t,e,r){var n,o,i,s,a,u,c,l,d=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;n=t(391),i=t(73),s=t(14),a=t(99),u=t(421),c=t(81),l=t(418),e.exports=c(n,o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return d(e,t),e.prototype.viewTitleKey="options",e.prototype.events=function(){return{"click .js-open-mention-selector":"openAutoMentioner","click .js-open-emoji-selector":"openEmojiCompleter",keydown:"keydownEvent"}},e.prototype.render=function(){return this.$el.html(l.fill("popover_insertion_menu")),this},e.prototype.keydownEvent=function(t){var e;return e=i.getKey(t),e===s.Enter?(a.stop(t),this.$emojiList.find(".item.selected:first .js-select-emoji").click()):e===s.Enter?(a.stop(t),this.$memList.find(".item.selected:first .js-select-member").click()):void 0},e.prototype.getCard=function(){return this.model.getCard()},e.prototype.getTextInput=function(){return this.options.parent.getTextInput()},e}(u))},{}],395:[function(t,e,r){var n,o;o=t(76),n={getPermLevelAltText:function(t,e){var r,n,i;return i=null!=e?(n=e.isFeatureEnabled("superAdmins")?"superadmin text":"normal text",[n,{orgName:e.get("displayName")}]):"org"===t?["no org text",{}]:["normal text",{}],n=i[0],r=i[1],o(["board perms",t,n],r)},getPermLevelAltTextForBoard:function(t){return n.getPermLevelAltText(t.getPermLevel(),t.getOrganization())},getPermLevelIconClass:function(t){return"org"===t?"organization-visible":t},getPermLevelIconClassForBoard:function(t){return n.getPermLevelIconClass(t.getPermLevel())}},e.exports=n},{}],396:[function(t,e,r){var n,o,i,s,a,u=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty,l=[].slice;n=t("jquery"),i=t(421),s=t("underscore"),a=t(31),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.initialize=function(){return this.listenPropagators={},this.listenTo(this.collection,{sort:this.sort,add:this.addModel,remove:this.removeModel,reset:this.reset}),e.__super__.initialize.apply(this,arguments)},e.prototype.getModels=function(){return this.collection.models},e.prototype.subview=function(){var t,r,n;return n=e.__super__.subview.apply(this,arguments),null==(t=this.listenPropagators)[r=n.cid]&&(t[r]=this.listenTo(n,"all",function(t){return function(){var e,r;return r=arguments[0],e=2<=arguments.length?l.call(arguments,1):[],t.trigger.apply(t,[r,n].concat(l.call(e)))}}(this))),n},e.prototype.addModel=function(t,e){var r;a("render","adding "+this.collection.model.name+" to "+this.viewType.name),r=this.subview(this.viewType,t),this.el&&this.insertSubview(r,s.indexOf(this.getModels(),t))},e.prototype.removeModel=function(t,e){return a("render","removing "+this.collection.model.name+" from "+this.viewType.name),this.removeSubview(this.viewForModel(t))},e.prototype.reset=function(t,e){var r,n,o,i,s,a,u,c;for(u=e.previousModels,o={},c=t.models,r=0,i=c.length;i>r;r++)a=c[r],o[a.cid]=!0;for(n=0,s=u.length;s>n;n++)a=u[n],o[a.cid]||this.removeModel(a);return this.sort()},e.prototype.sort=function(){var t,e,r,n,o;for(o=this.getModels(),e=t=0,r=o.length;r>t;e=++t)n=o[e],this.moveSubviewToPosition(this.subview(this.viewType,n),e)},e.prototype.render=function(){var t;return a("render","rendering "+this.getModels().length+" "+this.collection.model.name+"s into "+this.viewType.name),this.appendSubviews(function(){var e,r,n,o;for(n=this.getModels(),o=[],e=0,r=n.length;r>e;e++)t=n[e],o.push(this.subview(this.viewType,t));return o}.call(this)),this},e.prototype.viewForModel=function(t){return this.existingSubview(this.viewType,t)},e.prototype.removeSubview=function(t){return this.deleteSubview(t)},e.prototype.insertSubview=function(t,e,r){null==r&&(r=this.$el),a("render","inserting "+t.$el.find("h2").text()+" at position "+e),"number"==typeof e?e=0>=e?r.children().eq(0):e<r.children().length?r.children().eq(e):void 0:e instanceof i&&(e=e.$el),t.$el.is(":empty")&&(t.delegateEvents(),t.render()),(null!=e?e.length:void 0)>0?t.$el.insertBefore(e):r.append(t.$el)},e.prototype.moveSubviewToPosition=function(t,e,r){var o,i,s,u,c;if(null==r&&(r=this.$el),t.$el.is(":empty"))return void this.insertSubview(t,e,r);for(c=r.children(".placeholder,.card-composer"),i=0,u=c.length;u>i;i++)s=c[i],n(s).index()<=e&&e++;o=t.$el.index(),o!==e&&(a("render","moving "+t.$el.find("h2").text()+" into position "+e),0===e?r.prepend(t.$el):e>=r.children().length?r.append(t.$el):t.$el.insertAfter(r.children().eq(e-1)))},e}(i)},{}],397:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m;n=t("underscore"),o=t(93),p=t(98),d=t(398),a=d.getTypes,s=d.getDropped,l=function(t,e){document.addEventListener(t,e)},h=function(t,e,r,n){var o,i,s;for(o=0,i=r.length;i>o;o++)s=r[o],p(t,e+":"+s,n)},i=function(t){var e;return t?(e=i(t.parentElement),e.push(t),e):[]},u=[],c=null,m=function(t,e){var r,n,s,a,l,d,p,m,f;if(clearTimeout(c),!(u.length>0&&u[u.length-1]===t)){for(p=i(t),s=o(p,u,function(t,e){return t===e}),m=u.slice(s),n=0,l=m.length;l>n;n++)r=m[n],h(r,"dd-leave",e,{bubbles:!1});for(f=p.slice(s),a=0,d=f.length;d>a;a++)r=f[a],h(r,"dd-enter",e,{bubbles:!1});return u=p}},l("dragenter",function(t){return m(t.target,a(t.dataTransfer)),t.preventDefault()}),l("dragover",function(t){var e;return e=a(t.dataTransfer),e.length>0&&(t.dataTransfer.dropEffect="copy"),m(t.target,e),t.preventDefault()}),l("dragleave",function(t){var e;return e=a(t.dataTransfer),c=setTimeout(function(){return m(null,e)},200)}),l("dragend",function(t){return m([],t)}),l("drop",function(t){var e;e=a(t.dataTransfer),s(t).then(function(r){var n,o;for(o in r)n=r[o],p(t.target,"dd-drop:"+o,{detail:n});return m(null,e)}),t.preventDefault()})},{}],398:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w;n=t("bluebird"),o=t("underscore"),w=t(112),p=function(t){var e;return e=function(){switch(t.kind){case"file":return"files";case"string":switch(t.type){case"text/uri-list":return"url";case"text/plain":return"text"}}}(),e||"unknown"},g=function(t){return o.chain(t.items).map(p).compact().uniq().value()},h=function(t){switch(t){case"Files":case"application/x-moz-file":return"files";case"Url":case"text/x-moz-url":case"text/uri-list":return"url";case"Text":case"text/plain":return"text";default:return"unknown"}},v=function(t){return o.chain(t.types).map(h).compact().uniq().value()},f=function(t){return t.files.length>0?["files"]:[]},l=function(t){return n.all(o.toArray(t.items).map(function(t){var e;return e=p(t),"text"===e||"url"===e?new n(function(r){return t.getAsString(function(t){return r({type:e,content:t})})}):"files"===e?{type:e,content:t.getAsFile()}:null}))},u=function(t){return o.map(t.files,function(t){return{type:"files",content:t}})},c=function(t){var e;return e=t.types,null==e&&(e=t.getData("Text")?["Text"]:[]),o.map(e,function(e){var r,n;return n=h(e),"text"!==n&&"url"!==n||!(r=t.getData(e))?null:{type:n,content:r}})},i=function(t){return n.all(s.map(function(e){return e(t)})).then(function(t){return o.chain(t).flatten().compact().each(function(t){"text"===t.type&&w(t.content)&&(t.type="url")}).reject(function(t){return"url"===t.type&&!w(t.content)}).groupBy("type").mapObject(function(t,e){return"files"===e?o.pluck(t,"content"):t[0].content}).value()})},b=function(){return/mac/i.test(navigator.platform)&&/safari/i.test(navigator.userAgent)},y=function(t){var e;return e=window.DataTransfer||window.Clipboard,e?e.prototype.hasOwnProperty(t)||"types"===t&&b()||!window.DataTransfer&&"files"===t&&b():!1},m=y("items")?g:y("types")?v:y("files")?f:function(){return[]},s=y("items")?[l]:o.compact([y("files")?u:void 0,y("getData")&&y("types")?c:void 0]),a=function(t){return i(t.dataTransfer)},d=function(t){return null!=t.clipboardData?i(t.clipboardData):null!=window.clipboardData?i(window.clipboardData):n.resolve({})},e.exports={getTypes:m,getDropped:a,getPasted:d}},{}],399:[function(t,e,r){var n,o,i,s,a;a=t("moment"),n=t("underscore"),i=t(76),o=function(t,e){var r,o,i,s,a;for(i=0,s=e.length;s>i;i++){if(o=e[i],!n.isArray(o))return o;if(r=o[0],a=o[1],r>=t)return a}throw new Error("no matching dispatch value for "+t+"!")},s=function(t){var e;return e=null,function(r){return null==e&&(e=t()),o(a(r).diff(a(),"hours",!0),e)}},e.exports={classForDueDate:s(function(){return[[-36,"is-due-past"],[0,"is-due-now"],[24,"is-due-soon"],"is-due-future"]}),titleForDueDate:s(function(){return[[-36,i("badge.due.overdue")],[0,i("badge.due.recently overdue")],[1,i("badge.due.less than an hour")],[24,i("badge.due.less than a day")],i("badge.due.later")]}),relativeInfoForDueDate:s(function(){return[[-36,i("badge.due.overdue short")],[0,i("badge.due.recently overdue short")],[24,i("badge.due.due soon short")],null]})}},{}],400:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w=function(t,e){function r(){this.constructor=t}for(var n in e)_.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},_={}.hasOwnProperty;n=t("jquery"),o=t(389),i=t(433),a=t(392),u=t(73),c=t(14),l=t(434),d=t(435),p=t(88),h=t(99),m=t(421),f=t("underscore"),y=t(31),b=t(418),v=t(76),g=t(69),e.exports=s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return w(e,t),e.prototype.allowNewlines=!0,e.prototype._draftKey=function(t){return"draft_"+this.model.id+"_"+t},e.prototype._saveDraft=function(t,e){return p.set(this._draftKey(t),e)},e.prototype._recallDraft=function(t){return p.get(this._draftKey(t))},e.prototype._discardDraft=function(t){return p.unset(this._draftKey(t))},e.prototype.editField=function(t){var e,r,o,s,a;return r=n(t.target).closest("a"),r.length>0&&"#"!==r.attr("href")||i.sorting||("function"==typeof window.getSelection&&null!=(s=window.getSelection())?s.toString():void 0)||(null!=(a=document.selection)?a.createRange().text:void 0)||(h.stop(t),d.hide(),e=n(t.target).closest(".editable"),0===e.length)?void 0:(o=e.attr("attr"),this.edit(o))},e.prototype.edit=function(t){var e,r,n,o,i,s,a,u,c;t.indexOf(".")>-1&&(c=t.split("."),t=c[1]),e=this.$("[attr="+t+"]"),u=this.$(".js-no-higher-edits [attr="+t+"]"),r=e.not(u),0!==r.length&&(l.cancelEdits(),o=r.find(".edit:first"),0!==o.length&&(i=r.find(".field:first"),a=i.is("textarea"),s=i.parent().is(".card-detail-edit"),n=r.find(".current"),o.append(b.fill("edit_controls")),o.hasClass("delete")||o.find(".delete").remove(),
o.hasClass("convert")||o.find(".convert").remove(),o.hasClass("options-menu")||o.find(".options-menu").remove(),r.addClass("editing"),""===i.val()&&i.val(h.traverse(this.model.attributes,null!=c?c:t)),this.waitForId(this.model,function(e){return function(){return i.data("draftKey",e._draftKey(t))}}(this)),y("editable",this.model),i.focus().select().autosize({append:!1})))},e.prototype.recallDrafts=function(){var t,e,r;return r=this,t=this.$("[attr]"),e=this.$(".js-no-higher-edits [attr]"),t.not(e).each(function(t){return function(e,o){var i,s,a,u;i=n(o),a=i.attr("attr"),null!=t.model.id&&(u=r._recallDraft(a),null!=u&&(s=i.find(".field:first"),s.val(u),t.defer(function(){return i.find(".edits-warning").show()})))}}(this))},e.prototype.stopEditing=function(t){return h.stop(t),l.cancelEdits(),!1},e.prototype.clearEdits=function(t){var e,r;return h.stop(t),e=n(t.target).closest(".editable[attr]"),r=e.attr("attr"),null!=r&&this._discardDraft(r),e.find(".field").val(""),e.find(".edits-warning").hide(),e.find(".edits-error").hide(),l.cancelEdits(),!1},e.prototype.validate=function(){var t,e,r,o,i,s,a,u,c;for(a=this.$(".editing.non-empty .field"),r=0,i=a.length;i>r;r++)if(t=a[r],/^\s*$/.test(n(t).val()))return!1;for(u=this.$(".editing .field"),o=0,s=u.length;s>o;o++)if(t=u[o],e=(null!=(c=n(t).val())?c:"").length,e>16384)return n(".editing").find(".edits-error").text(v("text too long",{over:g(e-16384)})).show(),!1;return!0},e.prototype.keydownEvent=function(t){var e;e=u.getKey(t),l.isEditing()&&(d.view instanceof a||d.view instanceof o?"function"==typeof this.checkInsert&&this.checkInsert(t):u.isForceSubmitEvent(t)||e===c.Enter&&(!n(t.target).is("textarea")||n(t.currentTarget).hasClass("single-line"))&&!t.shiftKey?(h.stop(t),this.commitEdits(t)):e!==c.Enter||this.allowNewlines||h.stop(t))},e.prototype.commitEdits=function(t){var e,r,o,i;return h.stop(t),e=n(t.target).closest(".editable.editing[attr]"),e.find(".edits-error").hide(),this.validate()?(i=this,o=this.model,r=this.customSet,e.remove("input[type=submit]"),e.removeClass("editing").each(function(){var t,r;return t=n(this).attr("attr"),r=n(this).find(".field").val(),i.allowNewlines||(r=r.replace(/[\r\n]+/g," ")),0===n.trim(r).length&&(r=""),o.get(t)===r?i._discardDraft(t):o.update(t,r,function(r){null!=r?e.find(".edits-error").text(r.message).show():i._discardDraft(t)})}).find(".field").val(""),e.find(".edits-warning").hide(),!0):void 0},e.prototype.clickSetting=function(t){var e,r,o,i;e=n(t.target),e.hasClass("disabled")||e.closest(".js-disabled").length||(r=e.attr("href"),r&&"#"!==r||(o=e.closest(".pref").attr("name"),o&&(i=e.attr("value"),i=function(){switch(i){case"true":return!0;case"false":return!1;default:return i}}(),this.model.setPref(o,i),this.model.save(),h.stop(t))))},e.prototype.delegateEvents=function(t){var r;return r={"click .current":"editField","click .js-cancel-edit":"clearEdits","click .js-discard-edits":"clearEdits","click .js-view-edits":"editField","click .js-save-edit":"commitEdits","keydown .field":"keydownEvent","click input":h.stopPropagation,"click textarea":h.stopPropagation},null!=this.model.setPref&&(r["click a"]="clickSetting"),e.__super__.delegateEvents.call(this,f.extend(r,t||this.events))},e}(m)},{}],401:[function(t,e,r){var n,o,i,s,a,u,c,l;o=t(24),u=t(77),i=t(411),s=t("bluebird"),c=t(215),a=t("underscore"),n=u("FriendlyLink",["BoardRequired"]),l=c.renderable(function(t){var e,r;return e=t.icon,r=t.text,c.img(".known-service-icon",{src:e}),c.text(r)}),e.exports=function(t,e){var r;if(null==e)throw n.BoardRequired();return r="A"===t.tagName?[t]:a.toArray(t.querySelectorAll("a")),s.map(r,function(t){var r;return r=t.href,i.one({command:"format-url",board:e,options:{url:r}}).catch(i.Error.NotHandled,function(){return o.interpret(t.href,e.modelCache)}).then(function(e){return null!=e?(t.classList.add("known-service-link"),t.innerHTML=l(e)):void 0})}).done()}},{}],402:[function(t,e,r){var n,o,i,s,a,u;o=t(5),i=t(434),s=t(435),a=t(228),u=t(99),n=t("jquery"),e.exports=function(t){var e,r;return n(t.target).is("input")||n(t.target).is("textarea")?void u.stopPropagation(t):(e=o.getCurrentBoard(),r=e&&o.getCurrentBoardView(),s.isVisible?s.hide():a.getShowSidebar()&&!a.getPinSidebar()?a.hideSidebar():n(".new-comment").hasClass("focus")?n(".new-comment").removeClass("focus").find("textarea").blur():(null!=e?e.viewState.get("listComposerOpen"):void 0)?null!=e?e.viewState.set("listComposerOpen",!1):void 0:(null!=e?e.composer.get("vis"):void 0)&&!n(t.target).closest(".card-composer").length>0?e.composer.save("vis",!1):i.isEditing()?i.cancelEdits():o.showingCalendar(r)&&0===n(t.target).closest(".calendar-day").length?n(".calendar-day.active").removeClass("active"):n("input, textarea").blur())}},{}],403:[function(t,e,r){var n,o;o=t("moment"),n=t(76),e.exports=function(){var t,e;return e=o(),t=n("pasted file name",{date:e.format("l"),time:e.format("LTS")}),t+".png"}},{}],404:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y;c=t("underscore"),o=t(126),n=t(125),s=t(172),u=t("bluebird"),f=t(77),i=t(26),y=t("xtend"),a=f("PluginHandlerContext",["InvalidType","NotSerializable"]),p={},g=function(t){var e,r,n,o;for(null==t&&(t=16),e=[],r=n=0,o=t;o>=0?o>n:n>o;r=o>=0?++n:--n)e.push(Math.floor(10*Math.random()));return e.join("")},h={},l={card:{type:o,serialize:function(t){return{value:t.id}},deserialize:function(t){return i.get("Card",t)}},board:{type:n,serialize:function(t){return{value:t.id}},deserialize:function(t){return i.get("Board",t)}},plugin:{type:s,serialize:function(t){return{value:t.id}},deserialize:function(t){return i.get("Plugin",t)}},el:{type:Element,serialize:function(t){var e;return e=g(),p[e]=t,{value:e,disposer:function(){return delete p[e]}}},deserialize:function(t){return p[t]}}},m=function(t){return c.isString(t)||c.isNumber(t)||c.isBoolean(t)||c.isNull(t)||c.isUndefined(t)?!0:c.isFunction(t)||c.isRegExp(t)||c.isDate(t)?!1:c.isArray(t)?c.every(t,m):c.isObject(t)?m(c.values(t)):!1},v=function(t){var e;return e=[],u.try(function(){return c.mapObject(t,function(t,r){var n,o,i,s;if(null!=(n=l[r])){if(!(t instanceof n.type)){if(null==t)return null;throw a.InvalidType("value in context did not have the expected type")}return i=n.serialize(t),s=i.value,o=i.disposer,null!=o&&e.push(o),s}if(m(t))return t;throw a.NotSerializable("the value for "+r+" was not serializable")})}).disposer(function(){var t,r,n;for(r=0,n=e.length;n>r;r++)(t=e[r])()})},d=function(t){return c.mapObject(t,function(t,e){var r;return null!=t&&l.hasOwnProperty(e)&&null!=(r=l[e])?r.deserialize(t):t})},e.exports={Error:a,serialize:v,deserialize:d,extend:y}},{}],405:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j;n=t("jquery"),v=t("underscore"),C=t(102),c=t(27),l=t(404),d=t(408),p=t(532),h=t(533),m=t(534),f=t(435),x=t(410),g=t("bluebird"),j=t("xtend"),o="Invalid context, missing board",i="Invalid context, missing card",s="Invalid context, missing el (or attempt to use el after initial request)",a="Invalid context, missing list",u="Invalid context, missing plugin",k=function(t,e){var r,n;return r=e.el,null!=r&&f.contains(r)?!0:null!=(n=_(t))&&f.contains(n)?!0:!1},b=null,y=function(){null!=b&&(b.remove(),b=null)},w={data:function(t,e){var r,n,i;if(n=e.context,r=n.board,i=n.plugin,null==r)throw t.NotHandled(o);if(null==i)throw t.NotHandled(u);return r.getPluginData(i.id)},set:function(t,e){var r,n,i,s,a,c,l;if(n=e.context,a=e.scope,l=e.visibility,i=e.data,r=n.board,s=n.plugin,null==r)throw t.NotHandled(o);if(null==s)throw t.NotHandled(u);if("private"!==l&&"shared"!==l)throw t.NotHandled("Invalid value for visibility");if(!v.isString(i))throw t.NotHandled("Invalid value for data");c=function(){switch(a){case"board":return r;case"organization":return r.getOrganization();default:throw t.NotHandled("Invalid value for scope")}}(),c.setPluginData(s.id,l,i)},popup:function(t,e){var r,n,i,a,u,c,l;if(a=e.context,l=e.title,i=e.content,n=e.callback,r=a.board,u=a.el,null==r)throw t.NotHandled(o);if(c=function(){var e;switch(e={model:r,title:l,content:i,callback:n},i.type){case"iframe":return new h(e);case"list":return new m(e);default:throw t.NotHandled("Uknown type for popup")}},k(t,a))f.pushView({view:c()});else{if(null==u)throw t.NotHandled(s);f.toggle({elem:u,view:c()})}},"close-popup":function(t,e){var r;r=e.context,k(t,r)&&f.hide()},"pop-popup":function(t,e){var r;r=e.context,k(t,r)&&f.popView()},overlay:function(t,e){var r,i,a,u;if(a=e.context,i=e.content,r=a.board,u=a.el,null==r)throw t.NotHandled(o);if(null==u)throw t.NotHandled(s);y(),b=new p({model:r,content:i}),n("body").append(b.render().el)},"close-overlay":function(t,e){var r;if(r=e.context,null==b)throw t.NotHandled("No overlay is being displayed");y()},resize:function(t,e){var r,n,o,i;if(r=e.context,i=e.width,n=e.height,o=_(t),!o)throw t.NotHandled("Could not find iframe to resize");null!=i&&(o.style.width=i+"px"),n&&(o.style.height=n+"px")},card:function(t,e){var r,n,o;if(n=e.context,o=e.fields,null!=(r=n.card))return d.card(r,o);throw t.NotHandled(i)},list:function(t,e){var r,n;return r=e.context,n=e.fields,g.try(function(){var t,e;return null!=(e=r.list)?e:null!=(t=r.card)?null!=(e=t.getList())?e:c.getCardList(t.id):null}).then(function(e){if(null==e)throw t.NotHandled(a);return d.list(e,n)})},board:function(t,e){var r,n,i;if(n=e.context,i=e.fields,null!=(r=n.board))return d.board(r,i);throw t.NotHandled(o)},"attach-to-card":function(t,e){var r,n,o,s,a;if(n=e.context,a=e.url,s=e.name,o=e.mimeType,null!=(r=n.card))return C(r,"uploadUrl",{url:a,name:s,mimeType:o}).return();throw t.NotHandled(i)}},_=function(t){var e;return e=document.querySelectorAll("iframe.plugin-iframe"),v.find(e,function(e){return e.contentWindow===t.source})},e.exports={handlers:v.mapObject(w,function(t){return function(e,r){var n;if(null==(n=null!=r?r.context:void 0))throw e.NotHandled("Missing context");return r=x(r,function(t){var r,o,i;return r=t.command,i=t.el,o=t.options,g.using(l.serialize({el:i}),function(t){return e.request(r,j(o,{context:l.extend(n,t)}))})}),t.call(w,e,j(r,{context:l.deserialize(n)}))}})}},{}],406:[function(t,e,r){var n,o,i,s,a,u;u=t(77),n=t(172),o=t(405),i=t(407),a=u("PluginCache",["InconsistentUrlForId","InvalidArgument"]),s=function(){function t(){this.pluginFromUrl={},this.pluginFromId={}}return t.prototype.Error=a,t.prototype.get=function(t){var e,r,s;if(!(t instanceof n))throw a.InvalidArgument("expected a plugin");if(r=t.id,s=t.get("url"),null!=(e=this.fromId(r))){if(e.manifestUrl!==s)throw a.InconsistentUrlForId("the cached plugin is using a different url");return e}return t=new i(r,s,o.handlers),this.pluginFromUrl[s]=this.pluginFromId[r]=t,t},t.prototype.fromUrl=function(t){return this.pluginFromUrl[t]},t.prototype.fromId=function(t){return this.pluginFromId[t]},t}(),e.exports=new s},{}],407:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m=[].slice,f=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};n=t("jquery"),u=t("underscore"),c=t(95),l=t(77),o=t(182),d=t(216),a=t("bluebird"),s=l("Plugin",["InvalidManifestUrl","UnableToLoadManifest","NotHandled","Timeout"]),p=function(t,e){return c(e,function(e,r){return"url"===r&&u.isString(e)?e.replace(/^\.\//,t):void 0})},h=function(t){var e;return e=d(t).set("hash",null).set("query",null),e.set("pathname",e.pathname.replace(/[^\/]+$/,"")),e.href},e.exports=i=function(){function t(t,e,r){if(this.id=t,this.manifestUrl=e,this.handlers=r,null==this.manifestUrl)throw s.InvalidManifestUrl("invalid url")}return t.Error=s,t.prototype.readFromManifest=function(){var t,e,r,n,o,i,s;for(o=2<=arguments.length?m.call(arguments,0,e=arguments.length-1):(e=0,[]),t=arguments[e++],s=this._loadManifest(),r=0,i=o.length;i>r;r++)n=o[r],s=s.get(n);return s.then(function(e){return u.isUndefined(e)?t:e})},t.prototype.getName=function(){return this.readFromManifest("name","")},t.prototype.getDescription=function(){return this.readFromManifest("description","")},t.prototype.getDetails=function(){return this.readFromManifest("details","")},t.prototype.getImages=function(){return this.readFromManifest("images",[])},t.prototype.getRecommend=function(){return this.readFromManifest("recommend",{})},t.prototype.getIconUrl=function(){return this.readFromManifest("icon","url",null)},t.prototype._loadManifest=function(){return null!=this._manifest?this._manifest:this._manifest=a.try(function(t){return function(){return new a(function(e,r){return n.getJSON(t.manifestUrl).done(e).fail(function(){return r(s.UnableToLoadManifest())})})}}(this)).then(function(t){return function(e){return p(h(t.manifestUrl),e)}}(this))},t.prototype._getIo=function(){return null!=this._io?this._io:this._io=this.readFromManifest("connectors","iframe","url",null).then(function(t){return function(e){return new o(e,t.handlers)}}(this))},t.prototype.request=function(t,e,r){return this._getIo().call("request",t,e,r).catch(o.Error.NotHandled,function(){throw s.NotHandled()}).catch(o.Error.Timeout,function(t){throw s.Timeout(t.message)})},t.prototype.supports=function(t){return this.readFromManifest("capabilities",[]).then(function(e){return f.call(e,t)>=0})},t}()},{}],408:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};o=t("underscore"),i=t(77),n=i("PluginModelSerializer",["InvalidField"]),s=function(t,e,r,i){return null==i&&(i={}),o.chain(r).map(function(r){var o;if(g.call(e,r)<0)throw n.InvalidField();return o=null!=i[r]?i[r](t,r):t.get(r),[r,o]}).object().value()},a=function(t,e){return null==e&&(e=["id","url","name"]),s(t,["id","url","name"],e)},u=function(t,e){return t.map(o.partial(a,o,e))},c=function(t,e){return null==e&&(e=["id","name"]),s(t,["id","name","url"],e)},l=function(t,e){var r;return null==e&&(e=["id","name"]),r=["id","name","desc","cover","attachments","members","labels","url"],s(t,r,e,{attachments:function(){return u(t.attachmentList)},cover:function(){var e,r;return null!=(r=t.get("idAttachmentCover"))&&null!=(e=t.attachmentList.get(r))?a(e):null},labels:function(){return p(t.labelList)},members:function(){return f(t.memberList)}})},d=function(t,e){return null==e&&(e=["name","color"]),s(t,["name","color"],e)},p=function(t,e){return t.map(o.partial(d,o,e))},h=function(t,e){return null==e&&(e=["id","name"]),s(t,["id","name"],e)},m=function(t,e){return null==e&&(e=["id","fullName"]),s(t,["id","fullName"],e)},f=function(t,e){return t.map(o.partial(m,o,e))},e.exports={Error:n,attachment:a,attachments:u,board:c,card:l,list:h}},{}],409:[function(t,e,r){var n;n=t("xtend"),e.exports=function(t){return n(t,{locale:window.locale})}},{}],410:[function(t,e,r){var n,o,i;n=t(95),o=t(409),i=t("xtend"),e.exports=function(t,e){return n(t,function(t){var r,n,s;return null!=t&&null!=(s=t._callback)?(r=function(t,r){return function(n){return null==n&&(n={}),e(i(n,{command:"callback",options:{action:r,callback:t,options:o(n.options)}}))}},n=r(s,"run"),n.retain=r(s,"retain"),n.release=r(s,"release"),n):void 0})}},{}],411:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j;m=t("underscore"),_=t(77),i=t(26),s=t(27),a=t(172),c=t(407),l=t(406),u=t(404),k=t(409),C=t(410),h=t("bluebird"),j=t("xtend"),p=_("PluginRunner",["NotHandled","InvalidPlugin","Timeout"]),o=5e3,n=1e4,f={},b=function(t){return null==f[t]&&(f[t]=s.loadBoardAvailablePlugins(t),f[t].delay(n).then(function(){return delete f[t]})),f[t]},w=function(t,e){return h.try(function(){var r,n;if(e instanceof a)return e;if(!m.isString(e))throw p.InvalidPlugin("invalid plugin specifier");if(n=e,null!=(r=i.get("Plugin",n)))return r;if(null==t)throw p.InvalidPlugin("unable to find plugin");return b(t.id).then(function(){if(null!=(r=i.get("Plugin",n)))return r;throw p.InvalidPlugin("plugin not available to board")})})},y=function(t){var e,r,n;return n=t.plugins,r=t.plugin,e=t.board,n=null!=n?n:null!=r?[r]:null!=e?e.idPluginsEnabled():[],h.map(n,function(t){return function(t){return w(e,t)}}(this))},v=function(t){return m.pick(t,["board","card","command","el","options"])},g=function(t){var e;return e=t.options},x=function(t){if(0===t.length)throw p.NotHandled("no plugin handles this command");return t[0]},d=function(){function t(){}return t.prototype.Error=p,t.prototype.processCallbacks=function(t,e,r){return C(t,function(t){return function(n){var o;return o=j(r,n),t._run([e],v(o),g(o)).then(x).catch(p.NotHandled,function(t){throw p.NotHandled("attempt to run callback on plugin "+e.plugin.id+" failed")})}}(this))},t.prototype._run=function(t,e,r,n){var i,s,a;return null==n&&(n=o),a=e.command,i=e.board,s=e.card,h.using(u.serialize(e),function(e){return function(o){return h.filter(t,function(t){var e;return e=t.io,e.supports(a)}).map(function(t){var l,d,p;return d=t.plugin,l=t.io,p={plugin:d},h.using(u.serialize(p),function(d){var p;return p=j(r,{context:u.extend(o,d)}),l.request(a,k(p),n).then(function(r){return{response:e.processCallbacks(r,t,{board:i,card:s})}}).catch(c.Error.NotHandled,c.Error.Timeout,function(){return null})})}).filter(function(t){return null!=t}).map(function(t){var e;return e=t.response})}}(this))},t.prototype._runFromOptions=function(t){var e,r,n;return n=y(t),r=v(t),e=g(t),h.resolve(n).map(function(t){return{plugin:t,io:l.get(t)}}).then(function(n){return function(o){return n._run(o,r,e,t.timeout)}}(this))},t.prototype.all=function(t){return this._runFromOptions(t).then(m.flatten)},t.prototype.one=function(t){return this._runFromOptions(t).then(x)},t}(),e.exports=new d},{}],412:[function(t,e,r){var n,o,i,s,a;o=t("underscore"),i=t(94),n=t("hearsay"),a={},s=function(t){var e,r,s;return s=t.snoopIdPluginsEnabled().map(function(e){var r;return 0===e.length?n.const({}):(r=e.map(function(e){return t.snoopPluginData(e)}),n.combine.apply(n,r).map(function(t){return o.object(e,t)}))}).latest(),r=s.distinct(o.isEqual),e=i(r),e.use(),e},e.exports=function(t){var e;return null!=a[e=t.id]?a[e]:a[e]=s(t)}},{}],413:[function(t,e,r){var n,o,i;n=t(435),o=t("react"),i=t(402),e.exports=o.createClass({displayName:"ReactRootComponentComponent",render:function(){return o.createElement("div",{className:"js-react-root",onClick:this.dismissPopover},this.props.children)},dismissPopover:function(t){t.isDefaultPrevented()||i(t)}})},{}],414:[function(t,e,r){var n,o,i,s,a,u,c=[].slice;n=t(5),u=t(417),a=t(104),s=t("recup"),i=t(214),o=t("underscore"),e.exports=u(i(s,{b:function(){var t,e,r,n,o,i;if(o=arguments[0],t=2<=arguments.length?c.call(arguments,1):[],i=this.normalizeArgs(t),e=i.attrs,r=i.contents,null!=e.href)throw Error("Can't specify an href on a `b` tag");if(e.href="#",null!=e.onClick)throw Error("onClick must be a positional argument to `b`");return n=e.disabled,e.onClick=function(t){return t.preventDefault(),n?void 0:o(t.currentTarget)},this.a(e,r)},link:function(){var t,e,r,o,i,s;if(s=arguments[0],t=2<=arguments.length?c.call(arguments,1):[],i=this.normalizeArgs(t),e=i.attrs,r=i.contents,null!=e.href)throw Error("Can't specify an href on a `link` tag");return e.href=s,o=e.onClick,e.onClick=function(t){a(t)&&(t.preventDefault(),"function"==typeof o&&o(),n.navigate(s,{trigger:!0}))},this.a(e,r)},radio:function(t,e,r){var n,i;return i=function(n){var o;n.target.checked&&(o={},o[e]=r,t.setState(o))},n=o.isEqual(t.state[e],r),this.input({type:"radio",name:e,value:r,checked:n,onChange:i})}}))},{}],415:[function(t,e,r){var n,o;o=t(34),e.exports=n=function(){function t(){}return t.prototype.switchSection=function(t){return this.$(".js-content").addClass("hide").detach(),this.$(".js-loading-page").removeClass("hide"),this.$(".tabbed-pane-nav-item-button").removeClass("active"),this.$(t.target).addClass("active"),o(this.model.typeName+" View","Tab Navigation","Open "+this.$(t.target).text()+" Page")},t}()},{}],416:[function(t,e,r){var n,o;o=t(417),n=t(54),e.exports=o(n)},{}],417:[function(t,e,r){var n,o,i,s,a,u,c,l={}.hasOwnProperty,d=[].slice;n=t("underscore"),o=t(58),i=t(76),a=t(214),c=t("xtend"),u=function(t){var e,r;return n.object(function(){var n;n=[];for(e in t)l.call(t,e)&&(r=t[e],n.push([e,r.toString()]));return n}())},s={format:function(){this.raw(this.l.apply(this,arguments))},classify:function(t){var e,r;return function(){var n;n=[];for(e in t)r=t[e],r&&n.push(e);return n}().join(" ")},urlify:function(t){return t=t.replace("'","\\'").replace('"','\\"').replace("(","\\(").replace(")","\\)"),"url('"+t+"')"},stylify:function(t){var e,r;return function(){var n;n=[];for(e in t)r=t[e],r&&n.push(e+": "+r+";");return n}().join("")},optionSelected:function(t,e,r){return t&&(e=n.extend({selected:"selected"},e)),this.option(e,r)},check:function(t,e){this.format(e),this.text(" "),t&&(this.icon("check"),this.text(" "))},icon:function(t,e,r){var n,o,i;null==r&&(r={}),"object"==typeof e&&(r=e,e=void 0),n=null!=(i=r.class)?i:"",o=c(r,{class:("icon-sm icon-"+t+" "+n).trim()}),this.span(o),null!=e&&(this.text(" "),this.format(e))}},e.exports=function(t){var e;return e=a(t,s),function(t){return a(e,{l:function(e,r){return e=o.normalizeKeyPath(e),i(["templates",t].concat(d.call(e)),u(r))}})}}},{}],418:[function(t,e,r){var n,o,i,s,a;n=t(22),s=t(416)(),a=t(660),o=t("underscore"),i={mustacheRenderWithHelpers:function(t,e,r,i){var a;return null==r&&(r={}),null==i&&(i={}),a=o.extend({__ed:r.editable,__own:r.owned,__loggedIn:n.isLoggedIn(),__siteDomain:siteDomain,__avatarDomain:avatarDomain,__logoDomain:logoDomain},e),s.mustacheRender(t,a,i)},mustacheRenderModel:function(t,e,r,n){var s;return null==n&&(n={}),s={editable:"function"==typeof e.editable?e.editable():void 0,owned:"function"==typeof e.owned?e.owned():void 0},r=o.extend(e.toJSON(),r),i.mustacheRenderWithHelpers(t,r,s,n)},fill:function(t,e,r,n){var o;if(null==e&&(e={}),null==r&&(r={}),null==n&&(n={}),o=a[t],null==o)throw new Error("Could not find template "+t+"!");return i.mustacheRenderWithHelpers(o,e,r,n)},fillFromModel:function(t,e,r,n){var o;if(null==r&&(r={}),null==n&&(n={}),o=a[t],null==o)throw new Error("Could not find template "+t+"!");return i.mustacheRenderModel(o,e,r,n)},fillMenu:function(t,e,r){return i.fill("menu_base",{content:this.fill(t,e,r)})}},e.exports=t(214)(a,i)},{}],419:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y=[].slice;n=t("jquery"),o=t(60),i=t(73),s=t(14),a=t(90),c=t(99),l=t("underscore"),m=t(31),g=t(34),f=t(398),h=f.getTypes,p=f.getPasted,v=t(97),d=t(197),e.exports=u=new(function(){function t(){var t,e,r,o;for(this._handlers={},this.clear(),o=["keydown","keypress","paste"],e=0,r=o.length;r>e;e++)t=o[e],n(document).bind(t,this[t].bind(this));a.on("pasteImage",function(t){return function(e){return t.triggerPasted("files",[e])}}(this))}var e;return t.prototype.precedence={global:0,default:1,header:2,board:3,board_sidebar:3,list:4,card:5,search_box:6,dialog:10,dialog_view:12,popover:30,popover_view:32,attachment_viewer:100,quick_card_editor:100},t.prototype._isKeyEligible=function(t){var e;return e=i.getKey(t),!(o.isTouch()||e===s.Unknown||e!==s.Escape&&n(t.target).is("input:visible,textarea:visible,select:visible")||t.ctrlKey||t.altKey||t.metaKey)},t.prototype.addHandler=function(t,e){var r,n,o,i;return i=e.scope,o=e.precedence,n=e.modal,null==o&&(o=this.precedence[i]),null==o&&(m("userinput","Missing precedence for "+i),o=this.precedence.default),null==n&&(n=!1),null==(r=this._handlers)[i]&&(r[i]={}),this._handlers[i]={target:t,scope:i,precedence:o,modal:n},m("userinput","Adding handler for "+i)},t.prototype.removeHandlerScope=function(t){var e,r;e=[];for(r in this._handlers)r===t&&(m("userinput","Removing handlers for "+r),e.push(delete this._handlers[r]));return e},t.prototype.removeHandler=function(t){var e,r,n,o;r=this._handlers,n=[];for(o in r)e=r[o].target,t===e&&(m("userinput","Removing handler for "+o),n.push(delete this._handlers[o]));return n},t.prototype.clear=function(){var t,e;m("userinput","Removing all non-global handlers"),t=[];for(e in this._handlers)"global"!==e&&(m("userinput","Removing handler for "+e),t.push(delete this._handlers[e]));return t},e=function(t,e){var r,n,o,i;for(i=[],r=0,o=t.length;o>r&&(n=t[r],i.push(n),!e(n));r++);return i},t.prototype._sortedHandlers=function(){var t;return t=l.sortBy(l.values(this._handlers),function(t){return-t.precedence}),e(t,d.get("modal"))},t.prototype._triggerOnTargets=function(){var t,e,r,n,o,i,s;for(e=arguments[0],t=2<=arguments.length?y.call(arguments,1):[],i=this._sortedHandlers(),n=0,o=i.length;o>n;n++)if(s=i[n].target,r=null!=(null!=s?s[e]:void 0)?s[e].apply(s,t):null!=(null!=s?s.triggerHandler:void 0)?s.triggerHandler(e,t):void 0)return(l.isString(r)||l.isArray(r))&&this._track(r),!0;return!1},t.prototype.keydown=function(t){var e;e=i.getKey(t),e===s.Escape&&c.stop(t),this._isKeyEligible(t)&&this._triggerOnTargets("shortcut",e)&&c.stop(t)},t.prototype.keypress=function(t){var e;e=i.getKey(t),this._isKeyEligible(t)&&this._triggerOnTargets("shortcut",e)&&c.stop(t)},t.prototype.paste=function(t){p(t.originalEvent).then(function(e){return function(r){var n,o,i,s,u;if(!l.isEmpty(r)&&(!r.text&&!r.url||"INPUT"!==(i=t.target.tagName)&&"TEXTAREA"!==i||a.isClipboard(t.target)))for(s=["url","text","files"],n=0,o=s.length;o>n;n++)if(u=s[n],r[u]){e.triggerPasted(u,r[u]);break}}}(this))},t.prototype.triggerPasted=function(t,e){var r;return r=l.compact(this._sortedHandlers().map(function(t){var e;return null!=(e=t.target)?e.el:void 0})),v(r,"userinput-paste:"+t,{detail:e})},t.prototype._track=function(t){return null!=t?(l.isArray(t)||(t=[t]),g.apply(null,["Keyboard Shortcuts"].concat(y.call(t)))):void 0},t}())},{}],420:[function(t,e,r){var n,o,i;n=t(116),o=t(27),e.exports=i=function(){function t(){}return t.prototype.limit=50,t.prototype.nextPage=1,t.prototype.shortLoad=!1,t.prototype.loading=!1,t.prototype.idModels=null,t.prototype.loadMoreActions=function(){return this.loading?void 0:(this.loading=!0,this.waitForId(this.model,function(t){return function(){var e;return o.loadMoreActionData(t.model.typeName.toLowerCase(),t.model.id,t.nextPage,t.limit,t.idModels,null!=(e="function"==typeof t.getActionsFilter?t.getActionsFilter():void 0)?e:"all").finally(function(){return t.loading=!1}).then(function(e){return t.shortLoad=e.length<t.limit,t.renderActions(),++t.nextPage}).done()}}(this)))},t.prototype.hasMoreActions=function(){return!this.loading&&!this.shortLoad&&this.getActions().length>=this.limit},t.prototype.getActions=function(){return n.getListForModel(this.modelCache,this.model)},t}()},{}],421:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f=function(t,e){function r(){this.constructor=t}for(var n in e)g.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},g={}.hasOwnProperty,v=[].slice;n=t("jquery"),o=t(193),i=t(64),s=t("hearsay"),a=t(85),u=t(419),d=t("underscore"),m=t(81),p=t(76),h=t(30),c={NONE:0,SOME:1,LOTS:2},e.exports=m(i,a,l=function(t){function e(t){this._subviews={},this.modelCache=null!=t?t.modelCache:void 0,this.handleDOMRemove=function(t){return function(){return t._delegated=!1}}(this),e.__super__.constructor.apply(this,arguments)}return f(e,t),e.prototype._rendered=!1,e.VIGOR=c,e.prototype.vigor=c.LOTS,e.prototype.render=function(){var t;if(t=1<=arguments.length?v.call(arguments,0):[],null==this.renderOnce)return this;if(this._rendered)switch(this.vigor){case c.NONE:return this;case c.SOME:return h(Error("rendered more than once: "+this.constructor.name)),this;default:throw Error("You cannot render me more than once!")}return this._rendered=!0,this.renderOnce.apply(this,t),this},e.prototype.getViewTitle=function(){var t,e,r;return null==this.viewTitleKey?"":(e=d.result(this,"viewTitleKey"),t=null!=(r=d.result(this,"viewTitleArguments"))?r:{},p(["view title",e],t))},e.prototype.subview=function(t,e,r,n){return null==r&&(r={}),null==n&&(n=t.prototype.uniqueId()+"_"+e.cid),n in this._subviews||(this._subviews[n]=new t(d.extend({model:e,modelCache:this.modelCache},r))),this._subviews[n]},e.prototype.existingSubview=function(t,e,r){if(null==r&&(r=t.prototype.uniqueId()+"_"+e.cid),!(r in this._subviews))throw new Error("existingSubview called before subview was created");return this._subviews[r]},e.prototype.existingSubviewOrUndefined=function(t,e,r){return null==r&&(r=t.prototype.uniqueId()+"_"+e.cid),this._subviews[r]},e.prototype.collectionSubview=function(t,e,r,n){var o,i;return null==r&&(r={}),null==n&&(n=t.prototype.uniqueId()),i=null!=(o=this._subviews)[n]?o[n]:o[n]=new t(d.extend({collection:e,modelCache:this.modelCache},r)),null!=r.el&&i.el!==r.el&&i.setElement(r.el),i},e.prototype.subviewsOfType=function(t){var e,r,n,o;r=this._subviews,n=[];for(e in r)g.call(r,e)&&(o=r[e],o instanceof t&&n.push(o));return n},e.prototype.deleteSubview=function(t,e){if(null==e&&(e=t.constructor.prototype.uniqueId()+"_"+t.model.cid),t!==this._subviews[e])throw new Error("incorrect key for subview in deleteSubview");return t.remove(),delete this._subviews[e]},e.prototype.removeSubviews=function(){var t,e,r;e=this._subviews;for(t in e)r=e[t],r.remove();return this._subviews={}},e.prototype.remove=function(){return this.unsubscribe(),this.stopUsing(),this.removeSubviews(),this.cancelScheduled(),u.removeHandler(this),e.__super__.remove.apply(this,arguments)},e.prototype.frameDebounce=function(t,e){var r;return null==e&&(e=this),r=!1,function(){r||(r=!0,this.requestAnimationFrame(function(){r=!1,t.call(e)}))}},e.prototype.makeDebouncedMethods=function(){var t,e,r,n;for(n=1<=arguments.length?v.call(arguments,0):[],t=0,e=n.length;e>t;t++)r=n[t],this[r+"Debounced"]=this.frameDebounce(this[r])},e.prototype.delegateEvents=function(){var t,r,n;if(!this._delegated){this.$el.on("remove",this.handleDOMRemove),e.__super__.delegateEvents.apply(this,arguments),r=this._subviews;for(t in r)n=r[t],n.delegateEvents();this._delegated=!0}},e.prototype.undelegateEvents=function(){var t,r,n;if(this._delegated){this.$el.off("remove",this.handleDOMRemove),e.__super__.undelegateEvents.apply(this,arguments),r=this._subviews;for(t in r)n=r[t],n.undelegateEvents();this._delegated=!1}},e.prototype.appendSubview=function(t,e){return null==e&&(e=this.$el),this.appendSubviews([t],e)},e.prototype.appendSubviews=function(t,e){var r,n,o;for(null==e&&(e=this.$el),r=0,n=t.length;n>r;r++)o=t[r],o.delegateEvents();return e.append(function(){var e,r,n;for(n=[],e=0,r=t.length;r>e;e++)o=t[e],n.push(o.render().el);return n}())},e.prototype.ensureSubviews=function(t,e){var r,o,i,s,a,u,c,l,p,h,m,f,g,v,y;for(null==e&&(e=this.$el),o=e[0],i=d.clone(o.childNodes),u=a=0,h=i.length;h>a;u=++a)if(r=i[u],!d.find(t,function(t){return t.el===r})){s=!1,g=this._subviews;for(p in g)y=g[p],y.el!==r||s||(this.deleteSubview(y,p),s=!0);if(!s)throw new Error("Could not find view associated with element to remove")}for(c=0,m=t.length;m>c;c++)v=t[c],d.find(i,function(t){return v.el===t})||(v.delegateEvents(),v.render());for(u=l=0,f=t.length;f>l;u=++l)v=t[u],v.el!==o.childNodes[u]&&(0===u?n(o).prepend(v.el):n(t[u-1].el).after(v.el))},e.prototype.uniqueId=function(){return this.hasOwnProperty("_uniqueId")||(this._uniqueId=d.uniqueId("view")),this._uniqueId},e}(o.View)),d.extend(l.prototype,s.mixin)},{}],422:[function(t,e,r){var n,o,i,s;n=t(429),o=t(22),i=t("underscore"),s=function(t){var e,r,i,s;return e=o.me().isFeatureEnabled("largeAttachments"),i=t.getOrganization(),s=null!=i&&i.isFeatureEnabled("largeAttachments"),r=e||s?"file size exceeds 250mb":"file size exceeds 10mb",n.show(r,"error","upload",5e3)},e.exports=function(t,e){var r,n,a;for(i.isArray(e)||(e=[e]),n=0,a=e.length;a>n;n++)if(r=e[n],!o.me().canUploadAttachment(r))return s(t),!0;return!1}},{}],423:[function(t,e,r){var n,o,i,s,a,u=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;o=t(428),i=t(435),s=t(421),a=t(34),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.viewTitleKey="labels",e.prototype.el=function(){return this.labelsView=this.subview(o,this.model,{
board:this.model.getBoard(),selectLabel:this.toggleLabel.bind(this),renderOn:[{source:this.model.labelList,events:"add remove reset change"},{source:this.model,events:"change:labels, change:idLabels"}],popOverMethod:"pushView",searchInit:this.options.searchInit}),this.labelsView.render().el},e.prototype.toggleLabel=function(t){a(this.model.typeName,"Card Labels Menu","Change Label"),this.model.toggleLabel(this.modelCache.get("Label",t)),this.options.hideOnSelect&&i.popView()},e}(s)},{}],424:[function(t,e,r){var n,o,i,s,a,u=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty,l=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};n=t(163),i=t(425),s=t(435),a=t(421),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.viewTitleKey="create label",e.prototype.el=function(){var t,e;return t=this.options.color,e=this.options.name,l.call(n.colors,e)>=0&&(t=e,e=""),new i({model:{name:e},submitTextKey:"create",color:t,onSubmit:function(t){return function(e,r){var n;return"function"==typeof(n=t.options).onSubmit&&n.onSubmit(e,r),s.popView()}}(this)}).render().el},e}(a)},{}],425:[function(t,e,r){var n,o,i,s,a,u,c,l=function(t,e){function r(){this.constructor=t}for(var n in e)d.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},d={}.hasOwnProperty;n=t(163),i=t(99),s=t(421),a=t("underscore"),c=t(418),u=t(76),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.tagName="form",e.prototype.className="edit-label",e.prototype.events={"click .js-palette-color":"pickColor","click .js-submit":"submit",submit:"submit"},e.prototype.initialize=function(t){return this.accessoryView=t.accessoryView,this.color=t.color,this.onSubmit=t.onSubmit,this.submitTextKey=t.submitTextKey,e.__super__.initialize.apply(this,arguments)},e.prototype.renderOnce=function(){var t,e,r;return e=function(){var e,r,o,i;for(o=n.colors.concat(null),i=[],e=0,r=o.length;r>e;e++)t=o[e],i.push({color:t,selected:t===this.color});return i}.call(this),r={label:{name:this.model.name},colors:e},r.submitText=u(this.submitTextKey),this.$el.html(c.fill("label_edit_component",r)),null!=this.accessoryView&&this.$(".js-accessory-view-holder").append(this.accessoryView.render().el),this},e.prototype.pickColor=function(t){var e;return i.stop(t),this.$(".js-palette-select").hide(),e=this.$(t.target).closest(".js-palette-color"),this.color=e.attr("data-color"),e.find(".js-palette-select").show()},e.prototype.submit=function(t){var e;return i.stop(t),e=this.$(".js-label-name").val().trim(),a.isEmpty(e)&&a.isEmpty(this.color)?void 0:this.onSubmit(e,a.isEmpty(this.color)?null:this.color)},e}(s)},{}],426:[function(t,e,r){var n,o,i,s,a,u,c,l,d=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;n=t(430),o=t(425),s=t(435),a=t(99),u=t(421),l=t(34),c=t(76),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}var r;return d(e,t),r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return d(e,t),e.prototype.tagName="input",e.prototype.className="negate",e.prototype.attributes=function(){return{type:"submit",value:c("delete")}},e.prototype.events={click:function(t){return a.stop(t),this.options.onClick()}},e}(u),e.prototype.viewTitleKey="change label",e.prototype.el=function(){return new o({model:this.model.toJSON(),submitTextKey:"save",onSubmit:function(t){return function(e,r){var n;return t.model.update({color:r,name:e}),"function"==typeof(n=t.options).onSubmit&&n.onSubmit(),s.popView()}}(this),color:this.model.get("color"),accessoryView:new r({onClick:this.confirmDeleteLabel.bind(this)})}).render().el},e.prototype.confirmDeleteLabel=function(){return n.pushView("delete label",{model:this.model,confirmBtnClass:"negate",popOnClick:!0,fxConfirm:function(t){return function(e){var r;return t.model.destroy(),"function"==typeof(r=t.options).onSubmit&&r.onSubmit(),s.popView(),l("Label","Delete")}}(this)})},e}(u)},{}],427:[function(t,e,r){var n,o,i,s;n=t(14),o=t(163),s=t("underscore"),e.exports=i=function(){function t(){}return t.keyboardIndex=[s.last(o.colors)].concat(s.initial(o.colors)),t.keyNumberForColor=function(t){var e;return e=this.keyboardIndex.indexOf(t),e>=0?""+e:null},t.colorForKey=function(t){var e;return e=t-n._0,this.keyboardIndex[e]},t.setLabelFromKey=function(t,e,r){var n,o;o=this.colorForKey(t),n=e.getBoard().labelsForColors()[o],1===(null!=n?n.length:void 0)?e.toggleLabelColor(o):"function"==typeof r&&r(o)},t}()},{}],428:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b=function(t,e){function r(){this.constructor=t}for(var n in e)w.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},w={}.hasOwnProperty;n=t("jquery"),o=t(22),i=t(73),s=t(14),a=t(163),u=t(424),c=t(426),l=t(427),p=t(435),h=t(99),m=t(421),f=t("underscore"),v=t(418),y=t(34),g=t(76),e.exports=d=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}var r;return b(e,t),r=12,e.prototype.labelsToShow=r,e.prototype.events={"click .js-select-label":"clickLabel","click .js-toggle-color-blind-mode":"toggleColorBlindMode","click .js-edit-label":"clickEditLabel","click .js-add-label":"clickAddLabel","click .js-show-more":"showMore","input .js-label-search":"renderLabels","keyup .js-label-search":"keyUp","mouseover .card-label":"hoverLabel"},e.prototype.initialize=function(t){var r,n,i,s,a;for(this.selectLabel=t.selectLabel,this.board=t.board,this.modelCache=t.modelCache,this.renderOn=t.renderOn,this.popOverMethod=t.popOverMethod,this.searchInit=t.searchInit,this.makeDebouncedMethods("render","renderLabels"),this.listenTo(o.me(),{"change:prefs":this.renderDebounced}),this.listenTo(this.board.labelList,{"add remove reset change":this.renderLabelsDebounced}),s=null!=(i=this.renderOn)?i:[],r=0,n=s.length;n>r;r++)a=s[r],this.listenTo(a.source,a.events,this.renderLabelsDebounced);return e.__super__.initialize.apply(this,arguments)},e.prototype.render=function(){var t,e,r,n;return e=this.board.labelColors(),r={editable:this.board.editable()},t={colors:e,isColorBlindEnabled:o.me().get("prefs").colorBlind,searchInit:null!=(n=this.searchInit)?n:""},this.searchInit=null,this.$el.html(v.fill("popover_change_labels",t,r)),this.renderLabels()},e.prototype.renderLabels=function(){var t,e,r,n,o,i,s;return n=this.board.labelsForColors(),e=this._filteredLabels(),r=f.chain(e).map(function(t){return function(e){return t.model.dataForLabel(e)}}(this)).tap(function(t){return function(e){return t.$(".js-show-more").toggleClass("hide",e.length<=t.labelsToShow)}}(this)).first(this.labelsToShow).value(),t={labels:r},o={editable:this.board.editable()},this.$(".js-labels-list").empty().append(v.fill("select_labels",t,o)),i=this._searchVal(),s=f.isEmpty(i)||e.length>0?g("create new label.unnamed"):g("create new label.named",{name:i}),this.$(".js-add-label").text(s),!f.isEmpty(i)&&e.length>0&&this.selectFirstLabelInList(),this},e.prototype.highlightElement=function(t){return h.selectMenuItem(this.$(".js-labels-list"),".card-label",t)},e.prototype.getHighlightedElement=function(){return this.$(".js-labels-list .card-label.selected").first()},e.prototype.selectFirstLabelInList=function(t){this.highlightElement(this.$(".js-labels-list .card-label").first())},e.prototype.toggleColorBlindMode=function(t){var e;e=o.me(),e.toggleColorBlindMode(),y(this.model.typeName,"Labels Menu","Toggle Color Blind Friendly Mode.")},e.prototype.clickEditLabel=function(t){var e,r;return h.stop(t),e=n(t.target).closest(".js-edit-label"),r=e.attr("data-idLabel"),this.editLabel(r)},e.prototype.selectLabelViaElem=function(t){return this.selectLabel(t.attr("data-idLabel"))},e.prototype.clickLabel=function(t){var e;return h.stop(t),e=n(t.target).closest(".js-select-label"),this.selectLabelViaElem(e)},e.prototype.findElementForLabel=function(t){return this.$(".js-edit-label").filter(function(e){return function(e,r){return n(r).attr("data-idLabel")===t}}(this))},e.prototype.editLabel=function(t){var e,r;return e=this.findElementForLabel(t),r=this.modelCache.get("Label",t),p[this.popOverMethod]({elem:e,view:c,options:{model:r,board:this.board,modelCache:this.modelCache}})},e.prototype.clickAddLabel=function(t){var e;h.stop(t),e=this._searchVal(),p[this.popOverMethod]({elem:this.$(".js-add-label"),view:u,options:{board:this.board,name:e,color:this._nextColor(),onSubmit:function(t){return function(e,r){return t.model.createLabel(e,r),t.clearSearch()}}(this)}})},e.prototype.showMore=function(){return this.labelsToShow+=r,this.renderLabels()},e.prototype.hoverLabel=function(t){this.highlightElement(n(t.target).closest(".card-label"))},e.prototype.keyUp=function(t){var e,r,n;return r=i.getKey(t),r===s.ArrowUp||r===s.ArrowDown?(h.stop(t),void h.navMenuList(this.$(".js-labels-list"),".card-label",r)):r===s.Enter?(n=this._filteredLabels(),n.length>0?(e=this.getHighlightedElement(),e.length>0&&(this.selectLabelViaElem(e),this.clearSearch()),y(this.model.typeName,"Labels Menu","Add By Filter")):this.clickAddLabel()):void 0},e.prototype.clearSearch=function(){return this.$(".js-label-search").val(""),this.renderLabels()},e.prototype._nextColor=function(){var t,e;return e=f.chain(this.board.getLabels()).map(function(t){return t.get("color")}).uniq().value(),null!=(t=f.difference(a.colors,e)[0])?t:""},e.prototype._searchVal=function(){var t,e;return null!=(t=null!=(e=this.$(".js-label-search").val())?e.trim():void 0)?t:""},e.prototype._filteredLabels=function(){var t;return t=this._searchVal().toLowerCase(),f.chain(this.board.getLabels()).filter(function(e){var r,n;return f.isEmpty(t)||(null!=(r=e.get("name"))?r.toLowerCase().indexOf(t):void 0)>-1||0===(null!=(n=e.get("color"))?n.toLowerCase().indexOf(t):void 0)||e.get("color")===l.keyboardIndex[parseInt(t)]}).value()},e}(m)},{}],429:[function(t,e,r){var n,o,i,s,a,u,c=[].slice;n=t("jquery"),o=t("underscore"),s=t(31),a=t(189),u=t(418),i=t(76),e.exports=new(function(){function t(){var t,e,r,n;n=null,r=function(t){return function(){var e;return clearTimeout(n),t.hide("connection"),e=i("alerts.could not connect"),t.showHtml(u.fill("connect_failed",{msg:e}),"error","connectionDead")}}(this),a.on("connect_failed",r),a.on("reconnect_failed",r),e=function(t){return function(){return clearTimeout(n),t.hide("connection")}}(this),t=function(t){return function(){return clearTimeout(n),n=setTimeout(function(){return n=null,t.show("reconnecting","error","connection")},500)}}(this),a.on("reconnect",e),a.on("connecting",t)}return t.prototype._alerts={},t.prototype._hide=function(t){var e;return e=this._alerts[t],(null!=e?e.timeout:void 0)&&clearTimeout(e.timeout),delete this._alerts[t],n("#notification_"+t).remove(),this._showHideContainer()},t.prototype._show=function(t,e,r,o,i){var a,u;return s("alerts","show",t,e,r,o,i),this._hide(o),i&&(u=setTimeout(function(t){return function(){return t.hide(o)}}(this),i)),this._alerts[o]={timeout:u},a=n("<div>").attr("id","notification_"+o).addClass("app-alert-item mod-"+r).appendTo("#notification"),e?a.html(t):a.text(t),this._showHideContainer()},t.prototype._showHideContainer=function(){return n("#notification").toggle(!o.isEmpty(this._alerts))},t.prototype.show=function(){var t,e,r,n;return r=arguments[0],t=2<=arguments.length?c.call(arguments,1):[],Array.isArray(r)?(n=r,r=n[0],e=n[1]):e={},this.showLiteralText.apply(this,[i(["alerts",r],e)].concat(c.call(t)))},t.prototype.showLiteralText=function(t,e,r,n){return this._show(t,!1,e,r,n)},t.prototype.showHtml=function(t,e,r,n){return this._show(t,!0,e,r,n)},t.prototype.flash=function(t,e,r){return this.show(t,e,r,2e3)},t.prototype.hide=function(t){return s("alerts","hide",t),this._hide(t)},t.prototype.hideAll=function(){var t,e;e=[];for(t in this._alerts)e.push(this.hide(t));return e},t}())},{}],430:[function(t,e,r){var n,o,i,s,a,u,c,l=function(t,e){function r(){this.constructor=t}for(var n in e)d.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},d={}.hasOwnProperty;o=t(435),i=t(99),s=t(421),a=t("underscore"),c=t(418),u=t(76),e.exports=n=function(t){function e(t){var r,n,o,i,s,u,c;this.model=t.model,c=t.text,this.elem=t.elem,this.top=t.top,o=t.confirmText,n=t.confirmBtnClass,r=t.cancelText,this.title=t.title,this.template=t.template,i=t.data,u=t.fxConfirm,s=t.fxCancel,this.popOnClick=t.popOnClick,null==this.template&&(this.template="confirm"),this.confirm=this._handleClick(u),this.cancel=s?this._handleClick(s):function(){},this.data=a.extend({text:c,confirmText:o,confirmBtnClass:n,cancelText:r},null!=i?i:{}),e.__super__.constructor.apply(this,arguments)}var r,n;return l(e,t),r=function(t,e){var r,n,o;n=a.clone(t);for(r in e)d.call(e,r)&&(o=e[r],r in n||(n[r]=o()));return n},n=function(t,e){var n;return n=r(e,{title:function(){return u(["confirm",t,"title"])},text:function(){return u(["confirm",t,"text"])},confirmText:function(){return u(["confirm",t,"confirm"])}}),"fxCancel"in n&&!("cancelText"in n)&&(n.cancelText=u(["confirm",t,"cancel"])),n},e.toggle=function(t,e){return e=1===arguments.length?t:n(t,e),o.toggle({elem:e.elem,top:e.top,view:this,options:e})},e.pushView=function(t,e){return e=1===arguments.length?t:n(t,e),o.pushView({view:this,options:e})},e.prototype.getViewTitle=function(){return this.title},e.prototype.events={"click .js-confirm":"confirm","click .js-cancel":"cancel"},e.prototype.render=function(){return this.$el.html(c.fill(this.template,this.data,{},{member:c.member})),this},e.prototype._handleClick=function(t){return function(e){return function(r){return i.stop(r),e.popOnClick?o.popView():o.hide(),"function"==typeof t&&t(r),e.remove(),!1}}(this)},e}(s)},{}],431:[function(t,e,r){var n,o,i,s,a,u,c,l,d;n=t(5),i=t(62),a=t(88),u=t(79),c=t("underscore"),d=t("xtend"),s=null!=(l=window.Notification)?l:{permission:"denied"},e.exports=o=function(){function t(e){this.model=e,(t.enabled()||window.fluid)&&this.model.get("unread")&&(this.localNotification()?this.show():setTimeout(this.show.bind(this),o))}var e,r,o,u,l;return r=100,o=1e3,e=1e4,t.enabled=function(){return"granted"===s.permission},t.denied=function(){return"denied"===s.permission},t.notEnabled=function(){return"default"===s.permission},t.requestPermission=null!=(u=s.requestPermission)?u:function(t){return t("denied")},t.prototype.show=function(){return this.getLock(function(t){return function(){var r,n,o,i,a,u;return i=t.render(),u=i.title,r=i.body,n=i.icon,a=i.tag,window.fluid?window.fluid.showGrowlNotification({title:u,priority:1,sticky:!1,description:r,icon:n}):(o=new s(u,{body:r,icon:n,tag:a}),o.model=t.model,o.addEventListener("click",t.clickHandler.bind(t)),setTimeout(function(){return o.close()},e))}}(this))},l=function(t){switch(t.type){case"relDate":return t.current;case"comment":case"attachmentPreview":return"";default:return t.text}},t.prototype.render=function(){var t,e,r,n,o,s,a;return r=new i("notification").getEntities(this.model.get("display")),a=c.chain(r).map(l).compact().value().join("").trim(),e=c.find(r,function(t){return"comment"===t.type}),t=null!=e?e.text:"",o=this.model.getMember(),n="/favicon.ico",(null!=o?o.avatarHash:void 0)&&(n=[window.avatarDomain,o.avatarHash,"50.png"].join("/")),s=this.model.id,{title:a,body:t,icon:n,tag:s}},t.prototype.clickHandler=function(t){var e,r,o;return e=this.model.get("data"),this.model.markRead(),t.target.close(),this.localNotification()?(this.model.navigateToView()||n.memberNotificationsView(),window.focus()):(o=this.model.getUrlOfTarget(),r=window.open(o),null!=r?r.focus():window.location=o)},t.prototype.localNotification=function(){var t;return t=this.model.get("data"),c.any(c.invoke([function(){var e;return n.onBoardView(null!=(e=t.board)?e.id:void 0)},function(){var e;return n.onOrganizationView(null!=(e=t.organization)?e.id:void 0)},function(){return 0===location.pathname.indexOf(n.getMemberNotificationsUrl())}],"call"))},t.prototype.getLock=function(t){var n,o;return n="notification_lock_"+this.model.id,a.get(n)?void 0:(o=Math.random(),a.set(n,o),setTimeout(function(e){return function(){return a.get(n)===o?t():void 0}}(this),r),setTimeout(function(t){return function(){return a.unset(n)}}(this),e))},t}()},{}],432:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h;n=t("jquery"),o=t(5),s=t(14),a=t(434),u=t(435),c=t(419),l=t(99),d=t(115),p=t("underscore"),h=t(418),e.exports=i=new(function(){function t(){}var e,r,m,f;return f=t,r=null,e=null,m=null,t.prototype.shortcut=function(t){switch(t){case s.Escape:return this.hide(),["Esc - Hide Dialog","Dialog"]}},t.prototype.init=function(){r=n(".window"),e=r.find(".window-wrapper"),e.addClass("js-tab-parent"),this.scrolltop=0,this.isVisible=!1,this.displayType=null},t.prototype.calcPos=function(t){var e,n;n=d.fSmall?"auto":t,r.css({width:n}),null!=(null!=(e=this.view)?e.setFixedSidebarLeftPos:void 0)&&i.isVisible&&this.view.setFixedSidebarLeftPos(),i.isVisible||r.show()},t.prototype.show=function(t){var s;this.isVisible&&this.hide(t.isNavigating),a.cancelEdits(),u.hide(),m=t.hide,this.scrolltop=n(window).scrollTop(),n("body").addClass("window-up"),null!=(s=o.getCurrentBoard())&&s.composer.save("vis",!1),n("body").find(".js-disable-on-dialog:not([disabled])").addClass("disabled-for-dialog").attr("disabled","disabled"),null!=t.displayType&&(r.addClass(t.displayType),this.displayType=t.displayType),e.empty().append(h.fill("dialog_close_button")),null!=t.maxWidth?this.calcPos(t.maxWidth):this.calcPos(""),t.view?(this.view=t.view,e.append(this.view.el),this.view.render(),this.view.delegateEvents(),c.addHandler(this.view,{scope:"dialog_view"})):t.html&&(this.view=null,e.append(t.html)),this.isVisible=!0,p.defer(function(t){return function(){return n(".window").css({height:1e5}),n(".window-overlay").scrollTop(1),n(".window-overlay").scrollTop(0),n(".window").css({height:""})}}(this)),r.find(".js-autofocus:first,.focus-dummy").focus().select(),r.find("input[type=submit]").click(function(t){l.preventDefault(t)}),r.find(".js-close-window").click(function(t){l.stop(t),i.hide(null,!0)}),c.addHandler(this,{scope:"dialog",modal:!0})},t.prototype.hide=function(t,e){(this.isVisible&&!a.isEditing()&&!n(".new-comment").hasClass("focus")||e)&&("function"==typeof m&&m(t),m=null,null!=this.view&&(c.removeHandler(this.view),r.removeClass(this.displayType),this.displayType=null,this.view.remove(),this.view=null),c.removeHandler(this),r.hide(),n("body").removeClass("window-up"),p.defer(function(t){return function(){return n(window).scrollTop(t.scrolltop),t.scrolltop=0}}(this)),this.isVisible=!1,n(".window-overlay").off("scroll.fixSidebar"),n(".disabled-for-dialog").removeAttr("disabled"),u.hide(),this.clear())},t.prototype.clear=function(){e.width(""),e.empty()},t}()),n(function(){return i.init()})},{}],433:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x=[].slice;n=t("jquery"),o=t(60),i=t(5),u=t(435),c=t(436),l=t(228),d=t(99),p=t("underscore"),C=t(34),_=function(t,e){var r,n,o;return o=t.x,r=e.left,n=e.right,o>=r&&n>o},b=function(t,e,r){var n,o,i,s;return s=t.top,o=t.left,n=t.bottom,i=t.right,{top:s+r,bottom:n-r,left:o+e,right:i-e}},g=function(t){return{x:t.pageX,y:t.pageY}},h=function(){var t;return t=1<=arguments.length?x.call(arguments,0):[],function(){var e,r,n;for(r=0,n=t.length;n>r;r++)e=t[r],null!=e&&e.apply(this,arguments)}},k=function(t,e){return h(e,t)},s=function(){function t(t){this.scrollBoard=t.scrollBoard,this.scrollLists=t.scrollLists,this.commitEvent=t.commitEvent,this.cancelMethod=t.cancelMethod,this._queue=[]}return t.prototype.hasMousedLeft=!1,t.prototype.hasMousedRight=!1,t.prototype.stopped=!1,t.prototype.aborted=!1,t.prototype.start=function(t,e){this.$helper=e.helper,this.$target=n(t.target),this.initialMousePosition=g(t),this.lockModelCache(),l.hideSidebar(),this.startTrackingMouse(),this.hidePopoversForSomeReason(),this.boardElement=n("#board")[0],this.boardCanvasElement=n(".board-canvas")[0],this.cachedHoveredList=this.getHoveredListForPoint(this.initialMousePosition),(this.scrollLists||this.scrollBoard)&&this.startAutoscrolling(),a.sorting=!0,this.onStop(function(){return p.defer(function(){return a.sorting=!1})})},t.prototype.lockModelCache=function(){var t,e;if(e=i.getCurrentModelCache(),null==e)throw new Error("Attempt to use DragInfo on a page with no modelCache!");return t=e.lock("DragSort.startSort"),this.onStop(function(){return e.unlock(t)})},t.prototype.hidePopoversForSomeReason=function(){0===this.$target.closest(".pop-over").length&&u.hide()},t.prototype.startAutoscrolling=function(){var t,e;return t=Math.floor(1e3/60),e=setInterval(this.autoscroll.bind(this),t),this.onStop(function(){return clearInterval(e)})},t.prototype.getHoveredListForPoint=function(t){var e,r,o,i;for(i=n(".js-list"),r=0,o=i.length;o>r;r++)if(e=i[r],_(t,e.getBoundingClientRect()))return n(e).find(".list-cards")[0];return null},t.prototype.startTrackingMouse=function(){var t,e;return e=p.throttle(function(t){return function(e){return t.stopped?void 0:t.cachedHoveredList=t.getHoveredListForPoint(e)}}(this),100),t=20,n(document).on("mousemove.dragsort",function(r){return function(n){var o;o=g(n),o.x<r.initialMousePosition.x-t&&(r.hasMousedLeft=!0),o.x>r.initialMousePosition.x+t&&(r.hasMousedRight=!0),e(o)}}(this)),this.onStop(function(){return n(document).off("mousemove.dragsort")})},t.prototype.onStop=function(t){return this._queue.push(t)},t.prototype.stop=function(t,e){var r,n,o,i;for(this.stopped=!0,i=this._queue,n=0,o=i.length;o>n;n++)r=i[n],r.call(this);delete this._queue,this.aborted||this.$target.trigger(this.commitEvent,e)},t.prototype.scrollDeltaForOverhang=function(t){return.1*t},t.prototype.autoscrollBoard=function(){var t,e,r,n,o,i;r=this.$helper[0].getBoundingClientRect(),t=r.left,n=r.right,i=b(this.boardCanvasElement.getBoundingClientRect(),100,0),e=i.left-t,e>0&&this.hasMousedLeft&&(this.boardElement.scrollLeft-=this.scrollDeltaForOverhang(e)),o=n-i.right,o>0&&this.hasMousedRight&&(this.boardElement.scrollLeft+=this.scrollDeltaForOverhang(o))},t.prototype.autoscrollLists=function(){var t,e,r,n,o,i;r=this.$helper[0].getBoundingClientRect(),o=r.top,t=r.bottom,n=b(this.cachedHoveredList.getBoundingClientRect(),0,50),i=n.top-o,i>0&&(this.cachedHoveredList.scrollTop-=this.scrollDeltaForOverhang(i)),e=t-n.bottom,e>0&&(this.cachedHoveredList.scrollTop+=this.scrollDeltaForOverhang(e))},t.prototype.autoscroll=function(){this.scrollBoard&&this.autoscrollBoard(),this.scrollLists&&null!=this.cachedHoveredList&&this.autoscrollLists()},t.prototype.abort=function(){return this.aborted=!0,this.$target[this.cancelMethod]("cancel")},t}(),m=null,w=function(t,e){return e=p.defaults({},e,{distance:7,scroll:!1}),t.scrollLists&&(e.custom={refreshContainers:function(){var t,e,r,o;this.containers=function(){var i,s,a,u,c,l,d;for(c=this.containers,d=[],i=0,a=c.length;a>i;i++)if(t=c[i],n.contains(document,t.element[0])){for(e=t.element.closest(".js-list")[0],o=e.getBoundingClientRect(),l=["left","top","width","height"],s=0,u=l.length;u>s;s++)r=l[s],t.containerCache[r]=o[r];d.push(t)}return d}.call(this)}}),e.start=k(e.start,function(e,r){if(null!=m)throw new Error("Attempt to start a drag event while another is in progress!");m=new s(t),m.start(e,r)}),e.stop=k(e.stop,function(t,e){d.stopPropagation(t),m.stop(t,e),m=null}),e},f=function(t){return{width:t.outerWidth(),height:t.outerHeight()}},y=function(t,e,r){var i,s;o.isTouch()||(i=null,s=!("helper"in r)||"original"===r.helper,r.start=k(r.start,function(t,n){var o,a,u,c;s&&"appendTo"in r&&(n.helper.appendTo(r.appendTo),i.sortable("refreshPositions")),u=(null!=(a=e.calcSize)?a:f)(n.item),c=u.width,o=u.height,n.placeholder.width(c),n.placeholder.height(o)}),e=p.extend({commitEvent:"sortcommit",cancelMethod:"sortable"},e),r=w(e,r),c.enqueue(function(){return i=n(t),i.sortable(r)}))},v=function(t,e,r){o.isTouch()||(e=p.extend({commitEvent:"dragcommit",cancelMethod:"draggable"},e),r=w(e,r),c.enqueue(function(){return n(t).draggable(r)}))},e.exports=a={refreshListSortable:function(){return y(".js-list-sortable",{scrollBoard:!0,scrollLists:!1,calcSize:function(t){var e;return e=t.children(".list"),{width:e.outerWidth(),height:e.outerHeight()}}},{handle:".list-header",tolerance:"pointer",placeholder:"list-wrapper placeholder",items:".js-list",appendTo:"body"})},refreshCalendarCardSortable:function(){return y(".js-calendar-sortable",{scrollBoard:!1,scrollLists:!1},{connectWith:".js-calendar-sortable",placeholder:"list-card placeholder-none",items:".list-card:not(.placeholder-none, .hide, .js-composer)",appendTo:".calendar-drag-area",over:function(t,e){return n(t.target).closest(".calendar-day").addClass("drop")},out:function(t,e){return n(t.target).closest(".calendar-day").removeClass("drop")}})},refreshListCardSortable:function(){return y(".js-sortable",{scrollBoard:!0,scrollLists:!0},{connectWith:".js-sortable",placeholder:"list-card placeholder",items:".list-card:not(.placeholder, .hide, .js-composer)",appendTo:"body"})},refreshDraggableSidebarMembers:function(){return v(".js-list-draggable-board-members .member:not(.js-member-deactivated)",{scrollBoard:!0,scrollLists:!0},{revert:"invalid",revertDuration:150,appendTo:"body",zIndex:100,helper:"clone",start:function(t,e){C("Board Menu","Drag Member from Sidebar"),n(".list-card.active-card").removeClass("active-card")}})},refreshDraggableStickers:function(){return v(".js-draggable-sticker:not(.disabled)",{scrollBoard:!0,scrollLists:!0},{revert:"invalid",revertDuration:150,appendTo:"body",zIndex:100,helper:"clone",start:function(t,e){var r;C("Board Menu","Drag Sticker from Sidebar"),r=20*Math.random()-10,e.helper.find(".sticker-select-fixed").css({transform:"rotate("+r+"deg)","-webkit-transform":"rotate("+r+"deg)"})}})},abort:function(){if(null==m)throw new Error("Abort called while not dragging!");return m.abort()},refreshIfInitialized:function(t){return(null!=t?t.hasClass("ui-sortable"):void 0)?t.sortable("refresh"):void 0}}},{}],434:[function(t,e,r){var n,o,i,s;n=t("jquery"),o=t(193),i=t(88),s=t("underscore"),e.exports=new(function(){function t(){}return s.extend(t.prototype,o.Events),t.prototype.cancelEdits=function(t){var e;return n(".edit-controls:not(.keep)").remove(),n(".editing").removeClass("editing"),n(".is-editing").removeClass("is-editing"),n(".is-focused").removeClass("is-focused"),n(".checklist-new-item").removeClass("focus"),n("input").not(t||"none").blur(),n("textarea").not(t||"none").blur(),this.trigger("cancelEdits"),e=n(".editable"),e.length>0?e.each(function(t){var e,r,o,s,a,u,c;return o=n(".editable")[t],c=n(o).find(".edits-warning:first"),e=n(o).find(".current:first"),s=n(o).find(".field:first"),r=s.data("draftKey"),a=null!=(u=e.data("unmarkeddown"))?u!==s.val():s.val()!==e.text(),a&&""!==s.val()&&null!=r?(i.set(r,s.val()),c.show()):void 0}):void 0},t.prototype.isEditing=function(){return n(".editing").length+n(".checklist-new-item.focus").length+n(".is-focused").length>0},t}())},{}],435:[function(t,e,r){var n,o,i,s,a,u,c,l,d;n=t("jquery"),o=t(60),i=t(14),s=t(434),a=t("bluebird"),u=t(419),c=t(99),l=t(115),d=t("underscore"),e.exports=new(function(){function t(){this.viewStack=[],this.el_left="",this.el_top="",this.view=null,this.args={},this.isVisible=!1,n(function(t){return function(){return e=n(".pop-over"),h=e.find(".js-pop-over-header"),m=e.find(".js-fill-pop-over-title"),p=e.find(".js-fill-pop-over-content"),r=e.find(".js-back-view"),r.click(function(e){return t.popView()}),e.find(".js-close-popover").click(function(e){return c.stop(e),t.hide()})}}(this))}var e,r,p,h,m,f,g,v;return e=null,h=null,m=null,p=null,r=null,f=null,g=null,v=null,t.prototype.shortcut=function(t){switch(t){case i.Escape:return this.popView(),["Esc - Pop Pop-over View","Pop Over"]}},t.prototype.contains=function(t){return n.contains(e[0],t)},t.prototype.calcPos=function(t){var r,o,i,s,a,u,c,m,f,g,v,y,b,w,_,k,C,x,j,S,B,M;if(this.isVisible||(null!=t?!t.notNew:!0)){if(M=n(window).width(),B=n(window).height(),(null!=(g=this.view)?g.maxWidth:void 0)?this.view.maxWidth>M?e.width(M-16):e.width(this.view.maxWidth):e.width(""),i=M,S=B,f=e.outerWidth(),t&&!t.notNew&&(this.args=t),o=null!=(null!=(v=this.args)?v.clientx:void 0)&&null!=(null!=(y=this.args)?y.clienty:void 0),n(null!=(b=this.args)?b.elem:void 0).is(":visible")?(j=null!=this.args.top?this.args.top:null!=this.args.elem?n(this.args.elem).outerHeight()+6:35,this.el_left=n(this.args.elem).offset().left,this.el_top=n(this.args.elem).offset().top+j):o&&(this.el_left=this.args.clientx,this.el_top=this.args.clienty),s=S-68,(null!=(w=this.view)?w.hideHeader:void 0)||(s-=h.outerHeight()),(null!=(_=this.args)?_.clientx:void 0)&&(null!=(k=this.args)?k.clienty:void 0));else if(!d.include(["block","inline-block","inline","table-cell"],n(null!=(C=this.args)?C.elem:void 0).css("display")))return;m=this.el_top>0?this.el_top:5,u=e.outerHeight(),a=m+u,(l.fLarge||l.fExtraLarge)&&(x=B+n(window).scrollTop(),a>x&&(m=x-u-8),u>x-44&&(m=44)),c=this.el_left>0?this.el_left:5,r=c+f+16,r>i&&(c=i-(f+5)),this.isVisible||e.css({left:-1e4,top:-1e4}).addClass("is-shown"),d.defer(function(t){return function(){return e.css({left:c,top:m}),p.css({maxHeight:s})}}(this))}},t.prototype.load=function(t,r,n){var o,i,s,c,l;return this._cancelPending(),s=null!=(c=null!=(l=this.view)?l.keepInDOM:void 0)?c:!1,d.isFunction(t)?this.view=new t(null!=r?r:{}):(this.view=t,n=r),this.clearDisplayTypes(),e.addClass(this.view.displayType),"function"==typeof(i=this.view).getData&&i.getData(),this._titlePromise=a.resolve(this.view.getViewTitle()).cancellable().then(function(t){return m.text(t)}).catch(a.CancellationError,function(){}).done(),n?(o=p.children(".js-popover-pushed").last()).length>0?o.removeClass("js-popover-pushed hide").nextAll().remove():p.empty().append(this.view.el):s?p.children().addClass("js-popover-pushed hide").end().append(this.view.render().el):p.children().detach().end().append(this.view.render().el),n||u.addHandler(this.view,{scope:"popover_view"}),this.view},t.prototype.show=function(t){t.keepEdits||s.cancelEdits(t.elActive),t.preloaded||(this.hide(),t.view=this.load(t.view,t.options)),this.viewStack.push(t.view),this.calcPos(t),d.defer(function(t){return function(){if(e.find(".js-autofocus").length>0){if(o.isTouch()&&e.find(".js-autofocus:first").hasClass("js-no-touch-autofocus"))return;return e.find(".js-autofocus:first").focus().select()}}}(this)),this.isVisible=!0,"function"==typeof t.shown&&t.shown(e),g=t.hidden,this.positionInterval=setInterval(this.checkPosition.bind(this),150),u.addHandler(this,{scope:"popover",modal:!0})},t.prototype.checkPosition=function(){var t,r,o,i,s;return this.isVisible?(o=e.offset().top,s=n(window).scrollTop(),o!==s?(i=n(window).height(),r=e.outerHeight(),s>o&&i>=r?void e.css({top:s}):o+r>s+i&&(t=s+Math.max(0,i-r),t!==o)?e.css({top:t}):void 0):void 0):void clearInterval(this.positionInterval)},t.prototype.pushView=function(t){var n;if(n=d.last(this.viewStack),null!=n&&"function"==typeof n.willBePushedDown&&n.willBePushedDown(),t.view=this.load(t.view,t.options),this.viewStack.push(t.view),r.addClass("is-shown"),e.find(".js-autofocus").length>0){if(o.isTouch()&&e.find(".js-autofocus:first").hasClass("js-no-touch-autofocus"))return;setTimeout(function(t){return function(){return e.find(".js-autofocus:first").focus().select()}}(this),10)}return this.calcPos()},t.prototype.popView=function(){var t,n;if(t=d.last(this.viewStack),null!=t&&("function"==typeof t.willBePopped&&t.willBePopped(),u.removeHandler(t),t.remove()),this.viewStack.pop(),n=d.last(this.viewStack),!n)return void this.hide();if(this.load(n,!0),1===this.viewStack.length&&r.removeClass("is-shown"),e.find(".js-autofocus").length>0){
if(o.isTouch()&&e.find(".js-autofocus:first").hasClass("js-no-touch-autofocus"))return;setTimeout(function(t){return function(){return e.find(".js-autofocus:first").focus().select()}}(this),10)}return this.calcPos()},t.prototype.toggle=function(t){var e;return e=function(t,e){return t&&e&&n(t)[0]===n(e)[0]},this.args&&e(this.args.elem,t.elem)?this.hide():this.show(t)},t.prototype.hide=function(){var t,n,o;for(clearInterval(this.positionInterval),n=this.viewStack,t=n.length-1;t>=0;t+=-1)o=n[t],"function"==typeof o.willBePopped&&o.willBePopped(),o.remove();return p.empty().scrollTop(0),e.removeClass("is-shown"),r.removeClass("is-shown"),this.clearDisplayTypes(),u.removeHandlerScope("popover_view"),u.removeHandler(this),this.viewStack=[],this.view=null,this.args=null,this.isVisible=!1,this._cancelPending(),"function"==typeof g&&g(e),g=null},t.prototype.clearDisplayTypes=function(){return e.removeClass("mod-mini-profile mod-avdetail mod-search-over mod-notifications")},t.prototype._cancelPending=function(){var t;null!=(t=this._titlePromise)&&t.cancel()},t}())},{}],436:[function(t,e,r){var n,o=[].slice;n=t("underscore"),e.exports=new(function(){function t(){this.holding=!1,this.fxs={},this._unnamed=0}return t.prototype.hold=function(){return this.holding=!0},t.prototype.enqueue=function(){var t,e,r,n;t=2<=arguments.length?o.call(arguments,0,r=arguments.length-1):(r=0,[]),e=arguments[r++],n=t[0],null==n&&(n="unnamed_"+this._unnamed++),this.holding?this.fxs[n]=e:e()},t.prototype.release=function(){var t;this.holding=!1,t=this.fxs,this.fxs={},n.defer(function(){var e,r;for(r in t)(e=t[r])()})},t}())},{}],437:[function(t,e,r){var n,o,i,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=t(438),i=t(76),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.getLinkText=function(){return i("prefilled info tooltip.title")},e.prototype.getTooltipText=function(){return i("prefilled info tooltip.text")},e.prototype.isActive=function(){return 0!==this.$el.closest(".active").length},e}(o)},{}],438:[function(t,e,r){var n,o,i,s,a,u=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;n=t(439),i=t(99),s=t(421),a=t(793),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.className="tooltip",e.prototype.events={"click .js-tooltip-trigger":"toggleTooltip"},e.prototype.getTooltipText=function(){return""},e.prototype.getLinkText=function(){return""},e.prototype.render=function(){return this.$el.html(a(this.getLinkText())),this},e.prototype.isActive=function(){return!0},e.prototype.toggleTooltip=function(t){i.stop(t),this.isActive()&&n.toggle(this.getTooltipText(),this.$(".js-tooltip-anchor"))},e}(s)},{}],439:[function(t,e,r){var n,o;n=t("jquery"),o=t(418),e.exports=new(function(){function t(){this.tooltip=null,n(window).bind("click",function(t){return function(e){return t.windowClick(e)}}(this))}return t.prototype.show=function(t,e){var r,i,s,a,u,c;return r=n(o.fill("tooltip_content",{tooltipText:t})),i=n(".tooltip-container"),i.html(r),this.tooltip={tooltipText:t,$anchor:e,$elem:r},c=e.offset(),a=c.left,u=c.top,s=e.outerHeight(),i.css({left:a-5,top:u+s}),r.addClass("active")},t.prototype.toggle=function(t,e){var r;return e.is(null!=(r=this.tooltip)?r.$anchor:void 0)?this.hide():this.show(t,e)},t.prototype.windowClick=function(t){return 0===n(t.target).closest(".js-tooltip-content").length||0!==n(t.target).closest(".js-tooltip-close-button").length?this.hide():void 0},t.prototype.hide=function(){var t;return this.tooltip=null,t=n(".tooltip-container"),t.find(".tooltip-content").removeClass("active"),setTimeout(function(e){return function(){return t.empty()}}(this),300)},t}())},{}],440:[function(t,e,r){var n,o,i,s,a,u,c,l=function(t,e){function r(){this.constructor=t}for(var n in e)d.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},d={}.hasOwnProperty;n=t("jquery"),i=t(435),s=t(99),a=t(421),u=t(418),c=t(34),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.className="js-add-list list-wrapper mod-add is-idle",e.prototype.initialize=function(){return this.listenTo(this.model.viewState,"change:listComposerOpen",this.frameDebounce(this.renderListComposer))},e.prototype.events={"click .js-open-add-list":"setOpen","click .js-cancel-edit":"setClose",submit:"addList"},e.prototype.render=function(){var t;return t=this.model.toJSON({board:!0}),this.$el.html(u.fill("list_add",t)),this.renderListComposer(),this.model.editable()&&this.$el.removeClass("fade hide"),this},e.prototype.setOpen=function(t){s.stop(t),this.model.viewState.set("listComposerOpen",!0)},e.prototype.setClose=function(t){s.stop(t),this.model.viewState.set("listComposerOpen",!1)},e.prototype.renderListComposer=function(){return this.model.viewState.get("listComposerOpen")?this.renderOpen():this.renderClose()},e.prototype.renderOpen=function(t){s.stop(t),this.$el.hasClass("is-idle")&&(this.$el.removeClass("is-idle"),n(".list-area-wrapper").scrollLeft(n(".list-area").outerWidth()+100)),this.defer(function(t){return function(){return t.$(".list-name-input").focus().select()}}(this)),i.hide()},e.prototype.renderClose=function(t){s.stop(t),this.$el.addClass("is-idle")},e.prototype.addList=function(t){var e,r,n,o;return s.stop(t),e=this.$(".list-name-input"),n=this.model.openLists(),o=n.length+1,r=e.val().trim(),""===r?void e.focus().select():(this.model.listList.create({name:r,pos:this.model.calcPos(o),closed:!1},{success:function(t){return function(t){return c("Board View","Add List - via Inline List Composer")}}(this)}),void this.renderOpen())},e}(a)},{}],441:[function(t,e,r){var n,o,i,s,a,u,c,l=function(t,e){function r(){this.constructor=t}for(var n in e)d.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},d={}.hasOwnProperty;n=t("jquery"),i=t(435),s=t(421),a=t("underscore"),u=t(418),c=t(34),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.viewTitleKey="move all cards in list",e.prototype.events={"click .js-select-list":"selectList"},e.prototype.render=function(){var t,e,r,n,o,i;for(e=this.model.toJSON(),e.lists=[],i=this.model.getBoard().openLists(),r=0,n=i.length;n>r;r++)o=i[r],t=a.clone(o.toJSON()),t.id===this.model.id&&(t.current=!0),e.lists.push(t);return this.$el.html(u.fill("list_bulk_card_move",e)),this},e.prototype.selectList=function(t){var e,r,o,s,a,u,l;if(e=n(t.target).closest(".js-select-list"),l=e.attr("name"),!e.hasClass("disabled")){for(a=this.modelCache.get("List",l),c("Card","Moved in Bulk via List Menu"),u=this.model.cardList.openCards(),o=0,s=u.length;s>o;o++)r=u[o],r.moveToList(a,1e3);i.hide()}},e}(s)},{}],442:[function(t,e,r){var n,o,i,s,a,u,c,l,d=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;n=t(73),o=t(14),s=t(435),a=t(99),u=t(421),c=t(418),l=t(34),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return d(e,t),e.prototype.viewTitleKey="copy list",e.prototype.tagName="form",e.prototype.events={"click .js-submit":"submit",submit:"submit",'keydown textarea[name="name"]':"keydownEvent"},e.prototype.render=function(){var t;return t=this.model.toJSON(),this.$el.html(c.fill("list_copy",t,{editable:this.model.editable()})),this},e.prototype.keydownEvent=function(t){n.getKey(t)===o.Enter&&(a.stop(t),this.submit(t))},e.prototype.submit=function(t){var e,r,n,o;return a.stop(t),n=this.$('textarea[name="name"]'),""===n.val().trim()?void n.focus().select():(e=this.model.getBoard(),r=e.listList.calcPos(this.model.getIndexInList()+1,this.model,!0),o={idListSource:this.model.id,idBoard:this.model.get("idBoard"),pos:r,name:n.val().trim(),closed:!1},e.listList.create(o),s.hide(),void l("List","Copy List"))},e}(u)},{}],443:[function(t,e,r){var n,o,i,s,a,u=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;n=t(396),o=t(433),s=t(446),a=t(57),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.viewType=s,e.prototype.initialize=function(t){return this.resetCallback=t.resetCallback,e.__super__.initialize.apply(this,arguments),a(null!=this.resetCallback),this.listenTo(this.collection,{reset:this.resetCallback,"change:idBoard":this.boardChange})},e.prototype.getModels=function(){return this.collection.openLists()},e.prototype.boardChange=function(t,e){return e!==this.collection.board.get("id")?(this.collection.remove(t),o.refreshIfInitialized(this.$el)):void 0},e.prototype.addModel=function(){return e.__super__.addModel.apply(this,arguments),this.resetCallback()},e.prototype.removeSubview=function(){e.__super__.removeSubview.apply(this,arguments),o.refreshListCardSortable()},e.prototype.insertSubview=function(t){e.__super__.insertSubview.apply(this,arguments),t.$el.find(".ui-sortable").length>0?o.refreshIfInitialized(this.$el):o.refreshListCardSortable()},e}(n)},{}],444:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h=function(t,e){function r(){this.constructor=t}for(var n in e)m.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},m={}.hasOwnProperty;n=t(430),o=t(441),i=t(442),a=t(445),u=t(435),c=t(99),l=t(421),d=t(418),p=t(34),e.exports=s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return h(e,t),e.prototype.viewTitleKey="list actions",e.prototype.initialize=function(){return this.listenTo(this.model,"change:subscribed",this.frameDebounce(this.render))},e.prototype.events={"click .js-add-card":"addCard","click .js-move-list":"moveList","click .js-copy-list":"copyList","click .js-list-subscribe":"toggleSubscribe","click .js-move-cards":"moveCards","click .js-archive-cards":"archiveCards","click .js-close-list":"closeList"},e.prototype.render=function(){var t;return t=this.model.toJSON(),this.$el.html(d.fill("list_menu",t,{editable:this.model.editable()})),this},e.prototype.addCard=function(t){c.stop(t),u.hide(),this.model.getBoard().composer.save({list:this.model,index:0,vis:!0}),p("List Menu","Add Card"),p("Card Composer","Open","Via List Menu")},e.prototype.moveList=function(t){c.stop(t),p("List Menu","Open Move List Popover"),u.pushView({view:new a({model:this.model,modelCache:this.modelCache})})},e.prototype.copyList=function(t){c.stop(t),p("List Menu","Open Copy List Popover"),u.pushView({view:new i({model:this.model,modelCache:this.modelCache})})},e.prototype.toggleSubscribe=function(t){c.preventDefault(t),this.model.get("subscribed")?(this.model.subscribe(!1),p("List Menu","Subscribe","Unsubscribe")):(this.model.subscribe(!0),p("List Menu","Subscribe","Subscribe"))},e.prototype.moveCards=function(t){c.stop(t),p("List Menu","Open Move All Cards in List"),u.pushView({view:new o({model:this.model,modelCache:this.modelCache})})},e.prototype.archiveCards=function(t){c.stop(t),p("List Menu","Open Archive All Cards in List"),n.pushView("archive all cards",{model:this.model,confirmBtnClass:"negate",fxConfirm:function(t){return function(e){var r,n,o,i;for(u.hide(),i=t.model.openCards(),n=0,o=i.length;o>n;n++)r=i[n],r.set({closed:!0});return t.model.run("archiveAllCards",{},t.listViewListen)}}(this)})},e.prototype.closeList=function(t){var e,r;return c.stop(t),r=this,e=this.model,p("List Menu","Archive List"),u.hide(),e.close(),!1},e}(l)},{}],445:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f=function(t,e){function r(){this.constructor=t}for(var n in e)g.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},g={}.hasOwnProperty;n=t("jquery"),o=t(22),s=t(27),a=t(185),u=t(435),c=t(99),l=t(421),d=t("underscore"),h=t(418),m=t(34),p=t(76),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return f(e,t),e.prototype.viewTitleKey="move list",e.prototype.tagName="form",e.prototype.events={"change .js-select-list-pos":"renderValues","change .js-select-board":"updateBoardData","click .js-commit-position":"commitChange",submit:"commitChange"},e.prototype.render=function(){var t,e,r,n,i,s,a,u,c,l,d;for(d=this,a=d.model,e={organizations:o.me().getOpenBoardsByOrg(!0)},c=e.organizations,r=0,i=c.length;i>r;r++)for(u=c[r],l=u.boards,n=0,s=l.length;s>n;n++)t=l[n],t.id===a.get("idBoard")&&(t.selected=!0);return this.$el.html(h.fill("popover_move_list",e)),this.updateBoardData(),this},e.prototype.renderValues=function(){var t,e,r,o,i;t=n(this.el),o=t.find(".js-select-board option:selected").val(),i=parseInt(t.find(".js-select-list-pos option:selected").text(),10),e=this.modelCache.get("Board",o),r=e.get("name"),t.find(".js-board-value").text(r),t.find(".js-pos-value").text(String(i))},e.prototype.updateBoardData=function(){var t,e,r,o,i,u,c,l,d;if(t=n(this.el),r=t.find(".js-select-board"),i=r.find("option:selected").val(),o={},i===this.model.getBoard().id){for(this._boardData=this.model.getBoard(),d=this._boardData.listList.models,u=0,c=d.length;c>u;u++)l=d[u],l.cardCount=this._boardData.listList.get(l.id).cardList.openCards().length;this.updateListList()}else e=t.find(".select-list,.select-position"),e.attr("disabled","disabled"),s.loadBoardData(i,a.listsMinimal).then(function(t){return function(){return t._boardData=t.modelCache.get("Board",i),t.updateListList(),e.removeAttr("disabled")}}(this)).done()},e.prototype.updateListList=function(){var t,e,r,o,i,s,a,u,c,l,h,m,f,g,v,y;for(y=this,m=y.model,h=this._boardData.listList.models,a=this.model.id,e=this.$(".js-select-list-pos"),e.empty(),f=this._boardData.openLists(),c=this._boardData.id===this.model.getBoard().id,c?(o=d.indexOf(f,this.model),r=f.length):(o=-1,r=f.length+1),s=l=0,v=r;v>=0?v>l:l>v;s=v>=0?++l:--l)u=String(s+1),i=s===o?p("current position",{index:u}):u,g=this._boardData.listList.calcPos(s,m),t=n("<option>").val(g).text(i).appendTo(e),s===o&&t.attr("selected","selected");return this.renderValues()},e.prototype.commitChange=function(t){var e,r,n;c.stop(t),e=this.$(".js-select-list-pos"),n=parseInt(e.find("option:selected").val(),10),r=this.$(".js-select-board option:selected").val(),this.model.getBoard().composer.save("vis",!1),r===this.model.getBoard().id?(this.model.update({pos:n}),m("List Menu","Move Menu","Successfully Moved")):null!=r&&null!=n&&(this.model.update({idBoard:r,pos:n}),m("List Menu","Move Menu","Changed Board")),u.hide()},e}(l)},{}],446:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,B,M,T,O=function(t,e){function r(){this.constructor=t}for(var n in e)L.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},L={}.hasOwnProperty;n=t("jquery"),o=t(60),i=t(346),s=t(356),a=t(5),t(397),u=t(433),c=t(400),l=t(444),h=t(435),f=t(90),p=t(411),m=t("bluebird"),g=t(419),v=t(99),y=t("underscore"),k=t(31),C=t(81),B=t(418),M=t(34),_=t(75),j=t(216),T=t(422),S=t(403),w=t(76),b=t(197),x=t(102),e.exports=d=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return O(e,t),e.prototype.className="js-list list-wrapper",e.prototype.events={"click .js-open-list-menu":"openMenu","mousedown .list-cards":"eventStopPropagation","click .js-open-card-composer":"openCardComposer",movelist:"moveList",sortreceive:"sortReceive",sortcommit:"sortCommit","dd-drop:files":"dropFiles","dd-drop:text":"dropText","dd-drop:url":"dropUrl",mouseenter:"mouseenter",mouseleave:"mouseleave","userinput-paste:text":"dropText","userinput-paste:files":"dropFiles","userinput-paste:url":"dropUrl"},e.prototype.initialize=function(){var t,r,o,i,a;for(e.__super__.initialize.apply(this,arguments),this.makeDebouncedMethods("toggleComposerLink","renderComposer","renderCardCount"),this.listenTo(this.model,{"change:name":this.renderName,"change:subscribed":this.renderSubscribed}),this.listenTo(this.model.cardList,{"add remove change:idList change:closed reset":this.renderCardCountDebounced}),this.listenTo(this.model.getBoard(),"permChange",this.renderEditable),this.listenTo(this.model.getBoard().composer,{"change:list change:index change:vis":this.renderComposerDebounced,"change:list change:vis":this.toggleComposerLinkDebounced}),this.cardListView=this.collectionSubview(s,this.model.cardList,{className:"list-cards u-fancy-scrollbar u-clearfix js-list-cards"}),n(window).on("resize."+this.uniqueId(),b(this,"hackFlexboxForSadBrowsers")),a=["mouseEnterCardView","mouseLeaveCardView","mouseMoveCardView"],r=function(t){return function(e){return t.listenTo(t.cardListView,e,function(t){return this.trigger(e,t)})}}(this),o=0,i=a.length;i>o;o++)t=a[o],r(t)},e.prototype.render=function(){return k("render","rendering list "+this.model.get("name")),this.cardListView.$el.detach(),this.$el.html(B.fill("list",this.model.toJSON(),{editable:this.model.editable()})),this.cardListView.$el.insertAfter(this.$(".js-list-header")),this.cardListView.render(),this.cardListView.$el.toggleClass("js-sortable",this.model.editable()),this.toggleComposerLinkDebounced(),this.renderComposerDebounced(),this.renderCardCount(),this.renderEditable(),this.hackFlexboxForSadBrowsers(),this},e.prototype.remove=function(){return n(window).off("."+this.uniqueId()),e.__super__.remove.apply(this,arguments)},e.prototype.renderName=function(){return this.$(".js-list-name").text(this.model.get("name")),this},e.prototype.renderSubscribed=function(){return this.$(".js-list-subscribed").toggleClass("hide",!this.model.get("subscribed")),this},e.prototype.renderEditable=function(){var t;return t=this.model.editable(),this.$(".js-list-cards").toggleClass("js-sortable",t),this.$(".js-list-header").toggleClass("editable",t),this.$(".js-open-card-composer").toggleClass("hide",!t),this},e.prototype.hackFlexboxForSadBrowsers=function(){var t;("explorer-10"===(t=o.browserVersionStr)||"explorer-11"===t)&&this.defer(function(t){return function(){var e,r,o,i,s;return e=t.$el,s=t.$(".list-header").outerHeight(),o=t.$(".open-card-composer").outerHeight(),r=n("#board").height(),i=r-s-o-20,t.$(".list-cards").css({"max-height":i})}}(this))},e.prototype.toggleComposerLink=function(){return this.$(".js-open-card-composer").toggleClass("hide",this.composerOpen()||!this.model.editable())},e.prototype.composerOpen=function(){var t,e;return t=null!=(e=this.model.getBoard())?e.composer:void 0,null!=t&&t.get("vis")&&t.get("list")===this.model},e.prototype.renderComposer=function(){var t,e;return this.composerOpen()&&(t=this.model.getBoard().composer,e=a.getCurrentBoardView().subview(i,t),this.insertComposerAtIndex(t.get("index"),e),e.scrollIntoView(),y.debounce(e.delegateEvents(),150)),this},e.prototype.insertComposerAtIndex=function(t,e){var r,n;0===t?this.$(".list-cards").prepend(e.render().el):(n=t-1,r=this.$(".list-card").not(".js-composer"),n>=r.length&&(n=r.length-1),r.eq(n).after(e.render().el))},e.prototype.renderCardCount=function(){return this.$(".js-num-cards").text(_("cards",this.model.cardList.openCards().length))},e.prototype.editTitle=function(t){return this.model.editable()?this.$(".js-list-name").click():void 0},e.prototype.openCardComposer=function(t){var e;v.stop(t),h.hide(),e=this.model.getBoard(),e.composer.save({list:this.model,index:this.model.cardList.openCards().length,vis:!0}),M("Card Composer","Open","Via Bottom of List")},e.prototype.triggerOnItem=function(t,e,r){v.stopPropagation(t),this.defer(function(t){return function(){return e.item.trigger(r,[e,t])}}(this))},e.prototype.sortReceive=function(t,e){this.triggerOnItem(t,e,"moveto")},e.prototype.sortCommit=function(t,e){this.triggerOnItem(t,e,"movein")},e.prototype.openMenu=function(t){var e;return e=this,u.sorting?void 0:(v.preventDefault(t),M("List Menu","Open List Menu"),h.toggle({elem:t.target,view:new l({model:this.model,modelCache:this.modelCache})}),!1)},e.prototype.moveList=function(t,e){var r,n;r=e.item.parent().children(),n=r.index(e.item),this.model.move(n)},e.prototype.eventStopPropagation=function(t){v.stopPropagation(t)},e.prototype.scrollToCard=function(t){var e;e=this.cardListView.viewForModel(t),v.scrollElementIntoView(this.$(".js-list-cards")[0],e.el,{vertical:!0,animated:!0})},e.prototype.mouseenter=function(t){return g.addHandler(this,{scope:"list"})},e.prototype.mouseleave=function(t){return g.removeHandler(this,{scope:"list"})},e.prototype.dropText=function(t){var e;if(this.model.editable())return e=t.detail,this.model.uploadText(e)},e.prototype.dropUrl=function(t){var e,r,n,o,i,s;if(this.model.editable())return t.stopPropagation(),s=t.detail,o=j(s),v.isExternalURL(s)||null==(e=null!=(i=/^\/c\/([^\/]+)/.exec(o.pathname))?i[1]:void 0)?void(null!=(r=o.host)&&p.one({timeout:2e3,command:"card-from-url",list:this.model,board:this.model.getBoard(),options:{url:s}}).catch(p.Error.NotHandled,function(){return{}}).then(function(t){return function(e){var n,o;return o=w("loading from domain",{domain:r}),n=y.pick(e,"name","desc"),x(t.model,"uploadUrl",s,n,o)}}(this)).done()):(n=f.isCut(s)?"moveCard":"copyCard",void this.trigger(n,{shortLink:e,idList:this.model.id}))},e.prototype.dropFiles=function(t){var e;if(this.model.editable()&&(e=t.detail,!T(this.model.getBoard(),e)))return m.resolve(e).each(function(t){return function(e){var r;return r=e.name||S(),x(t.model,"upload",e,r)}}(this)).catch(function(){}).done()},e}(c)},{}],447:[function(t,e,r){var n,o,i=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;o=t(451),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.renderMenu=function(){},e}(o)},{}],448:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h=function(t,e){function r(){this.constructor=t}for(var n in e)m.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},m={}.hasOwnProperty;o=t(457),i=t(430),s=t(5),a=t(451),u=t(435),c=t(99),l=t("underscore"),p=t(418),d=t(76),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return h(e,t),e.prototype.className="board-member-menu",e.prototype.initialize=function(){return this.board=this.options.board,this.listenTo(this.board,"change:prefs",this.render),e.__super__.initialize.apply(this,arguments)},e.prototype.events={"click .js-remove-member":"removeMember","click .js-change-role":"changeRole"},e.prototype.renderMenu=function(){var t,e,r;return e=l.extend(this.model.toJSON(),"function"==typeof(t=this.board).premiumFeatures?t.premiumFeatures():void 0,this.model.getMembershipData(this.board)),e.boardProfileUrl=s.getMemberBoardProfileUrl(this.model.get("username"),this.board.id),r=this.board.getMemberType(this.model),e.type=d(["member types",r]),e.isGhost="virtual"===r,("superadmin"===r||"deactivated"===r)&&(e.canChangeRole=!1),this.$el.append(p.fillMenu("member_on_board_menu",e,{editable:this.board.editable(),owned:this.board.owned()})),this},e.prototype.changeRole=function(t){u.pushView({view:new o({model:this.model,parent:this.board,modelCache:this.modelCache})})},e.prototype.removeMember=function(t,e){c.stop(t),i.pushView(this.model.removeMembershipConfirmationKey(this.board),{confirmBtnClass:"negate",fxConfirm:function(t){return function(e){return t.board.removeMember(t.model),u.hide()}}(this)})},e}(a)},{}],449:[function(t,e,r){var n,o,i,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;o=t(451),i=t(435),s=t(418),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.events={"click .js-remove-member":"removeMember"},e.prototype.initialize=function(){e.__super__.initialize.apply(this,arguments),this.card=this.options.card},e.prototype.renderMenu=function(){return this.$el.append(s.fillMenu("member_on_card_menu",this.model.toJSON(),{editable:this.card.editable()})),this},e.prototype.removeMember=function(t){var e;i.hide(),e=this.model.id,this.card.removeMember(e)},e}(o)},{}],450:[function(t,e,r){var n,o,i,s,a,u=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;o=t(435),i=t(421),s=t(693),a=t(34),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.getViewTitle=function(){return this.model.get("fullName")},e.prototype.displayType="mod-avdetail",e.prototype.events={"click .js-profile":"showProfile"},e.prototype.render=function(){var t;return t=this.model.toJSON(),this.$el.html(s(t)),this},e.prototype.showProfile=function(){a("Mini Profile","Large Avatar - Click Profile")},e}(i)},{}],451:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m=function(t,e){function r(){this.constructor=t}for(var n in e)f.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},f={}.hasOwnProperty;n=t(22),o=t(454),i=t(459),s=t(450),u=t(27),c=t(435),l=t(421),d=t("underscore"),p=t(707),h=t(34),e.exports=a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return m(e,t),e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.listenTo(this.model,"change",this.frameDebounce(this.render))},e.prototype.getViewTitle=function(){return this.model.getMemberViewTitle()},e.prototype.displayType="mod-mini-profile",e.prototype.delegateEvents=function(t){var r;return r={"click .js-profile":"showProfile","click .js-edit-profile":"editProfile","click .js-view-large":"viewLarge","click .js-change-av":"changeAvatar"},e.__super__.delegateEvents.call(this,d.extend(r,t||this.events))},e.prototype.render=function(){var t;return t=this.model.toJSON(),t.isMe=n.isMe(this.model),t.showEmail=null!=t.email&&!t.isMe,null!=t.email||"ghost"!==this.model.get("memberType")||this.loaded||this.loadEmail(),this.$el.html(p(t)),this.renderMenu(),this},e.prototype.loadEmail=function(){return u.loadMemberEmail(this.model.id).then(function(t){return function(){return t.loaded=!0}}(this)).done()},e.prototype.showProfile=function(){h("Mini Profile","Click Profile")},e.prototype.editProfile=function(t){h("Mini Profile","Click Edit Profile"),c.pushView({view:new i({model:this.model,modelCache:this.modelCache})})},e.prototype.viewLarge=function(t){h("Mini Profile","View Large Avatar"),c.pushView({view:new s({model:this.model,modelCache:this.modelCache})})},e.prototype.changeAvatar=function(t){h("Mini Profile","Change Avatar"),c.pushView({view:new o({model:this.model,modelCache:this.modelCache})})},e}(l)},{}],452:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h=function(t,e){function r(){this.constructor=t}for(var n in e)m.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},m={}.hasOwnProperty;n=t("jquery"),o=t(448),i=t(433),a=t(435),u=t(99),c=t(421),l=t(57),d=t(31),p=t(418),e.exports=s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return h(e,t),e.prototype.className="member",e.prototype.events={click:"showMenu"},e.prototype.initialize=function(t){this.board=t.board,l(null!=this.model,"You cannot have a deleted member as a board member!"),this.listenTo(this.model,"change",this.render),this.listenTo(this.board,"change:memberships",this.render)},e.prototype.render=function(){var t,e,r;return d("render","rendering "+this.constructor.name+" "+this.model.get("fullName")),t=this.model.toJSON(),e=function(t){return function(e){var r;return r=e.getMembershipFor(t.model),"admin"===(null!=r?r.memberType:void 0)}}(this),t.isBoardAdmin=e(this.board)||(null!=(r=this.board.getOrganization())?r.isPremOrgAdmin(this.model):void 0),t.isGhost="ghost"===this.model.get("memberType"),this.board.isDeactivated(this.model)&&(t.isDeactivated=!0),this.$el.html(p.fill("member",t)),this.model.isFeatureEnabled("crown")&&this.$el.addClass("has-crown"),t.isDeactivated&&this.$el.addClass("member-deactivated js-member-deactivated"),t.isGhost&&this.$el.addClass("member-virtual"),this.$el.data("id",this.model.id),this},e.prototype.showMenu=function(t){this.doClicks()&&(u.stop(t),a.toggle({elem:t.currentTarget,view:new o({board:this.board,model:this.model,modelCache:this.modelCache})}))},e.prototype.doClicks=function(){return!i.sorting},e}(c)},{}],453:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p=function(t,e){function r(){this.constructor=t}for(var n in e)h.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},h={}.hasOwnProperty;o=t(429),i=t(435),s=t(99),a=t(421),l=t(418),d=t(34),u=t(76),c=t(30),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.viewTitleKey="add email",e.prototype.events={"click .js-save-changes":"saveChanges"},e.prototype.render=function(){return this.$el.html(l.fill("popover_add_email")),this},e.prototype.showError=function(t){var e;return e=function(){switch(t.trim().toLowerCase()){case"the email address is already in use":return"address in use";case"this email is already on this account":return"on account";case"invalid email address":return"invalid email address";default:return c(new Error("Unknown server error message '"+t+"'")),"unknown"}}(),this.$("#account-error").text(u(["email error",e])).show()},e.prototype.saveChanges=function(t){var e;return s.preventDefault(t),e=this.$('[name="email"]').val(),this.model.run("logins",{email:e},function(t){return function(e){e?t.showError(e.message):(i.popView(),o.flash("email sent","confirm"),d("Member","Added Email Address"))}}(this))},e}(a)},{}],454:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g=function(t,e){function r(){this.constructor=t}for(var n in e)v.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},v={}.hasOwnProperty,y=[].slice;n=t("jquery"),o=t(178),i=t(22),s=t(342),u=t(435),c=t(344),l=t(99),d=t(421),m=t(418),f=t(34),h=t(76),p=t(109),e.exports=a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return g(e,t),e.prototype.viewTitleKey="change avatar",e.prototype.initialize=function(){return this.listenTo(this.model,"change:avatarSource change:uploadedAvatarHash",this.frameDebounce(this.render))},e.prototype.events={"change .js-upload-avatar":"startUpload","click .js-use-gravatar":"useGravatar","click .js-use-uploaded-avatar":"useUploadedAvatar","click .js-take-photo":"takePhoto","click .js-no-avatar":"clearAvatar"},e.prototype.render=function(){var t,e,r,n,o;return o=this,e=this.model.toJSON({prefs:!0}),e["avatarSource_"+e.avatarSource]=!0,e.canTakePhoto=s.supportsGetUserMedia(),this.$el.html(m.fill("avatar_change",e)),r=this.$(".js-grav"),t=r.find("img"),n="https://secure.gravatar.com/avatar/"+(this.model.get("gravatarHash")+".png?s=50&r=PG&d=404")+("&_="+Math.random()),l.waitForImageLoad(n,function(){return r.show()}),this},e.prototype.startUpload=function(t){var e,r,s,a,u,c,d;return u=this.model,a=n(t.target),s=null!=(c=a[0])&&null!=(d=c.files)?d[0]:void 0,e=this.$(".js-error").hide(),null==s||l.validFileSize(s)?(f("Member","Avatar","Use Uploaded - New"),!s&&a.val()?l.uploadFile(i.myToken(),a,this.uploadResult.bind(this)):null!=s?(r=new FormData,r.append("token",i.myToken()),r.append("file",s),o({url:a.closest("form").attr("action"),data:r,type:"post",processData:!1,contentType:!1,error:function(t){return function(e){var r,n;return n=e.status,
r=e.responseText,t.uploadResult(Error(r))}}(this),success:function(t){return function(){return t.uploadResult.apply(t,[null].concat(y.call(arguments)))}}(this),timeout:12e4})):void 0):(e.text(h("images can not be larger than 10mb")).show(),void f("Member","Avatar","Upload Error - File Too Large"))},e.prototype.uploadResult=function(t){var e;return e=this.$(".js-error").hide(),t?e.show().text(t):void 0},e.prototype.useUploadedAvatar=function(t){return f("Member","Avatar","Use Uploaded - Existing"),this.model.update("avatarSource","upload"),u.popView()},e.prototype.useGravatar=function(t){return f("Member","Avatar","Use Gravatar"),this.model.update("avatarSource","gravatar"),u.popView()},e.prototype.clearAvatar=function(t){return f("Member","Avatar","Use Initials"),this.model.update("avatarSource","none"),u.popView()},e.prototype.takePhoto=function(t){var e;return e=new c({model:this.model,modelCache:this.modelCache}),u.pushView({view:e}),f("Member","Avatar","Take Photo"),e.connectCamera(),this.listenTo(e,"done",function(t){return function(e){var r,n;return r=p(e),n=new FormData,n.append("token",i.myToken()),n.append("file",r,"avatar.png"),o({url:"/1/member/"+t.model.id+"/avatar",data:n,type:"post",processData:!1,contentType:!1,error:function(t,e,r,n){var o,i;return i=t.status,o=t.responseText,413!==i?n():void 0},timeout:6e4})}}(this))},e}(d)},{}],455:[function(t,e,r){var n,o,i,s,a,u,c=function(t,e){function r(){this.constructor=t}for(var n in e)l.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},l={}.hasOwnProperty;n=t("jquery"),i=t(435),s=t(421),a=t(418),u=t(34),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.viewTitleKey="send emails",e.prototype.initialize=function(){return this.listenTo(this.model,"change:prefs",this.frameDebounce(this.render))},e.prototype.events={"click li a":"changeFreq"},e.prototype.render=function(){var t,e;return e=this,t=this.model.toJSON({prefs:!0}),this.$el.html(a.fill("popover_set_email_freq",t)),this},e.prototype.changeFreq=function(t){var e;u("Member","Changed Email Frequency"),e=parseInt(n(t.target).closest("a").attr("value")),this.model.setPref("minutesBetweenSummaries",e).save(),i.popView()},e}(s)},{}],456:[function(t,e,r){var n,o,i,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;o=t(421),s=t(416)(),i=t(21),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.viewTitleKey="change locale",e.prototype.events={"click .js-select-locale":function(t){return this.selectLocale(t.currentTarget.getAttribute("data-locale"))}},e.prototype.initialize=function(t){return this.onChange=t.onChange,this.listenTo(this.model,"change:prefs.locale",this.render)},e.prototype.selectLocale=function(t){var e;e=this.model.getPref("locale"),this.model.setPref("locale",t,function(r){return function(){return r.onChange(t,e)}}(this))},e.prototype.render=function(){var t,e;return t=this.model.getLocale(),e=function(e,r){s.li(function(){s.a(".js-select-locale",{href:"#","data-locale":e},function(){s.text(r),e===t&&(s.text(" "),s.icon("check"))})})},this.$el.html(s.render(function(){return s.ul(".pop-over-list",function(){var t,r,n,o,s;for(r=0,n=i.length;n>r;r++)s=i[r],t=s.code,o=s.name,e(t,o)})})),this},e}(o)},{}],457:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f=function(t,e){function r(){this.constructor=t}for(var n in e)g.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},g={}.hasOwnProperty;n=t("jquery"),o=t(178),i=t(22),a=t(430),u=t(435),c=t(99),l=t(421),d=t("underscore"),h=t(418),m=t(34),p=t(76),e.exports=s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return f(e,t),e.prototype.viewTitleKey="change permissions",e.prototype.initialize=function(){this.parent=this.options.parent,this.listenTo(this.parent,"change:memberships",this.render)},e.prototype.events={"click .js-make-admin":"makeAdmin","click .js-make-member":"makeMember","click .js-make-observer":"makeObserver"},e.prototype.render=function(){var t,e,r,n,o,i,s;for(s=this,t=this.model.getMembershipData(this.parent),t.showObserver=this.parent.hasObservers(),n=function(){if("Organization"===this.parent.typeName)return"org roles";if("Board"===this.parent.typeName)return"board roles";throw new Error("A fragile abstraction has broken")}.call(this),o=this.parent.getAvailableRoles(),e=0,r=o.length;r>e;e++)i=o[e],t["roleText_"+i]=p([n,i,"text"]);return null==t.roleText_admin&&(t.roleText_admin=t.roleText_superadmin),this.$el.html(h.fill("popover_change_roles",t)),this},e.prototype.apiChangeRole=function(t){this.$el.find("ul a").addClass("disabled"),o({type:"PUT",url:"/1/"+this.parent.typeName.toLowerCase()+"/"+this.parent.id+"/members/"+this.model.id,data:{type:t},success:function(e){return function(){return m("Member","Change Role",t),u.hide()}}(this)})},e.prototype.getMemberType=function(){return this.parent.getExplicitMemberType(this.model)},e.prototype.isAdminAndMe=function(){return"admin"===this.getMemberType()&&i.isMe(this.model)},e.prototype.makeAdmin=function(t){c.stop(t),n(t.target).closest("a").hasClass("disabled")||"admin"!==this.getMemberType()&&this.apiChangeRole("admin")},e.prototype.makeMember=function(t){c.stop(t),n(t.target).closest("a").hasClass("disabled")||"normal"!==this.getMemberType()&&(this.isAdminAndMe()?a.pushView("demote admin to normal member",{fxConfirm:function(t){return function(e){return t.apiChangeRole("normal")}}(this)}):this.apiChangeRole("normal"))},e.prototype.makeObserver=function(t){c.stop(t),n(t.target).closest("a").hasClass("disabled")||"observer"!==this.getMemberType()&&(this.isAdminAndMe()?a.pushView("demote admin to observer",{fxConfirm:function(t){return function(e){return t.apiChangeRole("observer")}}(this)}):this.apiChangeRole("observer"))},e}(l)},{}],458:[function(t,e,r){var n,o,i,s,a,u,c,l=function(t,e){function r(){this.constructor=t}for(var n in e)d.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},d={}.hasOwnProperty,p=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};o=t(435),i=t(99),s=t(421),u=t(418),c=t(34),a=t(76),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.initialize=function(){return this.listenTo(this.model,"change:loginTypes",this.frameDebounce(this.render))},e.prototype.viewTitleKey=function(){return p.call(this.model.get("loginTypes"),"password")<0?"set password":"change password"},e.prototype.events={"click .js-save-changes":"saveChanges"},e.prototype.render=function(){var t,e;return e=this,t=this.model.toJSON({prefs:!0,hasPassword:!0}),this.$el.html(u.fill("popover_change_set_password",t)),this},e.prototype.getValue=function(t){return this.$("[name="+t+"]").val()},e.prototype.showPasswordError=function(t){return this.$("#password-error").text(a(["password error",t])).show()},e.prototype.saveChanges=function(t){var e,r,n;return i.preventDefault(t),this.$("#password-error").hide(),n=this.getValue("oldpassword"),e=this.getValue("password"),r=this.getValue("password2"),e||r?void(e!==r?this.showPasswordError("must match"):this.model.run("updatePassword",{oldPassword:n,newPassword:e},function(t){return function(e){return null==e?(c("Member","Changed Password"),void o.popView()):void t.showPasswordError(function(){switch(e.message.trim()){case"invalid value for newPassword":return"not long enough";case"The old password was incorrect":return"old password";default:return"unknown"}}())}}(this))):void 0},e}(s)},{}],459:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h=function(t,e){function r(){this.constructor=t}for(var n in e)m.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},m={}.hasOwnProperty;n=t("jquery"),i=t(5),s=t(435),a=t(99),u=t(421),d=t(418),p=t(34),c=t(76),l=t(30),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return h(e,t),e.prototype.viewTitleKey="change name and bio",e.prototype.events={"click .js-save-changes":"saveChanges"},e.prototype.render=function(){var t,e;return e=this,t=this.model.toJSON({prefs:!0}),this.$el.html(d.fill("popover_change_user_info",t)),this},e.prototype.getValue=function(t){return this.$("[name="+t+"]").val()},e.prototype.showError=function(t){var e;return e=function(){switch(t.trim().toLowerCase()){case"username is taken":return"username taken";case"username must be at least 3 characters":return"username too short";case"username is invalid: only lowercase letters, underscores, and numbers are allowed":return"username invalid";case"full name must be at least 1 character":return"full name too short";case"initials must contain 1-4 characters":return"initials wrong length";default:return l(new Error("Unknown server error message '"+t+"'")),"unknown"}}(),this.$("#account-error").text(c(["member profile error",e])).show()},e.prototype.saveChanges=function(t){var e,r,o,u,c,l,d;for(l=this,a.preventDefault(t),e={},this.$("#account-error").hide(),c=["fullName","initials","username","bio"],r=0,o=c.length;o>r;r++)u=c[r],e[u]=n.trim(this.getValue(u));e.username=e.username.toLowerCase().replace(/[^a-z0-9_]/g,""),e.initials=e.initials.toUpperCase(),d=i.getMemberProfileUrl(this.model.get("username"))===i.location,this.model.update(e,{waitForServer:!0},function(t){return function(e){e?t.showError(e.message):(s.popView(),d&&i.setLocation({location:i.getMemberProfileUrl(t.model.get("username"))}),p("Member","Successfully Change User Info"))}}(this))},e}(u)},{}],460:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p=function(t,e){function r(){this.constructor=t}for(var n in e)h.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},h={}.hasOwnProperty;n=t(178),o=t(430),i=t(61),a=t(99),u=t(421),c=t("underscore"),d=t(418),l=t(76),e.exports=s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.className="member-login",e.prototype.events={"click .js-primary":"setPrimary","click .js-remove":"confirmDeleteLogin"},e.prototype.initialize=function(){return this.listenTo(this.model,"change",this.render)},e.prototype.render=function(){var t;return t=this.model.toJSON(),t.dateAdded=a.idToDate(t.id),this.$el.html(d.fill("member_login",t)),i.update(this.el),this},e.prototype.setPrimary=function(t){return n({url:"/1/members/me/logins/"+this.model.id+"/primary",type:"put",success:function(t){return function(e){return t.model.set("primary",!0)}}(this)})},e.prototype.confirmDeleteLogin=function(t){return a.stop(t),this.model.hasConflict()?void this.trigger("requestSetPassword"):o.toggle("delete credential",this.popover({text:l("confirm.delete credential.text",{email:this.model.get("email")}),confirmBtnClass:"negate",fxConfirm:function(t){return function(){return t.deleteLogin()}}(this)}))},e.prototype.popover=function(t){return c.extend({elem:this.$(".js-remove")},t)},e.prototype.deleteLogin=function(){return n({url:"/1/members/me/logins/"+this.model.id,type:"delete",success:function(t){return function(e){return t.model.trigger("destroy",t.model,t.model.collection)}}(this)})},e}(u)},{}],461:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k=function(t,e){function r(){this.constructor=t}for(var n in e)C.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},C={}.hasOwnProperty;n=t("jquery"),o=t(453),i=t(22),s=t(454),a=t(455),u=t(458),c=t(459),l=t(431),p=t(463),h=t(472),m=t(473),f=t(474),g=t(477),v=t(478),y=t(435),b=t(99),w=t(418),_=t(34),e.exports=d=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return k(e,t),e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.listenTo(this.model,"change:loginTypes change:prefs change:tokens change:credentials",this.frameDebounce(this.renderMainContent))},e.prototype.events={"click .js-change-avatar":"changeAvatar","click .js-change-name-and-bio":"changeUserInfo","click .js-change-password":"changePassword","click .js-configure-2fa":"configure2FA","click .js-change-email-freq":"changeEmailFreq","click .js-allow-desktop-notifications":"allowDesktopNote","click .js-toggle-cb-mode":"toggleCB","click .js-confirm-delete-member":"deleteConfirm","click .js-add-email":"addEmail"},e.prototype.renderMainContent=function(){var t,e,r,n;return r=this.model.toJSON({prefs:!0,hasPassword:!0}),r["avatarSource_"+r.avatarSource]=!0,r.canAllowDesktopNotifications=l.notEnabled(),r.cbEnabled=this.model.get("prefs").colorBlind,this.$(".js-content").html(w.fill("member_account",r,{editable:i.isMe(this.model)})),this.$(".js-member-applications").html(this.subview(p,this.model).render().el),this.$(".js-member-sessions").html(this.subview(g,this.model).render().el),e=this.$(".js-credentials-section"),t=this.$(".js-credentials-list"),t.empty(),this.model.get("logins").length>0&&(n=this.collectionSubview(f,this.model.loginList,{model:this.model}),this.appendSubview(n,t)),this.$(".js-content").prepend(this.subview(m,this.model,{allowDismiss:!1}).render().el),this.setActiveView(".js-member-account"),this},e.prototype.changeUserInfo=function(t){return b.stop(t),_("Member View","Settings Page","Open Change User Info Menu"),y.toggle({elem:this.$(".js-change-name-and-bio"),view:new c({model:this.model,modelCache:this.modelCache})})},e.prototype.addEmail=function(t){return b.stop(t),_("Member View","Settings Page","Open Add Email Menu"),y.toggle({elem:n(t.target),view:new o({model:this.model,modelCache:this.modelCache})})},e.prototype.changeAvatar=function(t){return b.stop(t),_("Member View","Settings Page","Open Change Avatar Menu"),y.toggle({elem:this.$(".js-change-avatar"),view:new s({model:this.model,modelCache:this.modelCache})})},e.prototype.changePassword=function(t){return b.stop(t),_("Member View","Settings Page","Open Change Password Menu"),y.toggle({elem:this.$(".js-change-password"),view:new u({model:this.model,modelCache:this.modelCache})})},e.prototype.configure2FA=function(t){return _("Member View","Settings Page","Configure 2FA")},e.prototype.changeEmailFreq=function(t){return b.stop(t),_("Member View","Settings Page","Open Change Frequency Menu"),y.toggle({elem:this.$(".js-change-email-freq"),view:new a({model:this.model,modelCache:this.modelCache})})},e.prototype.allowDesktopNote=function(t){return b.stop(t),_("Member View","Settings Page","Allow Desktop Notifications"),l.requestPermission(function(t){return function(){t.render()}}(this))},e.prototype.toggleCB=function(t){b.stop(t),_("Member View","Settings Page","Toggle Color Blind Mode"),this.model.toggleColorBlindMode()},e.prototype.deleteConfirm=function(t){b.stop(t),_("Member View","Settings Page","Open Delete Account Confirmation Menu"),y.toggle({elem:this.$(".js-confirm-delete-member"),view:new h({model:this.model,modelCache:this.modelCache})})},e}(v)},{}],462:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p=function(t,e){function r(){this.constructor=t}for(var n in e)h.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},h={}.hasOwnProperty;n=t("jquery"),o=t(22),s=t(435),a=t(482),u=t(484),c=t(99),l=t(421),d=t(34),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.hoverMember=function(t){var e;return e=n(t.target).closest(".item"),c.selectMenuItem(this.$(".pop-over-member-list"),".item",e)},e.prototype.openOption=function(t){var e,r,i,l;c.stop(t),d("Invitations","Open Role Selector"),l=n(t.target).closest(".js-select-member").find(".username").text(),i=this.modelCache.findOne("Member","username",l),r=!1,n(t.target).closest(".item.js-email-invite").length>0&&(r=!0,e=n(t.target).closest(".js-email-invite").find(".full-name").attr("name")),i?s.pushView({view:new a({modelCache:this.modelCache,model:i,parent:this.model,onSendInvite:this.willBePopped.bind(this)})}):s.pushView({view:new u({model:o.me(),modelCache:this.modelCache,parent:this.model,email:e,onSendInvite:this.willBePopped.bind(this)})})},e}(l)},{}],463:[function(t,e,r){var n,o,i,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;o=t(486),i=t(421),s=t(418),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.render=function(){var t,e,r,n,i;return t=this.model.toJSON({prefs:!0}),i=null!=(e=t.tokens)?e:[],t.hasTokens=i.length>0,this.$el.html(s.fill("member_application_list",t)),n=function(){var t,e,n;for(n=[],t=0,e=i.length;e>t;t++)r=i[t],n.push(this.subview(o,this.model,r,r.id));return n}.call(this),this.appendSubviews(n,this.$(".member-applications")),this},e}(i)},{}],464:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,B,M,T,O,L,P,A=function(t,e){function r(){this.constructor=t}for(var n in e)E.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},E={}.hasOwnProperty;n=t("jquery"),o=t(53),s=t(176),a=t(22),c=t(259),l=t(430),d=t(5),h=t(260),p=t(262),i=t(261),x=t(266),_=t(265),f=t(15),g=t(478),v=t(27),y=t(184),b=t(238),w=t(435),u=t(256),k=t("react"),C=t(413),j=t(267),B=t(76),S=t(197),M=t("moment"),T=t(84),L=t(418),P=t(34),O=t("recup"),e.exports=m=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return A(e,t),e.prototype.renderMainContent=function(){return this.$(".js-content").empty(),null==this.$reactRoot&&(this.$reactRoot=n("<div></div>")),this.$(".js-content").append(this.$reactRoot),this.renderReactSection(),this.setActiveView(".js-billing"),this.renderBanner(),this},e.prototype.renderReactSection=function(){return k.render(this.getReactRoot(),this.$reactRoot[0]),this},e.prototype.getReactRoot=function(){var t;return k.createElement(C,{},o.hasAccount(null!=(t=this.model.get("paidAccount"))?t.standing:void 0)?this.getBillingComponent():this.getSignUpForGoldComponent())},e.prototype.getBillingComponent=function(){var t;return t=j(this.model,f,{productName:B("products.gold"),productIconClass:"trello-gold",detailsUrl:"/gold",onRenewClick:S(this,"renew"),cancelProduct:S(this,"cancel"),onSwitchToYearly:S(this,"switchToYearly"),didntGetAuthStatus:function(t){return function(){return v.loadMemberAccountData(t.model.get("username")).done()}}(this),didGetAuthStatus:function(t){return function(){return v.loadMemberAccountData(t.model.get("username")).done()}}(this),onChangeBillingContactClick:S(this,"changeBillingContactPopover"),reactivateProduct:S(y,"reactivate",this.model),changeCreditCard:S(y,"changeCreditCard",this.model),createPaidAccount:S(y,"createAccount",this.model),paidAccountPoll:S(s,{url:this.model.urlRoot+"/"+this.model.id+"?paid_account=true"})}),k.createElement(u,t)},e.prototype.getSignUpForGoldComponent=function(){return O.render(function(t){return function(){return O.div(function(){var e,r,n,o,u,c,l;return O.createElement(b,{stringsKey:"gold",subtitleCount:1,infoUrl:"/gold",epilogueCount:0,icon:"trello-gold"}),e=f.currentPriceObjectForModel(t.model),O.createElement(h,{onSubmit:S(y,"createAccount",t.model),doPoll:S(s,{url:t.model.urlRoot+"/"+t.model.id+"?paid_account=true"}),buttonKey:"upgrade-me",contentBuilders:[T(_,{productName:"Trello Gold",monthlyProduct:e.monthly,yearlyProduct:e.yearly,defaultProduct:e.monthly.productNumber,billingStrategy:e.billingStrategy}),T(p),T(i),T(x)],extraData:{billingContactFullName:null!=(r=null!=(n=t.model.get("paidAccount"))?n.contactFullName:void 0)?r:a.me().get("fullName"),billingContactEmail:null!=(o=null!=(u=t.model.get("paidAccount"))?u.contactEmail:void 0)?o:a.me().get("email"),billingContactLocale:null!=(c=null!=(l=t.model.get("paidAccount"))?l.contactLocale:void 0)?c:a.me().getPref("locale")},didntGetAuthStatus:function(){return v.loadMemberAccountData(t.model.get("username")).done()},didGetAuthStatus:function(){return d.memberBoardsView()}})})}}(this))},e.prototype.renderBanner=function(){var t,e,r,n,o,i;if(this.model.get("idPremOrgsAdmin").length>0)for(e=L.fill("member_billing_org_link_list"),this.$(".js-content").prepend(e),i=this.model.organizationList.models,r=0,n=i.length;n>r;r++)o=i[r],t=o.toJSON(),o.isPremium()&&o.owned()&&(t.billingLink=d.getOrganizationBillingUrl(o),this.$(".js-org-link-list").append(L.fill("member_billing_org_link",t)));return this},e.prototype.cancel=function(){return P("Member View","Billing Page","Cancel Gold"),y.cancel(this.model).then(function(t){return function(e){return P("Member","Successfully Canceled Paid Account"),t.model.set(e)}}(this))},e.prototype.renew=function(){return P("Member View","Billing Page","Renew Expiring Gold Subscription"),y.renew(this.model).then(function(t){return function(e){return P("Member","Successfully Renewed Expiring Yearly Gold Subscription"),t.model.set(e)}}(this)).done()},e.prototype.switchToYearly=function(t){return l.toggle("yearly billing switch",{elem:t,model:this.model,confirmBtnClass:"primary",fxConfirm:function(t){return function(e){return y.changeProduct(t.model,f.currentProducts.yearly).then(function(e){return P("Organization","Successfully Switched Business Class to Yearly Billing"),t.model.set(e)}).done()}}(this)})},e.prototype.changeBillingContactPopover=function(t){return P("Member View","Billing Page","Open Change Billing Contact Info"),w.toggle({elem:t,view:new c({model:this.model,modelCache:this.modelCache})})},e.prototype.remove=function(){return k.unmountComponentAtNode(this.$reactRoot[0]),e.__super__.remove.apply(this,arguments)},e}(g)},{}],465:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p=function(t,e){function r(){this.constructor=t}for(var n in e)h.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},h={}.hasOwnProperty;n=t(116),o=t(129),i=t(229),a=t(185),c=t(420),u=t(421),l=t(81),d=t(418),e.exports=l(c,s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.events={"click .js-more-actions":"loadMoreActions"},e.prototype.initialize=function(){return this.board=this.options.board,this.listenTo(this.board.memberList,"add remove reset",this.frameDebounce(this.render)),this.actionListView=this.collectionSubview(i,new o(n.getListForModel(this.modelCache,this.model),{modelCache:this.modelCache}),{renderOpts:{context:this.model,readOnly:!0}}),this.listenTo(this.modelCache,"add:Action:"+this.model.id+" remove:Action:"+this.model.id,function(t){return function(){return t.actionListView.collection.reset(n.getListForModel(t.modelCache,t.model),{silent:!0}),t.renderActions()}}(this)),this.idModels=[this.board.id],this.nextPage=0,this.loadMoreActions()},e.prototype.render=function(){return this.$el.html(d.fill("board_member_profile",this.model.toJSON())),this.actionListView.setElement(this.$(".list-actions")[0]),this.renderActions()},e.prototype.renderActions=function(){return this.actionListView.render(),this.$(".js-more-actions").toggle(this.hasMoreActions()),this},e.prototype.getActionsFilter=function(){return a.memberActions},e}(u))},{}],466:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v=function(t,e){function r(){this.constructor=t}for(var n in e)y.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},y={}.hasOwnProperty,b=[].slice;n=t(498),i=t(473),s=t(283),a=t(284),u=t(435),l=t(285),d=t(99),p=t(421),h=t("underscore"),f=t(418),g=t(34),m=t(197),c=t("bluebird"),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return v(e,t),e.prototype.initialize=function(){return this.listenTo(this.model.organizationList,"add remove reset",this.frameDebounce(this.render))},e.prototype.events={"click .js-add-org-boards-page":"addOrgFromBoardsPage"},e.prototype.className="member-boards-view",e.prototype.render=function(){var t;return this.$el.empty().prepend(this.subview(i,this.model,{allowDismiss:!0}).render().el),t=this.model.getSortedOrgs().map(function(t){return function(e){var r;return r="orgboardlistview-"+e.id,t.subview(s,t.model,{organization:e},r)}}(this)),c.resolve([this.subview(l,this.model),this.subview(a,this.model)].concat(b.call(t))).each(function(t){return function(e){return t.appendSubview(e),new c(m(t,"defer"))}}(this)).then(m(this,"renderAddOrgButton")).done(),this},e.prototype.renderAddOrgButton=function(){this.$el.append(f.fill("boards_page_add_org_button"))},e.prototype.addOrgFromBoardsPage=function(t){return d.stop(t),u.toggle({elem:this.$(".js-add-org-boards-page"),top:0,view:n,options:{model:this.model,modelCache:this.modelCache}}),g("Boards View","Clicked Add Org Button")},e}(p)},{}],467:[function(t,e,r){var n,o,i,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;o=t(364),i=t(421),s=t(418),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.render=function(t){var e,r;return this.cards=t,e=this.model.toJSON({prefs:!0}),e.boardUrl=this.model.getUrl(),e.permissionLevel_org&&(e.permissionLevel="organization-visible"),e.idOrganization&&!this.options.hideOrg&&(e.org=null!=(r=this.modelCache.get("Organization",e.idOrganization))?r.toJSON():void 0),this.cards.length>0?(this.$el.html(s.fill("member_cards_board",e)),this.renderCards()):this.$el.empty(),this},e.prototype.renderCards=function(){var t;return t=this.cards.map(function(t){return function(e){return t.subview(o,e,{showBoard:!0})}}(this)),this.appendSubviews(t,this.$(".js-list")),this},e}(i)},{}],468:[function(t,e,r){var n,o,i,s,a,u,c,l=function(t,e){function r(){this.constructor=t}for(var n in e)d.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},d={}.hasOwnProperty;o=t(364),i=t(99),s=t(421),a=t("underscore"),c=t(418),u=t(57),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.className="window-module",e.prototype.initialize=function(t){return this.cards=t.cards,u(this.cards.length>0)},e.prototype.render=function(){var t,e;return t=this.model.toJSON({prefs:!0}),t.boardUrl=this.model.getUrl(),t.permissionLevel_org&&(t.permissionLevel="organization-visible"),t.idOrganization&&!this.options.hideOrg&&(t.org=null!=(e=this.modelCache.get("Organization",t.idOrganization))?e.toJSON():void 0),this.$el.html(c.fill("member_cards_board",t)),this.renderCards(),this},e.prototype.renderCards=function(){var t;return t=this.cards.map(function(t){return function(e){return t.subview(o,e,{showBoard:!1})}}(this)),this.appendSubviews(t,this.$(".js-list")),this},e}(s)},{}],469:[function(t,e,r){var n,o,i,s,a,u,c,l=function(t,e){function r(){this.constructor=t}for(var n in e)d.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},d={}.hasOwnProperty;n=t(61),o=t(364),s=t(99),a=t(421),u=t("underscore"),c=t(418),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.className="window-module",e.prototype.initialize=function(t){this.templateData=t.templateData},e.prototype.render=function(){var t;return t={iconType:"clock",isOverdue:!1,isDueSoon:!1},u.extend(t,this.templateData),this.groupedCards.length>0?(this.$el.html(c.fill("member_cards_date",t)),this.renderCards()):this.$el.empty(),this},e.prototype.renderCards=function(){var t;return t=this.groupedCards.map(function(t){return function(e){return t.subview(o,e,{showBoard:!0})}}(this)),this.appendSubviews(t,this.$(".js-list"))},e}(a)},{}],470:[function(t,e,r){var n,o,i,s,a,u,c,l=function(t,e){function r(){this.constructor=t}for(var n in e)d.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},d={}.hasOwnProperty;o=t(226),i=t(435),s=t(99),a=t(421),u=t(418),c=t(34),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.viewTitleKey="sort cards",e.prototype.initialize=function(){return this.listenTo(o,"change:cardsPageSortType",function(){return this.render()})},e.prototype.events={"click .js-sort-by-board":"sortByBoard","click .js-sort-by-due-date":"sortByDueDate"},e.prototype.render=function(){var t;return t={},t[o.getCardsPageSortType()]=!0,this.$el.html(u.fill("member_cards_filter",t)),this},e.prototype.sortByBoard=function(t){s.stop(t),o.sortCardsPageByBoard(),i.hide(),c("Member View","Cards Page","Sort by Board")},e.prototype.sortByDueDate=function(t){s.stop(t),o.sortCardsPageByDate(),i.hide(),c("Member View","Cards Page","Sort by Due Date")},e}(a)},{}],471:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y=function(t,e){function r(){this.constructor=t}for(var n in e)b.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},b={}.hasOwnProperty;n=t(22),o=t(61),i=t(468),s=t(469),a=t(470),c=t(226),l=t(478),d=t(435),p=t(99),h=t("underscore"),g=t(418),v=t(34),f=t("moment"),m=t(76),e.exports=u=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return y(e,t),e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.listenTo(this.model.boardList,"add remove reset",this.frameDebounce(this.renderMainContent)),this.listenTo(c,"change:cardsPageSortType",function(){return this.renderCardsSection()})},e.prototype.events={"click .js-toggle-sort":"toggleSort"},e.prototype.renderMainContent=function(){return this.setActiveView(".js-member-cards"),this.$(".js-content").html(g.fill("member_cards_base")),this.renderCardsSection(),this},e.prototype.getCards=function(){return this.modelCache.find("Card",function(t){return function(e){return!e.get("closed")&&e.hasMember(t.model)}}(this))},e.prototype.getSortType=function(){return c.getCardsPageSortType()},e.prototype.renderFilterText=function(){this.$(".js-sort-text").html(m(["sorting cards by",this.getSortType()]))},e.prototype.toggleSort=function(t){p.stop(t),v("Member View","Cards Page","Open Sorting and Filtering Options"),d.toggle({elem:this.$(".js-toggle-sort"),view:new a({model:this.model,modelCache:this.modelCache})})},e.prototype.clearContent=function(){return this.$(".js-cards-content").empty()},e.prototype.renderCardsSection=function(){switch(this.getSortType()){case"board":this.renderBoardSort();break;case"date":this.renderDateSort()}},e.prototype._appendNoVisibleCards=function(){var t,e;e=m(n.isMe(this.model)?"no assigned cards.at all":"no assigned cards.that you can see"),t={message:e,classes:"gutter",style:"padding: 60px 10px;"},this.$(".js-cards-content").append(g.fill("empty_list",t))},e.prototype.renderBoardSort=function(){var t,e,r,n,o,s,a,u;for(this.clearContent(),this.renderFilterText(),r=this.getCards(),n=!1,a=this.model.boardList.models,o=0,s=a.length;s>o;o++)t=a[o],t.get("closed")||(e=h.filter(r,function(e){return function(e){return e.get("idBoard")===t.id}}(this)),h.isEmpty(e)||(n=!0,u=this.subview(i,t,{cards:e}),this.appendSubview(u,this.$(".js-cards-content"))));return n||this._appendNoVisibleCards(),this},e.prototype.renderDateSort=function(){var t,e,r,i,a,u,c,l,d,p,m,g;this.clearContent(),this.renderFilterText(),r=function(t,e){var r,n;return n=f().add(t,"days"),r=f().add(e,"days"),function(t){return f(t).isBetween(n,r)}},t=function(t){var e;return e=t.get("due"),null!=e?o.parse(e):null},u={"due in the next day":{fxTest:r(0,1),data:{isDueSoon:!0}},"due in the next 7 days":{fxTest:r(1,7)},"due in the next month":{fxTest:r(7,28)},"due later":{fxTest:function(t){return f(t).isAfter(f().add(28,"days"))}},"overdue cards":{fxTest:function(t){return f(t).isBefore(f());
},data:{isOverdue:!0}},"cards with no due date":{fxTest:function(t){return null==t},data:{iconType:"card"}}},m=h.sortBy(this.getCards(),function(t){return function(t){var e;return null!=(e=t.get("due"))?e:""}}(this)),c=!1;for(l in u)d=u[l],i=d.fxTest,e=d.data,a=m.filter(function(e){return function(e){return i(t(e))}}(this)),h.isEmpty(a)||(c=!0,g=h.extend({header:l},e),p=this.subview(s,n.me(),{templateData:g},"datesectionview-"+l),p.groupedCards=a,this.appendSubview(p,this.$(".js-cards-content")));return c||this._appendNoVisibleCards(),this},e}(l)},{}],472:[function(t,e,r){var n,o,i,s,a,u,c,l,d=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;n=t(429),i=t(435),s=t(99),a=t(421),c=t(418),l=t(34),u=t(76),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return d(e,t),e.prototype.viewTitleKey="delete account",e.prototype.events={"click .js-delete-member":"deleteMember","click .js-cancel-delete":"cancelDeleteMember"},e.prototype.render=function(){var t;return t=this,this.$el.html(c.fill("popover_confirm_member_delete",this.model.toJSON())),this},e.prototype.deleteMember=function(t){s.stop(t),this.$(".js-delete-member").attr("disabled","disabled"),this.model.run("deleteAccount",{msg:"troodbye!"},function(){i.hide(),n.flash("email sent","confirm"),l("Member","Sent Account Delete Email")})},e.prototype.cancelDeleteMember=function(t){s.stop(t),i.hide()},e}(a)},{}],473:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m=function(t,e){function r(){this.constructor=t}for(var n in e)f.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},f={}.hasOwnProperty;n=t(429),o=t(22),i=t(15),a=t(27),u=t(99),c=t(421),l=t("underscore"),h=t(418),d=t(76),p=t(75),e.exports=s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return m(e,t),e.prototype.initialize=function(){return this.makeDebouncedMethods("render"),this.listenTo(this.model,"change:oneTimeMessagesDismissed",this.renderDebounced),this.listenTo(this.model,"change:paidAccount",this.renderDebounced)},e.prototype.events={"click .js-close-modal":"closeGoldEarned","click .js-close-intro-helper":"closeGoldIntro","click .js-start-using-gold":"startUsingGold"},e.prototype.render=function(){var t,e,r,n,i,s;return this.$el.empty(),o.isMe(this.model)?(s=this.viewShown,this.model.isGold()&&!this.model.isDismissed("GoldIntro")?(this.viewShown="intro",this.$el.append(h.fill("member_gold_intro"))):this.model.isDismissed("GoldEarned")&&this.options.allowDismiss||this.activating||(this.viewShown="earned",e=this.model.get("credits"),i=l.filter(e,function(t){var e;return!t.applied&&t.count>0&&("invitation"===(e=t.type)||"promoCode"===e)}),t=l.reduce(i,function(t,e){return t+e.count},0),t&&(t>12&&(t=12),n=l.chain(i).filter(function(t){return"invitation"===t.type&&null!=t.memberInvited}).pluck("memberInvited").pluck("fullName").value(),r={hasInvitations:n.length>0,joinedNames:n,localizedCongratulations:p("months of trello gold",t),showClose:this.options.allowDismiss,hasGold:this.model.isGold()},this.$el.append(h.fill("member_gold_earned",r)))),null!=s&&s!==this.viewShown&&this.delegateEvents(),this):this},e.prototype.refreshPaidAccount=function(){return null==this.startedPolling&&(this.startedPolling=Date.now()),this.startedPolling+u.getMs({minutes:1})<Date.now()?(n.hide("activating"),void n.show("activating gold timeout","error","activating-failed")):a.loadMemberPaidAccount(this.model.id).then(function(t){return function(){t.model.isGold()?(delete t.startedPolling,t.activating=!1,n.hide("activating")):t.setTimeout(l.bind(t.refreshPaidAccount,t),u.getMs({seconds:1}))}}(this)).done()},e.prototype.startUsingGold=function(t){return u.stop(t),this.activating=!0,n.show("activating gold","info","activating"),this.render(),this.model.run("unpaidAccount",{products:[i.productShortNames.trelloGoldMonthly]},function(t){return function(e,r){return null==e&&r?t.refreshPaidAccount():void 0}}(this))},e.prototype.closeGoldEarned=function(t){return u.stop(t),this.model.dismiss("GoldEarned")},e.prototype.closeGoldIntro=function(t){return u.stop(t),this.model.dismiss("GoldIntro")},e}(c)},{}],474:[function(t,e,r){var n,o,i,s,a,u,c=function(t,e){function r(){this.constructor=t}for(var n in e)l.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},l={}.hasOwnProperty;n=t(458),o=t(396),i=t(430),s=t(460),u=t(435),e.exports=a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.viewType=s,e.prototype.initialize=function(){return this.listenTo(this,"requestSetPassword",this.showSetPassword),e.__super__.initialize.apply(this,arguments)},e.prototype.showSetPassword=function(t){return i.toggle("cant remove credential",t.popover({confirmBtnClass:"confirm",fxConfirm:function(e){return function(r){return u.show(t.popover({view:n,options:{model:e.model,modelCache:e.modelCache}}))}}(this)}))},e}(o)},{}],475:[function(t,e,r){var n,o,i,s,a,u,c=function(t,e){function r(){this.constructor=t}for(var n in e)l.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},l={}.hasOwnProperty;o=t(27),i=t(168),s=t(489),a=t(421),u=t(418),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.events={"click .js-more-notifications":"loadMoreNotifications"},e.prototype.className="member-notifications-view",e.prototype.initialize=function(){return this.nextPage=1,this.isMore=!0,this.listenTo(this.modelCache,"add:Notification remove:Notification change:Notification",this.frameDebounce(this.renderNotificationList))},e.prototype.render=function(){var t;return t=this.model.toJSON({prefs:!0}),t.empty=0===this.modelCache.all("Notification").length,this.$el.html(u.fill("member_notifications",t)),this.isMore||this.$(".js-more-notifications").hide(),this.renderNotificationList(),this},e.prototype.renderNotificationList=function(){var t,e,r,n,o,a;for(t=this.$(".js-list-notifications"),t.empty(),o=i.sortedByDateDescending(this.modelCache),e=0,r=o.length;r>e;e++)n=o[e],a=this.subview(s,n),t.append(a.render().el);return this},e.prototype.destructor=function(){return this.model.clearAllNotifications(),e.__super__.destructor.apply(this,arguments)},e.prototype.loadMoreNotifications=function(){return o.loadMoreNotificationData(this.model.get("username"),this.nextPage).then(function(t){return function(e){t.nextPage++,t.renderNotificationList(),e.length<10&&(t.isMore=!1,t.$(".js-more-notifications").hide())}}(this)).done()},e}(a)},{}],476:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p=function(t,e){function r(){this.constructor=t}for(var n in e)h.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},h={}.hasOwnProperty;n=t(129),o=t(229),s=t(478),a=t(512),u=t(185),c=t(420),l=t(81),d=t(418),e.exports=l(c,i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.events={"click .js-more-actions":"loadMoreActionsAndRemoveDateLimit"},e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.limit=10,this.daysBack=u.memberProfile_daysBack,this.actionListView=this.collectionSubview(o,new n(this.getActions(),{modelCache:this.modelCache}),{renderOpts:{context:this.model,showBoard:!0,showOrganization:!0,readOnly:!0}}),this.listenTo(this.model.organizationList,"add remove reset",this.frameDebounce(this.renderMainContent)),this.listenTo(this.modelCache,"add:Action:"+this.model.id,function(t){return function(){return t.actionListView.collection.reset(t.getActions(),{silent:!0}),t.renderActions()}}(this))},e.prototype.renderMainContent=function(){var t;return t=this.model.toJSON(),this.setActiveView(".js-member-profile"),this.$(".js-content").html(d.fill("member_profile",t)),this.defer(function(t){return function(){var e,r;return t.model.organizationList.length>0?(r=t.subview(a,t.model),e=t.$(".js-list-orgs").empty(),t.appendSubview(r,e)):t.$(".js-list-orgs").closest(".window-module").hide(),t.actionListView.setElement(t.$(".list-actions")[0]),t.renderActions()}}(this)),this},e.prototype.renderActions=function(){return 0===this.actionListView.collection.length?this.actionListView.$el.html(d.fill("actions_empty",{daysBack:this.daysBack})):this.actionListView.render(),this.$(".js-more-actions").toggleClass("hide",!this.hasMoreActionsOrDateLimited()),this},e.prototype.hasMoreActionsOrDateLimited=function(){return null!=this.daysBack||this.hasMoreActions()},e.prototype.loadMoreActionsAndRemoveDateLimit=function(){return this.daysBack=null,this.loadMoreActions()},e.prototype.getActionsFilter=function(){return u.memberActions},e}(s))},{}],477:[function(t,e,r){var n,o,i,s,a,u,c=function(t,e){function r(){this.constructor=t}for(var n in e)l.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},l={}.hasOwnProperty;o=t(485),i=t(99),s=t(421),a=t("underscore"),u=t(418),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.initialize=function(){return this.listenTo(this.model,"change:sessions",this.frameDebounce(this.render))},e.prototype.events={"click .js-log-out-other":"logOutOther"},e.prototype.render=function(){var t,e,r,n,i,s;if(e=this.model.toJSON(),this.$el.html(u.fill("member_session_list",e)),s=e.sessions,null!=s)for(t=this.$(".js-sessions"),r=0,n=s.length;n>r;r++)i=s[r],t.append(this.subview(o,this.model,i,i.id).render().el);return this},e.prototype.logOutOther=function(t){return i.stop(t),this.model.run("logoutOtherSessions"),this.model.set("sessions",a.filter(this.model.get("sessions"),function(t){return function(t){return t.isCurrent}}(this))),this.render()},e}(s)},{}],478:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v=function(t,e){function r(){this.constructor=t}for(var n in e)y.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},y={}.hasOwnProperty;n=t(53),o=t(22),i=t(454),s=t(78),u=t(435),c=t(415),l=t(99),d=t(421),h=t(81),m=t(418),f=t(34),g=t("xtend"),p=t(687),e.exports=a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return v(e,t),h(c,e),e.prototype.initialize=function(){this.listenTo(this.model,"change:initials change:avatarHash change:avatarSource change:fullName change:username change:bio change:prefs change:paidAccount",this.render),this.listenTo(this.model,"change:initials change:fullName change:username change:bio",this.renderDetails)},e.prototype.events={"click .js-change-avatar-profile":"changeAvInProfile","click .js-edit-profile":"editProfile","click .js-submit-profile":"submitProfile","submit .js-profile-form":"submitProfile","click .js-cancel-edit-profile":"cancelEditProfile","click .tabbed-pane-nav-item-button:not(.active)":"switchSection"},e.prototype.delegateEvents=function(t){return e.__super__.delegateEvents.call(this,g(e.prototype.events,t||this.events))},e.prototype.render=function(){var t,e,r,i;return e=o.isMe(this.model),t=this.model.toJSON(),this.model.organizationList.models.length>0&&(t.showOrgs=!0),e&&(i=null!=(r=t.paidAccount)?r.standing:void 0,t.hasAccount=this.model.hasMemberOrOrgAccount(),t.accountProblem=n.isProblem(i),t.isMe=!0),t.hasCrown=this.model.isFeatureEnabled("crown"),t.editable=e,this.$el.html(p(t)),this.renderDetails(),this.renderMainContent(),this},e.prototype.renderDetails=function(){var t,e;return e=o.isMe(this.model),t=this.model.toJSON(),t.bioHtml=s.markdownAsHtml(t.bio,{textData:t.bioData}),t.hasCrown=this.model.isFeatureEnabled("crown"),this.$(".js-current-details").empty().append(m.fill("member_detail_profile_info",t,{editable:e})),e&&this.$(".js-profile-form").empty().append(m.fill("member_detail_profile_edit",t,{editable:e})),this},e.prototype.setActiveView=function(t){this.$(".tabbed-pane-nav-item-button").removeClass("active"),this.$(t).addClass("active")},e.prototype.changeAvInProfile=function(t){l.stop(t),f("Member View","Header","Change Avatar Menu"),u.toggle({elem:this.$(".js-change-avatar-profile"),view:new i({model:this.model,modelCache:this.modelCache})})},e.prototype.editProfile=function(t){l.stop(t),this.$(".js-current-details").addClass("hide"),this.$(".js-profile-form").removeClass("hide"),f("Member View","Click Edit Profile")},e.prototype.cancelEditProfile=function(t){l.stop(t),this.$(".js-current-details").removeClass("hide"),this.$(".js-profile-form").addClass("hide"),this.$(".js-profile-form")[0].reset()},e.prototype.submitProfile=function(t){var e,r,n,o,i;if(l.stop(t),!this.disabled){for(e={},i=["fullName","username","bio","initials"],n=0,o=i.length;o>n;n++)r=i[n],e[r]=this.$(".js-profile-form [name="+r+"]").val();e.username=e.username.toLowerCase().replace(/[^a-z0-9_]/g,""),e.initials=e.initials.toUpperCase(),this.disableSubmit(),this.model.update(e,{waitForServer:!0},function(t){return function(e){t.disabled=!1,t.$(".js-submit-profile").removeAttr("disabled"),e?t.$(".js-profile-form-error").removeClass("hide").text(e.message):(t.$(".js-profile-form-error").addClass("hide"),t.cancelEditProfile(),f("Member","Successfully Change User Info"))}}(this))}},e.prototype.disableSubmit=function(){this.disabled=!0,this.$(".js-submit-profile").attr("disabled","disabled")},e}(d)},{}],479:[function(t,e,r){var n,o,i,s,a,u,c,l,d=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;n=t(22),i=t(27),s=t(435),a=t(99),u=t(421),c=t("underscore"),l=t(418),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return d(e,t),e.prototype.viewTitleKey="voters",e.prototype.events={"click .js-more-members-voted":"showAll","click .js-vote":"vote","click .js-unvote":"unvote"},e.prototype.initialize=function(){return i.loadCardVoters(this.model.id).done(),this.listenTo(this.model.memberVotedList,"add remove reset",this.frameDebounce(this.render))},e.prototype.showAll=function(){return this.render(!0)},e.prototype.render=function(t){var e,r,o;return o=this.model.memberVotedList,e={members:function(){var t,e,n,i;for(n=o.models,i=[],t=0,e=n.length;e>t;t++)r=n[t],i.push(r.toJSON());return i}()},t!==!0&&(e.members=e.members.slice(0,48),e.loading=0===o.length,e.fewMembers=o.length<14,e.moreMembers=o.length>48,e.lengthDiff=o.length-48,e.canVote=this.model.getBoard().canVote(n.me()),e.voted=c.include(this.model.get("idMembersVoted"),n.myId())),this.$el.html(l.fill("members_voted",e,{},{member:l.member})),this},e.prototype.vote=function(t){return a.preventDefault(t),this.model.vote(!0),!1},e.prototype.unvote=function(t){return a.preventDefault(t),this.model.vote(!1),0===this.model.get("idMembersVoted").length&&s.hide(),!1},e}(u)},{}],480:[function(t,e,r){var n,o,i,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=t(457),o=t(5),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.apiChangeRole=function(t){return e.__super__.apiChangeRole.apply(this,arguments),"admin"!==t&&this.isAdminAndMe()?o.navigate(o.getOrganizationUrl(this.parent),{trigger:!0}):void 0},e}(n)},{}],481:[function(t,e,r){var n,o,i=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty,a=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};o=t(483),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.initialize=function(){return this.listenTo(this.options.card,"change:idMembers",this.renderActive)},e.prototype.renderActive=function(){var t;return this.$(".js-member-item").toggleClass("active",(t=this.model.id,a.call(this.options.card.get("idMembers"),t)>=0))},e.prototype.render=function(){return e.__super__.render.apply(this,arguments),this.renderActive(),this},e}(o)},{}],482:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g=function(t,e){function r(){this.constructor=t}for(var n in e)v.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},v={}.hasOwnProperty;n=t("jquery"),o=t(429),i=t(178),s=t(125),a=t(170),u=t(435),l=t(99),d=t(421),p=t("underscore"),m=t(418),f=t(34),h=t(76),e.exports=c=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return g(e,t),e.prototype.viewTitleKey="add as",e.prototype.initialize=function(){if(this.parent=this.options.parent,this.member=this.model,this.isBoard=this.isOrg=!1,this.objText="",this.didSendInvite=!0,this.parent instanceof s)this.isBoard=!0,this.objText="Board",this.invitationList=this.parent.invitationList;else{if(!(this.parent instanceof a))throw new Error("A fragile abstraction has broken");this.isOrg=!0,this.objText="Org"}return this.invitationList=this.parent.invitationList},e.prototype.events={"click .js-invite":"invite"},e.prototype.render=function(){var t,e,r,n,o,i;for(t={showAdmin:this.parent.owned(this.member),showObserver:this.parent.hasObservers()},n=function(){if(this.isBoard)return"board roles";if(this.isOrg)return"org roles";throw new Error("A fragile abstraction has broken")}.call(this),o=this.parent.getAvailableRoles(),e=0,r=o.length;r>e;e++)i=o[e],t["roleText_"+i]=h([n,i,"text"]);return null==t.roleText_admin&&(t.roleText_admin=t.roleText_superadmin),this.$el.html(m.fill("manage_members_select_role",t)),this},e.prototype.invite=function(t){var e,r,s;l.stop(t),e=n(t.target).closest(".js-invite"),s=e.hasClass("js-select-admin")?"admin":e.hasClass("js-select-member")?"normal":e.hasClass("js-select-observer")?"observer":void 0,i({url:"/1/"+this.parent.typeName.toLowerCase()+"/"+this.parent.id+"/members/"+this.member.id,type:"put",data:{type:s},dataType:"json",success:function(t){return function(t){return f("Invitations","Add Member to Board","Role: "+s)}}(this),error:function(t){return function(t,e){o.showLiteralText(t.responseText,"error","alert",3e3),f("Invitations","Error: "+t.responseText)}}(this)}),"function"==typeof(r=this.options).onSendInvite&&r.onSendInvite(),this.options.onSendInvite=null,u.hide()},e}(d)},{}],483:[function(t,e,r){var n,o,i,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;i=t(418),o=t(421),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.initialize=function(){},e.prototype.render=function(){var t;return t=this.model.toJSON(),"ghost"===this.model.get("memberType")&&(t.isVirtual=!0),t.unconfirmed=this.options.showUnconfirmed&&!t.isVirtual&&!t.confirmed,t.inactive=this.options.showInactive&&!t.active,t.isKnownMember=this.options.isKnownMember,t.extraText=this.options.extraText,this.options.linkName?t.url="/"+this.model.get("username"):delete t.url,this.$el.html(i.fill("select_member",t,{},{member:i.member})),this.$(".js-member").data("id",this.model.id),this},e}(o)},{}],484:[function(t,e,r){var n,o,i,s,a,u,c,l=function(t,e){function r(){this.constructor=t}for(var n in e)d.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},d={}.hasOwnProperty;n=t("jquery"),o=t(162),i=t(435),s=t(482),u=t(99),c=t(34),e.exports=a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.invite=function(t){var e,r;u.stop(t),e=n(t.target).closest(".js-invite"),r=e.hasClass("js-select-admin")?"admin":e.hasClass("js-select-member")?"normal":e.hasClass("js-select-observer")?"observer":void 0,o.prototype.create.call(this,{model:this.parent,data:{type:r,email:this.options.email},success:function(t){return function(e){return c("Invitations","Send Email "+t.objText+" Invite to New Member","Role: "+r)}}(this)}),i.popView()},e}(s)},{}],485:[function(t,e,r){var n,o,i,s,a,u,c=function(t,e){function r(){this.constructor=t}for(var n in e)l.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},l={}.hasOwnProperty;n=t("jquery"),o=t(61),s=t(421),a=t("underscore"),u=t(418),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.className="member-account-session",e.prototype.events={"click .js-revoke":"revoke"},e.prototype.render=function(){var t,e;return t=this.options,t["type_"+this.options.type]=!0,e=t.ipAddress,this.$el.html(u.fill("member_session",t)),o.update(this.el),this},e.prototype.revoke=function(t){return n.get("/login/revoke",{id:this.options.id},function(t){return function(){return t.model.set("sessions",a.filter(t.model.get("sessions"),function(e){return e.id!==t.options.id}))}}(this))},e}(s)},{}],486:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p=function(t,e){function r(){this.constructor=t}for(var n in e)h.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},h={}.hasOwnProperty;n=t(61),i=t(99),s=t(421),a=t("underscore"),l=t(418),d=t(34),c=t("moment"),u=t(76),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.className="application u-clearfix",e.prototype.events={"click .js-revoke":"revoke"},e.prototype.render=function(){var t,e,r,o,i,s;return s=this.options,r=s.dateExpires,i=s.permissions,o=s.identifier,e=s.dateCreated,t={identifier:o,dateApproved:c(n.parse(e)).calendar(),dateExpires:r?c(n.parse(r)).calendar():null,neverExpires:null==r},t.permissions=a.isEmpty(i)?[u("token perms.none")]:i.map(function(t){var e,r,n;return r=t.write?"readwrite":"read",e="*"===t.idModel?"general":"specific",n=t.modelType.toLowerCase(),u(["token perms",r,e,n])}),this.$el.html(l.fill("member_application",t)),this},e.prototype.revoke=function(t){return i.stop(t),this.model.set("tokens",a.filter(this.model.get("tokens"),function(t){return function(e){return e.id!==t.options.id}}(this))),this.model.pull("tokens",this.options.id,function(t){return function(){return d("Member","Applications","Revoke App")}}(this))},e}(s)},{}],487:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f=function(t,e){function r(){this.constructor=t}for(var n in e)g.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},g={}.hasOwnProperty;n=t(455),o=t(431),s=t(26),u=t(168),c=t(488),l=t(435),d=t(99),p=t(421),h=t(418),m=t(34),a=10,e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return f(e,t),e.prototype.viewTitleKey="notifications",e.prototype.initialize=function(){return this.listenTo(s,"add:Notification change:Notification remove:Notification",this.render)},e.prototype.maxWidth=450,e.prototype.displayType="mod-notifications",e.prototype.events={"click .js-view-all-notifications":"viewAllNotifications","click .js-change-email-frequency":"changeEmailFrequency","click .js-allow-desktop-notifications":"allowDekstopNote"},e.prototype.render=function(){var t,e,r,n,i,l,d,p,m;for(m=this,i=this.model,this.$el.empty(),e={},this.menuRows={},t=0,d=u.sortedByDateDescending(s),r=0,n=d.length;n>r&&(l=d[r],!(t>a-1));r++)t++,this.menuRows[l.id]=this.subview(c,l),this.$el.append(this.menuRows[l.id].render().el);return d.length>0?(e.hasNotifications=!0,p=d.slice(a).filter(function(t){return t.get("unread")}),e.remainingUnread=p.length,e.noteUrl="/"+this.model.get("username")+"/notifications",e.canAllowDesktopNotifications=o.notEnabled()):e.hasNotifications=!1,this.$el.append(h.fill("header_notification_list_menu",e)),this},e.prototype.viewAllNotifications=function(){return m("Header","Notifications Menu","See All Notifications")},e.prototype.changeEmailFrequency=function(t){d.stop(t),m("Header","Notifications Menu","Change Email Frequency"),l.pushView({view:new n({model:this.model,modelCache:s})})},e.prototype.allowDekstopNote=function(t){d.stop(t),m("Header","Notifications Menu","Allow Desktop Notifications"),o.requestPermission(function(t){return function(){t.render()}}(this))},e}(p)},{}],488:[function(t,e,r){var n,o,i=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;o=t(490),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.isHeader=!0,e}(o)},{}],489:[function(t,e,r){var n,o,i=function(t,e){function r(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;o=t(490),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.isNotifications=!0,e}(o)},{}],490:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b=function(t,e){function r(){this.constructor=t}for(var n in e)w.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},w={}.hasOwnProperty;n=t("jquery"),h=t("underscore"),o=t(447),i=t(22),s=t(61),a=t(62),c=t(435),l=t(79),d=t(99),p=t(421),f=t(401),g=t(31),y=t(34),v=t(709),m=new a("notification"),e.exports=u=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return b(e,t),e.prototype.className="phenom u-clearfix",e.updateRelDates=function(t){var e;e=new Date,n(t).find(".rel-date[dt]").each(function(){var t;return t=n(this).attr("dt"),n(this).text(function(){return m.relDateText(t,e)})})},e.prototype.events={click:"clickedNotification","click .js-show-mem-menu":"viewMemberActionMenu"},e.prototype.getData=function(){var t,e,r,n,o,i;for(t=this.model.getExpandedData(),t.entities=m.getEntities(this.model.get("display")),o=t.entities,r=0,n=o.length;n>r;r++)e=o[r],"comment"===e.type&&(e.textHtml=l.comments.format(e.text).output);return"cardDueSoon"===this.model.get("type")?(t.isDueDateNotification=!0,t.hasIcon=!0):("declinedInvitationToBoard"===(i=this.model.get("type"))||"declinedInvitationToOrganization"===i)&&(t.hasIcon=!0,t.isDeclinedInvitationNotification=!0),t},e.prototype.getContext=function(){return{member:this.model.getMember()}},e.prototype.render=function(){var t,e,r;return r=this.getData(),e=this.getContext(),g("notifications",r),this.$el.html(v(r,e)),null!=(t=this.model.getBoard())&&h.each(this.$(".js-friendly-links"),h.partial(f,h,t)),"cardDueSoon"===this.model.get("type")&&this.$el.addClass("due-soon"),r.unread?this.$el.addClass("unread"):this.$el.removeClass("unread"),s.update(this.el),this},e.prototype.clickedNotification=function(t){return this.model.markRead(),this.isHeader?y("Header","Notifications Menu","Clicked Notification"):this.isNotifications&&y("Member View","Notifications Page","Clicked Notification"),n(t.target).is("a")?void 0:(this.model.navigateToView(),d.stop(t))},e.prototype.viewMemberActionMenu=function(t){var e,r;d.stop(t),e=this.modelCache.get("Member",null!=(r=n(t.target).closest("[idmember]").attr("idmember"))?r:this.model.get("idMemberCreator")),n(t.target).closest(".pop-over").length>0?c.pushView({view:o,options:{model:e,modelCache:this.modelCache}}):c.toggle({elem:this.$(".js-show-mem-menu"),view:o,options:{model:e,modelCache:this.modelCache}})},e}(p)},{}],491:[function(t,e,r){var n,o,i,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;i=t(520),o=t(435),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.onSubmit=function(t){t&&(this.model.tagList.create({name:t},{wait:!0}),o.popView())},e.prototype.viewTitleKey="add tag",e}(i)},{}],492:[function(t,e,r){var n,o,i,s,a;n=t(179),o=t("react"),a=t(414)("bc_info"),i=t(197),s=t(67),e.exports=o.createClass({displayName:"BC3UpgradeComponent",getInitialState:function(){return{showingYearly:!1,upgradeDisabled:!1,error:null}},render:a.renderable(function(){var t,e,r,o,u,c,l,d,p,h,m,f,g,v,y,b,w,_;return c=this.props,_=c.yearlyDiscountAmount,w=c.yearlyDiscount,e=c.isMonthly,b=c.userCount,r=c.onUpgradeClick,l=this.state,m=l.showingYearly,y=l.upgradeDisabled,t=l.error,h=e&&!m,g=i.choke(0,i(this,"setState",{showingYearly:!0})),f=i.choke(0,i(this,"setState",{showingYearly:!1})),d=h?this.props.monthly:this.props.yearly,o=d.price,v=d.totalPrice,u=d.productNumber,p=function(t){return function(e){return t.setState({upgradeDisabled:!0}),r(u,e).catch(n.BadRequest,n.Unauthorized,function(e){return t.setState({error:e.message,upgradeDisabled:!1})}).done()}}(this),_=s.number(_),o=s.number(o),v=s.number(v),a.div(".business-class-upgrade-box.u-gutter",function(){return a.p(function(){return a.format("were also introducing smart billing…")}),a.p(function(){return a.format("theres also new pricing")}),a.p(function(){return h?a.format("when paid monthly",{price:o}):a.format("when paid annually",{price:o})}),a.p(function(){return a.format("your new price per month",{totalPrice:v,userCount:b})}),h||a.p(function(){return a.format("discount upgrade to yearly",{yearlyDiscountAmount:_,yearlyDiscountPercent:s.percentage(w)})}),t&&a.p(function(){return a.text(t)}),a.button({onClick:p,class:"primary",disabled:y},function(){return a.format("upgrade my team")}),a.p(".quiet.business-class-upgrade-box-spaced-item",function(){return h?a.format("youll be charged…",{totalPrice:v}):a.format("youll be charged…minus your discount…",{totalPrice:v,yearlyDiscountAmount:_})}),e?a.p(function(){return m?a.b(f,function(){return a.format("or go back to monthly pricing")}):(a.format("or switch to paying annually…",{yearlyDiscountPercent:s.percentage(w)}),a.text(" "),a.b(g,function(){return a.format("see annual pricing")}))}):void 0})})})},{}],493:[function(t,e,r){var n,o;n=t("react"),o=t(414)("bc_info"),e.exports=n.createClass({displayName:"BC3UpgradeContactUsComponent",render:o.renderable(function(){return o.div(".business-class-upgrade-box.u-gutter",function(){return o.p(function(){return o.format("contact us to upgrade")}),o.p(".business-class-upgrade-box-header",function(){return o.format("contact options",{phoneNumber:"1 (844) 873-5561",emailAddress:"sales@trello.com"})})})})})},{}],494:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1},h=function(t,e){function r(){this.constructor=t}for(var n in e)m.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},m={}.hasOwnProperty;o=t(491),s=t(499),a=t(435),u=t(421),n=t("jquery"),l=t(416)("org_filtering"),d=l.renderable(function(t,e){return t.tagList.models.length||l.p(function(){return l.format("tags-explanation")}),l.ul(".select-tags-list",function(){var r,n,o,i;for(o=t.tagList.models,r=0,n=o.length;n>r;r++)i=o[r],l.li(".select-tags-list-item.js-tag-item",{"data-id-tag":i.id},function(){return l.a(".select-tags-list-item-name-link.js-toggle-tag",function(){var t;return t=i.id,p.call(e.getIdTags(),t)>=0&&l.icon("check",{class:"select-tags-list-item-name-link-check-icon"}),l.text(i.get("name"))}),l.a(".select-tags-list-item-edit-button.icon-sm.icon-edit.js-edit-tag",{href:"#"})})}),l.div(function(){return l.a(".quiet-button.full.js-add-tag",{href:"#"},function(){return l.format("create-tag")})})}),c=function(t){return n(t.target).closest(".js-tag-item")[0].dataset.idTag},e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return h(e,t),e.prototype.initialize=function(){return this.listenTo(this.model,"change:idTags",this.render),this.listenTo(this.options.org.tagList,"add remove reset change",this.render),
e.__super__.initialize.apply(this,arguments)},e.prototype.events={"click .js-add-tag":"addTag","click .js-toggle-tag":function(t){return this.toggleTag(c(t))},"click .js-edit-tag":function(t){return this.editTag(c(t))}},e.prototype.viewTitleKey="pick tags",e.prototype.addTag=function(){return a.pushView({view:o,options:{model:this.options.org,modelCache:this.modelCache}})},e.prototype.toggleTag=function(t){return this.model.toggleTag(t)},e.prototype.editTag=function(t){return a.pushView({view:s,options:{modelCache:this.modelCache,model:this.options.org.tagList.get(t)}})},e.prototype.render=function(){return this.$el.html(d(this.options.org,this.model)),this},e}(u)},{}],495:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p=function(t,e){function r(){this.constructor=t}for(var n in e)h.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},h={}.hasOwnProperty;n=t("jquery"),i=t(498),s=t(435),a=t(99),u=t(421),c=t("underscore"),l=t(418),d=t(34),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.events={"click .js-select-org":"chooseOrg","click .js-disabled":"stop","click .js-create-org":"createOrg"},e.prototype.render=function(){var t,e,r,n,o,i,s,a;return t={},t.orgs=function(){var t,u,l,d;for(l=this.model.organizationList.models,d=[],t=0,u=l.length;u>t;t++)s=l[t],e=s.owned(),n=s.isPremium(),i=s.needsBCUpgrade(),r=!i||!e,a=!e||n&&!i?"#":"/"+s.get("name")+"/billing",o=s.get("memberships").length,d.push(c.extend(s.toJSON(),{memberCount:o,isAdmin:e,isPremium:n,needsBCUpgrade:i,orgUrl:a,isDisabled:r}));return d}.call(this),this.$el.html(l.fill("select_org_to_upgrade",t)),this},e.prototype.chooseOrg=function(t){return d("Business Class Choose Org Page","Choose Org")},e.prototype.stop=function(t){return a.stop(t)},e.prototype.createOrg=function(t){a.stop(t),s.toggle({elem:n(t.target),top:20,view:i,options:{model:this.model,modelCache:this.modelCache}}),d("Business Class Choose Org Page","Create New Org")},e}(u)},{}],496:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h=function(t,e){function r(){this.constructor=t}for(var n in e)m.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},m={}.hasOwnProperty,f=[].slice;n=t("jquery"),o=t(178),i=t(22),a=t(435),u=t(99),c=t(421),d=t(418),p=t(34),l=t(76),e.exports=s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return h(e,t),e.prototype.viewTitleKey="change logo",e.prototype.initialize=function(){return this.listenTo(this.model,"change:logoHash",this.frameDebounce(this.render))},e.prototype.events={"change .js-upload-logo":"startUpload","click .js-remove-logo":"removeLogo"},e.prototype.render=function(){var t,e;return e=this,t=this.model.toJSON({prefs:!0}),this.$el.html(d.fill("popover_org_logo",t)),this},e.prototype.startUpload=function(t){var e,r,s,a,c,d,h;return c=this.model,a=n(t.target),e=this.$(".js-error").hide(),s=null!=(d=a[0])&&null!=(h=d.files)?h[0]:void 0,null==s||u.validFileSize(s)?!s&&a.val()?u.uploadFile(i.myToken(),a,this.uploadResult.bind(this)):null!=s?(r=new FormData,r.append("token",i.myToken()),r.append("file",s),o({url:a.closest("form").attr("action"),data:r,type:"post",processData:!1,contentType:!1,error:function(t){return function(e){var r,n;return n=e.status,r=e.responseText,t.uploadResult(Error(r))}}(this),success:function(t){return function(){return t.uploadResult.apply(t,[null].concat(f.call(arguments)))}}(this),timeout:12e4})):void 0:(e.text(l("images can not be larger than 10mb")).show(),void p("Organization","Logo","Upload Error - File Too Large"))},e.prototype.uploadResult=function(t){var e;return e=this.$(".js-error").hide(),t?(p("Organization","Logo","Error - "+t),e.show().text(t)):(p("Organization","Logo","Use Uploaded - New"),a.hide())},e.prototype.removeLogo=function(t){u.stop(t),o({url:"/1/organizations/"+this.model.id+"/logo",type:"DELETE",success:function(t){return function(){return p("Organization","Logo","Remove Logo"),a.hide()}}(this)})},e}(c)},{}],497:[function(t,e,r){var n,o,i,s,a,u,c,l,d=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;o=t(170),i=t(435),s=t(99),a=t(421),c=t(418),l=t(34),u=t(76),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return d(e,t),e.prototype.viewTitleKey="select visibility",e.prototype.tagName="ul",e.prototype.className="pop-over-list",e.setVisibility=function(t){return function(e){return s.stop(e),l("Organization","Changed Visibility"),this.model.setPref("permissionLevel",t),i.hide()}},e.prototype.events={"click .js-select-members":e.setVisibility("private"),"click .js-select-public":e.setVisibility("public")},e.prototype.render=function(){var t;return t=this.model.toJSON({prefs:!0}),t["permissionLevel_"+this.model.get("prefs").permissionLevel]=!0,t.publicText=u("org perms.public.text"),t.privateText=u("org perms.private.text"),this.$el.html(c.fill("change_org_vis",t)),this},e}(a)},{}],498:[function(t,e,r){var n,o,i,s,a,u,c,l,d=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;n=t(22),o=t(5),s=t(435),a=t(99),u=t(421),c=t(418),l=t(34),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return d(e,t),e.prototype.viewTitleKey="create organization",e.prototype.initialize=function(t){return this.createOpts=t.createOpts,null!=this.createOpts?this.createOpts:this.createOpts={isBusinessClass:!1}},e.prototype.events={"click .js-save":"submit","submit form":"submit","click .js-business-class":"clickBusinessClassMore","input .js-display-name":function(){return this.updateSubmitButton()}},e.prototype.getValue=function(t){var e;return null!=(e=this.$("[name="+t+"]").val())?e.trim():void 0},e.prototype.render=function(){return this.$el.html(c.fill("org_create")),this.updateSubmitButton(),this},e.prototype.updateSubmitButton=function(){return this.$(".js-save").prop("disabled",0===this.getValue("displayName").length)},e.prototype.submit=function(t){var e,r,i,u,c;for(a.stop(t),e={},c=["displayName","desc"],r=0,i=c.length;i>r;r++)u=c[r],e[u]=this.getValue(u);n.me().organizationList.create(e,{modelCache:this.modelCache,silent:!0,success:function(t){return function(e){t.createOpts.isBusinessClass?o.organizationBillingView(e.get("name")):o.organizationBoardsView(e.get("name"),e.id),s.hide(),l("New Org","Create")}}(this)})},e.prototype.clickBusinessClassMore=function(){return l("New Org","Click Business Class Link")},e}(u)},{}],499:[function(t,e,r){var n,o,i,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;o=t(435),s=t(421),i=t(520),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.getName=function(){return this.model.get("name")},e.prototype.onSubmit=function(t){t&&(this.model.update({name:t}),o.popView())},e.prototype.onDelete=function(){return this.model.destroy(),o.popView()},e.prototype.viewTitleKey="edit tag",e}(i)},{}],500:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x=function(t,e){function r(){this.constructor=t}for(var n in e)j.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},j={}.hasOwnProperty;n=t("jquery"),o=t(233),i=t(429),s=t(178),a=t(22),u=t(162),c=t(73),l=t(14),p=t(166),h=t(462),m=t(544),f=t(16),g=t(435),v=t(99),y=t(421),b=t("underscore"),_=t(81),k=t(418),w=t(662),C=t(34),e.exports=d=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return x(e,t),_(m,h,e),e.prototype.viewTitleKey="members",e.prototype.initialize=function(){this.savedSearch=""},e.prototype.events={"click .js-search-results .js-select-member":"addMember","paste .js-search-input":"searchPaste","click .js-remove-invitation":"removeInvitation","click .js-send-email-invite":"sendEmailInvite","submit .js-email-data":"sendEmailInvite","click .js-open-option":"openOption","mouseenter .js-select-member":"hoverMember"},e.prototype.render=function(){var t,e;return e={},e.canInviteMembers=!0,e.canAddMembers=!0,e.isPerUser=f.isPerUser(this.model.get("products")),e.perUserPrice=f.getPrice(this.model.get("products")),e.isYearly="yearly"===f.getInterval(this.model.get("products")),e.isMonthly="monthly"===f.getInterval(this.model.get("products")),this.$el.html(k.fill("manage_members",e,{editable:this.model.editable()})),null!=(t=o.addMemberToOrganizationAd(a.me(),this.model))&&this.$(".js-ad").html(this.subview(t,this.model).render().el),this.setTimeout(function(t){return function(){return t.input=t.$(".js-search-input"),t.input.click(function(t){return v.stop(t)}).keyup(t.debounce(t.search,500).bind(t)).keydown(t.keydownEvent.bind(t)).focus(),t.savedSearch?(t.input.val(t.savedSearch),t.search(),t.savedSearch=""):void 0}}(this),10),this.lastSearch="",this.loadingEl=this.$(".js-loading"),this.helperEl=this.$(".js-helper"),this},e.prototype.searchPaste=function(){return this.loadingEl.show(),this.input.keyup()},e.prototype.search=function(t){var e;if(null==this.lastSearch||this.lastSearch!==this.input.val()){if(this.lastSearch=this.input.val(),e=this.input.val().toLowerCase().trim(),""===e)return void this.clearSearchResults();this.loadingEl.show(),s({url:"/1/search/members/",type:"get",data:{idOrganization:this.model.id,query:e,_cache:v.newestId(this.model.get("memberships"))},dataType:"json",success:function(t){return function(r){return t.renderSearchResults(e,r)}}(this)})}},e.prototype.keydownEvent=function(t){var e;e=c.getKey(t),e===l.Enter?this.$(".js-search-results .js-list .selected .js-select-member").length>0?(v.stop(t),this.$(".js-search-results .js-list .selected:first .js-select-member").click()):this.$(".js-search-results .js-list .email-invite").length>0&&(v.stop(t),this.$(".email-invite:first").click()):(e===l.ArrowUp||e===l.ArrowDown)&&(v.stop(t),v.navMenuList(this.$(".js-search-results .js-list"),"li",e))},e.prototype.addMember=function(t){var e,r;v.stop(t),n(t.target).closest(".item.disabled").length>0||(this.clearSearchResults(),e=n(t.target).closest(".js-select-member").attr("idMember"),r=this.modelCache.get("Member",e),s({url:"/1/organization/"+this.model.id+"/members/"+e,type:"put",data:{type:"normal"},dataType:"json",success:function(t){return function(n){return null!=n.token||t.model.memberList.find(function(t){return t.id===e})?void 0:(t.model.memberList.add(r),C("Invitations","Add Member to Organization","Role: Member"))}}(this),error:function(t){return function(e,r){i.showLiteralText(e.responseText,"error","alert",3e3),t.input.focus().select(),C("Invitations","Error: "+e.responseText)}}(this)}))},e.prototype.renderEmailInviteToSearchResults=function(t){var e,r,n;return n=/[\s\d\x21-\x2F\x3A-\x40\x5B-\x60\x7B-\x7F]+/,r=/[\d\x21-\x2F\x3A-\x40\x5B-\x60\x7B-\x7F]+/,e=b.compact(v.removeDomainFromEmailAddress(t.email).split(n)).join(" ").replace(r,""),t.fullName=v.toTitleCase(e),t.modelType="Organization",this.$(".js-uninvited-search-results").append(w(t)).show()},e.prototype.sendEmailInvite=function(t){var e,r,o,a;if(v.stop(t),r=this.$(".js-send-email-invite"),null==r.attr("disabled")){if(e=this.$(".js-email-data .js-full-name"),a=e.val().trim(),!v.validName(a))return v.setCaretAtEnd(e),void n(".js-name-error").show();o={fullName:a,email:this.$(".js-email-data .js-email").val().trim(),type:"normal"},r.attr("disabled","disabled"),s({url:"/1/organizations/"+this.model.id+"/members",type:"put",dataType:"json",data:o,success:function(t){return function(e){var n;return n=new p(e,{modelCache:t.modelCache}),t.model.memberList.get(n.id)||t.model.memberList.add(n),C("Invitations","Send Email Org Invite to New Member","Role: "+e.type),r.removeAttr("disabled"),g.hide()}}(this),error:function(t){return function(e,n){t.$(".js-uninvited-search-results").empty().hide(),i.showLiteralText(e.responseText,"error","alert",3e3),r.removeAttr("disabled"),t.input.focus().select(),C("Invitations","Error: "+e.responseText)}}(this)})}},e.prototype.clearSearchResults=function(){return this.helperEl.show(),this.lastSearch="",this.input.val("").focus().select(),this.$(".js-uninvited-search-results").hide().empty(),n(".js-search-results").hide()},e.prototype.removeInvitation=function(t){var e;e=n(t.currentTarget).closest(".invitation").data("id"),u.prototype.delete({model:this.model,idInvitation:e,success:function(t){return function(){return C("Invitations","Delete Organization Invite"),t.search}}(this)}),v.setCaretAtEnd(this.input[0])},e.prototype.canRemoveInvitation=function(t){return t.get("idMemberInviter")===a.myId()||this.model.owned()},e.prototype.willBePushedDown=function(){return this.savedSearch=this.input.val()},e.prototype.willBePopped=function(){return this.savedSearch=""},e}(y)},{}],501:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m=function(t,e){function r(){this.constructor=t}for(var n in e)f.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},f={}.hasOwnProperty,g=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};n=t(5),o=t(61),s=t(507),a=t(435),u=t(99),c=t(421),l=t("underscore"),p=t(418),h=t(34),d=t(75),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return m(e,t),e.prototype.viewTitleKey="org activity for member",e.prototype.viewTitleArguments=function(){return{memberName:this.model.get("fullName")}},e.prototype.initialize=function(){return this.org=this.options.org},e.prototype.events={"click .js-view-org-boards-for-member":"viewBoards","click .js-view-member-org-cards":"viewCards"},e.prototype.render=function(t){var e,r,i,s,a,u,c;for(i=this.model.toJSON(),r=0,u=l.filter(this.org.boardList.models,function(t){return function(t){return!t.get("closed")}}(this)),s=0,a=u.length;a>s;s++)e=u[s],c=this.model,g.call(e.memberList.models,c)>=0&&r++;return i.boardCount=d("boards",r),i.hasBoards=r>0,this.org.isFeatureEnabled("orgCards")&&(i.orgCardsUrl=n.getOrganizationMemberCardsUrl(this.org.get("name"),i.username)),this.$el.html(p.fill("org_member_activity",i)),o.update(this.el),this},e.prototype.viewCards=function(){return h("Organization View","Members Page","Activity - View Org Cards")},e.prototype.viewBoards=function(t){u.stop(t),h("Organization View","Members Page","Activity - View Boards"),a.pushView({view:new s({model:this.model,parent:this.org,modelCache:this.modelCache})})},e}(c)},{}],502:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_=function(t,e){function r(){this.constructor=t}for(var n in e)k.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},k={}.hasOwnProperty;n=t("jquery"),o=t(53),i=t(22),s=t(497),a=t(430),u=t(5),c=t(16),d=t(503),p=t(516),h=t(517),m=t(518),f=t(435),g=t(99),v=t("underscore"),b=t(418),w=t(34),y=t(76),e.exports=l=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return _(e,t),e.prototype.events={"click .js-change-org-vis":"openChangeOrgVis","click .js-restrict-inv-org":"openChangeOrgInviteRestrictions","click .js-restrict-board-vis":"openChangeBoardVisRestrictions","click .js-confirm-delete-org":"orgDeleteConfirm","click .js-toggle-non-org-member-board-invites":"toggleNonOrgMemberBoardInvites","click .js-business-class-ad-link":"bcAdLink"},e.prototype.initialize=function(){e.__super__.initialize.apply(this,arguments),this.listenTo(this.model,"change:prefs",function(){return this.renderVisibility(),this.renderInviteRestrictions(),this.renderBoardCreateVisibilityRestrictions(),this.renderBoardInviteRestrictions()})},e.prototype.renderMainContent=function(){var t,e,r;return t=this.model.toJSON({prefs:!0,url:!0,premium:!0}),t.externalMembersDisabled=t.prefs.externalMembersDisabled,this.model.owned()&&(t.canDelete=!this.model.isPremium()||o.willExpire(t.paidAccount)),r=c.features(this.model.get("products")),t.premium=v.object(function(){var t,n,o;for(o=[],t=0,n=r.length;n>t;t++)e=r[t],o.push([e,!0]);return o}()),t.isInOrg=this.model.isMember(i.me()),t.hasBusinessClass=this.model.isPremium(),t.isOrgAdmin=this.model.owned(),t.isBusinessClassAdmin=this.model.isPremium()&&this.model.owned(),t.canChangeBCPrefs=t.premium.prefs&&t.isOrgAdmin,t.canChangeFreePrefs=t.isOrgAdmin,this.$(".js-content").html(b.fill("org_account",t,{editable:this.model.editable()})),this.setActiveView(".js-org-account"),this.renderVisibility(),this.renderInviteRestrictions(),this.renderBoardCreateVisibilityRestrictions(),this.renderBoardInviteRestrictions(),this},e.prototype.openChangeOrgVis=function(t){var e;g.stop(t),e=this.$(".js-change-org-vis"),e.hasClass("js-disabled")||(f.toggle({elem:e,view:new s({model:this.model,modelCache:this.modelCache})}),w("Organization View","Settings Page","Open Change Org Visibility"))},e.prototype.renderVisibility=function(){var t,e;return t={},e=this.model.getPermLevel(),t["permissionLevel_"+e]=!0,t.helperText=y(["org perms",e,"text"]),this.$(".js-fill-visibility").html(b.fill("org_settings_page_visibility",t)),this},e.prototype.openChangeOrgInviteRestrictions=function(t){var e;g.stop(t),e=this.$(".js-restrict-inv-org"),e.hasClass("js-disabled")||(f.toggle({elem:e,view:new h({model:this.model,modelCache:this.modelCache})}),w("Organization View","Settings Page","Open Restrict Org Invites by Email Domain"))},e.prototype.renderInviteRestrictions=function(){var t,e;return e=null!=(t=this.model.get("prefs").orgInviteRestrict)?t:[],this.$(".js-fill-membership-restrictions").html(b.fill("org_settings_page_invite_restrictions",{restrictions:e,hasRestrictions:e.length>0})),this},e.prototype.toggleNonOrgMemberBoardInvites=function(t){var e;g.stop(t),e=this.$(".js-toggle-non-org-member-board-invites"),e.hasClass("js-disabled")||(f.toggle({elem:e,view:new d({model:this.model,modelCache:this.modelCache})}),w("Organization View","Settings Page","Toggle Allow Inviting Non-Org Members to Boards"))},e.prototype.renderBoardCreateVisibilityRestrictions=function(){var t;return t=this.model.toJSON({prefs:!0}),this.$(".js-fill-baord-create-restrictions").html(b.fill("org_settings_page_board_create_restrictions",t)),this},e.prototype.openChangeBoardVisRestrictions=function(t){var e;g.stop(t),e=this.$(".js-restrict-board-vis"),e.hasClass("js-disabled")||(f.toggle({elem:e,view:new p({model:this.model,modelCache:this.modelCache})}),w("Organization View","Settings Page","Open Change Board Visibility"))},e.prototype.renderBoardInviteRestrictions=function(){var t;return t=this.model.toJSON({prefs:!0}),this.$(".js-fill-board-invite-restrictions").html(b.fill("org_settings_page_board_invite_restrictions",t)),this},e.prototype.bcAdLink=function(){return w("Organization View","Settings Page","Inline Business Class Ad Link")},e.prototype.orgDeleteConfirm=function(t){g.stop(t),w("Organization View","Settings Page","Open Delete Org Dialog"),this.$(".js-delete-org").attr("disabled","disabled"),a.toggle("delete organization",{elem:n(t.target),model:this.model,confirmBtnClass:"negate",fxConfirm:function(t){return function(e){return t.model.destroy({success:function(){return w("Organization","Successfully Delete"),f.hide(),u.navigate("/",{trigger:!0})}})}}(this)})},e}(m)},{}],503:[function(t,e,r){var n,o,i,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;o=t(99),i=t(421),s=t(418),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.viewTitleKey="inviting non-org members",e.prototype.initialize=function(){return this.listenTo(this.model,"change:prefs",this.render)},e.prototype.events={"click a":"togglePref"},e.prototype.render=function(){var t;return t=this.model.toJSON({prefs:!0,url:!0,premium:!0}),t.externalMembersDisabled=t.prefs.externalMembersDisabled,this.$el.html(s.fill("org_prefs_nonorg_invites",t,{editable:this.model.editable()})),this},e.prototype.togglePref=function(t){o.stop(t),this.model.setPref("externalMembersDisabled",!this.model.getPref("externalMembersDisabled"))},e}(i)},{}],504:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,B,M,T,O,L,P,A,E,D,V,I,N=function(t,e){function r(){this.constructor=t}for(var n in e)$.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},$={}.hasOwnProperty,z=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};n=t("jquery"),o=t(53),s=t(176),a=t(22),u=t(492),c=t(493),d=t(259),p=t(430),h=t(5),f=t(260),m=t(262),i=t(261),S=t(266),C=t(265),g=t(27),v=t(16),l=t(256),b=t(518),w=t(184),_=t(238),k=t(435),x=t("react"),j=t(413),B=t(99),M=t("underscore"),T=t(267),L=t(76),O=t(197),D=t(34),V=t(33),P=t("moment"),A=t(84),I=t("xtend"),E=t("recup"),e.exports=y=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return N(e,t),e.prototype.renderMainContent=function(){return this.$(".js-content").empty(),null==this.$reactRoot&&(this.$reactRoot=n("<div></div>")),this.$(".js-content").append(this.$reactRoot),this.renderReactSection(),this.setActiveView(".js-billing"),this},e.prototype.renderReactSection=function(){return x.render(this.getReactRoot(),this.$reactRoot[0]),this},e.prototype.getReactRoot=function(){var t;return x.createElement(j,{},o.hasAccount(null!=(t=this.model.get("paidAccount"))?t.standing:void 0)?this.getBillingComponent():this.getSignUpComponent())},e.prototype.getBillingComponent=function(){var t;return t=T(this.model,v,{productName:L("products.bc"),productIconClass:"business-class",detailsUrl:"/business-class",onRenewClick:O(this,"renew"),cancelProduct:O(this,"cancel"),onSwitchToYearly:O(this,"switchToYearly"),didntGetAuthStatus:function(t){return function(){return g.loadOrganizationData(t.model.get("name")).done()}}(this),didGetAuthStatus:function(t){return function(){return g.loadOrganizationData(t.model.get("name")).done()}}(this),onChangeBillingContactClick:O(this,"changeBillingContactPopover"),reactivateProduct:O(w,"reactivate",this.model),changeCreditCard:O(w,"changeCreditCard",this.model),createPaidAccount:O(w,"createAccount",this.model),paidAccountPoll:O(s,{url:this.model.urlRoot+"/"+this.model.id+"?paid_account=true"})}),E.render(function(e){return function(){return E.div(function(){var r,o,i,s,a,d;return o=null!=(i=t.paidAccount)&&null!=(s=i.products)?s[0]:void 0,null!=o&&o!==t.current.monthly.productNumber&&o!==t.current.yearly.productNumber&&(a=e.model.get("activeBillableMemberCount"),r=z.call(v.BC1Products,o)>=0&&a>=10&&!n.cookie("upgrade-bc")||"enterprise@trello.com"===e.model.get("paidAccount").contactEmail,E.createElement(_,{stringsKey:"business-class-upgrade",subtitleCount:2,infoUrl:"/business-class",epilogueCount:r?2:1,icon:"business-class"}),r?E.createElement(c):(d=z.call(v.BC1Products,o)>=0?.5:.2,E.createElement(u,I(v.currentPriceObjectForModel(e.model),{isMonthly:v.isMonthly(o),yearlyDiscount:d,yearlyDiscountAmount:t.current.yearly.totalPrice*d,userCount:a,onUpgradeClick:function(t){return w.changeProduct(e.model,t).then(function(t){return D("Organization","Successfully Upgraded to BC3"),e.model.set(t)})}})))),E.createElement(l,t)})}}(this))},e.prototype.getSignUpComponent=E.renderable(function(){return E.div(function(t){return function(){var e,r,n,o,u,c,l;return E.createElement(_,{stringsKey:"business-class",subtitleCount:1,infoUrl:"/business-class",epilogueCount:0,icon:"business-class"}),e=v.currentPriceObjectForModel(t.model),E.createElement(f,{onSubmit:O(w,"createAccount",t.model),doPoll:O(s,{url:t.model.urlRoot+"/"+t.model.id+"?paid_account=true"}),buttonKey:"upgrade-team",contentBuilders:[A(C,{productName:"Business Class",monthlyProduct:e.monthly,yearlyProduct:e.yearly,defaultProduct:e.yearly.productNumber,billingStrategy:e.billingStrategy}),A(m),A(i),A(S)],extraData:{billingContactFullName:null!=(r=null!=(n=t.model.get("paidAccount"))?n.contactFullName:void 0)?r:a.me().get("fullName"),billingContactEmail:null!=(o=null!=(u=t.model.get("paidAccount"))?u.contactEmail:void 0)?o:a.me().get("email"),billingContactLocale:null!=(c=null!=(l=t.model.get("paidAccount"))?l.contactLocale:void 0)?c:a.me().getPref("locale")},didntGetAuthStatus:function(){return g.loadOrganizationData(t.model.get("name")).done()},didGetAuthStatus:function(){return h.organizationBoardsView(t.model.get("name"),t.model.id)}})}}(this))}),e.prototype.cancel=function(t){var e,r;return r=t.reason,e=t.details,D("Organization View","Billing Page","Open Cancel Business Class Dialog"),V(this.model,r,e),w.cancel(this.model).then(function(t){return function(e){return D(t.model.typeName,"Successfully Canceled Paid Account"),t.model.set(e)}}(this))},e.prototype.renew=function(){return D("Organization View","Billing Page","Renew Expiring Business Class Subscription"),w.renew(this.model).then(function(t){return function(e){return D("Organization","Successfully Renewed Expiring Yearly Business Class Subscription"),t.model.set(e)}}(this)).done()},e.prototype.switchToYearly=function(t){return p.toggle("yearly billing switch",{elem:t,model:this.model,confirmBtnClass:"primary",fxConfirm:function(t){return function(e){return w.changeProduct(t.model,v.currentProducts.yearly).then(function(e){return D("Organization","Successfully Switched Business Class to Yearly Billing"),t.model.set(e)}).done()}}(this)})},e.prototype.changeBillingContactPopover=function(t){return D("Organization View","Billing Page","Open Change Billing Contact Info"),k.toggle({elem:t,view:new d({model:this.model,modelCache:this.modelCache})})},e.prototype.remove=function(){return x.unmountComponentAtNode(this.$reactRoot[0]),e.__super__.remove.apply(this,arguments)},e}(b)},{}],505:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};l=t("underscore"),o=t(276),n=t(275),i=t(278),s=t(281),a=t(506),u=t("react"),c=t(99),v=t(414)("org_filtering"),h=t(76),d=t(197),p=t(69),m=t(101),b=t("xtend"),y=t(34),g=["active","members","stars","alphabetical"],f=["tagFilter","sort"],e.exports=u.createClass({displayName:"OrganizationBoardsComponent",getInitialState:function(){var t;return l.defaults(null!=(t=this.props.initialFilterState)?t:{},{filter:"",tagFilter:null,sort:g[0],showOtherPrivateBoards:!1})},render:v.renderable(function(){return v.div(".boards-page-layout",function(t){return function(){return v.div(".boards-page-layout-sidebar",function(){return v.addElement(t.getFilterComponent())}),v.div(".boards-page-layout-list",function(){return v.addElement(t.getBoardsComponent())})}}(this))}),componentWillUpdate:function(t,e){return l.isEqual(l.pick(e,f),l.pick(this.state,f))?void 0:this.props.onFilterChange(l.pick(e,f))},shouldComponentUpdate:m,toggleTagFilter:function(t){return t===this.state.tagFilter?this.setState({tagFilter:null}):this.setState({tagFilter:t})},toggleShowOtherPrivateBoards:function(){return this.setState({showOtherPrivateBoards:!this.state.showOtherPrivateBoards})},isVisibleBoard:function(t){var e;return(!this.state.tagFilter||(e=this.state.tagFilter,w.call(t.idTags,e)>=0))&&(!this.state.filter||c.buildFuzzyMatcher(this.state.filter)(t.name))&&(this.state.showOtherPrivateBoards||!t.isOtherPrivate)},getBoardsComponent:function(){var t;return t={items:l.chain(this.props.boards.slice().sort(function(t,e){return t.name.localeCompare(e.name)})).sortBy(function(t){return function(e){switch(t.state.sort){case"alphabetical":return 0;case"active":return-e.dateLastActivity.valueOf();case"members":return-e.membershipCount;case"stars":return-e.starCount}}}(this)).map(function(t){return function(e){return b(e,{hidden:!t.isVisibleBoard(e),tagComponents:e.tags.map(function(e){return u.createElement(i,{text:e.name,key:e.id,selected:e.id===t.state.tagFilter,onClick:function(){return y("Organization View","Boards Page","Click Tag Under Board"),t.toggleTagFilter(e.id)}})}).concat(e.extraTagComponents)})}}(this)).map(function(t){return u.createElement(o,t)}).value()},null!=this.props.newBoard&&t.items.push(u.createElement(n,{newBoard:this.props.newBoard})),u.createElement(s,t)},getFilterComponent:function(){var t,e,r;return t=function(t,e){var r,n,o,i,s,a,u,c;for(u={},n=0,s=t.length;s>n;n++)for(o=t[n],c=e(o),i=0,a=c.length;a>i;i++)r=c[i],Object.hasOwnProperty.call(u,r)||(u[r]=0),u[r]++;return u},e=t(this.props.boards,d.get("idTags")),r={tags:this.props.tags.map(function(t){return function(r){var n;return{html:v.l("tag-with-count",{name:r.name,count:p(null!=(n=e[r.id])?n:0)}),onClick:t.toggleTagFilter.bind(t,r.id),selected:r.id===t.state.tagFilter}}}(this)),sorts:g.map(function(t){return function(e){return{html:h(["org sort",e]),onClick:function(){return y("Organization View","Boards Page","Select Sort",e),t.setState({sort:e})},selected:e===t.state.sort}}}(this)),onFilterChange:function(t){return function(e){return t.setState({filter:e})}}(this),onAddTag:this.props.addTag,filter:this.state.filter,showOtherPrivateBoards:this.state.showOtherPrivateBoards,canShowOtherPrivateBoards:l.find(this.props.boards,"isOtherPrivate"),toggleOtherPrivateBoards:d(this,"toggleShowOtherPrivateBoards"),key:this.id},u.createElement(a,r)}})},{}],506:[function(t,e,r){var n,o,i,s;n=t("react"),s=t(414)("org_filtering"),i={alphabetical:"Alphabetical",active:"Most Active",members:"Number of Members",stars:"Number of Stars"},o=function(t,e,r){var n,o,i;return i=null!=r?r:{},n=i.hasCloseableItems,o=i.onAddTag,s.ul(".boards-page-navigation-list",function(){var r,i,a,u,c,l;for(s.li(".boards-page-navigation-list-header",function(){return s.text(e)}),i=0,a=t.length;a>i;i++)c=t[i],r=c.html,l=c.selected,u=c.onClick,s.li(".boards-page-navigation-list-item",function(){var t;return t={"boards-page-navigation-list-item-link":!0,"mod-closeable":n,"is-active":l},s.b(u,{class:s.classify(t)},function(){return s.raw(r),n&&l?s.icon("close",{class:"boards-page-navigation-list-item-link-icon"}):void 0})});null!=o&&s.li(".boards-page-navigation-list-item",function(){return s.b(o,{class:"boards-page-navigation-list-item-link mod-quiet"},function(){return s.format("create-tag")})})})},e.exports=n.createClass({displayName:"OrganizationBoardsFilterComponent",render:s.renderable(function(){var t,e,r,n,i,a,u,c,l;return i=this.props,e=i.filter,u=i.sorts,c=i.tags,n=i.onFilterChange,r=i.onAddTag,a=i.showOtherPrivateBoards,t=i.canShowOtherPrivateBoards,l=i.toggleOtherPrivateBoards,s.div(".boards-page-navigation",function(){return s.input(".boards-page-navigation-input",{type:"text",placeholder:s.l("search-for-boards"),value:e,onChange:function(t){return n(t.target.value)}}),o(u,s.l("sort")),c.length?o(c,s.l("filter-by-tag"),{hasCloseableItems:!0,onAddTag:r}):(s.p(".quiet.boards-page-navigation-explainer",function(){return s.format("tags-explanation")}),s.b(r,{class:"quiet-button"},function(){return s.format("create-tag")})),t?s.ul(".boards-page-navigation-list",function(){s.li(".boards-page-navigation-list-header",function(){return s.format("visibility")}),s.li(".boards-page-navigation-list-item",function(){var t;return t={"boards-page-navigation-list-item-link":!0,"mod-closeable":!0,"is-active":a},s.b(l,{class:s.classify(t)},function(){return s.format("show other private boards"),a?s.icon("close",{class:"boards-page-navigation-list-item-link-icon"}):void 0})})}):void 0})})})},{}],507:[function(t,e,r){var n,o,i,s,a,u,c=function(t,e){function r(){this.constructor=t}for(var n in e)l.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},l={}.hasOwnProperty;o=t(99),i=t(421),s=t("underscore"),u=t(418),a=t(76),e.exports=n=function(t){function e(){
return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.viewTitleKey="boards for member",e.prototype.viewTitleArguments=function(){return{memberName:this.model.get("fullName")}},e.prototype.initialize=function(){this.org=this.options.parent},e.prototype.render=function(){var t;return t=this.model.toJSON(),t.boards=this.org.boardList.models.filter(function(t){return function(e){return s.contains(e.memberList.models,t.model)&&!e.get("closed")}}(this)).map(function(t){return function(e){var r;return r=e.toJSON(),r.memberType=a(["member types",e.getMemberType(t.model)]),r.url=e.getUrl(),r}}(this)),this.$el.html(u.fill("org_boards_for_member",t)),this},e}(i)},{}],508:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j,S,B,M,T,O,L=function(t,e){function r(){this.constructor=t}for(var n in e)P.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},P={}.hasOwnProperty,A=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};C=t("underscore"),n=t("jquery"),o=t(491),i=t(22),c=t(276),a=t(275),u=t(252),l=t(277),d=t(281),p=t(494),s=t(395),h=t(319),m=t(61),f=t(505),v=t(518),y=t(435),b=t("react"),w=t(413),_=t(88),k=t(99),M=t(418),S=t(76),x=t(197),T=t(34),B=t(414)("org_filtering"),j=t(69),O=t("xtend"),e.exports=g=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return L(e,t),e.prototype.initialize=function(){e.__super__.initialize.apply(this,arguments),this.listenTo(this.model,"change",this.renderReactSection),this.listenTo(this.model.boardList,"change:idTags change:name",this.renderReactSection),this.listenTo(this.model.tagList,"add remove reset change",this.renderReactSection),this.listenTo(i.me().boardStarList,"add remove reset",this.frameDebounce(this.renderReactSection))},e.prototype.events={"click .js-close-intro-helper":"closeBCIntro"},e.prototype.isFullWidth=function(){return this.model.isFeatureEnabled("tags")},e.prototype.boardToModelForBoardItem=function(t){var e,r;return e={id:t.id,name:t.get("name"),idTags:t.getIdTags(),isOtherPrivate:null==i.me().boardList.get(t.id)&&"private"===t.getPref("permissionLevel"),membershipCount:t.getMembershipCount(),starCount:t.getStarCount("organization"),dateLastActivity:new Date(null!=(r=t.get("dateLastActivity"))?r:k.idToDate(t.id)),background:this.backgroundObjForBoard(t),showStar:i.isLoggedIn(),isStarred:null!=i.me().boardStarList.getBoardStar(t.id),relUrl:t.getUrl(),onStarClick:function(t){return function(t){var e;e=i.me().boardStarList,null==e.getBoardStar(t)?e.starBoard(t):e.unstarBoard(t)}}(this),badgeComponents:this.model.isFeatureEnabled("tags")?this.badgeComponentsForBoard(t):[],key:t.id}},e.prototype.boardToModelForBoardItemWithTags=function(t){return O(this.boardToModelForBoardItem(t),{tags:this.tagsForBoard(t),extraTagComponents:[b.createElement(l,{onClick:this.addTagToBoard.bind(this,t),key:t.id,id:t.id})]})},e.prototype.boardToModelForBoardItemWithNoTags=function(t){return O(this.boardToModelForBoardItem(t),{tagComponents:[]})},e.prototype.backgroundObjForBoard=function(t){var e,r,n,o;return C.extend({brightness:t.getPref("backgroundBrightness")},t.getPref("backgroundTile")?{image:t.getPref("backgroundImage"),tiled:!0}:(e=null!=(r=null!=(n=k.smallestPreviewBiggerThan(t.getPref("backgroundImageScaled"),400,200))?n.url:void 0)?r:t.getPref("backgroundImage"))?{image:e,tiled:!1}:{color:null!=(o=t.getPref("backgroundColor"))?o:t.getClientBackgroundColor("blue")})},e.prototype.tagsForBoard=function(t){return this.model.tagList.models.filter(function(e){var r;return r=e.id,A.call(t.getIdTags(),r)>=0}).map(function(t){return{id:t.id,name:t.get("name")}})},e.prototype.addTagToBoard=function(t,e){return T("Organization View","Boards Page","Open Tag Select Menu"),y.toggle({elem:e,view:p,options:{model:t,org:this.model,modelCache:this.modelCache}})},e.prototype.badgeComponentsForBoard=function(t){var e,r,n,o,i,a;return o=t.getStarCount("organization"),r=t.getMembershipCount(),e=null!=(n=t.get("dateLastActivity"))?n:k.idToDate(t.id),i=s.getPermLevelIconClassForBoard(t),a=s.getPermLevelAltTextForBoard(t),C.compact([b.createElement(u,{icon:i,title:a,iconClass:"is-vis-color",key:["vis",t.id].join("-")}),b.createElement(u,{icon:"member",text:j(r),title:B.l("members"),key:["member",t.id].join("-")}),o?b.createElement(u,{icon:"star",text:j(o),title:B.l("members-who-starred-board"),key:["star",t.id].join("-")}):void 0,b.createElement(u,{icon:"activity",text:m.toDateString(e),title:B.l("last-activity"),key:["activity",t.id].join("-")})])},e.prototype.renderMainContent=function(){var t;return t=this.model.toJSON(),t.hasCSVExport=this.model.isFeatureEnabled("csvExport"),t.hasGoldMembers=this.model.isFeatureEnabled("goldMembers"),t.hasBusinessClass=this.model.isPremium(),t.isBusinessClassAdmin=this.model.isPremium()&&this.model.owned(),this.$(".js-content").empty(),t.isBusinessClassAdmin&&!i.me().isDismissed("BCIntro-"+this.model.id)&&this.$(".js-content").append(M.fill("org_bc_intro",t)),null==this.$reactRoot&&(this.$reactRoot=n("<div></div>")),this.$(".js-content").append(this.$reactRoot),this.renderReactSection(),this.setActiveView(".js-org-profile"),this},e.prototype.renderReactSection=function(){return b.render(this.getReactRoot(),this.$reactRoot[0]),this},e.prototype.localStorageKey=function(){return"orgFilteringState-"+this.model.id},e.prototype.saveFilter=function(t){return _.set(this.localStorageKey(),t)},e.prototype.getReactRoot=function(){return b.createElement(w,{},this.model.isFeatureEnabled("tags")?this.getFilterableBoardsComponent():this.getBoardsComponent())},e.prototype.getFilterableBoardsComponent=function(){var t;return t={key:this.model.id,id:this.model.id,tags:this.model.tagList.toJSON(),boards:this.getBoardItemsWithTags(),newBoard:i.me().canAddBoardsTo(this.model)?this.newBoard.bind(this):void 0,addTag:x(this,"addTag"),onFilterChange:x(this,"saveFilter"),initialFilterState:_.get(this.localStorageKey())},b.createElement(f,t)},e.prototype.getBoardsComponent=function(){var t;return t={items:this.getBoardItemsWithNoTags().map(x.choke(1,b,"createElement",c))},i.me().canAddBoardsTo(this.model)&&t.items.push(b.createElement(a,{newBoard:this.newBoard.bind(this)})),b.createElement(d,t)},e.prototype.addTag=function(t){return T("Organization View","Boards Page","Open Create Tag Menu"),y.toggle({elem:t,view:o,options:{model:this.model,modelCache:this.modelCache}})},e.prototype.newBoard=function(t){return T("Organization View","Boards Page","Open Create Board Menu"),y.toggle({elem:t,view:h,options:{model:this.model,modelCache:this.modelCache}})},e.prototype.getVisibleBoards=function(){return this.model.boardList.models.filter(function(t){return!t.get("closed")})},e.prototype.getBoardItemsWithTags=function(){return this.getVisibleBoards().map(x(this,"boardToModelForBoardItemWithTags"))},e.prototype.getBoardItemsWithNoTags=function(){return this.getVisibleBoards().map(x(this,"boardToModelForBoardItemWithNoTags"))},e.prototype.remove=function(){return b.unmountComponentAtNode(this.$reactRoot[0]),e.__super__.remove.apply(this,arguments)},e.prototype.closeBCIntro=function(){i.me().dismiss("BCIntro-"+this.model.id),T("Organization View","Profile Page","Dismiss BC Intro Helper"),this.renderMainContent(),k.scrollToTop()},e}(v)},{}],509:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v=function(t,e){function r(){this.constructor=t}for(var n in e)y.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},y={}.hasOwnProperty;n=t(429),o=t(178),i=t(61),s=t(78),u=t(518),c=t(99),l=t("underscore"),d=t(30),h=t(418),m=t(34),p=t("moment"),f=t(91),g=t("xtend"),e.exports=a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return v(e,t),e.prototype.initialize=function(){return this.listenTo(this.model,"change:exports",this.renderExports)},e.prototype.events={"click .js-create-new-export":"clickCreateNewExport","click .js-download-export":"downloadExport"},e.prototype.renderMainContent=function(){var t;return t={},t.hasCSV=this.model.isFeatureEnabled("csvExport"),this.$(".js-content").html(h.fill("org_export",t,{editable:this.model.editable()})),this.renderExports(),this.setActiveView(".js-org-export"),this},e.prototype.renderExports=function(){var t,e,r,n,o,a,u,c;if(e=this.model.toJSON({prefs:!0}),t=this.$(".js-list-exports").empty(),l.isEmpty(e.exports))n=h.fill("org_export_empty");else for(n="",u=e.exports,o=0,a=u.length;a>o;o++)r=u[o],e=l.clone(r),e.size=s.bytes(e.size),e.time=p(i.parse(e.startedAt)).calendar(),e.generating=null==e.exportUrl,c=f(["exports",e.status.stage]),null!=c?e.status=g(e.status,{stage:c}):d(new Error("Missing export stage for "+e.status.stage)),n+=h.fill("org_export_item",e);return t.append(n),this},e.prototype.export=function(t){return o({url:"/1/organizations/"+this.model.get("name")+"/exports",method:"post",data:{attachments:t},success:function(e){return function(r){return m("Organization","Export",t?"With Attachments":"Without Attachments"),null!=r?(e.model.get("exports").unshift(r),e.model.trigger("change:exports")):void 0}}(this),error:function(t){return function(t,e,r,o){return t.responseText.indexOf("in progress")>-1?n.show("ongoing org export","error","alert",5e3):o()}}(this)})},e.prototype.clickCreateNewExport=function(t){return c.stop(t),this.$("#includeAttachments").is(":checked")?this.export(!0):this.export(!1)},e.prototype.downloadExport=function(t){m("Organization","Download Export")},e}(u)},{}],510:[function(t,e,r){var n,o,i,s,a,u=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;o=t(88),i=t(421),s=t(418),a=t(34),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.viewTitleKey="link google apps domain",e.prototype.events={"click .js-link":"link"},e.prototype.render=function(){var t;return t=this.model.toJSON(),this.$el.html(s.fill("org_link_ga_helper",t,{editable:this.model.editable()})),this},e.prototype.link=function(){a("Organization View","Members Page","Google Apps Marketplace link"),o.enabled()&&o.set("idOrganizationLinking",this.model.id)},e}(i)},{}],511:[function(t,e,r){var n,o,i,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;o=t(421),i=t(418),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.tagName="li",e.prototype.render=function(){var t;return t=this.model.toJSON({prefs:!0,url:!0}),t.visIconClass=this.model.getPermLevel(),t.hasBusinessClass=this.model.isPremium(),this.$el.html(i.fill("organization_list_item",t)),this},e}(o)},{}],512:[function(t,e,r){var n,o,i,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;n=t("jquery"),o=t(511),s=t(421),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.tagName="ul",e.prototype.className="org-list",e.prototype.initialize=function(t){this.listenTo(this.model.organizationList,{"add remove reset change:closed":this.frameDebounce(this.render)})},e.prototype.render=function(){var t;return this.$el.empty(),t=this.model.getSortedOrgs().map(function(t){return function(e){return t.subview(o,e)}}(this)),this.appendSubviews(t),this},e}(s)},{}],513:[function(t,e,r){var n,o,i,s,a,u,c,l,d=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty,h=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};n=t(22),o=t(5),i=t(78),s=t(467),u=t(518),l=t(418),c=t(76),e.exports=a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return d(e,t),e.prototype.renderMainContent=function(){var t,e;return this.model.isFeatureEnabled("orgCards")?(t=this.model.toJSON({prefs:!0}),e=t.name,t.memberData=this.options.member.toJSON(),t.memberData.bioHtml=i.markdownAsHtml(this.options.member.get("bio"),{textData:this.options.member.get("bioData")}),this.setActiveView(".js-org-members"),t.members=[],this.$(".js-content").html(l.fill("org_member_cards",t,{editable:this.model.editable()},{member:l.member,member_profile:l.member_profile_info})),this.defer(function(t){return function(){return t.renderCards()}}(this)),this):o.displayErrorPage({errorType:"notFound"})},e.prototype.renderCards=function(){var t,e,r,o,i,a,u,d;for(e=this.modelCache.find("Board",function(t){return function(e){var r;return e.idOrganization===(null!=(r=t.model)?r.idOrganization:void 0)&&!e.get("closed")}}(this)),i=!1,a=0,u=e.length;u>a;a++)t=e[a],r=this.modelCache.find("Card",function(e){return function(r){var n;return r.get("idBoard")===t.id&&!r.get("closed")&&(n=e.options.member.id,h.call(r.get("idMembers"),n)>=0)}}(this)),r.length&&(i=!0,this.$(".js-cards").append(this.subview(s,t,{hideOrg:!0}).render(r).el));return i||(d=c(this.model.isPremOrgAdmin(n.me())?"no assigned org cards.at all":"no assigned org cards.that you can see"),o={message:d,classes:"gutter",style:"padding: 60px 10px;"},this.$(".js-content").append(l.fill("empty_list",o))),this},e}(u)},{}],514:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v=function(t,e){function r(){this.constructor=t}for(var n in e)y.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},y={}.hasOwnProperty;n=t(429),o=t(178),i=t(22),s=t(61),a=t(501),u=t(480),l=t(435),d=t(519),p=t(99),h=t(421),f=t(418),g=t(34),m=t(76),e.exports=c=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return v(e,t),e.prototype.className="member-list-item-detail u-clearfix",e.prototype.initialize=function(t){this.org=t.org,this.makeDebouncedMethods("render"),this.listenTo(this.model,"change",this.renderDebounced),this.listenTo(this.org,"change:memberships",this.renderDebounced)},e.prototype.events={"click .js-change-role":"changeRole","click .js-remove-or-deactivate":"removeOrDeactivate","click .js-reactivate":"reactivateMember","click .js-invite-to-org":"inviteToOrg","click .js-view-activity":"viewActivity","click .js-hide-member":"hideMember","click .js-unhide-member":"unhideMember"},e.prototype.render=function(){var t,e;return e=this.org.getMemberType(this.model),t=this.model.toJSON(),t.canRemove=this.model.getMembershipData(this.org).canRemove,t.orgMemberType=m(["member types",e]),t.isMe=i.isMe(this.model),t.ownsOrg=this.org.owned(),t.orgIsBC=this.org.isPremium(),t.isDeactivated="deactivated"===e,t.isAppsMember=null!=this.model.get("gMail"),t.isOrgMember="public"!==e,t.isVirtual="virtual"===e,t.isOrganizationAdmin="admin"===e,t.showGoogleApps=this.org.isLinkedToGoogleApps()&&this.org.editable()&&this.googleAppsLoaded,this.org.owned()&&(t.allowTypeChange="deactivated"!==e&&"unconfirmed"!==e&&"virtual"!==e,t.allowReactivate="deactivated"===e,t.showActivity="virtual"!==e),this.$el.html(f.fill("member_list_item_detail",t,{},{member:f.member})),this.$el.removeClass("deactivated not-apps-member not-org-member"),t.isDeactivated&&this.$el.addClass("deactivated"),t.showGoogleApps&&(t.isAppsMember||this.$el.addClass("not-apps-member"),t.isOrgMember||this.$el.addClass("not-org-member")),s.update(this.el),this.$el.toggleClass("hide",!t.isOrgMember&&this.model.get("hidden")&&!this.showingHiddenMembers),this},e.prototype.unhideMember=function(){return this.model.get("gMail")?(this.model.set("hidden",!1),this.org.trigger("unhideMember"),o({url:"/1/organization/"+this.org.id+"/hiddenGoogleAppsMembers",type:"delete",data:{gMail:this.model.get("gMail")}})):void 0},e.prototype.hideMember=function(){return this.model.get("gMail")?(this.model.set("hidden",!0),this.org.trigger("hideMember"),o({url:"/1/organization/"+this.org.id+"/hiddenGoogleAppsMembers",type:"post",data:{gMail:this.model.get("gMail")}})):void 0},e.prototype.inviteToOrg=function(t){return g("Organization View","Members Page","Add Google Apps Member"),o(this.model.id?{url:"/1/organization/"+this.org.id+"/members/"+this.model.id,type:"put",data:{type:"normal"},dataType:"json",error:function(t){return function(t,e){n.showLiteralText(t.responseText,"error","alert",3e3),g("Invitations","Error: "+t.responseText)}}(this)}:{url:"/1/organizations/"+this.org.id+"/members",type:"put",data:{fullName:this.model.get("fullName"),email:this.model.get("gMail"),type:"normal"},dataType:"json",success:function(t){return function(){return n.show("invitation sent","info","alert",3e3)}}(this),error:function(t){return function(t,e){n.showLiteralText(t.responseText,"error","alert",3e3),g("Invitations","Error: "+t.responseText)}}(this)})},e.prototype.changeRole=function(t){p.stop(t),g("Organization View","Members Page","Change Role Button"),l.toggle({elem:this.$(".js-change-role"),view:new u({model:this.model,parent:this.org,modelCache:this.modelCache})})},e.prototype.viewActivity=function(t){p.stop(t),g("Organization View","Members Page","View Member Activity"),l.toggle({elem:this.$(".js-view-activity"),view:new a({model:this.model,org:this.org,modelCache:this.modelCache})})},e.prototype.removeOrDeactivate=function(t){this.$(".js-remove-or-deactivate").hasClass("disabled")||(p.stop(t),g("Organization View","Members Page","Remove or Deactivate Member Button"),l.toggle({elem:this.$(".js-remove-or-deactivate"),view:new d({model:this.model,org:this.org,modelCache:this.modelCache})}))},e.prototype.reactivateMember=function(t){p.stop(t),g("Organization View","Members Page","Reactivate"),o({url:"/1/organizations/"+this.org.id+"/members/"+this.model.id+"/deactivated",type:"PUT",data:{value:!1}})},e}(h)},{}],515:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g=function(t,e){function r(){this.constructor=t}for(var n in e)v.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},v={}.hasOwnProperty,y=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};n=t("jquery"),o=t(178),i=t(500),s=t(166),a=t(510),u=t(514),l=t(518),d=t(435),p=t(99),h=t("underscore"),m=t(418),f=t(34),e.exports=c=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return g(e,t),e.prototype.initialize=function(){e.__super__.initialize.apply(this,arguments),this.getGoogleAppsData(),this.listenTo(this.model,{"change:memberships":this.frameDebounce(this.updateMembers),hideMember:this.frameDebounce(this.renderMainContent),unhideMember:this.frameDebounce(this.renderMainContent)})},e.prototype.events={"keyup .js-search":"searchMembers","click .js-link-google-apps":"startLinkingGoogleApps","click .js-show-all":"showAll","click .js-hide-hidden":"hideHidden","click .js-manage-members":"openManageMembers"},e.prototype.renderMainContent=function(){var t,e;return t=this.model.toJSON({prefs:!0}),e=t.name,t.canLinkGoogleApps=this.model.isFeatureEnabled("googleApps")&&(!this.model.get("prefs").associatedDomain||this.googleAppsFetchFailed)&&this.model.editable(),t.canShowAll=this.model.isFeatureEnabled("googleApps")&&null!=this.mappingsData&&h.find(this.mappingsData,function(t){return function(e){var r;return(null!=(r=t.modelCache.findOne("Member","gMail",e.gMail))?r.get("hidden"):void 0)||e.hidden}}(this)),t.showingAll=this.showingAll,this.$(".js-content").html(m.fill("org_members",t,{editable:this.model.editable()})),this.setActiveView(".js-org-members"),this.renderMembers(this.getMembers()),this},e.prototype.showAll=function(){return this.showingAll=!0,this.renderMainContent()},e.prototype.hideHidden=function(){return this.showingAll=!1,this.renderMainContent()},e.prototype.updateMembers=function(){return this.renderMembers(this.getMembers()),this.getGoogleAppsData()},e.prototype.getMembers=function(){var t,e,r,n,o,i,a,u,c,l,d,p,m,f,g;if(p=h.clone(this.model.memberList.models),null!=this.mappingsData)for(f=this.mappingsData,n=0,a=f.length;a>n;n++)g=f[n],null!=g.idMember?(d=this.modelCache.get("Member",g.idMember),null==d?d=new s({id:g.idMember,fullName:g.fullName,gMail:g.gMail,initials:g.initials,hidden:g.hidden},{modelCache:this.modelCache}):d.set("gMail",g.gMail)):(d=this.modelCache.findOne("Member","gMail",g.gMail),null==d&&(d=new s({fullName:g.fullName,gMail:g.gMail,initials:g.initials,hidden:g.hidden},{modelCache:this.modelCache}),g.idMember=d.cid)),y.call(p,d)<0&&p.push(d);for(m=h.sortBy(p,function(t){return t.get("fullName")}),e=[],o=0,u=m.length;u>o;o++)l=m[o],"deactivated"===this.model.getMemberType(l)&&e.push(l);for(r=[],i=0,c=m.length;c>i;i++)l=m[i],"virtual"===this.model.getMemberType(l)&&r.push(l);return t=h.difference(m,r,e),t.concat(e).concat(r)},e.prototype.renderMembers=function(t){var e,r,n,o;return e=this.$(".js-member-list").empty(),0===t.length?e.append('<p class="quiet gutter" style="padding: 15px 0;">No results.</p>'):(n=function(){var e,n,i;for(i=[],e=0,n=t.length;n>e;e++)r=t[e],o=this.subview(u,r,{org:this.model}),o.googleAppsLoaded=null!=this.mappingsData,o.showingHiddenMembers=this.showingAll,i.push(o);return i}.call(this),this.appendSubviews(n,e)),this},e.prototype.startLinkingGoogleApps=function(t){return p.stop(t),f("Organization View","Members Page","Start Linking Google Apps Domain"),n(t.target).hasClass("disabled")?(p.stop(t),!1):d.toggle({elem:this.$(".js-link-google-apps"),view:new a({model:this.model,modelCache:this.modelCache})})},e.prototype.getGoogleAppsData=function(){return this.model.isLinkedToGoogleApps()&&this.model.editable()?o({url:"/1/organizations/"+this.model.id+"/googleApps/mappings",success:function(t){return function(e){return t.mappingsData=e,t.renderMainContent()}}(this),error:function(t){return function(){return t.$(".js-google-apps-linker").show(),t.googleAppsFetchFailed=!0}}(this)}):void 0},e.prototype.searchMembers=function(t){var e,r,o,i,s,a,u,c,l;if(a=n(this.el).find(".js-search").val().trim().toLowerCase(),this.oldTerm!==a){for(this.oldTerm=a,c=a.split(/\s+/),l=h.map(c,function(t,e){return e===c.length-1?RegExp("^"+p.escapeForRegex(t),"i"):RegExp("^"+p.escapeForRegex(t)+"$","i")}),i=[],s=this.getMembers(),e=0,r=s.length;r>e;e++)o=s[e],u=p.getMemNameArray(this.modelCache,o),h.all(l,function(t){return h.find(u,function(e){return t.test(e)})})&&i.push(o);this.renderMembers(i)}},e.prototype.openManageMembers=function(t){p.stop(t),f("Organization View","Members Page","Open Manage Members"),d.toggle({elem:this.$(".js-manage-members"),view:i,options:{model:this.model,modelCache:this.modelCache}})},e}(l)},{}],516:[function(t,e,r){var n,o,i,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;n=t("jquery"),i=t(421),s=t(418),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.viewTitleKey="board creation restriction",e.prototype.initialize=function(){return this.listenTo(this.model,"change:prefs",this.frameDebounce(this.render))},e.prototype.events={"click a":"changeRestriction"},e.prototype.render=function(){var t;return t=this.model.toJSON({prefs:!0}),this.$el.html(s.fill("org_prefs_vis",t)),this},e.prototype.changeRestriction=function(t){var e,r,o;return e=n(t.target),r="boardVisibilityRestrict/"+e.closest("ul").attr("data-vis"),o=e.attr("data-restriction"),this.model.setPref(r,o)},e}(i)},{}],517:[function(t,e,r){var n,o,i,s,a,u,c,l=function(t,e){function r(){this.constructor=t}for(var n in e)d.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},d={}.hasOwnProperty;n=t("jquery"),o=t(178),i=t(14),u=t(421),c=t(418),a=t(99),e.exports=s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.viewTitleKey="org membership restrictions",e.prototype.initialize=function(){return this.listenTo(this.model,"change:prefs",this.frameDebounce(this.renderRestrictions))},e.prototype.events={"click .js-form-submit-input":"addRestriction","submit .js-form":"addRestriction","click .js-restricted-address":"removeRestriction"},e.prototype.render=function(){var t,e;return t=this.model.toJSON({prefs:!0}),t.hasRestrictions=(null!=(e=this.model.get("prefs").orgInviteRestrict)?e.length:void 0)>0,this.$el.html(c.fill("org_prefs_restrict_invites",t)),this.renderRestrictions(),this},e.prototype.renderRestrictions=function(){var t,e,r,n,o,i;if(t=this.$(".js-list").empty(),(null!=(n=this.model.get("prefs").orgInviteRestrict)?n.length:void 0)>0){for(o=this.model.get("prefs").orgInviteRestrict,e=0,r=o.length;r>e;e++)i=o[e],t.append(c.fill("org_pref_restriction",{restriction:i}));return this.$(".js-restriction-list").show()}return this.$(".js-restriction-list").hide()},e.prototype.addRestriction=function(t){var e;return a.stop(t),e=this.$(".js-input-restricted").val(),/^@/.test(e)?e="*"+e:-1===e.indexOf("@")&&e.indexOf(".")>0&&(e="*@"+e),this.$(".js-loading").removeClass("hide"),o({url:"/1/organizations/"+this.model.id+"/prefs/orgInviteRestrict",type:"put",data:{value:e},dataType:"json",success:function(t){return function(){return t.$(".js-input-restricted").val("").select().focus(),t.$(".js-loading").addClass("hide"),t.$(".js-errors").hide()}}(this),error:function(t){return function(e){return t.$(".js-loading").addClass("hide"),t.$(".js-errors").text(e.responseText).show()}}(this)})},e.prototype.removeRestriction=function(t){var e;return e=n(t.target).closest("a").attr("data-pattern"),n(t.target).closest("li").remove(),o({url:"/1/organizations/"+this.model.id+"/prefs/orgInviteRestrict",type:"delete",data:{value:e},dataType:"json",success:function(t){return function(){return t.$(".js-input-restricted").select().focus(),t.$(".js-errors").hide()}}(this)})},e}(u)},{}],518:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b=function(t,e){function r(){this.constructor=t}for(var n in e)w.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},w={}.hasOwnProperty;o=t(22),i=t(496),s=t(78),n=t(53),u=t(435),c=t(415),l=t(99),d=t(421),m=t(81),g=t(418),v=t(34),p=t(76),h=t(30),y=t("xtend"),f=t(715),e.exports=a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return b(e,t),m(c,e),e.prototype.initialize=function(){this.makeDebouncedMethods("render"),this.listenTo(this.model,"change:logoHash change:products change:paidAccount change:prefs",this.render),this.listenTo(this.model,"change:name change:displayName change:website change:desc",this.renderDetails),this.listenTo(this.model,"change:memberships",this.membershipChange),this.listenTo(this.model.memberList,"add remove reset",this.renderDebounced),this.memberTypeMe=this.model.getMemberType(o.me())},e.prototype.events={"click .js-change-org-logo":"changeLogoInProfile","click .js-edit-profile":"editProfile","click .js-submit-profile":"submitProfile","submit .js-profile-form":"submitProfile","click .js-cancel-edit-profile":"cancelEditProfile","click .tabbed-pane-nav-item-button:not(.active)":"switchSection"},e.prototype.isFullWidth=function(){return!1},e.prototype.render=function(){var t,e,r;return t=this.model.toJSON({prefs:!0,url:!0,premium:!0}),this.model.editable()&&(r=null!=(e=t.paidAccount)?e.standing:void 0,t.hasAccount=n.hasAccount(r),t.accountActive=n.isActive(t.paidAccount),t.accountProblem=n.isProblem(r),t.accountInactive=n.isInactive(r)),t.isInOrg=this.model.isMember(o.me()),t.hasBusinessClass=this.model.isPremium(),t.isOrgAdmin=this.model.owned(),t.isBusinessClassAdmin=this.model.isPremium()&&this.model.owned(),t.pLevelAltText=p(["org perms",this.model.getPermLevel(),"text"]),t.pLevelDisplayText=p(["org perms",this.model.getPermLevel(),"name"]),t.websiteHref=l.sanitizeWebAddress(t.website),t.descriptionHtml=s.markdownAsHtml(t.desc,{textData:t.descData}),t.isFullWidth=this.isFullWidth(),t.editable=this.model.editable(),this.$el.html(f(t)),this.renderDetails(),this.renderMainContent(),this},e.prototype.renderDetails=function(){var t;return t=this.model.toJSON({prefs:!0,url:!0,premium:!0}),t.hasBusinessClass=this.model.isPremium(),t.isOrgAdmin=this.model.owned(),t.pLevelAltText=p(["org perms",this.model.getPermLevel(),"text"]),t.pLevelDisplayText=p(["org perms",this.model.getPermLevel(),"name"]),t.websiteHref=l.sanitizeWebAddress(t.website),t.descriptionHtml=s.markdownAsHtml(t.desc,{textData:t.descData}),this.$(".js-current-details").empty().append(g.fill("org_detail_profile_info",t,{editable:this.model.editable()})),this.model.editable()&&this.$(".js-profile-form").empty().append(g.fill("org_detail_profile_edit",t,{editable:this.model.editable()})),this},e.prototype.delegateEvents=function(t){return e.__super__.delegateEvents.call(this,y(e.prototype.events,t||this.events))},e.prototype.membershipChange=function(){var t;return t=this.model.getMemberType(o.me()),t!==this.memberTypeMe?(this.memberTypeMe=t,this.render()):void 0},e.prototype.setActiveView=function(t){this.$(".tabbed-pane-nav-item-button").removeClass("active"),this.$(t).addClass("active")},e.prototype.changeLogoInProfile=function(t){l.stop(t),v("Organization View","Open Change Logo Menu from Profile Image"),u.toggle({elem:this.$(".js-change-org-logo"),view:new i({model:this.model,modelCache:this.modelCache})})},e.prototype.editProfile=function(t){l.stop(t),this.$(".js-current-details").addClass("hide"),this.$(".js-profile-form").removeClass("hide"),v("Organization View","Click Edit Profile")},e.prototype.cancelEditProfile=function(t){l.stop(t),this.$(".js-current-details").removeClass("hide"),this.$(".js-profile-form").addClass("hide"),this.$(".js-profile-form")[0].reset(),v("Organization View","Cancel Edit Profile")},e.prototype.errorText=function(t){var e;return e=function(){switch(t.trim().toLowerCase()){case"organization short name is taken":return"orgname taken";case"organization short name must be at least 3 characters":return"orgname too short";case"organization short name is invalid: only lowercase letters, underscores, and numbers are allowed":return"orgname invalid";case"display name must be at least 1 character":return"display name too short";default:return h(new Error("Unknown server error message '"+t+"'")),"unknown"}}(),p(["org profile error",e])},e.prototype.submitProfile=function(t){var e,r,n,o,i,s,a,u;if(l.stop(t),!this.disabled){for(e={},a=["displayName","name","website","desc"],n=0,i=a.length;i>n;n++)r=a[n],e[r]=this.$(".js-profile-form [name="+r+"]").val();for(e.name=e.name.toLowerCase().replace(/[^a-z0-9_]/g,""),u=["displayName","website"],o=0,s=u.length;s>o;o++)r=u[o],e[r]=e[r].trim();this.disableSubmit(),this.model.update(e,{waitForServer:!0},function(t){return function(e){t.disabled=!1,t.$(".js-submit-profile").removeAttr("disabled"),e?t.$(".js-profile-form-error").removeClass("hide").text(t.errorText(e.message)):(t.$(".js-profile-form-error").addClass("hide"),t.cancelEditProfile(),v("Organization View","Changed Name and Details"))}}(this))}},e.prototype.disableSubmit=function(){this.disabled=!0,this.$(".js-submit-profile").attr("disabled","disabled")},e}(d)},{}],519:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m=function(t,e){function r(){this.constructor=t}for(var n in e)f.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},f={}.hasOwnProperty;n=t("jquery"),o=t(178),i=t(22),s=t(5),a=t(435),c=t(99),l=t(421),p=t(418),h=t(34),d=t(76),e.exports=u=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return m(e,t),e.prototype.viewTitleKey=function(){return this.org.isPremium()?"remove or deactivate member":"remove member"},e.prototype.initialize=function(){return this.org=this.options.org},e.prototype.events={
"click .js-deactivate":"deactivateMember","click .js-soft-remove":"removeMember"},e.prototype.render=function(){var t,e;return e=this.org.getMemberType(this.model),t=this.model.toJSON(),t.orgMemberType=d(["member types",e]),t.ownsOrg=this.org.owned(),t.orgIsBC=this.org.isPremium(),t.isDeactivated="deactivated"===e,t.isOrgMember="public"!==e,t.isVirtual="virtual"===e,t.canDeactivate=this.org.isPremOrgAdmin(i.me())&&!t.isVirtual&&!t.isDeactivated,t.isMe=i.isMe(this.model),this.$el.html(p.fill("org_remove_or_deactivate_member",t)),this},e.prototype._checkIfLostVisibility=function(){return i.isMe(this.model)?s.navigate("/",{trigger:!0}):void 0},e.prototype.deactivateMember=function(t){c.stop(t),o({url:"/1/organizations/"+this.org.id+"/members/"+this.model.id+"/deactivated",type:"PUT",data:{value:!0},success:function(t){return function(){return h("Organization","Deactivate Member From Organization"),a.hide(),t._checkIfLostVisibility()}}(this)})},e.prototype.removeMember=function(t){var e;c.stop(t),n(this.el).find("#hardRemove").is(":checked")||"deactivated"===this.org.getMemberType(this.model)?(e="Hard Remove",this.org.memberList.remove(this.model,{mass:!0})):(e="Soft Remove",this.org.memberList.remove(this.model)),h("Organization","Remove Member From Organization",e),a.hide(),this._checkIfLostVisibility()},e}(l)},{}],520:[function(t,e,r){var n,o,i,s,a,u=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;n=t(435),i=t(421),s=t(416)("org_filtering"),a=s.renderable(function(t){var e,r;return r=t.name,e=t.isDeleteable,s.form(".js-add-tag-form",function(){return s.label(function(){return s.format("name"),s.input(".js-add-tag-name.js-autofocus",{type:"text",value:r})}),s.input(".primary",{type:"submit",value:s.l("save")}),e?s.button(".negate.u-float-right.js-delete-tag",{type:"button"},function(){return s.format("delete")}):void 0})}),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.events={"submit .js-add-tag-form":function(t){var e;t.preventDefault(),e=this.$(".js-add-tag-name").val().trim(),this.onSubmit(e)},"click .js-delete-tag":function(){this.onDelete()}},e.prototype.getName=function(){return""},e.prototype.render=function(){return this.$el.html(a({name:this.getName(),isDeleteable:null!=this.onDelete})),this},e}(i)},{}],521:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p=function(t,e){function r(){this.constructor=t}for(var n in e)h.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},h={}.hasOwnProperty;o=t(411),i=t(537),s=t("bluebird"),c=t(416)(),d=t("xtend"),l=c.renderable(function(t){var e,r,n;return e=t.icon,n=t.text,r=t.iconColor,null!=e&&c.span(".badge-icon.icon-sm.plugin-icon",{style:c.stylify({"background-image":c.urlify(e+"?color="+r)})}),n?c.span(".badge-text",function(){return c.text(n)}):void 0}),a={green:"plugin-color-green",red:"plugin-color-red",yellow:"plugin-color-yellow"},u=function(t){return a[t]},e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.tagName="div",e.prototype.className="badge hide",e.prototype.initialize=function(t){return this.pluginBadge=t.pluginBadge,this.retain(this.pluginBadge)},e.prototype.renderBadge=function(t){return this.$el.html(l(t)),this.$el},e.prototype.renderOnce=function(){var t;return t=function(e){return function(){var r;return r=s.try(function(){return null!=e.pluginBadge.dynamic?e.pluginBadge.dynamic():e.pluginBadge}).cancellable().then(function(r){var n,o,i,s;o=u(r.color),i=null!=o?"fff":"999",n=e.renderBadge(d(r,{iconColor:i})),n.addClass(o),e.$el.removeClass("hide"),null!=e.pluginBadge.dynamic&&(s=Math.max(10,r.refresh||60),e.setTimeout(t,1e3*s))}).catch(o.Error.NotHandled,function(){return e.$el.addClass("hide")}).catch(s.CancellationError,function(){}),e.cancelOnRemove(r),r.done()}}(this),t(),this},e}(i)},{}],522:[function(t,e,r){var n,o,i,s,a,u,c=function(t,e){function r(){this.constructor=t}for(var n in e)l.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},l={}.hasOwnProperty;n=t("hearsay"),u=t(412),o=t(521),s=t(411),a=t(537),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.tagName="span",e.prototype.badgeView=o,e.prototype.runnerOptions=function(){return{command:"card-badges",board:this.model.getBoard(),card:this.model}},e.prototype.vigor=e.VIGOR.NONE,e.prototype.renderOnce=function(){var t,e;return e=this.runnerOptions(),t=n.combine(u(e.board),this.model.snoop()),this.subscribe(t,function(t){return function(){return s.all(e).then(function(e){return t.removeSubviews(),t.appendSubviews(e.map(function(e,r){return t.subview(t.badgeView,t.model,{pluginBadge:e},r)}))}).done()}}(this)),this},e}(a)},{}],523:[function(t,e,r){var n,o,i,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;o=t(537),i=t(99),s=t(34),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.tagName=function(){return null!=this.options.pluginButton.url?"a":"span"},e.prototype.attributes=function(){var t,e,r;return t=this.options.pluginButton,r=t.url,e=t.target,r?{href:r,target:null!=e?e:r}:void 0},e.prototype.initialize=function(t){return this.pluginButton=t.pluginButton,this.retain(this.pluginButton)},e.prototype.events={click:function(t){return s("Card Detail","Sidebar Plugin Button",this.pluginButton.text),i.stopPropagation(t),null!=this.pluginButton.callback?this.pluginButton.callback({el:t.currentTarget}).done():void 0}},e.prototype.template=function(){throw Error("no template specified")},e.prototype.renderOnce=function(){return this.$el.html(this.template(this.pluginButton)),this},e}(o)},{}],524:[function(t,e,r){var n,o,i,s,a,u=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;s=t("underscore"),o=t(411),a=t(412),i=t(537),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.buttonsSelector=".js-button-list",e.prototype.buttonView=null,e.prototype.renderContainer=function(){return this.$el},e.prototype.runnerOptions=function(){throw Error("runnerOptions not specified")},e.prototype.vigor=e.VIGOR.NONE,e.prototype.renderOnce=function(){var t,e;return e=this.runnerOptions(),t=this.renderContainer(),this.subscribe(a(e.board),function(r){return function(){return o.all(e).then(function(e){var n;return r.$el.toggleClass("hide",0===e.length),r.removeSubviews(),n=s.sortBy(e,"text").map(function(t,e){return r.subview(r.buttonView,r.model,{pluginButton:t},e)}),r.appendSubviews(n,t)}).done()}}(this)),this},e}(i)},{}],525:[function(t,e,r){var n,o,i,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;i=t(416)(),n=t(523),s=i.renderable(function(t){var e,r;e=t.icon,r=t.text,e&&(i.span(".icon-sm.plugin-icon",{style:i.stylify({"background-image":i.urlify(e+"?color=999")})}),i.raw(" ")),i.text(r)}),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.template=s,e.prototype.className="button-link",e}(n)},{}],526:[function(t,e,r){var n,o,i,s,a,u=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;n=t(524),o=t(525),s=t(416)("card_detail"),a=s.renderable(function(){return s.h3(function(){return s.format("plugins")}),s.div(".u-clearfix.js-button-list")}),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.tagName="div",e.prototype.className="window-module u-clearfix hide",e.prototype.buttonsSelector=".js-button-list",e.prototype.buttonView=o,e.prototype.renderContainer=function(){return this.$el.html(a()),this.$(".js-button-list")},e.prototype.runnerOptions=function(){return{command:"card-buttons",board:this.model.getBoard(),card:this.model}},e}(n)},{}],527:[function(t,e,r){var n,o,i,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;n=t(521),i=t(215),s=i.renderable(function(t){var e,r,n,o;return e=null!=t?t:{},o=e.url,n=e.title,r=e.text,i.h3(".card-detail-item-header",function(){return i.text(n)}),o?i.a(".card-detail-badge.plugin-card-detail-badge.is-clickable.js-badge",{href:o,target:o},function(){return i.text(r)}):i.span(".card-detail-badge.plugin-card-detail-badge.js-badge",function(){return i.text(r)})}),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.tagName="div",e.prototype.className="card-detail-item hide",e.prototype.renderBadge=function(t){return this.$el.html(s(t)),this.$(".js-badge")},e}(n)},{}],528:[function(t,e,r){var n,o,i,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=t(522),o=t(527),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.tagName="div",e.prototype.badgeView=o,e.prototype.runnerOptions=function(){return{command:"card-detail-badges",board:this.model.getBoard(),card:this.model}},e}(n)},{}],529:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h=function(t,e){function r(){this.constructor=t}for(var n in e)m.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},m={}.hasOwnProperty;n=t(78),i=t(407),s=t(406),a=t(435),u=t("bluebird"),c=t(421),d=t(416)("plugin_details"),l=t("underscore"),p=d.renderable(function(t){var e,r,n,o,i,s,a,u,c,l;return c=null!=t?t:{},a=c.name,r=c.detailsHtml,o=c.images,l=c.showEnable,e=c.canEnable,i=c.inOrg,n=c.featureEnabled,u=c.ownsOrg,s=c.isPremium,d.div(".markeddown",function(){return d.raw(r)}),l?n?d.button(".button.primary.js-enable",{style:"width:100%"},function(){return d.format("enable")}):(d.hr(),d.p(function(){return i?u?s?d.format("update to newest bc to enable plugin"):d.format("add bc to enable plugin"):d.format("org owner can enable plugin"):d.format("add to bc org to enable plugin")})):void 0}),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return h(e,t),e.prototype.initialize=function(t){return this.plugin=t.plugin,this.showEnable=t.showEnable,this.io=s.get(this.plugin)},e.prototype.events={"click .js-enable":"enable"},e.prototype.getViewTitle=function(){return this.io.getName()},e.prototype.render=function(){return u.props({name:this.io.getName(),details:this.io.getDetails(),images:this.io.getImages()}).then(function(t){return function(e){var r;return r=t.model.getOrganization(),l.extend(e,{inOrg:null!=r,isPremium:null!=r?r.isPremium():void 0,featureEnabled:null!=r?r.isFeatureEnabled("plugins"):void 0,showEnable:t.showEnable&&!t.model.isPluginEnabled(t.io.id),ownsOrg:null!=r?r.owned():void 0,detailsHtml:n.markdownAsHtml(e.details)}),t.$el.html(p(e))}}(this)),this},e.prototype.enable=function(){return this.model.enablePlugin(this.io.id),a.hide()},e}(c)},{}],530:[function(t,e,r){var n,o,i,s,a=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;n=t(523),i=t(416)(),s=i.renderable(function(t){var e,r;e=t.icon,r=t.text,e&&i.span(".board-header-btn-icon.icon-sm.plugin-icon",{style:i.stylify({"background-image":i.urlify(e+"?color=f6f6f6")})}),i.span(".board-header-btn-text.u-text-underline",function(){return i.text(r)})}),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.className="board-header-btn",e.prototype.template=s,e}(n)},{}],531:[function(t,e,r){var n,o,i,s=function(t,e){function r(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=t(524),o=t(530),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.tagName="span",e.prototype.className="board-header-plugin-btns",e.prototype.buttonView=o,e.prototype.runnerOptions=function(){return{command:"board-buttons",board:this.model}},e}(n)},{}],532:[function(t,e,r){var n,o,i,s,a,u=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;i=t("bluebird"),o=t(537),s=t(416)(),a=s.renderable(function(t){var e,r,n,o;switch(e=(null!=t?t:{}).content,e.type){case"iframe":o=e.url,n=e.height,r=e.context,s.iframe(".plugin-iframe",{src:o})}}),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.initialize=function(t){return this.content=t.content,this.retain(this.content)},e.prototype.className="plugin-overlay",e.prototype.renderOnce=function(){return this.$el.html(a({content:this.content})),this.initIFrames(this.model),this},e}(o)},{}],533:[function(t,e,r){var n,o,i,s,a,u,c=function(t,e){function r(){this.constructor=t}for(var n in e)l.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},l={}.hasOwnProperty;n=t("jquery"),i=t(537),s=t(435),a=t(416)(),u=a.renderable(function(t){var e,r;null==t&&(t={}),r=t.url,e=t.height,a.iframe(".plugin-iframe",{src:r,style:e?"height:"+e+"px;":void 0})}),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.initialize=function(t){return this.title=t.title,this.content=t.content,this.callback=t.callback,this.retain(this.callback)},e.prototype.getViewTitle=function(){return this.title},e.prototype.keepInDOM=!0,e.prototype.renderOnce=function(){return this.$el.html(u(this.content)),this.initIFrames(this.model),this},e.prototype.handleIFrameMessage=function(t,e){switch(e){case"done":if(null!=this.callback)return this.callback({el:t});s.hide()}},e}(i)},{}],534:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g=function(t,e){function r(){this.constructor=t}for(var n in e)v.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},v={}.hasOwnProperty;n=t("jquery"),d=t("underscore"),o=t("hearsay"),i=t(73),s=t(14),u=t(537),c=t(435),m=t(416)("plugin_popover"),l=t(99),f=t("xtend"),p=m.renderable(function(t){var e,r;null==t&&(t={}),e=t.items,r=t.search,r&&e.length>r.count&&m.input(".js-search.js-autofocus",{type:"text",placeholder:r.placeholder}),m.div(".js-results")}),h=m.renderable(function(t){var e,r,n,o;n=t.search,r=t.noSearchResults,e=t.items,o=t.selectedIndex,r&&m.p(".empty.plugin-pop-over-search-empty",function(){n.empty?m.text(n.empty):m.format("no results")}),m.ul(".pop-over-list.js-list.navigable",function(){var t,r,n,i,s,a,u,c;for(r=0,i=e.length;i>r;r++)s=e[r],u=s.text,n=s.index,t=s.callback,c=s.url,a=n===o,m.li({class:m.classify({selected:a})},function(){var e;e=null!=t?{"data-index":n}:null!=c?{href:c,target:c}:void 0,m.a(e,function(){m.text(u)})})})}),e.exports=a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return g(e,t),e.prototype.initialize=function(t){return this.title=t.title,this.content=t.content,this.retain(this.content),this.searchText=this.slot("")},e.prototype.getViewTitle=function(){return this.title},e.prototype.keepInDOM=!0,e.prototype.events=function(){return{"click a[data-index]":function(t){var e,r;return e=parseInt(n(t.currentTarget).attr("data-index"),10),r=this.content.items[e],this.content.items[e].callback({el:t.currentTarget}).done()},"click a[href]":function(t){return c.hide()},"input .js-search":function(t){return this.searchText.set(n(t.currentTarget).val())},"mouseenter li":function(t){return l.selectMenuItem(this.$(".js-list"),"li",n(t.currentTarget))},keydown:function(t){var e,r;r=i.getKey(t),e=this.$(".js-list"),r===s.ArrowUp||r===s.ArrowDown?(l.stop(t),l.navMenuList(e,"li",r)):(r===s.Enter||r===s.Tab)&&(l.stop(t),e.find("li.selected a").click())}}},e.prototype.renderOnce=function(){var t,e;return this.$el.html(p(this.content)),t=this.$el.find(".js-results"),e=this.content.items.map(function(t,e){return f(t,{index:e})}),this.content.search?this.subscribe(this.searchText,function(r){return function(n){var o,i,s,a,u,c,p,m,f;return m=l.buildFuzzyMatcher(n),i=e.filter(function(t,e){var r,n;return n=t.text,r=t.alwaysVisible,r||m(n)}),null!=(s=null!=(u=r.content.search)?u.count:void 0)&&(o=0,i=d.filter(i,function(t,e){return t.alwaysVisible?!0:s>o?(o++,!0):!1})),a=!d.any(i,function(t){var e;return e=t.alwaysVisible,!e}),f=null!=(c=null!=(p=i[0])?p.index:void 0)?c:-1,t.html(h({search:r.content.search,noSearchResults:a,items:i,selectedIndex:f}))}}(this)):t.html(h({items:e,selectedIndex:0})),this},e}(u)},{}],535:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f=function(t,e){function r(){this.constructor=t}for(var n in e)g.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},g={}.hasOwnProperty;n=t("jquery"),o=t(430),i=t(411),a=t(435),u=t("bluebird"),d=t(215),h=t(34),c=t(99),l=t(421),m=t("xtend"),p=d.renderable(function(t){d.ul(".pop-over-list",function(){var e,r,n,o,i,s;for(e=0,n=t.length;n>e;e++)i=t[e],o=i.name,s=i.url,r=i.id,d.li(function(){d.a(".js-remove",{"data-id-attachment":r},function(){d.text(o)})})})}),e.exports=s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return f(e,t),e.prototype.viewTitleKey="remove attachments",e.prototype.initialize=function(t){var e;return e=t.section,this.section=e},e.prototype.events={"click .js-remove":"confirmRemove"},e.prototype.renderOnce=function(){var t;return t=this.model.getBoard(),u.map(this.section.claimed,function(e){return e.name&&e.name!==e.url?e:i.one({command:"format-url",board:t,options:{url:e.url}}).get("text").catch(i.Error.NotHandled,function(){return e.url}).then(function(t){return m(e,{name:t})})}).then(function(t){return function(e){return t.$el.html(p(e))}}(this)),this},e.prototype.confirmRemove=function(t){var e,r;return c.stop(t),e=n(t.currentTarget).attr("data-id-attachment"),r=this.model.attachmentList.get(e),o.pushView("remove attachment",{model:r,confirmBtnClass:"negate",fxConfirm:function(t){return function(t){return r.destroy(),h("Attachment","Delete Attachment",r.getType())}}(this)})},e}(l)},{}],536:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v=function(t,e){function r(){this.constructor=t}for(var n in e)y.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},y={}.hasOwnProperty;n=t("jquery"),h=t("underscore"),o=t(430),i=t("hearsay"),l=t(435),s=t(411),a=t(535),c=t(537),d=t("bluebird"),m=t(416)("plugin_section"),g=t(34),p=t(99),f=m.renderable(function(t){var e;e=t.content,m.div(".window-module.u-clearfix",function(){var t,r;m.div(".window-module-title.window-module-title-no-divider",function(){m.span(".window-module-title-icon.icon-lg.plugin-section-icon.js-icon"),m.h3(".u-inline-block.plugin-section-title.js-title"),m.div(".window-module-title-options",function(){m.a(".quiet.js-remove",{href:"#"},function(){m.format("remove")})})}),"iframe"===e.type&&(r=e.url,t=e.height,m.div(".u-gutter",function(){m.iframe(".plugin-iframe.plugin-section",{src:r,style:m.stylify({height:t?t+"px;":void 0})})}))})}),e.exports=u=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return v(e,t),e.prototype.initialize=function(){return this.section=new i.Slot(null)},e.prototype.renderOnce=function(){var t;if(t=this.section.get(),null==t)throw Error("updateSection not called before render");return this.$el.html(f(t)),this.subscribe(this.section,function(t){return function(e){return d.resolve(h.result(e,"title")).then(function(e){return t.$(".js-title").text(e)}).catch(s.Error.Timeout,function(){}),d.resolve(h.result(e,"icon")).then(function(e){return t.$(".js-icon").css("background-image",m.urlify(e+"?color=999"))}).catch(s.Error.Timeout,function(){})}}(this)),this.initIFrames(this.model.getBoard(),this.section),this},e.prototype.updateSection=function(t){return this.retain(t),this.section.set(t)},e.prototype.events={"click .js-remove":"confirmRemove"},e.prototype.confirmRemove=function(t){var e,r;p.stop(t),r=this.section.get(),1===r.claimed.length?(e=this.model.attachmentList.get(r.claimed[0].id),o.toggle("remove attachment",{elem:this.$(t.currentTarget),model:e,confirmBtnClass:"negate",fxConfirm:function(t){return function(t){return e.destroy(),g("Attachment","Delete Attachment",e.getType())}}(this)})):l.toggle({elem:n(t.currentTarget),view:new a({model:this.model,section:r})})},e}(c)},{}],537:[function(t,e,r){var n,o,i,s,a,u,c=function(t,e){function r(){this.constructor=t}for(var n in e)l.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},l={}.hasOwnProperty,d=[].slice;n=t("jquery"),a=t("underscore"),o=t("hearsay"),u=t(412),s=t(421),e.exports=i=function(t){function e(){this._retained=[],this._pendingPromises=[],this._eventListeners=[],e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype._retainCallback=function(t){return null!=t&&(t.retain().done(),this._retained.push(t)),t},e.prototype.retain=function(t){a.isFunction(t)?this._retainCallback(t):a.isArray(t)?t.forEach(function(t){return function(e){return t.retain(e)}}(this)):a.isObject(t)&&this.retain(a.values(t))},e.prototype.cancelOnRemove=function(t){return this._pendingPromises.push(t),t.then(function(e){return function(){return e._pendingPromises=a.without(e._pendingPromises,t)}}(this)),t},e.prototype.remove=function(){var t,r,n,o,i,s,a,u,c,l,d,p,h,m,f;for(e.__super__.remove.apply(this,arguments),c=this._pendingPromises,r=0,i=c.length;i>r;r++)u=c[r],u.cancel();for(delete this._pendingPromises,l=this._eventListeners,n=0,s=l.length;s>n;n++)d=l[n],m=d.target,f=d.type,t=d.callback,m.removeEventListener(f,t);for(delete this._eventListeners,p=this._retained,o=0,a=p.length;a>o;o++)h=p[o],h.release().done();delete this._retained},e.prototype.addEventListener=function(t,e,r){return t.addEventListener(e,r),this._eventListeners.push({target:t,type:e,callback:r})},e.prototype.handleIFrameMessage=null,e.prototype.initIFrames=function(){var t,e,r,i;e=arguments[0],r=2<=arguments.length?d.call(arguments,1):[],t=this.$el.find("iframe.plugin-iframe"),i=o.combine.apply(o,r.concat(u(e))),a.each(t,function(t){return function(e){var r,o;o=i.use(),r=n(e),r.addClass("iframe-loading").one("load",function(n){r.removeClass("iframe-loading"),t.subscribe(i,function(){return e.contentWindow.postMessage("render","*")}),o(),null!=t.handleIFrameMessage&&t.addEventListener(window,"message",function(r){r.source===e.contentWindow&&t.handleIFrameMessage(e,r.data)})})}}(this))},e}(s)},{}],538:[function(t,e,r){var n,o,i,s,a,u,c=function(t,e){function r(){this.constructor=t}for(var n in e)l.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},l={}.hasOwnProperty;n=t("jquery"),o=t(22),s=t(99),a=t(421),u=t(418),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.viewTitleKey="calendar settings",e.prototype.initialize=function(){return this.generating=!1,this.listenTo(this.model,{"change:prefs":this.render,"change:myPrefs.calendarKey":this.generationComplete})},e.prototype.events={"click .js-calendar-pref-feed:not(.disabled)":"selectFeedEnabled","click .js-calendar-feed-url:not(:disabled)":"focusInput","click .js-regen-calendar-url:not(.disabled)":"generateNewFeedURL"},e.prototype.generationComplete=function(){return this.generating=!1,this.render()},e.prototype.generateNewFeedURL=function(t){return s.stop(t),this.generating=!0,this.model.generateCalendarKey(),this.render()},e.prototype.render=function(){var t,e,r,n;return n=this.model.toJSON({prefs:!0}).prefs,r=this.model.getPref("calendarKey"),e="https://"+location.host+"/calendar/"+(o.me().id+"/"+this.model.id+"/"+r+".ics"),r||(this.generating=!0,this.model.generateCalendarKey()),t={calendar_feed_enabled:n.calendarFeedEnabled,calendar_feed_generated:null!=r&&!this.generating,calendar_feed_url:e},this.$el.html(u.fillFromModel("power_ups_calendar_prefs",this.model,t)),this},e.prototype.focusInput=function(t){return this.$(".js-calendar-feed-url").focus().select()},e.prototype.selectFeedEnabled=function(t){var e,r;return s.stop(t),e=n(t.target).closest("a"),r="enabled"===e.attr("name"),this.model.setPref("calendarFeedEnabled",r)},e}(a)},{}],539:[function(t,e,r){var n,o,i,s,a,u=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;n=t("jquery"),i=t(99),s=t(421),a=t(418),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.viewTitleKey="card aging settings",e.prototype.initialize=function(){return this.listenTo(this.model,{"change:prefs":this.render})},e.prototype.events={"click .js-select:not(.disabled)":"selectMode"},e.prototype.render=function(){var t,e;return e=this.model.toJSON({prefs:!0,url:!0}).prefs,t={aging_regular:"regular"===e.cardAging,aging_pirate:"pirate"===e.cardAging},this.$el.html(a.fillFromModel("power_ups_card_aging_prefs",this.model,t)),this},e.prototype.selectMode=function(t){var e,r;return i.stop(t),e=n(t.target).closest(".js-select"),r=e.attr("name"),this.model.setPref("cardAging",r)},e}(s)},{}],540:[function(t,e,r){var n,o,i,s,a,u=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;n=t("jquery"),o=t(99),i=t(421),a=t(418),e.exports=s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.viewTitleKey="voting settings",e.prototype.initialize=function(){return this.listenTo(this.model,{"change:prefs":this.render})},e.prototype.events={"click .js-voting-select:not(.disabled)":"selectPerm"},e.prototype.render=function(){var t,e,r;return t=this.model.toJSON({prefs:!0,url:!0}),e=this.model.getOrganization(),t.hasOrg=null!=(null!=e?e.id:void 0),t.orgCanSee=t.hasOrg&&("public"===(r=this.model.getPref("permissionLevel"))||"org"===r),t.premium=null!=e?e.isFeatureEnabled("observers"):void 0,t.voting_showObservers=(t.premium||t.voting_observers)&&t.hasOrg,(null!=e?e.owned():void 0)?(t.orgOwner=!0,t.orgName=e.get("displayName"),this.model.owned()||(t.setOrgNull=!0)):this.model.owned()||(t.noEditOrg=!0),this.$el.html(a.fillFromModel("power_ups_voting_prefs",this.model,t)),this},e.prototype.selectPerm=function(t){var e,r;return o.stop(t),e=n(t.target).closest(".js-voting-select"),r=e.attr("name"),this.model.setPref("voting",r)},e}(i)},{}],541:[function(t,e,r){var n,o,i,s,a,u,c,l=function(t,e){function r(){this.constructor=t}for(var n in e)d.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},d={}.hasOwnProperty;n=t(395),i=t(361),s=t(421),a=t("underscore"),u=t(418),c=t(34),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.className="search-result-card",e.prototype.events={"click .list-card":"openCard"},e.prototype.render=function(){var t,e,r,o,s;return t=this.model.getBoard(),s=this.model.getList(),o=this.model.toJSON(),o=a.extend(o,{listName:s.get("name"),boardName:t.get("name"),permLevel:n.getPermLevelIconClassForBoard(t),archivedList:s.get("closed")}),r={hideMenu:!0,applyBoardCardFilter:!1},this.$el.html(u.fill("search_results_card",o)),e=this.subview(i,this.model,r),this.appendSubview(e,this.$(".js-list-card-container")),this},e.prototype.openCard=function(t){this.model.showDetail(),c("Search","Select Card")},e}(s)},{}],542:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_=function(t,e){function r(){this.constructor=t}for(var n in e)k.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},k={}.hasOwnProperty;n=t("jquery"),o=t(22),i=t(280),s=t(541),a=t(5),u=t(433),l=t(543),d=t(27),p=t(545),h=t(547),m=t(227),f=t(99),g=t(421),v=t("underscore"),y=t(31),b=t(418),w=t(34),e.exports=c=function(t){function e(){this.results=null,this.serial=0,this.suggestSerial=0,this.cardPageNumber=0,this.cardsLimit=a.isOnSearchPage()?12:8,this.searchStates=["no-results","no-input","searching","search-results","err"],this.searchState="no-results",e.__super__.constructor.apply(this,arguments)}return _(e,t),e.prototype.viewTitleKey="search results",e.prototype.className="search-results-view",e.prototype.displayType="mod-search-over",e.prototype.hideHeader=!0,e.prototype.maxWidth="600",e.prototype.initialize=function(){var t,e,r;return r=function(t){return function(e){return t.dynamicDebounce(e,function(t){return t.length<=1?1600:t.length<=3?800:400})}}(this),e=r(this.update).bind(this),t=r(this.renderSearchedSuggestions).bind(this),this.listenTo(m,{"change:query":function(t,r){return e(r)},"change:suggestions":this.renderSuggestions,"change:suggestionSearchTerm":function(e,r){return t(r)}}),this.listenTo(o.me().savedSearchList,"add remove reset change",this.renderSavedSearches)},e.prototype.events={"click .js-see-all-saved-searches":"clearSearch","click .js-saved-search-name":"doSavedSearch","sortstop .js-saved-searches-list":"sortStop","click .js-save-this-search":"saveThisSearch","input .js-saved-search-name-input":"changeSearchName","submit .js-save-this-search-form":"confirmSave","click .js-save-this-search-cancel":"cancelSave","click .js-show-search-tips":"showTips","click .js-member-results .js-list .js-select-member":"trackMemClick","click .js-org-results .js-list .list-card":"trackOrgClick","click .js-select-suggestion":"selectSuggestion","mouseenter .js-select-suggestion":"mouseenterSuggestion","mouseleave .js-select-suggestion":"mouseleaveSuggestion","click .js-show-more-cards":"showMoreCards","click .js-show-more-boards":"showMoreBoards","click .js-show-more-members":"showMoreMembers","click .js-show-more-orgs":"showMoreOrgs","mouseenter .search-result-card-hover-target":"highlightCard","mouseleave .search-result-card-hover-target":"unHighlightCard"},e.prototype.update=function(t){var e,r,n;this.err=null,this.results=v.isEmpty(t)?{}:null,++this.serial,n=this.serial,this.renderResults(),v.isEmpty(t)||(e={query:t,partial:!0,modelTypes:"cards,boards,organizations,members",board_fields:"name,url,prefs",cards_limit:null!=(r=this.cardsLimit)?r:6,card_members:!0,card_board:!0,card_list:!0,card_stickers:!0,card_attachments:"cover",boards_limit:8,members_limit:8,organizations_limit:6},d.loadSearchData(e).nodeify(function(t){return function(e,r){var o,i;return t.err=e,n!==t.serial?(i=v.pluck(null!=r&&null!=(o=r.options)?o.terms:void 0,"text"),void y("search","discarding search for "+i+", serial "+n)):(t.results=r,t.renderResults())}}(this)))},e.prototype.getMoreCards=function(t,e){var r,n,o,i,s;o=e.partial,r=e.cards_page,n={query:t,partial:null!=o?o:!1,modelTypes:"cards",board_fields:"name,url,prefs",cards_limit:null!=(i=this.cardsLimit)?i:6,cards_page:null!=(s=this.cardPageNumber)?s:0,card_members:!0,card_board:!0,card_list:!0,card_stickers:!0,card_attachments:"cover"},d.loadSearchData(n).nodeify(function(t){return function(e,r){
var n,o;return t.err=e,n=v.pluck(null!=(o=null!=r?r.cards:void 0)?o:[],"id"),t.results.cards=r.cards,t.$(".js-loading-cards").addClass("hide"),t.renderCardResults(n,{append:!0})}}(this))},e.prototype.render=function(){var t;return t={savedSearchesEnabled:o.me().isFeatureEnabled("savedSearches")},this.$el.html(b.fill("search_instant_results",t)),this.update(m.getQuery()),this.renderSuggestions(),this.renderSearchedSuggestions(m.getSuggestionSearchTerm()),this},e.prototype.selectSuggestion=function(t){var e,r,o,i,s,a,u;f.stop(t),e=n(t.target).closest(".js-select-suggestion"),s=e.attr("data-suggestionphrase"),a=h.getKeywordMap()[s],o=m.getQuery(),r=h.inputIndex,i=f.removeWordAtIndex(o,r),u=f.stripExtraSpaces(i+" "+s),(null!=a?a.moreInputNeeded:void 0)||(u+=" "),m.clearSuggestions(),m.setQuery(u),m.clearSuggestionSearchTerm(),m.clearSuggestionSearchModelTypes()},e.prototype.mouseleaveSuggestion=function(t){return this.$(".js-select-suggestion").removeClass("selected")},e.prototype.mouseenterSuggestion=function(t){return n(t.target).closest(".js-select-suggestion").addClass("selected")},e.prototype.renderSuggestions=function(){var t,e,r,n,o,i,s,a,u,c;if(c=m.getSuggestions(),r=c.length>0,t=this.$(".js-search-suggestions"),e=t.find(".js-search-suggestions-list").empty(),r){for(n="",o=0,s=c.length;s>o;o++)i=c[o],a=h.getSuggestionObjectContainingVariantOrKey(i),u=a.obj,u.phrase=a.key,n+=b.fill("search_suggetion",u);e.append(n),this.$(".js-select-suggestion").first().addClass("selected"),t.removeClass("hide")}else t.addClass("hide");return this},e.prototype.renderSearchedSuggestions=function(t){var e,r,n,o;e=this.$(".js-search-suggestions").addClass("hide"),r=e.find(".js-search-suggestions-list").empty(),++this.suggestSerial,o=this.suggestSerial,""!==t&&(n={query:t,modelTypes:m.getSuggestionSearchModelTypes(),partial:!0,board_fields:"name,url,prefs",boards_limit:6,members_limit:6},d.loadSearchData(n).nodeify(function(t){return function(n,i){var s,a,u,c,l,d,p,h,m,f,g,v,y,w,_;if(o===t.suggestSerial&&(a=(null!=i&&null!=(g=i.boards)?g.length:void 0)>0,u=(null!=i&&null!=(v=i.members)?v.length:void 0)>0,c=a||u,l="",c&&!n)){if(a)for(y=i.boards,d=0,h=y.length;h>d;d++)_=y[d],s=_,s.phrase='board:"'+_.name+'"',l+=b.fill("search_suggetion_board",s);else if(u)for(w=i.members,p=0,m=w.length;m>p;p++)_=w[p],s=_,s.phrase="@"+_.username,f={member:b.member},l+=b.fill("search_suggetion_member",s,"",f);return r.append(l),t.$(".js-select-suggestion").first().addClass("selected"),e.removeClass("hide")}}}(this)))},e.prototype.renderResults=function(){var t,e,r,o,i,s,a,u,c,l,d,p,h,f,g,y,b,w;for(o=v.pluck(null!=(u=null!=(c=this.results)?c.cards:void 0)?u:[],"id"),r=v.pluck(null!=(l=null!=(d=this.results)?d.boards:void 0)?l:[],"id"),i=v.pluck(null!=(p=null!=(h=this.results)?h.members:void 0)?p:[],"id"),s=v.pluck(null!=(f=null!=(g=this.results)?g.organizations:void 0)?f:[],"id"),this.searchState=null!=this.err?"err":""===m.getQuery()?"no-input":null==this.results?"searching":v.all([o,r,i,s],v.isEmpty)?"no-results":(this.renderCardResults(o),this.renderBoardResults(r),this.renderMemberResults(i),this.renderOrganizationResults(s),"search-results"),this.renderSavedSearches(),w={err:"js-err","no-input":"js-no-input",searching:"js-searching","no-results":"js-no-results","search-results":"js-search-results"},y=this.searchStates,e=0,a=y.length;a>e;e++)b=y[e],t=w[b],n(this.el.getElementsByClassName(t)).toggleClass("hide",b!==this.searchState);return this},e.prototype.renderSavedSearches=function(){var t,e,r,n,i,s;return i="no-input"===this.searchState,t=this.$(".js-save-this-search-menu"),n=!t.hasClass("hide"),this.$(".js-saved-search-links").toggleClass("hide",i||n),e=this.$(".js-saved-searches").toggleClass("hide",!i),i?(t.addClass("hide"),this.renderSavedSearchItems(e)):(s=m.getQuery(),r=v.find(o.me().savedSearchList.models,function(t){return t.toJSON().query===s}),null!=r&&this.$(".js-current-search-name").text(r.get("name")),this.$(".js-save-this-search").toggleClass("hide",null!=r),this.$(".js-current-search").toggleClass("hide",null==r)),this},e.prototype.renderSavedSearchItems=function(t){var e,r,i,s,a;return e=t.find(".js-saved-searches-list"),e.sortable({axis:"y",delay:"75",distance:"7",containment:".js-saved-searches-list",tolerance:"pointer",items:".saved-search",start:function(t,e){var r;return u.sorting=!0,r=n(e.helper).outerHeight(),n(e.placeholder).height(r)},stop:function(t){return function(){return t.defer(function(){return u.sorting=!1})}}(this)}),r=o.me(),s=r.savedSearchList.models,this.$(".js-no-saved-searches").toggleClass("hide",s.length>0),a=function(){var t,e,r;for(r=[],t=0,e=s.length;e>t;t++)i=s[t],r.push(this.subview(p,i,{parent:this}));return r}.call(this),e.empty(),this.appendSubviews(a,e),this},e.prototype.renderCardResults=function(t,e){var r,n,o,i,a,u,c;return o=(null!=e?e:{}).append,r=this.$(".js-card-results").addClass("hide"),t.length>0&&(n=r.find(".js-list"),null==o&&n.empty(),a=function(){var e,r,n;for(n=[],e=0,r=t.length;r>e;e++)u=t[e],i=this.modelCache.get("Card",u),n.push(this.subview(s,i));return n}.call(this),this.appendSubviews(a,n),r.removeClass("hide")),c=t.length===this.cardsLimit,this.$(".js-show-more-cards").toggleClass("hide",!c),this},e.prototype.renderBoardResults=function(t){var e,r,n,o,s;return e=this.$(".js-board-results").addClass("hide"),t.length>0&&(r=e.find(".js-list").empty(),n=function(){var e,r,n;for(n=[],e=0,r=t.length;r>e;e++)o=t[e],n.push(this.subview(i,this.modelCache.get("Board",o)));return n}.call(this),this.appendSubviews(n,r),e.removeClass("hide")),s=!1,this.$(".js-show-more-boards").toggleClass("hide",!s),this},e.prototype.renderMemberResults=function(t){var e,r,n,o,i;return e=this.$(".js-member-results").addClass("hide"),t.length>0&&(r=e.find(".js-list").empty(),o=function(){var e,r,o;for(o=[],e=0,r=t.length;r>e;e++)n=t[e],o.push(this.subview(l,this.modelCache.get("Member",n)));return o}.call(this),this.appendSubviews(o,r),e.removeClass("hide")),i=!1,this.$(".js-show-more-members").toggleClass("hide",!i),this},e.prototype.renderOrganizationResults=function(t){var e,r,n,o;return e=this.$(".js-org-results").addClass("hide"),t.length>0&&(o=function(){var e,n,o;for(o=[],e=0,n=t.length;n>e;e++)r=t[e],o.push(b.fill("organization_search_list_item",this.modelCache.get("Organization",r).toJSON()));return o}.call(this),e.removeClass("hide").find(".js-list").empty().append(o)),n=!1,this.$(".js-show-more-orgs").toggleClass("hide",!n),this},e.prototype.clearSearch=function(){return m.setQuery("")},e.prototype.doSavedSearch=function(t){var e;return e=this.$(t.target).closest(".saved-search").find(".js-saved-search-query").text(),m.setQuery(e)},e.prototype.sortStop=function(t,e){f.stopPropagation(t),e.item.trigger("movesavedsearch",[e])},e.prototype.saveThisSearch=function(){return this.$(".js-saved-search-links").addClass("hide"),this.$(".js-save-this-search-menu").removeClass("hide"),this.$(".js-saved-search-name-input").val("").focus(),this.$(".js-save-this-search-submit").addClass("disabled")},e.prototype.changeSearchName=function(){var t,e;return e=this.$(".js-save-this-search-submit"),t=this.$(".js-saved-search-name-input"),e.toggleClass("disabled",0===t.val().trim().length)},e.prototype.confirmSave=function(t){var e,r;return f.preventDefault(t),this.$(".js-save-this-search-submit").hasClass("disabled")?void 0:(e=this.$(".js-saved-search-name-input").val().trim(),r=m.getQuery(),o.me().savedSearchList.saveSearch(e,r),this.cancelSave())},e.prototype.cancelSave=function(){return this.$(".js-saved-search-links").removeClass("hide"),this.$(".js-save-this-search-menu").addClass("hide")},e.prototype.closeAllDeleteMenus=function(){var t,e,r,n,o;for(r=this.subviewsOfType(p),n=[],t=0,e=r.length;e>t;t++)o=r[t],n.push(o.cancelDeletion());return n},e.prototype.trackMemClick=function(){return w("Search","Select Member")},e.prototype.trackOrgClick=function(){return w("Search","Select Organization")},e.prototype.showTips=function(t){f.stop(t),this.$(".js-search-tips-helper").addClass("hide"),this.$(".js-search-tips-list").removeClass("hide")},e.prototype.showMoreCards=function(t){this.$(".js-loading-cards").removeClass("hide"),this.$(".js-show-more-cards").addClass("hide"),this.cardPageNumber++,this.getMoreCards(m.getQuery(),{partial:!0})},e.prototype.showMoreBoards=function(t){},e.prototype.showMoreMembers=function(t){},e.prototype.showMoreOrgs=function(t){},e.prototype.highlightCard=function(t){var e;e=n(t.target).closest(".search-result-card").addClass("search-result-card-highlight-card"),e.closest(".js-list").addClass("search-result-card-highlight-section")},e.prototype.unHighlightCard=function(t){var e;e=n(t.target).closest(".search-result-card").removeClass("search-result-card-highlight-card"),e.closest(".js-list").removeClass("search-result-card-highlight-section")},e}(g)},{}],543:[function(t,e,r){var n,o,i,s,a,u=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;n=t("jquery"),i=t(483),s=t(99),a=t(421),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.tagName="li",e.prototype.className="search-result-member",e.prototype.events={"mouseenter .js-select-member":"hoverMember","mouseleave .js-select-member":"blurMember"},e.prototype.render=function(){return this.$el.empty(),this.appendSubview(this.subview(i,this.model,{linkName:!0})),this},e.prototype.blurMember=function(t){var e;e=n(t.target).closest(".item").removeClass("selected")},e.prototype.hoverMember=function(t){var e;e=n(t.target).closest(".item"),s.selectMenuItem(n(t.target).closest(".js-list"),".item",e)},e}(a)},{}],544:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p=function(t,e){function r(){this.constructor=t}for(var n in e)h.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},h={}.hasOwnProperty;o=t(435),i=t("bluebird"),s=t(483),a=t(99),u=t(421),c=t("underscore"),l=t(76),d=t(102),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.previousRender=null,e.prototype.renderSearchResults=function(t,e){var r,n,o,s,u,p,h;return this.$(".js-org-members").hide(),this.$el.find(".js-error").hide(),n=this.$el.find(".js-search-results"),r=n.find(".js-list").empty(),o=this.$el.find(".js-uninvited-search-results").hide().empty(),""===t?(this.clearSearchResults(),void this.loadingEl.hide()):(p=c.isEmpty(e),s=t.trim().length>=3,u=1===e.length&&a.checkEmail(t),this.$(".js-no-results").toggleClass("hide",!p),n.toggle(!p),s||"function"==typeof this.renderOrgMembers&&this.renderOrgMembers(),this.helperEl.hide(),p||null!=e[0].id?(null!=(h=this.previousRender)&&h.cancel(),this.previousRender=i.resolve(e).each(function(t){return function(e){var r,n,o;return n=e.joined,o=e.similarity>0,delete e.joined,delete e.similarity,r={id:e.id},n&&("ghost"===e.memberType?r.extraText=l("invited"):r.extraText=l("joined"),r.className="disabled"),r.isKnownMember=o||u,d(t.modelCache,"enqueueDelta","Member",e).return(r)}}(this)).cancellable().each(function(t){return function(e){t.appendMemberToSearchResults(e)}}(this)).tap(function(t){return function(){var e;return t.loadingEl.hide(),e=t.$(".js-search-results .js-list li.js-autoselect:first"),a.selectMenuItem(t.$(".js-search-results .js-list"),"li",e)}}(this)).catch(i.CancellationError,function(){})):(this.renderEmailInviteToSearchResults(e[0]),n.hide(),void this.loadingEl.hide()))},e.prototype.appendMemberToSearchResults=function(t){var e,r,n,o,i;return n=this.modelCache.get("Member",t.id),i="function"==typeof(e=this.model).getOrganization?e.getOrganization():void 0,r=(null!=i?i.isPremOrgAdmin(n):void 0)?c.compact([t.className,"no-option"]).join(" "):t.className,o=this.subview(s,n,c.extend({showUnconfirmed:!0,showInactive:!0},t)),this.appendSubview(o,this.$(".js-search-results .js-list")),o.$("li").addClass(r)},e}(u)},{}],545:[function(t,e,r){var n,o,i,s,a,u=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;n=t(22),i=t(99),s=t(421),a=t(418),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.className="saved-search",e.prototype.events={"click .js-delete-saved-search":"deleteSavedSearch","click .js-delete-saved-search-confirm":"confirmDeletion","click .js-delete-saved-search-cancel":"cancelDeletion",movesavedsearch:"moveSavedSearch"},e.prototype.render=function(){var t;return t=this.model.toJSON(),t.allowDelete=n.me().isFeatureEnabled("savedSearches")||"@me"!==t.query,this.$el.html(a.fill("saved_search",t)),this},e.prototype.deleteSavedSearch=function(t){return this.options.parent.closeAllDeleteMenus(),this.$(".js-saved-search-name").addClass("saved-search-item-faded"),this.$(".js-delete-saved-search").addClass("hide"),this.$(".js-delete-saved-search-menu").removeClass("hide"),this.defer(function(t){return function(){return t.$(".js-delete-saved-search-menu").addClass("saved-search-delete-menu-shown")}}(this))},e.prototype.confirmDeletion=function(t){return this.model.destroy()},e.prototype.cancelDeletion=function(t){return this.$(".js-saved-search-name").removeClass("saved-search-item-faded"),this.$(".js-delete-saved-search").removeClass("hide"),this.$(".js-delete-saved-search-menu").addClass("hide").removeClass("saved-search-delete-menu-shown")},e.prototype.moveSavedSearch=function(t,e){var r,o;return o=e.item.parent().children(),r=o.index(e.item),this.model.update("pos",i.calcPos(r,n.me().savedSearchList,this.model)),this.model.collection.sort({silent:!0})},e}(s)},{}],546:[function(t,e,r){var n,o,i,s,a,u,c,l,d,p,h,m,f,g,v,y=function(t,e){function r(){this.constructor=t}for(var n in e)b.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},b={}.hasOwnProperty;n=t("jquery"),o=t(5),i=t(542),s=t(73),a=t(14),u=t(435),c=t(547),d=t(227),p=t(419),h=t(99),m=t(421),f=t("underscore"),g=t(418),v=t(34),e.exports=l=function(t){function e(){this.fSearchOpen=!1,this.saveQueryDebounced=f.debounce(this.saveQuery,100),this.openSearchResultsViewDebounced=f.debounce(this.openSearchResultsView,100),this.autosuggestDebounced=f.debounce(this.autosuggest,100),p.addHandler(this,{scope:"search_box"}),e.__super__.constructor.apply(this,arguments)}return y(e,t),e.prototype.initialize=function(){return this.makeDebouncedMethods("renderInputState"),this.listenTo(d,{"change:query":this.renderInputQuery})},e.prototype.events={"keydown .js-search-input":"searchKeydown","input .js-search-input":"search","click .js-search-input":"openSearchResultsView","focus .js-search-input":"openSearchResultsView","click .js-open-search-page":"openSearchPage","click .js-search-focus":"openSearchResultsView","mousedown .js-search-close":"clearSearch",shortcut:"shortcut"},e.prototype.render=function(){return this.$el.html(g.fill("header_search")),this.renderInputStateDebounced(),this.$(".js-search-input").val(d.getQuery()),this},e.prototype.renderInputQuery=function(){var t,e,r;t=this.$(".js-search-input"),r=t.val(),e=d.getQuery(),t.length>0&&r!==e&&(t.val(e),h.setCaretAtEnd(t))},e.prototype.renderInputState=function(){var t,e;e=this.fSearchOpen,t=this.hasInputValue(),this.$(".js-search-input").toggleClass("header-search-input-wide focus",e),this.$(".js-search-icon, .js-close-icon, .js-open-button").toggleClass("header-search-icon-dark",e),this.$(".js-search-icon").toggleClass("hide",e),this.$(".js-close-icon").toggleClass("hide",!e),this.$(".js-open-button").toggleClass("hide",!e)},e.prototype.hasInputValue=function(){var t;return(null!=(t=this.$(".js-search-input").val())?t.length:void 0)>0},e.prototype.shortcut=function(t){return t===a.ForwardSlash?(this.focusInput(),"Search"):void 0},e.prototype.focusInput=function(){var t;t=this.$(".js-search-input"),t.length&&h.setCaretAtEnd(t)},e.prototype.clearSearch=function(t){h.stop(t),this.closeSearch()},e.prototype.closeSearch=function(){this.$(".js-search-input").val("").blur(),d.setQuery(""),this.fSearchOpen=!1,this.renderInputStateDebounced()},e.prototype.searchKeydown=function(t){var e,r,o,i;o=s.getKey(t),this.renderInputStateDebounced(),r=t.target.selectionStart===(i=t.target.selectionEnd)&&i===t.target.value.length,o===a.Enter||o===a.Tab||o===a.ArrowRight&&r?(e=n(".js-select-suggestion.selected").length,e&&(h.stop(t),n(".js-select-suggestion.selected").click())):(o===a.ArrowUp||o===a.ArrowDown)&&(e=n(".js-select-suggestion.selected").length,e&&(h.stop(t),h.navMenuList(n(".js-search-suggestions-list"),".js-select-suggestion",o)))},e.prototype.search=function(t){return this.autosuggestDebounced(),this.saveQueryDebounced(),this.openSearchResultsViewDebounced()},e.prototype.autosuggest=function(t){var e,r,n,o,i,s,a,u,l,p,m,g;e=this.$(".js-search-input"),m=h.getWordFromCaret(e).str,o=c.findUniqueKeywords(m),a=d.getQuery(),c.inputIndex=h.getCaretPosition(e),i=f.filter(o,function(t){var e;return e=c.getSuggestionObjectContainingVariantOrKey(t).obj.containsRegex,!e.test(a)}),d.setSuggestions(i),r=!1,l=c.getKeywordsWithSearchSuggest();for(n in l)if(p=l[n],u=p.containsRegex,u.test(m))return r=!0,g=p.suggestionsSearchModelTypes,d.setSuggestionSearchModelTypes(g),s=m.replace(RegExp("^"+n),""),void d.setSuggestionSearchTerm(s);r||(d.clearSuggestionSearchTerm(),d.clearSuggestionSearchModelTypes())},e.prototype.saveQuery=function(){var t;t=this.$(".js-search-input").val(),d.setQuery(t),/\/search/.test(location.pathname)&&o.navigate(o.getSearchUrl(t),{replace:!0})},e.prototype.getResultsView=function(){return this.subview(i,null,null,"headerSearchResultsView")},e.prototype.openSearchResultsView=function(t){var e;h.stop(t),this.fSearchOpen||o.isOnSearchPage()||(this.fSearchOpen=!0,e=this.$(".js-search-input"),e.focus(),h.setCaretAtEnd(e),u.show({elem:e,view:new i({model:this.model,modelCache:this.modelCache}),elActive:e,hidden:f.bind(this.closeSearch,this)})),this.fSearchOpen=!0,this.renderInputStateDebounced()},e.prototype.openSearchPage=function(t){var e;return h.stop(t),e=d.getQuery(),u.hide(),c.navigateToSearch(e,{trigger:!0}),v("Header","Open Search Page")},e}(m)},{}],547:[function(t,e,r){var n,o,i,s,a,u=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};n=t("jquery"),o=t(5),i=t(99),s=t("underscore"),a=t(76),e.exports=window.Search={navigateToSearch:function(t,e){var r;return r=(null!=e?e:{trigger:!1}).trigger,o.navigate(o.getSearchUrl(t),{trigger:r})},inputIndex:null,getSuggestionObjectContainingVariantOrKey:function(t){var e,r,n;if(r=this.getKeywordMap()[t],null!=r)return{key:t,obj:r};n=this.getKeywordsWithVariants();for(e in n)if(r=n[e],u.call(r.variants,t)>=0)return{key:e,obj:r};return{}},findKeywords:function(t){var e;return""===t?[]:e=s.filter(this.getKeywordsAndVariants(),function(e){return RegExp("^"+i.escapeForRegex(t)).test(e)})},findUniqueKeywords:function(t){var e,r;return e=this.findKeywords(t),r=s.uniq(e,!1,function(t){return function(e){return t.getSuggestionObjectContainingVariantOrKey(e).key}}(this))},_keywordsWith:function(t){var e,r;return s.object(function(){var n,o;n=this.getKeywordMap(),o=[];for(e in n)r=n[e],r.hasOwnProperty(t)&&o.push([e,r]);return o}.call(this))},getKeywordsWithVariants:function(){return null!=this._keywordsWithVariants?this._keywordsWithVariants:this._keywordsWithVariants=this._keywordsWith("variants")},getKeywordsWithSearchSuggest:function(){return null!=this._keywordsWithSearchSuggest?this._keywordsWithSearchSuggest:this._keywordsWithSearchSuggest=this._keywordsWith("suggestionsSearchModelTypes")},getKeywords:function(){return null!=this._keywords?this._keywords:this._keywords=s.keys(this.getKeywordMap())},getVariants:function(){var t,e;return null!=this._variants?this._variants:this._variants=s.flatten(function(){var r,n;r=this.getKeywordsWithVariants(),n=[];for(t in r)e=r[t],n.push(e.variants);return n}.call(this))},getKeywordsAndVariants:function(){return null!=this._keywordsAndVariants?this._keywordsAndVariants:this._keywordsAndVariants=this.getKeywords().concat(this.getVariants())},getKeywordMap:function(){return null!=this._keywordMap?this._keywordMap:this._keywordMap={"is:archived":{variants:["archived","is:closed","closed"],description:a("search.only include archived cards"),containsRegex:/\bis:archived\b/},"is:open":{variants:["open"],description:a("search.only include open cards"),containsRegex:/\bis:open\b/},"is:starred":{variants:["is:starred"],description:a("search.only include cards on starred boards"),containsRegex:/\bis:starred\b/},"has:attachments":{variants:["attachments"],description:a("search.only include cards with attachments"),containsRegex:/\bhas:attachments\b/},"has:cover":{variants:["cover"],description:a("search.only include cards with a cover"),containsRegex:/\bhas:cover\b/},"has:description":{variants:["description"],description:a("search.only include cards that have a description"),containsRegex:/\bhas:description\b/},"has:stickers":{variants:["stickers"],description:a("search.only include cards that have stickers"),containsRegex:/\bhas:stickers\b/},"has:members":{variants:["members"],suggestString:"has:members",description:a("search.only include cards that have members assigned"),containsRegex:/\bhas:members\b/},"@":{moreInputNeeded:!0,description:a("search.cards assigned to a member"),containsRegex:/@\S*\b/,suggestionsSearchModelTypes:"members"},"@me":{variants:["me"],description:a("search.only include cards assigned to me"),containsRegex:/\b@me\b/},"member:":{moreInputNeeded:!0,description:a("search.cards assigned to a member"),containsRegex:/\bmember:\S*\b/,suggestionsSearchModelTypes:"members"},"label:":{moreInputNeeded:!0,description:a("search.cards with this label"),containsRegex:/\blabel:\S*\b/},"#":{moreInputNeeded:!0,description:a("search.cards with this label"),containsRegex:/\b\#\S*\b/},"board:":{moreInputNeeded:!0,description:a("search.only cards on a particular board"),containsRegex:/\bboard:\S*\b/,suggestionsSearchModelTypes:"boards"},"list:":{moreInputNeeded:!0,description:a("search.cards in the list with matching text"),containsRegex:/\blist:\S*\b/},"name:":{moreInputNeeded:!0,description:a("search.cards that match text in the name"),containsRegex:/\bname:\S*\b/},"comment:":{moreInputNeeded:!0,description:a("search.cards that match text in the comment"),containsRegex:/\bcomment:\S*\b/},"checklist:":{moreInputNeeded:!0,description:a("search.cards that match text in a checklist"),containsRegex:/\bchecklist:\S*\b/},"description:":{moreInputNeeded:!0,description:a("search.cards that match text in the description"),containsRegex:/\bdescription:\S*\b/},"due:day":{variants:["day","today"],description:a("search.cards due in the next 24 hours"),containsRegex:/\bdue:day\b/},"due:week":{description:a("search.cards due in the next 7 days"),containsRegex:/\bdue:week\b/},"due:month":{description:a("search.cards due in the next 28 days"),containsRegex:/\bdue:month\b/},"due:overdue":{variants:["overdue"],description:a("search.cards that are past due"),containsRegex:/\bdue:overdue\b/},"created:day":{description:a("search.cards created in the last 24 hours"),containsRegex:/\bcreated:day\b/},"created:week":{description:a("search.cards created in the last 7 days"),containsRegex:/\bcreated:week\b/},"created:month":{description:a("search.cards created in the last 28 days"),containsRegex:/\bcreated:month\b/},"edited:day":{description:a("search.cards edited in the last 24 hours"),containsRegex:/\bedited:day\b/},"edited:week":{description:a("search.cards edited in the last 7 days"),containsRegex:/\bedited:week\b/},"edited:month":{description:a("search.cards edited in the last 28 days"),containsRegex:/\bedited:month\b/}}}}},{}],548:[function(t,e,r){var n,o,i,s,a,u,c=function(t,e){function r(){this.constructor=t}for(var n in e)l.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},l={}.hasOwnProperty;n=t("jquery"),o=t(22),i=t(430),a=t(550),u=t(99),e.exports=s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.initialize=function(){return this.toggleSelectable(),this.waitForId(this.model,function(t){return function(){return t.toggleSelectable()}}(this)),this.listenTo(this.model,"change:error",this.render)},e.prototype.events={"click .js-delete-sticker":"deleteSticker"},e.prototype.enabled=function(){var t;return o.me().isFeatureEnabled("customStickers")||(null!=(t=this.options.org)?t.isFeatureEnabled("customStickers"):void 0)},e.prototype.toggleSelectable=function(){var t;return t=null!=this.model.id,this.$el.toggleClass("js-draggable-sticker",t),this.$el.toggleClass("sticker-unselectable",!t)},e.prototype.deleteSticker=function(t){return u.stop(t),i.toggle("delete sticker",{elem:n(t.target).closest(".js-delete-sticker"),top:32,model:this.model,confirmBtnClass:"negate",fxConfirm:function(t){return function(e){return t.model.destroy()}}(this)})},e}(a)},{}],549:[function(t,e,r){var n,o,i,s,a,u,c=function(t,e){function r(){this.constructor=t}for(var n in e)l.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},l={}.hasOwnProperty;n=t("jquery"),o=t(435),s=t(551),a=t(99),u=t("underscore"),e.exports=i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.initialize=function(){return this.listenTo(this.model,"stopEditing",this.stopEditing),this.listenTo(this.model,"startEditing",this.editSticker),this.listenTo(this.model,"disableEditing",this.disableEditing),this.listenTo(this.model,"enableEditing",this.enableEditing)},e.prototype.events={mouseenter:"mouseenter",mouseleave:"mouseleave",mousedown:"editSticker","mousedown .js-remove-sticker":"removeSticker","mousedown .js-rotate-sticker":"startRotate","mousedown .js-move-sticker":"startMove"},e.prototype.showEditControls=function(){return!0},e.prototype.disableEditing=function(){return this.$el.addClass("editing-disabled")},e.prototype.enableEditing=function(){return this.$el.removeClass("editing-disabled")},e.prototype.endCurrentEdit=function(){return n(document).off(".stickerrotate .stickermove .stickerautomove"),this.$el.removeClass("moving rotating"),n(".quick-card-editor").removeClass("invalid dragging")},e.prototype.stopEditing=function(t){var e,r,o,i,s;if(a.stop(t),this.isEditing()){for(this.endCurrentEdit(),this.$el.removeClass("editing"),n(".quick-card-editor").removeClass("quick-card-editor-editing-stickers"),o=this.model.collection.models,i=[],e=0,r=o.length;r>e;e++)s=o[e],i.push(s.trigger("enableEditing"));return i}},e.prototype.isEditing=function(){return this.$el.is(".moving, .rotating, .editing")},e.prototype.isEditingDisabled=function(){return this.$el.is(".editing-disabled")},e.prototype.isMovingOrRotating=function(){return this.$el.is(".moving, .rotating")},e.prototype.saveStickerAttrs=function(t){var e,r,n,o,i,s,u,c,l;o=t.position,i=t.rotation,s=function(t){return Math.round(100*t)/100},l={zIndex:this.model.collection.nextZIndex(this.model)},o&&(e=this.$el.closest(".list-card"),r=e.find(".js-card-stickers"),c=r.width(),u=r.height(),l.left=s(parseFloat(this.$el.css("left"))/c*100),l.top=s(parseFloat(this.$el.css("top"))/u*100)),i&&(n=a.getElemTransformMatrix(this.$el.find(".sticker-image")),l.rotate=s(a.getMatrixDegrees(n)%360)),this.model.update(l)},e.prototype.mouseenter=function(t){this.isEditingDisabled()||this.isEditing()||this.isMovingOrRotating()||this.$el.addClass("hover")},e.prototype.mouseleave=function(t){this.$el.removeClass("hover")},e.prototype.editSticker=function(t){var e,r,i,s,c,l,d,p,h;if(null==t||1===t.which){for(a.stop(t),s=!1,null!=t&&"mousedown"===t.type&&(l=t.pageX,d=t.pageY,r=function(t){return function(){return n(document).off(".stickerautomove"),clearTimeout(e)}}(this),n(document).on("mousemove.stickerautomove",function(t){return function(e){return Math.pow(e.pageX-l,2)+Math.pow(e.pageY-d,2)>25?(s=!0,r(),t.startMove(e)):void 0}}(this)),n(document).on("mouseup.stickerautomove",r),e=this.setTimeout(r,1e3)),h=u.clone(this.model.collection.models),i=0,c=h.length;c>i;i++)p=h[i],p!==this.model&&(p.trigger("stopEditing"),p.trigger("disableEditing"));this.defer(function(t){return function(){return o.hide(),t.$el.addClass("editing"),n(".quick-card-editor").addClass("quick-card-editor-editing-stickers")}}(this))}},e.prototype.startRotate=function(t){var e,r,o,i,s,u;if(this.isEditing())return a.preventDefault(t),u={x:this.$el.offset().left+this.$el.width()/2,y:this.$el.offset().top+this.$el.height()/2},o={x:t.pageX,y:t.pageY},i=a.calcDistanceFromCenter(this.$el,o.x,o.y),s=0,r=a.getElemTransformMatrix(this.$el.find(".sticker-image")),null!=r&&(s=a.getMatrixDegrees(r)),e=!1,n(document).on("mousemove.stickerrotate",function(t){return function(r){var c,l,d,p,h,m,f,g,v;e||(t.$el.removeClass("hover").addClass("rotating"),n(".quick-card-editor").addClass("dragging"),e=!0),g={x:r.pageX,y:r.pageY},l=4*a.calcDistanceFromCenter(t.$el,g.x,g.y),d=l-4*i,h=g.x-u.x,m=g.y-u.y,f=a.getDegrees(o.y-u.y,o.x-u.x),p=a.getDegrees(m,h),c=p-f,v=s+c,t.$el.find(".sticker-image").css({transform:"rotate("+v+"deg)","-webkit-transform":"rotate("+v+"deg)"})}}(this)),n(document).on("mouseup.stickerrotate",function(t){return function(){return e?(t.saveStickerAttrs({rotation:!0}),t.endCurrentEdit()):n(document).off(".stickerrotate")}}(this)),!1},e.prototype.startMove=function(t){var e,r,o,i,s,u,c,l,d,p,h,m,f;if(this.isEditing())return a.stop(t),e=this.$el.closest(".list-card"),r=e.find(".js-card-stickers"),h=r.offset(),l=h.left,d=h.top,f=this.$el.width(),m=this.$el.height(),p=r.width(),c=r.height(),o={left:-40,right:p-10,top:-40,bottom:c-10},null!=t?(s=this.$el.offset().left+this.$el.width()/2-t.pageX,u=this.$el.offset().top+this.$el.height()/2-t.pageY):(s=0,u=0),i=!1,n(document).on("mousemove.stickermove",function(t){return function(e){var r,a,c;return i||(t.$el.removeClass("hover").addClass("moving"),n(".quick-card-editor").addClass("dragging"),i=!0),r=e.pageX-l-f/2+s,a=e.pageY-d-m/2+u,c=!0,r>o.right&&(r=o.right,c=!1),r<o.left&&(r=o.left,c=!1),a>o.bottom&&(a=o.bottom,c=!1),a<o.top&&(a=o.top,c=!1),n(".quick-card-editor").toggleClass("invalid",!c),t.$el.css({left:r,top:a})}}(this)),n(document).on("mouseup.stickermove",function(t){return function(){return i?(t.saveStickerAttrs({position:!0}),t.endCurrentEdit()):n(document).off(".stickermove")}}(this)),!1},e.prototype.removeSticker=function(t){var e;this.isEditing()&&(e=u.once(function(t){return function(){t.stopEditing(),t.model.destroy(),t.$el.remove()}}(this)),this.$el.one("transitionEnd webkitTransitionEnd",e),this.setTimeout(e,100),this.$el.addClass("fade-out"))},e}(s)},{}],550:[function(t,e,r){var n,o,i,s,a,u,c=function(t,e){function r(){this.constructor=t}for(var n in e)l.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},l={}.hasOwnProperty;n=t(22),i=t(99),s=t(421),u=t(418),a=t(19),e.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.className="sticker-select js-draggable-sticker",e.prototype.enabled=function(){var t;return!this.model.get("premium")||n.me().isFeatureEnabled("additionalStickers")||(null!=(t=this.options.org)?t.isFeatureEnabled("additionalStickers"):void 0)},e.prototype.render=function(){var t,e,r;return t=this.model.toJSON(),t.url=null!=(e=null!=(r=i.smallestPreviewBiggerThan(t.scaled,a))?r.url:void 0)?e:t.url,t.pending=null==t.image&&null==t.id&&null==t.error,this.$el.toggleClass("disabled",!this.enabled()).html(u.fill("sticker_select_item",t)).data("sticker",this.model),this},e}(s)},{}],551:[function(t,e,r){var n,o,i,s,a,u,c=function(t,e){function r(){this.constructor=t}for(var n in e)l.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,
t.__super__=e.prototype,t},l={}.hasOwnProperty;o=t(99),i=t(421),u=t(418),a=t(19),s=t(105),e.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.className="sticker",e.prototype.showEditControls=function(){return!1},e.prototype.render=function(){var t,e,r;return t=this.model.toJSON(),t.url=null!=(e=null!=(r=o.smallestPreviewBiggerThan(t.imageScaled,a))?r.url:void 0)?e:t.imageUrl,t.showEditControls=this.showEditControls(),this.$el.html(u.fill("sticker_on_card",t)).css({left:s(t.left)+"%",top:s(t.top)+"%"}),this},e}(i)},{}],552:[function(t,e,r){var n,o,i;i=t(416)("action"),n=t(638),o=t(678),e.exports=i.renderable(function(t,e,r){var s,a,u,c,l,d,p,h,m,f,g,v,y,b;return h=t.entities,g=t.saved,p=t.dateLastEdited,d=t.date,m=e.member,s=e.board,f=e.organization,l=e.canReply,u=e.canDelete,c=e.canEdit,a=e.canAttachLink,y=r.useEmbedly,b=r.usePreviews,v=r.showOptions,m?i.div(".creator.member.js-show-mem-menu",function(){return o(m)}):i.div(".creator.member.member-no-menu",function(){return i.span(".member-initials.quiet",function(){return i.text("?")})}),i.div(".phenom-desc",function(){var t,o,s;for(o=0,s=h.length;s>o;o++)t=h[o],n(t,e,r);return y&&i.div(".hide.embedly.js-embedly"),b?i.div(".hide.previews.js-previews"):void 0}),i.p(".phenom-meta.quiet",function(){var t,r,n,o;return g&&i.span(".date.js-hide-on-sending",{dt:d}),p&&i.span(".js-hide-on-sending",function(){return i.text(" - "),i.format("edited",{dateLastEdited:p})}),i.span({class:i.classify({"js-spinner":!0,hide:g})},function(){return i.format("sending-ellipsis")}),s&&(t=e.boardPLevelAltText,r=e.boardPLevelIconClass,i.text(" - "),i.format("on-board-name",{url:s.url,name:s.name,boardPLevelAltText:t,boardPLevelIconClass:r})),f&&(n=e.orgPLevelAltText,o=e.orgPLevelIconClass,i.text(" - "),i.format("on-organization-name",{url:f.url,name:f.name,orgPLevelAltText:n,orgPLevelIconClass:o})),v?i.span(".js-hide-on-sending",function(){return l&&(i.text(" - "),i.a(".js-reply-to-action",{href:"#"},function(){return i.format("reply")})),c&&(i.text(" - "),i.a(".js-edit-action",{href:"#"},function(){return i.format("edit")})),a&&(i.text(" - "),i.a(".js-attach-link",{href:"#"},function(){return i.format("attach link")})),u?(i.text(" - "),i.a(".js-confirm-delete-action",{href:"#"},function(){return i.format("delete")})):void 0}):void 0})})},{}],553:[function(t,e,r){var n;n=t(416)("actions_empty"),e.exports=function(){return n.p(".empty-list",function(){return n.mustacheBlock("daysBack",function(){return n.format("no-actions-in-the-last-daysback-days",{daysBack:n.mustacheVar("daysBack")})}),n.mustacheBlockInverted("daysBack",function(){return n.format("no-actions")})})}},{}],554:[function(t,e,r){var n;n=t(416)("ad_business_class"),e.exports=function(){return n.format("check-out-business-class")}},{}],555:[function(t,e,r){var n;n=t(416)("ad_business_class_google_apps"),e.exports=function(){return n.span(".title",function(){return n.format("using-google-apps")}),n.span(".learn-more",function(){return n.a({href:"#"},function(){return n.format("learn-about-business-class-ellipsis")})})}},{}],556:[function(t,e,r){var n,o;o=t(416)("announcement"),n=function(t){var e;return e=["announcement"],t&&e.push(["announcement",t].join("-")),e.join(" ")},e.exports=o.renderable(function(t){var e,r,i,s;return e=t.url,i=t.title,r=t.html,s=t.type,o.div({class:n(s)},function(){o.h3(".announcement-header",function(){null!=e?o.a(".announcement-header-link",{target:"_blank",href:e},function(){return o.text(i)}):o.text(i)}),o.p(function(){return o.raw(r)}),null!=e&&o.p(".quiet",function(){return o.a({href:e,target:"_blank"},function(){return o.format("read-more-ellipsis")})})})})},{}],557:[function(t,e,r){var n;n=t(416)("archive_item"),e.exports=function(){return n.p(".item-name",function(){return n.mustacheBlock("url",function(){return n.a({href:n.mustacheVar("url")},function(){return n.text(n.mustacheVar("name"))})}),n.mustacheBlockInverted("url",function(){return n.span(function(){return n.text(n.mustacheVar("name"))})})}),n.mustacheBlock("__ed",function(){return n.div(".options",function(){return n.a(".button-link.js-reopen",{href:"#"},function(){return n.icon("refresh"),n.text(" "),n.text(n.mustacheVar("reOpenText"))}),n.mustacheBlock("canDelete",function(){return n.a(".button-link.negate.js-delete",{href:"#"},function(){return n.icon("remove","delete")})})})})}},{}],558:[function(t,e,r){var n;n=t(416)("archived_card_options"),e.exports=function(){return n.mustacheBlock("__ed",function(){return n.p(".quiet",{style:"margin-left: 8px;"},function(){return n.a(".js-reopen",{href:"#"},function(){return n.text(n.mustacheVar("reOpenText"))}),n.mustacheBlock("canDelete",function(){return n.text(" - "),n.a(".js-delete",{href:"#"},function(){return n.format("delete")})})})})}},{}],559:[function(t,e,r){var n;n=t(416)("archived_cards"),e.exports=function(){return n.div(".js-archive-items"),n.p(".empty-list.js-empty-message"),n.a(".show-more.js-more-cards",{href:"#"},function(){return n.format("load-more-cards")})}},{}],560:[function(t,e,r){var n;n=t(416)("archived_lists"),e.exports=function(){return n.ul(".archive-list.js-archive-items"),n.p(".js-empty-message.empty-list")}},{}],561:[function(t,e,r){var n;n=t(416)("atMention"),e.exports=function(){return n.span({class:"atMention"+n.mustacheBlock("isMe",function(){return" me"}),title:n.mustacheVar("fullName")},function(){return n.text(n.mustacheVar("atMention"))})}},{}],562:[function(t,e,r){var n;n=t(416)("attachment_thumb"),e.exports=n.renderable(function(t){var e,r,o,i,s,a,u,c,l,d,p,h,m,f,g,v;c=t.url,p=t.name,l=t.imgSrc,s=t.edgeColor,f=t.previewClass,u=t.ext,o=t.date,h=t.openIconClass,m=t.openText,g=t.removeText,e=t.canUseViewer,d=t.isCover,i=t.doDownload,a=t.editable,r={"attachment-thumbnail-preview":!0,"js-open-viewer":e,"attachment-thumbnail-preview-is-cover":d},v={},l&&(v["background-image"]=n.urlify(l)),s&&(v["background-color"]=s),n.a({href:c,class:n.classify(r),target:"_blank",title:p,style:n.stylify(v)},function(){f?n.span({class:["attachment-thumbnail-preview-service-logo",f].join(" ")}):l||(u?n.span(".attachment-thumbnail-preview-ext",function(){return n.text(u)}):n.span(".icon-lg.icon-attachment.attachment-thumbnail-preview-attachment-icon"))}),n.p({class:n.classify({"attachment-thumbnail-details":!0,"js-open-viewer":e})},function(){n.a(".attachment-thumbnail-details-title.js-attachment-thumbnail-details",{href:c,title:p,target:"_blank"},function(){n.text(p),o&&n.span(".u-block.quiet",function(){return n.format("added",{date:o})})}),n.span(".quiet.attachment-thumbnail-details-options",function(){var t;t={class:n.classify({"attachment-thumbnail-details-options-item":!0,"dark-hover":!0,"js-download":i}),href:c,target:"_blank"},i&&(t.download="download"),n.a(t,function(){return n.icon(h),n.text(" "),n.span(".attachment-thumbnail-details-options-item-text.js-direct-link",function(){return n.text(m)})}),a&&(n.a(".attachment-thumbnail-details-options-item.dark-hover.hide.js-make-cover",{href:"#"},function(){return n.icon("card-cover"),n.text(" "),n.span(".attachment-thumbnail-details-options-item-text",function(){return n.format("make-cover")})}),n.a(".attachment-thumbnail-details-options-item.dark-hover.hide.js-remove-cover",{href:"#"},function(){return n.icon("card-cover"),n.text(" "),n.span(".attachment-thumbnail-details-options-item-text",function(){return n.format("remove-cover")})}),n.a(".attachment-thumbnail-details-options-item.attachment-thumbnail-details-options-item-delete.dark-hover.js-confirm-delete",{href:"#"},function(){return n.icon("close"),n.text(" "),n.span(".attachment-thumbnail-details-options-item-text",function(){return n.text(g)})}))})})})},{}],563:[function(t,e,r){var n;n=t(416)("attachment_thumb_processing"),e.exports=n.renderable(function(){return n.div(".attachment-thumbnail.attachment-thumbnail-processing.js-attachment-thumb-processing",function(){return n.format("processing-ellipsis")})})},{}],564:[function(t,e,r){var n;n=t(416)("attachment_viewer"),e.exports=function(){return n.div(".attachment-viewer-header.js-close-viewer",function(){return n.span(".icon-lg.icon-close.attachment-viewer-header-close-icon")}),n.div(".attachment-viewer-underlay.js-close-viewer"),n.div(".attachment-viewer-frames.js-frames"),n.div(".attachment-viewer-overlay",function(){return n.div(".attachment-viewer-frame-details.js-display-frame-details")}),n.a(".attachment-viewer-next-frame-btn.js-show-next-frame",function(){return n.span(".icon-lg.icon-forward.light.attachment-viewer-next-frame-btn-icon")}),n.a(".attachment-viewer-prev-frame-btn.js-show-prev-frame",function(){return n.span(".icon-lg.icon-back.light.attachment-viewer-prev-frame-btn-icon")})}},{}],565:[function(t,e,r){var n;n=t(416)("attachment_viewer_frame"),e.exports=function(){return n.div({class:"attachment-viewer-frame js-close-viewer "+n.mustacheVar("directionClass"),"data-idAttachment":n.mustacheVar("id")},function(){return n.div(".attachment-viewer-frame-preview-wrapper",function(){return n.div({class:"attachment-viewer-frame-preview"+n.mustacheBlock("isImage",function(){return" attachment-viewer-frame-preview-image-wrapper"})},function(){return n.mustacheBlock("isImage",function(){return n.img(".attachment-viewer-frame-preview-image.js-stop",{src:n.mustacheVar("url"),alt:n.mustacheVar("name")})}),n.mustacheBlock("isAudio",function(){return n.audio(".attachment-viewer-frame-preview-audio.js-stop",{controls:!0,name:n.mustacheVar("name")},function(){return n.source({src:n.mustacheVar("url"),type:"audio/"+n.mustacheVar("ext")})})}),n.mustacheBlock("isVideo",function(){return n.video(".attachment-viewer-frame-preview-video.js-stop",{controls:!0,name:n.mustacheVar("name"),src:n.mustacheVar("url")})}),n.mustacheBlock("isIFrameable",function(){return n.iframe(".attachment-viewer-frame-preview-iframe.js-stop",{src:n.mustacheVar("url")})}),n.mustacheBlock("isPlaceholder",function(){return n.p(".attachment-viewer-frame-preview-placeholder",function(){return n.format("there-is-no-preview-available-for-this-attachment-opentext",{url:n.mustacheVar("url"),openText:n.mustacheVar("openText")})})})})})})}},{}],566:[function(t,e,r){var n;n=t(416)("attachment_viewer_frame_details"),e.exports=function(){return n.div(".attachment-viewer-frame-details",function(){return n.h2(".attachment-viewer-frame-details-title",function(){return n.text(n.mustacheVar("name"))}),n.p(function(){return n.mustacheBlock("date",function(){return n.format("added",{date:n.mustacheVar("date")})}),n.mustacheBlock("meta",function(){return n.text(" - "),n.text(n.mustacheVar("meta"))})}),n.p(function(){return n.span(".js-meta",function(){var t;return t={href:n.mustacheVar("url"),target:"_blank"},n.mustacheBlock("doDownload",function(){return t.download=n.mustacheVar("name")}),n.a(t,function(){return n.span({class:"icon-sm icon-"+n.mustacheVar("openIconClass")+" light attachment-viewer-option-icon"}),n.text(n.mustacheVar("openText"))}),n.mustacheBlock("__ed",function(){return n.span({class:"js-cover-options"+n.mustacheBlockInverted("canMakeCover",function(){return" hide"})},function(){return n.span({class:"js-make-cover-box"+n.mustacheBlock("isCover",function(){return" hide"})},function(){return n.a(".js-make-cover",{href:"#"},function(){return n.icon("card-cover","make-cover",{class:"light attachment-viewer-option-icon"})})}),n.span({class:"js-remove-cover-box"+n.mustacheBlockInverted("isCover",function(){return" hide"})},function(){return n.a(".js-remove-cover",{href:"#"},function(){return n.icon("card-cover","remove-cover",{class:"light attachment-viewer-option-icon"})})})}),n.a(".js-open-delete-confirm",{href:"#"},function(){return n.icon("close",{class:"light attachment-viewer-option-icon"}),n.text(n.mustacheVar("removeButtonText"))})})}),n.span(".js-confirm-delete.hide",function(){return n.text(n.mustacheVar("removeMessageText")),n.a(".attachment-viewer-delete-link.js-delete",{href:"#"},function(){return n.text(n.mustacheVar("removeConfirmText"))}),n.a(".attachment-viewer-delete-link.js-close-delete-confirm",{href:"#"},function(){return n.text(n.mustacheVar("removeCancelText"))})})})})}},{}],567:[function(t,e,r){var n;n=t(416)("avatar_change"),e.exports=function(){return n.mustacheBlock("uploadedAvatarHash",function(){return n.a({class:"avatar-option js-use-uploaded-avatar "+n.mustacheBlock("avatarSource_upload",function(){return"active"}),href:"#"},function(){return n.img(".pic",{src:n.mustacheVar("__avatarDomain")+"/"+n.mustacheVar("uploadedAvatarHash")+"/50.png"}),n.span(".text",function(){return n.format("uploaded-picture"),n.icon("check")})}),n.hr()}),n.div(".js-grav.hide",function(){return n.a({class:"avatar-option js-use-gravatar "+n.mustacheBlock("avatarSource_gravatar",function(){return"active"}),href:"#"},function(){return n.img(".pic",{src:"https://secure.gravatar.com/avatar/"+n.mustacheVar("gravatarHash")+".png?s=50&r=PG&d=404"}),n.span(".text",function(){return n.format("gravatar"),n.icon("check")})}),n.hr()}),n.a({class:"avatar-option js-no-avatar "+n.mustacheBlock("avatarSource_none",function(){return"active"}),href:"#"},function(){return n.span(".pic.member",function(){return n.span(".member-initials",function(){return n.text(n.mustacheVar("initials"))})}),n.span(".text",function(){return n.format("initials-no-avatar"),n.icon("check")})}),n.hr(),n.mustacheBlock("canTakePhoto",function(){return n.a(".button-link.js-take-photo",{href:"#"},function(){return n.icon("camera","take-photo-with-camera")}),n.hr()}),n.p(".error.hide.js-error"),n.div(".uploader",function(){return n.form(".realfile",{action:"/1/member/"+n.mustacheVar("id")+"/avatar",method:"post",enctype:"multipart/form-data"},function(){return n.input({type:"hidden",name:"token",value:""}),n.input({type:"hidden",name:"format",value:"http"}),n.input(".js-upload-avatar",{type:"file",name:"file",style:"margin-bottom: 0;",tabindex:"-1",accept:"image/*;capture=camera"})}),n.a(".button-link.fakefile",function(){return n.mustacheBlock("uploadedAvatarHash",function(){return n.icon("attachment","upload-a-new-picture")}),n.mustacheBlockInverted("uploadedAvatarHash",function(){return n.icon("attachment","upload-a-picture")})})})}},{}],568:[function(t,e,r){var n;n=t(416)("badge"),e.exports=function(){return n.span({class:"badge-icon icon-sm icon-"+n.mustacheVar("icon")}),n.mustacheBlock("text",function(){return n.span(".badge-text",function(){return n.text(n.mustacheVar("text"))})})}},{}],569:[function(t,e,r){var n,o;o=t(416)("billing_contact"),n=t(21),e.exports=o.renderable(function(t){var e,r,i;return r=t.fullName,e=t.email,i=t.locale,o.div(".error",{style:"display:hidden"}),o.form(function(){return o.label({for:"billingContactFullName"},function(){return o.format("name")}),o.input(".text",{name:"billingContactFullName",type:"text",id:"billingContactFullName",value:r,maxlength:"50"}),o.label({for:"billingContactEmail"},function(){return o.format("email")}),o.input(".text",{name:"billingContactEmail",type:"text",id:"billingContactEmail",value:e}),o.label({for:"billingContactLocale"},function(){return o.format("language")}),o.select({name:"billingContactLocale",id:"billingContactLocale"},function(){var t,e,r,s,a,u,c;for(a=[],t=0,e=n.length;e>t;t++)s=n[t],c=s.code,r=s.name,u=c.toLowerCase()===i.toLowerCase(),a.push(o.option({value:c,selected:u},function(){return o.text(r)}));return a}),o.input(".primary.js-submit",{type:"submit",value:o.l("save")})})})},{}],570:[function(t,e,r){var n;n=t(416)("board"),e.exports=function(){return n.div(".board-main-content",function(){return n.div(".board-header.u-clearfix.js-board-header"),n.div(".board-canvas")}),n.div(".board-menu.js-fill-board-menu")}},{}],571:[function(t,e,r){var n;n=t(416)("board_archive"),e.exports=function(){return n.div(".archive-controls",function(){return n.div(".archive-controls-search",function(){return n.input(".js-search.js-autofocus",{type:"text",placeholder:n.l("search archive")})}),n.a(".archive-controls-switch.quiet-button.js-switch-section",{href:"#"})}),n.div(".spinner.loading.js-loading-spinner"),n.div(".archive-content.js-archive-content")}},{}],572:[function(t,e,r){var n;n=t(416)("board_background_options"),e.exports=function(){return n.p(".u-font-weight-bold.quiet",function(){return n.format("display-type")}),n.ul(".pop-over-list",function(){return n.li(function(){return n.a(".js-select-option",{href:"#","data-background-display-type":"cover"},function(){return n.check(!n.mustacheVar("tile"),"cover")})}),n.li(function(){return n.a(".js-select-option",{href:"#","data-background-display-type":"tile"},function(){return n.check(n.mustacheVar("tile"),"tile")})})}),n.hr(),n.p(".u-font-weight-bold.quiet",function(){return n.format("board-text")}),n.ul(".pop-over-list",function(){return n.li(function(){return n.a(".js-select-option",{href:"#","data-board-brightness":"dark"},function(){return n.check(n.mustacheVar("brightnessDark"),"light")})}),n.li(function(){return n.a(".js-select-option",{href:"#","data-board-brightness":"light"},function(){return n.check(n.mustacheVar("brightnessLight"),"dark")})})}),n.hr(),n.a(".quiet-button.js-delete-background",{href:"#"},function(){return n.format("delete-background")})}},{}],573:[function(t,e,r){var n;n=t(416)("board_background_selection"),e.exports=function(){return n.span({class:"background-box "+n.mustacheBlock("pending",function(){return"background-box-unselectable"})+n.mustacheBlock("tile",function(){return" background-tile"}),style:" "+n.mustacheBlock("backgroundImageThumbnail",function(){return'background-image: url("'+n.mustacheVar("backgroundImageThumbnail")+'")'})+"; "+n.mustacheBlock("color",function(){return"background-color: "+n.mustacheVar("color")+";"})+" "},function(){return n.mustacheBlock("attribution",function(){return n.a(".background-option.js-background-attribution",{href:n.mustacheVar("url"),target:"_blank",title:n.mustacheVar("url")},function(){return n.img({src:"https://d78fikflryjgj.cloudfront.net/images/d906fe5c1274c56c5571d49705547587/cc.png",style:"height: 14px; width: 14px; vertical-align: text-top;",title:n.mustacheVar("license")}),n.span(".text",{style:"margin-left: 2px;"},function(){return n.text(n.mustacheVar("name"))})})}),n.mustacheBlock("id",function(){return n.a(".background-option.js-options",function(){return n.icon("dropdown-menu",{class:"light",style:"vertical-align: bottom;"}),n.span(".text",function(){return n.format("options")})})}),n.mustacheBlock("error",function(){return n.span(".background-info",function(){return n.span(".text",function(){return n.text(n.mustacheVar("error"))})})}),n.mustacheBlock("pending",function(){return n.span(".background-info",function(){return n.span(".spinner.small.u-float-left",{style:"margin-right: 4px;"}),n.span(".text",function(){return n.format("uploading-ellipsis")})})})})}},{}],574:[function(t,e,r){var n;n=t(416)("board_change_background"),e.exports=function(){return n.div(".board-backgrounds-list.u-clearfix.js-default-list"),n.h2(function(){return n.format("photos")}),n.div({class:"board-backgrounds-list u-relative u-clearfix js-gold-photos-list"+n.mustacheBlockInverted("enabled_additionalBackgrounds",function(){return" disabled"})}),n.h2(function(){return n.format("patterns-and-textures")}),n.div({class:"board-backgrounds-list u-relative u-clearfix js-gold-patterns-list"+n.mustacheBlockInverted("enabled_additionalBackgrounds",function(){return" disabled"})}),n.h2(function(){return n.format("custom")}),n.div({class:"board-backgrounds-list u-relative u-clearfix js-custom-list"+n.mustacheBlockInverted("enabled_customBoardBackgrounds",function(){return" disabled"})},function(){return n.div(".board-background-select.board-background-select-upload.js-uploader",function(){return n.form({action:"/1/member/"+n.mustacheVar("idMember")+"/customBoardBackgrounds",method:"post",enctype:"multipart/form-data"},function(){return n.input({type:"hidden",name:"token",value:""}),n.input({type:"hidden",name:"format",value:"http"}),n.span(".background-box",function(){return n.span(".icon-lg.icon-add")}),n.input(".upload-background.js-upload-image",{type:"file",name:"file",multiple:"multiple",accept:"image/*"})})})})}},{}],575:[function(t,e,r){var n;n=t(416)("board_closed"),e.exports=function(){return n.div(".big-message.quiet",function(){return n.h1(function(){return n.format("name-is-closed",{name:n.mustacheVar("name")})}),n.mustacheBlock("__own",function(){return n.p(function(){return n.a(".js-reopen",{href:"#"},function(){return n.format("click-here-to-re-open-it")})})}),n.mustacheBlockInverted("__own",function(){return n.mustacheBlock("__ed",function(){return n.p(function(){return n.format("you-re-a-member-of-this-board-but-only-board-admins-are-able-to-re-open-it")})})})})}},{}],576:[function(t,e,r){var n;n=t(416)("board_desc"),e.exports=function(){return n.div(".window-header.u-clearfix",function(){return n.span(".window-header-icon.icon-lg.icon-board"),n.div({class:"window-title non-empty u-inline "+n.mustacheBlock("__own",function(){return" editable "})+" ",attr:"name"},function(){return n.h2(".window-title-text.current.hide-on-edit",function(){return n.text(n.mustacheVar("name"))}),n.mustacheBlock("__own",function(){return n.p(".edits-warning.quiet",function(){return n.format("you-have-unsaved-edits-on-this-field"),n.text(" "),n.a(".js-view-edits",{href:"#"},function(){return n.format("view-edits")}),n.text(" - "),n.a(".js-discard-edits",{href:"#"},function(){return n.format("discard")})}),n.div(".edit.edit-heavy",function(){return n.textarea(".field.single-line",{type:"text"})})})})}),n.div(".window-main-col.window-main-col-full",function(){return n.div({class:"board-description u-clearfix"+n.mustacheBlock("__ed",function(){return" editable"}),attr:"desc"},function(){return n.div(".current.markeddown.hide-on-edit.u-bottom",function(){return n.mustacheBlockInverted("hasDesc",function(){return n.p(".u-bottom",function(){return n.mustacheBlock("__ed",function(){return n.a(".quiet.empty",{style:"padding: 100px 0;",href:"#"},function(){return n.format("no-description-click-to-edit")})}),n.mustacheBlockInverted("__ed",function(){return n.span(".quiet.empty",{style:"padding: 100px 0;"},function(){return n.format("no-description")})})})})}),n.mustacheBlock("__ed",function(){return n.mustacheBlock("hasDesc",function(){return n.p(".u-bottom.js-edit-desc",function(){return n.a(".quiet-button.mod-with-image.hide-on-edit",{href:"#"},function(){return n.icon("edit","edit-the-board-description",{class:"quiet-button-icon"})})})}),n.p(".edits-warning.quiet",function(){return n.format("you-have-unsaved-edits-on-this-field"),n.text(" "),n.a(".js-view-edits",{href:"#"},function(){return n.format("view-edits")}),n.text(" - "),n.a(".js-discard-edits",{href:"#"},function(){return n.format("discard")})}),n.div(".board-description-edit.edit",function(){return n.p(".helper",function(){return n.format("markdown-accepted")}),n.textarea(".field")})})})})}},{}],577:[function(t,e,r){var n;n=t(416)("board_header"),e.exports=n.renderable(function(t){var e,r,o,i,s,a,u,c,l;return e=t.canRename,c=t.orgLogoUrl,i=t.hasBusinessClass,u=t.orgDisplayName,a=t.name,l=t.orgName,s=t.isLoggedIn,r={"board-header-btn":!0,"board-header-btn-name":!0,"js-rename-board":e,"no-edit":!e,"board-header-btn-name-with-org-logo":c},o={"board-header-btn":!0,"board-header-btn-org-name":!0,"js-open-org-menu":!0,"board-header-btn-without-icon":!i},n.a({href:"#",class:n.classify(r)},function(){return c&&n.img(".board-header-btn-name-org-logo",{src:c}),n.span(".board-header-btn-text",function(){return n.text(a)})}),u&&n.a({href:"/"+l,class:n.classify(o)},function(){return i&&n.icon("business-class",{class:"board-header-btn-icon"}),n.span(".board-header-btn-text",function(){return n.text(u)})}),n.div(".board-header-btns.mod-left",function(){return s&&n.a(".board-header-btn.js-star-board",{href:"#",title:n.l("click-to-star-or-unstar-this-board-starred-boards-show-up-at-the-top-of-your-boards-list"),"aria-label":n.l("star-or-unstar-board")},function(){return n.icon("star",{class:"board-header-btn-icon"})}),n.a(".board-header-btn.hide.js-open-desc.js-fill-desc",{href:"#"},function(){return n.icon("description",{class:"board-header-btn-icon"})}),n.a(".board-header-btn.perms-btn.js-change-vis",{href:"#",id:"permission-level"})}),n.div(".board-header-btns.mod-right",function(){return n.a(".board-header-btn.board-header-btn-filter-indicator.hide.js-filter-cards-indicator",{href:"#"},function(){return n.icon("filter",{class:"board-header-btn-icon"}),n.span(".board-header-btn-text.u-text-underline",function(){return n.format("filtering-is-on")}),n.icon("close",{class:"board-header-btn-icon-close js-filter-card-clear"})}),n.a(".board-header-btn.sub-btn.hide.js-board-header-subscribed",{href:"#"},function(){return n.icon("subscribe",{class:"board-header-btn-icon"}),n.span(".board-header-btn-text.u-text-underline",function(){return n.format("subscribed")})}),n.a(".board-header-btn.calendar-btn.hide.js-calendar",{href:"#"},function(){return n.icon("calendar",{class:"board-header-btn-icon"}),n.span(".board-header-btn-text.u-text-underline",function(){return n.format("calendar")})}),n.span(".js-plugin-header-btns"),n.a(".board-header-btn.mod-show-menu.js-show-sidebar",{href:"#"},function(){return n.icon("back",{class:"board-header-btn-icon"}),n.span(".board-header-btn-text.u-text-underline",function(){return n.format("show-menu")})})})})},{}],578:[function(t,e,r){var n;n=t(416)("board_header_permissions"),e.exports=n.renderable(function(t){var e,r,o;return r=t.permIconClass,o=t.permText,n.span({class:n.classify((e={"board-header-btn-icon":!0,"icon-sm":!0},e["icon-"+r]=!0,e))}),n.span(".board-header-btn-text",function(){return n.text(o)})})},{}],579:[function(t,e,r){var n;n=t(416)("board_list"),e.exports=n.renderable(function(t){return n.div(".boards-page-board-section-header",function(){return n.div(".boards-page-board-section-header-icon",function(){return t.logoHash?n.img({class:"boards-page-board-section-header-icon-image",src:t.logoDomain+"/"+t.logoHash+"/30.png",alt:t.displayName+" logo"}):n.span({class:"icon-lg icon-"+t.iconClass})}),n.h3(".boards-page-board-section-header-name",function(){return n.text(t.title)}),t.isOrg?(t.hasBusinessClass&&n.span(".boards-page-board-section-header-bc-icon",function(){return n.icon("business-class",{title:n.l("business-class")})}),n.div(".boards-page-board-section-header-options",function(){return n.a(".boards-page-board-section-header-options-item.dark-hover.js-view-org-boards",{href:t.boardsUrl},function(){return n.icon("board",{class:"boards-page-board-section-header-options-item-icon"}),n.span(".boards-page-board-section-header-options-item-name",function(){return n.format("boards")})}),n.a(".boards-page-board-section-header-options-item.dark-hover.js-view-org-members",{href:t.membersUrl},function(){return n.icon("member",{class:"boards-page-board-section-header-options-item-icon"}),n.span(".boards-page-board-section-header-options-item-name",function(){return n.format("members")})}),n.a(".boards-page-board-section-header-options-item.dark-hover.js-view-org-settings",{href:t.settingsUrl},function(){return n.icon("gear",{class:"boards-page-board-section-header-options-item-icon"}),n.span(".boards-page-board-section-header-options-item-name",function(){return n.format("settings")})})})):void 0}),n.ul(".board-list.js-board-list")})},{}],580:[function(t,e,r){var n;n=t(416)("board_list_item"),e.exports=n.renderable(function(t){var e,r,o,i,s,a,u,c,l,d,p;return u=t.isLoggedIn,c=t.name,l=t.orgname,p=t.url,a=t.current,o=t.backgroundImageThumbnail,r=t.backgroundColor,e=t.backgroundBrightness,i=t.backgroundTile,s={"js-open-board":!0,current:a,tile:i},e&&(s[e]=!0),d={},o&&(d["background-image"]=n.urlify(o)),r&&(d["background-color"]=r),n.a({class:n.classify(s),href:p,style:n.stylify(d)},function(){return n.span(".fade"),n.span({class:n.classify({details:!0,"has-sub-name":l})},function(){return n.span(".board-list-item-name",{title:c},function(){return n.text(c)}),l?n.span(".board-list-item-sub-name",{title:l},function(){return n.text(l)}):void 0}),u?n.span({class:"options"},function(){return n.span(".unread-indicator.js-unread",{title:n.l("there-is-new-activity-on-this-board")}),n.icon("star",{class:"board-list-item-icon-star js-star-board",title:n.l("click-to-star-this-board-it-will-show-up-at-top-of-your-boards-list")})}):void 0})})},{}],581:[function(t,e,r){var n;n=t(416)("board_list_item_add"),e.exports=function(){return n.li(function(){return n.a(".board-list-item--add-board.js-add-board",{href:"#"},function(){return n.format("create-new-board-ellipsis")})})}},{}],582:[function(t,e,r){var n;n=t(416)("board_member_profile"),e.exports=function(){return n.div(".window-header.u-clearfix",function(){return n.span(".window-header-icon.icon-lg.icon-activity"),n.h2(".window-title",function(){return n.text(n.mustacheVar("fullName")),n.span(".quiet",{style:"margin-left: 3px"},function(){return n.format("username",{username:n.mustacheVar("username")})})})}),n.div(".window-main-col.window-main-col-full",function(){return n.div(".list-actions",function(){return n.p(".js-board-member-profile-no-activity",function(){return n.format("this-member-has-no-board-activity")})}),n.a(".show-more.js-more-actions",{href:"#"},function(){return n.format("load-more-activity")})})}},{}],583:[function(t,e,r){var n;n=t(416)("board_menu_activity"),e.exports=function(){return n.div(".segmented-control",function(t){return function(){return n.a(".segmented-control-item.js-show-all.js-control-option",{href:"#"},function(){return n.format("all")}),n.a(".segmented-control-item.js-show-comments.js-control-option",{href:"#"},function(){return n.format("comments")})}}(this)),n.div(".phenom-list.js-list-activity"),n.a(".show-more.js-more-actions",{href:"#"},function(t){return function(){return n.format("load-more-activity")}}(this))}},{}],584:[function(t,e,r){var n;n=t(416)("board_menu_commenting"),e.exports=function(){return n.li(function(){return n.a(".js-select",{href:"#",name:"disabled"},function(){return n.check(n.mustacheVar("comments_disabled"),"disabled"),n.span(".sub-name",function(){return n.format("no-one-is-allowed-to-comment")})})}),n.li(function(){return n.a(".js-select",{href:"#",name:"members"},function(){return n.check(n.mustacheVar("comments_members"),"members"),n.span(".sub-name",function(){return n.format("allow-admins-and-normal-members-to-comment")})})}),n.li(function(){return n.a({href:"#",class:"js-select"+n.mustacheBlockInverted("comments_showObservers",function(){return" disabled"}),name:"observers"},function(){return n.check(n.mustacheVar("comments_observers"),"members-and-observers"),n.span(".sub-name",function(){return n.format("allow-admins-normal-members-and-observers-to-comment")})})}),n.li(function(){return n.a({href:"#",class:"js-select"+n.mustacheBlockInverted("orgCanSee",function(){return" disabled"}),name:"org"},function(){return n.check(n.mustacheVar("comments_org"),"organization-members"),n.span(".sub-name",function(){return n.format("allow-admins-normal-members-observers-and-organization-members-to-comment")})})}),n.li(function(){return n.a({href:"#",class:"js-select"+n.mustacheBlockInverted("permissionLevel_public",function(){return" disabled"}),name:"public"},function(){return n.check(n.mustacheVar("comments_public"),"public-members"),n.span(".sub-name",function(){return n.format("allow-any-trello-member-to-comment")})})})}},{}],585:[function(t,e,r){var n;n=t(416)("board_menu_default"),e.exports=function(){return n.p(".error.js-file-too-large",{style:"margin: 12px 0 6px; display:none;"},function(){return n.format("file-too-large-10mb-limit")}),n.div({class:"u-clearfix js-list-board-members "+n.mustacheBlock("__ed",function(){return" js-list-draggable-board-members"})}),n.div(".board-members-extras-button.u-clearfix.js-show-extra-members-button",function(){return n.a(".quiet-button.js-show-extra-members",{href:"#"},function(){return n.format("show-hidden-members"),n.text(" "),n.span(".js-fill-extras-length")})}),n.div(".board-members-extras-button.u-clearfix.js-hide-extra-members-button",function(){
return n.a(".quiet-button.js-hide-extra-members",{href:"#"},function(){return n.format("show-fewer-members")})}),n.div(".js-list-observers"),n.mustacheBlock("canInviteMembers",function(){return n.a(".button-link.mod-full.js-open-manage-board-members",{href:"#"},function(){return n.icon("add-member","add-members-ellipsis")})}),n.mustacheBlock("canJoin",function(){return n.a(".button-link.js-join-board",{href:"#",style:"margin-bottom: 0;"},function(){return n.icon("add-member","join-board")}),n.mustacheBlock("selfJoin_true",function(){return n.p(".helper",{style:"margin-top: 8px;"},function(){return n.format("org-members-can-join-this-board")})})}),n.hr(),n.ul(".board-menu-navigation",function(){return n.mustacheBlock("__ed",function(){return n.li(".board-menu-navigation-item.mod-background",function(){return n.a(".board-menu-navigation-item-link.js-change-background",{href:"#"},function(){return n.span(".board-menu-navigation-item-link-icon.js-fill-background-preview"),n.format("change-background")})})}),n.li(".board-menu-navigation-item",function(){return n.a(".board-menu-navigation-item-link.js-open-card-filter",{href:"#"},function(){return n.icon("filter","filter-cards",{class:"board-menu-navigation-item-link-icon"})})}),n.mustacheBlock("__ed",function(){return n.li(".board-menu-navigation-item",function(){return n.a(".board-menu-navigation-item-link.js-open-power-ups",{href:"#"},function(){return n.icon("power-up","power-ups",{class:"board-menu-navigation-item-link-icon"}),n.span(".board-menu-navigation-item-link-count.js-enabled-power-up-count")})}),n.mustacheBlockInverted("isShortHeight",function(){return n.li(".board-menu-navigation-item",function(){return n.a(".board-menu-navigation-item-link.js-open-stickers",{href:"#"},function(){return n.icon("sticker","stickers",{class:"board-menu-navigation-item-link-icon"})})})})}),n.li(".board-menu-navigation-item",function(){return n.a(".board-menu-navigation-item-link.js-open-more",{href:"#"},function(){return n.icon("overflow-menu-horizontal","more",{class:"board-menu-navigation-item-link-icon"})})})}),n.hr(),n.a(".board-menu-section-header.js-open-activity",{href:"#"},function(){return n.span(".board-menu-section-header-icon.icon-lg.icon-activity"),n.span(".board-menu-section-header-title",function(){return n.format("activity")}),n.span(".board-menu-section-header-count.js-unread-activity-count")}),n.div(".js-menu-action-list"),n.a(".show-more.js-fill-activity-button.js-open-activity",{href:"#"})}},{}],586:[function(t,e,r){var n;n=t(416)("board_menu_email"),e.exports=function(){return n.label({for:"boardEmail"},function(){return n.format("your-email-address-for-this-board")}),n.input(".non-empty.js-autofocus",{id:"boardEmail",type:"text",name:"boardEmail",readonly:"readonly",placeholder:n.l("loading-ellipsis"),value:n.mustacheVar("email"),style:"margin: 4px 0 8px;"}),n.a(".quiet-button.js-generate-address",{href:"#"},function(){return n.format("generate-a-new-email-address")}),n.a(".quiet-button.js-send-address",{href:"#"},function(){return n.format("email-me-this-address")}),n.hr(),n.label(function(){return n.format("your-emailed-cards-appear-in-ellipsis")}),n.div(".form-grid",function(){return n.div(".button-link.setting.form-grid-child.form-grid-child-twothirds",function(){return n.span(".label",function(){return n.format("list")}),n.span(".value.js-list-value",function(){return n.text(n.mustacheVar("listName"))}),n.label(function(){return n.format("list")}),n.select(".js-select-list",function(){return n.mustacheBlock("lists",function(){return n.optionSelected(n.mustacheVar("selected"),{value:n.mustacheVar("id")},function(){return n.text(n.mustacheVar("name"))})})})}),n.div(".button-link.setting.form-grid-child.form-grid-child-third",function(){return n.span(".label",function(){return n.format("position")}),n.span(".value.js-pos-value",function(){return n.text(n.mustacheVar("positionName"))}),n.label(function(){return n.format("position")}),n.select(".js-select-position",function(){return n.optionSelected(n.mustacheVar("position_top"),{value:"top"},function(){return n.format("top")}),n.optionSelected(n.mustacheVar("position_bottom"),{value:"bottom"},function(){return n.format("bottom")})})})}),n.hr(),n.p(".u-bottom.quiet",function(){return n.format("tip-dont-share-this-email-address-anyone-who-has-it-can-add-cards-as-you-when-composing-emails-the-card-title-goes-in-the-subject-and-the-card-description-in-the-body-more-email-formatting-tips")})}},{}],587:[function(t,e,r){var n;n=t(416)("board_menu_invitations"),e.exports=function(){return n.li(function(){return n.a(".js-select",{href:"#",name:"admins"},function(){return n.check(n.mustacheVar("invitations_admins"),"admins"),n.span(".sub-name",function(){return n.format("allow-only-admins-to-add-and-invite-others")})})}),n.li(function(){return n.a(".js-select",{href:"#",name:"members"},function(){return n.check(n.mustacheVar("invitations_members"),"all-members"),n.span(".sub-name",function(){return n.format("allow-members-and-admins-to-add-and-invite-others")})})})}},{}],588:[function(t,e,r){var n;n=t(416)("board_menu_more"),e.exports=function(){return n.ul(".board-menu-navigation",function(){return n.li(".board-menu-navigation-item",function(){return n.a(".board-menu-navigation-item-link.js-open-settings",{href:"#"},function(){return n.icon("gear","settings",{class:"board-menu-navigation-item-link-icon"})})}),n.mustacheBlock("editableByMember",function(){return n.mustacheBlock("isShortHeight",function(){return n.li(".board-menu-navigation-item",function(){return n.a(".board-menu-navigation-item-link.js-open-stickers",{href:"#"},function(){return n.icon("sticker","stickers",{class:"board-menu-navigation-item-link-icon"})})})})}),n.li(".board-menu-navigation-item",function(){return n.a(".board-menu-navigation-item-link.js-open-labels",{href:"#"},function(){return n.icon("label","labels",{class:"board-menu-navigation-item-link-icon"})})}),n.li(".board-menu-navigation-item",function(){return n.a(".board-menu-navigation-item-link.js-open-archive",{href:"#"},function(){return n.icon("archive","archived-items",{class:"board-menu-navigation-item-link-icon"})})})}),n.hr(),n.ul(".board-menu-navigation",function(){return n.mustacheBlock("editableByMember",function(){return n.li(".board-menu-navigation-item",function(){return n.a(".board-menu-navigation-item-link.js-email",{href:"#"},function(){return n.icon("email","email-to-board-settings",{class:"board-menu-navigation-item-link-icon"})})})}),n.mustacheBlock("__loggedIn",function(){return n.li(".board-menu-navigation-item",function(){return n.a(".board-menu-navigation-item-link.js-board-subscribe",{href:"#"},function(){return n.icon("subscribe",{class:"board-menu-navigation-item-link-icon"}),n.span(".js-subscribed-state")})}),n.li(".board-menu-navigation-item",function(){return n.a(".board-menu-navigation-item-link.js-copy-board",{href:"#"},function(){return n.icon("board","copy-board",{class:"board-menu-navigation-item-link-icon"})})})}),n.li(".board-menu-navigation-item",function(){return n.a(".board-menu-navigation-item-link.js-share",{href:"#"},function(){return n.icon("share","print-and-export",{class:"board-menu-navigation-item-link-icon"})})})}),n.mustacheBlock("canCloseOrLeave",function(){return n.hr(),n.ul(".board-menu-navigation",function(){return n.mustacheBlock("canCloseBoard",function(){return n.li(".board-menu-navigation-item",function(){return n.a(".board-menu-navigation-item-link.js-close-board",{href:"#"},function(){return n.format("close-board-ellipsis")})})}),n.mustacheBlock("canLeaveBoard",function(){return n.li(".board-menu-navigation-item",function(){return n.a(".board-menu-navigation-item-link.js-leave-board",{href:"#"},function(){return n.format("leave-board-ellipsis")})})})})}),n.hr(),n.form(".u-gutter",function(){return n.label({for:"id-short-url"},function(){return n.format("link-to-this-board")}),n.input(".js-short-url",{type:"text",readonly:"readonly",id:"id-short-url",value:n.mustacheVar("shortUrl")}),n.p(".quiet",function(){return n.span({class:"icon-sm icon-"+n.mustacheVar("pLevelClass"),title:n.mustacheVar("pLevelAltText")}),n.text(n.mustacheVar("helperText"))})})}},{}],589:[function(t,e,r){var n;n=t(416)("board_menu_more_activity_button"),e.exports=function(){return n.mustacheBlockInverted("hasCount",function(t){return function(){return n.format("view-all-activity-ellipsis")}}(this)),n.mustacheBlock("hasCount",function(t){return function(){return n.format("view-all-unread-activity-count-ellipsis",{count:n.mustacheVar("count")})}}(this))}},{}],590:[function(t,e,r){var n;n=t(416)("board_menu_settings"),e.exports=function(){return n.ul(".pop-over-list.inset",function(t){return function(){return n.li(function(){return n.a({class:"js-change-org"+n.mustacheBlockInverted("canChangeOrg",function(){return" disabled"}),href:"#"},function(){return n.mustacheBlock("setOrgNull",function(){return n.format("remove-from-organization")}),n.mustacheBlockInverted("setOrgNull",function(){return n.format("change-organization-ellipsis")}),n.mustacheBlock("orgDisplayName",function(){return n.span(".sub-name",function(){return n.text(n.mustacheVar("orgDisplayName"))})})})}),n.hr(),n.li(function(){return n.a({class:n.mustacheBlock("__own",function(){return"js-toggle-covers"})+n.mustacheBlockInverted("__own",function(){return" disabled"}),href:"#"},function(){return n.mustacheBlockInverted("cardCovers",function(){return n.format("enable-card-cover-images")}),n.mustacheBlock("cardCovers",function(){return n.format("card-cover-images-enabled"),n.icon("check")}),n.span(".sub-name",function(){return n.format("show-images-on-front-of-cards")})})}),n.hr(),n.li(function(){return n.a({class:n.mustacheBlock("__own",function(){return"js-change-comments"})+n.mustacheBlockInverted("__own",function(){return" disabled"}),href:"#"},function(){return n.format("commenting-permissions-ellipsis-commentsdisplay",{commentsDisplay:n.mustacheVar("commentsDisplay")})})}),n.li(function(){return n.a({class:n.mustacheBlock("__own",function(){return"js-change-add-members"})+n.mustacheBlockInverted("__own",function(){return" disabled"}),href:"#"},function(){return n.format("invitations-permissions-ellipsis-invitationsdisplay",{invitationsDisplay:n.mustacheVar("invitationsDisplay")})})}),n.hr(),n.li(function(){return n.a({class:" "+n.mustacheBlock("__own",function(){return" js-toggle-org-mem-join "})+" "+n.mustacheBlockInverted("__own",function(){return" disabled "})+" "+n.mustacheBlockInverted("hasOrg",function(){return" disabled "})+" "+n.mustacheBlock("permissionLevel_private",function(){return" disabled "})+" ",href:"#"},function(){return n.check(n.mustacheVar("selfJoin_true"),"allow-org-members-to-join"),n.span(".sub-name",function(){return n.mustacheBlock("hasOrg",function(){return n.mustacheBlock("permissionLevel_private",function(){return n.format("any-organization-member-can-join-this-board-without-being-invited-to-enable-this-the-board-cant-be-private")})}),n.mustacheBlock("hasOrg",function(){return n.mustacheBlockInverted("permissionLevel_private",function(){return n.format("any-organization-member-can-join-this-board-without-being-invited")})}),n.mustacheBlockInverted("hasOrg",function(){return n.mustacheBlock("permissionLevel_private",function(){return n.format("any-organization-member-can-join-this-board-without-being-invited-to-enable-this-the-board-has-to-be-a-part-of-an-org-and-the-board-cant-be-private")})}),n.mustacheBlockInverted("hasOrg",function(){return n.mustacheBlockInverted("permissionLevel_private",function(){return n.format("any-organization-member-can-join-this-board-without-being-invited-to-enable-this-the-board-has-to-be-a-part-of-an-org")})})})})})}}(this))}},{}],591:[function(t,e,r){var n;n=t(416)("board_menu_subscribed_state"),e.exports=function(){return n.check(n.mustacheVar("subscribed"),"subscribe")}},{}],592:[function(t,e,r){var n;n=t(416)("board_menu_vis"),e.exports=function(){return n.mustacheBlock("explanationText",function(){return n.p(".quiet",function(){return n.text(n.mustacheVar("explanationText"))})}),n.li(function(){return n.a({class:"js-select"+n.mustacheBlockInverted("disabledVis_private",function(){return" light-hover"})+" "+n.mustacheBlock("disabledVis_private",function(){return" disabled"})+" ",href:"#",name:"private"},function(){return n.span({class:"icon-sm icon-"+n.mustacheVar("iconClass_private")+" vis-icon"}),n.check(n.mustacheVar("permissionLevel_private"),"private"),n.span(".sub-name",function(){return n.text(n.mustacheVar("permText_private")),n.mustacheBlock("showVisRestriction_private",function(){return n.span(".error",function(){return n.text(n.mustacheVar("visRestrictionText"))})})})})}),n.li(function(){return n.a({class:"js-select "+n.mustacheBlockInverted("disabledVis_org",function(){return" light-hover"})+" "+n.mustacheBlock("disabledVis_org",function(){return" disabled"})+" ",href:"#",name:"org"},function(){return n.span({class:"icon-sm icon-"+n.mustacheVar("iconClass_org")+" vis-icon"}),n.check(n.mustacheVar("permissionLevel_org"),"organization"),n.span(".sub-name",function(){return n.text(n.mustacheVar("permText_org")),n.mustacheBlock("showVisRestriction_org",function(){return n.span(".error",function(){return n.text(n.mustacheVar("visRestrictionText"))})})})})}),n.li(function(){return n.a({class:"js-select"+n.mustacheBlockInverted("disabledVis_public",function(){return" light-hover"})+" "+n.mustacheBlock("disabledVis_public",function(){return" disabled"})+" ",href:"#",name:"public"},function(){return n.span({class:"icon-sm icon-"+n.mustacheVar("iconClass_public")+" vis-icon"}),n.check(n.mustacheVar("permissionLevel_public"),"public"),n.span(".sub-name",function(){return n.text(n.mustacheVar("permText_public")),n.mustacheBlock("showVisRestriction_public",function(){return n.span(".error",function(){return n.text(n.mustacheVar("visRestrictionText"))})})})})})}},{}],593:[function(t,e,r){var n;n=t(416)("board_new"),e.exports=function(){return n.form(function(){return n.label({for:"boardNewTitle"},function(){return n.format("title")}),n.input(".non-empty.js-autofocus",{id:"boardNewTitle",type:"text",name:"name",placeholder:n.mustacheVar("placeholder"),value:n.mustacheVar("name")}),n.div({class:n.mustacheBlock("hideOrg",function(){return"hide"})},function(){return n.div(".u-clearfix",function(){return n.label(".u-float-left",{style:"margin-right: 8px;"},function(){return n.format("organization")}),n.mustacheBlock("canAddToOrgs",function(){return n.a(".icon-sm.icon-information.dark-hover.js-helper-add-org",{href:"#"})})}),n.mustacheBlockInverted("canAddToOrgs",function(){return n.p(".quiet",{style:"margin-bottom: 16px;"},function(){return n.format("organization-whisk-n-tsk"),n.a(".js-create-org",{href:"#"},function(){return n.format("create-an-organization")})})}),n.select({name:"org-id",class:n.mustacheBlockInverted("canAddToOrgs",function(){return"hide"})},function(){return n.option({value:""},function(){return n.format("none")}),n.mustacheBlock("orgs",function(){return n.optionSelected(n.mustacheVar("selectOrg"),{value:n.mustacheVar("id")},function(){return n.text(n.mustacheVar("displayName"))})})})}),n.input({type:"hidden",name:"permissionLevel",value:n.mustacheVar("pLevel")}),n.p(".quiet.js-vis-display"),n.ul(".pop-over-list.js-vis-chooser.hide"),n.p(".error.u-bottom.js-no-valid-org-privs.u-clearfix.hide"),n.mustacheBlock("isCopyBoard",function(){return n.div(".check-div.u-clearfix",{style:"margin-top: 10px;"},function(){return n.input({type:"checkbox",id:"idKeepCards",name:"cards",checked:!0}),n.label({for:"idKeepCards"},function(){return n.format("keep-cards")})})}),n.input(".primary.wide.js-submit.disabled",{type:"submit",value:n.l("create")})})}},{}],594:[function(t,e,r){var n;n=t(416)("board_new_vis"),e.exports=function(){return n.format("this-board-will-be-visdisplaytext",{visIconClass:n.mustacheVar("visIconClass"),visDisplayText:n.mustacheVar("visDisplayText")}),n.text(" "),n.a(".js-change-vis",{href:"#"},function(){return n.format("change")})}},{}],595:[function(t,e,r){var n;n=t(416)("board_observer_count"),e.exports=function(){return n.a(".quiet-button.js-show-observers",{href:"#",style:"margin: 4px 0 0;"},function(){return n.text(n.mustacheVar("localizedObserverCount"))})}},{}],596:[function(t,e,r){var n;n=t(416)("board_sidebar"),e.exports=function(){return n.div(".board-menu-header.js-board-menu-title",function(){return n.a(".board-menu-header-back-button.icon-lg.icon-back.js-pop-widget-view",{href:"#",title:n.l("go-back")}),n.h3(".board-menu-header-title.js-board-menu-title-text"),n.a(".board-menu-header-close-button.icon-lg.icon-close.js-hide-sidebar",{href:"#",title:n.l("close-the-board-menu")}),n.hr(".board-menu-header-divider")}),n.div(".board-menu-content.u-fancy-scrollbar.js-board-menu-content-wrapper")}},{}],597:[function(t,e,r){var n;n=t(416)("boards_page_add_org_button"),e.exports=function(){return n.div(".boards-page-board-section.u-clearfix",function(){return n.a(".quiet-button.u-float-left.js-add-org-boards-page",{href:"#"},function(){return n.format("create-a-new-organization-ellipsis")})})}},{}],598:[function(t,e,r){var n;n=t(416)("boards_sidebar"),e.exports=n.renderable(function(){return n.div(".boards-drawer-header",function(){return n.h3(function(){return n.format("boards")})}),n.div(".board-drawer-content.u-fancy-scrollbar",function(){return n.input(".js-search-boards",{type:"text",placeholder:n.l("find-boards-by-name-ellipsis")}),n.div(".js-board-drawer-boards"),n.div(".js-board-drawer-buttons")})})},{}],599:[function(t,e,r){var n;n=t(416)("boards_sidebar"),e.exports=n.renderable(function(){return n.p(".quiet.u-text-align-center.hide",{style:"margin: 6px 4px 0 0; padding: 8px 12px;"},function(){return n.format("no-boards")}),n.div(".starred-sidebar-boards-list.js-starred-boards"),n.div(".js-recent-boards"),n.div(".js-all-boards")})},{}],600:[function(t,e,r){var n;n=t(416)("boards_sidebar"),e.exports=n.renderable(function(){return n.a(".quiet-button.js-add-board",{href:"#"},function(){return n.format("create-new-board-ellipsis")}),n.a(".quiet-button.hide.js-pin",{href:"#"},function(){return n.format("always-keep-this-menu-open")}),n.a(".quiet-button.hide.js-unpin",{href:"#"},function(){return n.format("don-t-keep-this-menu-open")}),n.a(".quiet-button.js-open-closed-boards",{href:"#"},function(){return n.format("see-closed-boards-ellipsis")})})},{}],601:[function(t,e,r){var n;n=t(416)("boards_sidebar"),e.exports=n.renderable(function(){return n.ul(".sidebar-boards-list.js-board-results")})},{}],602:[function(t,e,r){var n;n=t(416)("boards_sidebar"),e.exports=n.renderable(function(){return n.a(".quiet-button.js-add-board-with-name",{href:"#"})})},{}],603:[function(t,e,r){var n,o;o=t(416)("calendar_day"),n=function(){return o.div({class:"calendar-day js-expand-day "+o.mustacheBlock("isToday",function(){return"today"})},function(){return o.div(".day-header.u-clearfix.js-toggle-day",function(){return o.h3(".date",function(){return o.text(o.mustacheVar("date"))}),o.div(".quiet.num-cards",function(){return o.div(".day-cards-header")}),o.a(".close-button.icon-sm.icon-close.dark-hover",{href:"#"})}),o.div(".calendar-day-list.js-calendar-sortable.u-fancy-scrollbar"),o.mustacheBlock("__ed",function(){return o.a(".calendar-card-composer.quiet-button.js-open-card-composer",{href:"#"},function(){return o.format("add-a-card-ellipsis")})})})},e.exports=function(){return o.mustacheVar("monthView")?o.div(".calendar-day-spacer-div",n):n()}},{}],604:[function(t,e,r){var n;n=t(416)("calendar_day_list_header"),e.exports=function(){return n.span(".calendar-list-header",{name:n.mustacheVar("listID")},function(){return n.icon("list"),n.text(" "),n.text(n.mustacheVar("listName"))})}},{}],605:[function(t,e,r){var n;n=t(416)("calendar_month"),e.exports=function(){return n.table(".calendar-table")}},{}],606:[function(t,e,r){var n;n=t(416)("calendar_toolbar"),e.exports=function(){return n.div(".calendar-header",function(){return n.div(".calendar-header-toolbar",function(){return n.h2(".calendar-header-toolbar-title.js-calendar-header"),n.div(".calendar-header-toolbar-today",function(){return n.a(".button-link.today-button.js-today",{href:"#"},function(){return n.format("today")})}),n.div(".calendar-header-toolbar-nav",function(){return n.a(".button-link.js-left-arrow.left-arrow",{href:"#"},function(){return n.icon("up")}),n.a(".button-link.js-right-arrow.right-arrow",{href:"#"},function(){return n.icon("down")})}),n.div(".calendar-header-toolbar-close",function(){return n.a(".icon-lg.icon-close.dark-hover.js-close-calendar",{href:"#"})}),n.div(".calendar-header-toolbar-type",function(){return n.a(".button-link.js-week-view.week-button",{href:"#"},function(){return n.format("week")}),n.a(".button-link.js-month-view.month-button",{href:"#"},function(){return n.format("month")})})}),n.div(".days-of-week",function(){return n.mustacheBlock("days",function(){return n.div(".quiet",function(){return n.text(n.mustacheVar("."))})})})}),n.div(".calendar-content")}},{}],607:[function(t,e,r){var n;n=t(416)("calendar_week"),e.exports=function(){return n.div(".week-horizontal-canvas")}},{}],608:[function(t,e,r){var n;n=t(416)("cant_add_board_to_org"),e.exports=function(){return n.p(".quiet",function(){return n.mustacheBlock("isOrgAdmin",function(){return n.format("organization-displayname-does-not-allow-new-boards-you-can-change-this-on-the-organization-settings-page-by-clicking-on-board-creation-restrictions",{"organization.displayName":n.mustacheVar("organization.displayName"),orgSettingsUrl:n.mustacheVar("orgSettingsUrl")})}),n.mustacheBlockInverted("isOrgAdmin",function(){return n.format("organization-displayname-does-not-allow-new-boards-only-an-admin-of-the-organization-can-change-this-setting",{"organization.displayName":n.mustacheVar("organization.displayName")})})})}},{}],609:[function(t,e,r){var n;n=t(416)("card_attach_links"),e.exports=n.renderable(function(t){return n.div(".card-attach-link-list",function(){var e,r,o,i,s,a,u,c;for(a=[],o=0,i=t.length;i>o;o++)s=t[o],c=s.url,u=s.text,r=s.domain,e=s.attached,a.push(n.div(".card-attach-link-list-item",{class:n.classify({attached:e})},function(){return n.div(".card-attach-link-list-item-title",function(){return u?n.text(u):n.format("link to domain",{domain:r})}),n.div(".card-attach-link-list-item-url.quiet",function(){return n.text(c)}),e?n.div(".card-attach-link-list-item-attached.quiet",function(){return n.span(".icon-lg.icon-check")}):n.button(".card-attach-link-list-item-attach.js-attach",{"data-url":c,"data-text":u},function(){return n.format("attach")})}));return a})})},{}],610:[function(t,e,r){var n;n=t(416)("card_composer_inline"),e.exports=function(){return n.div(".list-card.js-composer",function(){return n.div(".list-card-details.u-clearfix",function(){return n.div(".list-card-labels.u-clearfix.js-list-card-composer-labels"),n.textarea(".list-card-composer-textarea.js-card-title",function(){return n.text(n.mustacheVar("title"))}),n.div(".list-card-members.js-list-card-composer-members")})}),n.div(".cc-controls.u-clearfix",function(){return n.input(".primary.confirm.js-add-card",{type:"submit",value:n.l("add")}),n.a(".icon-lg.icon-close.dark-hover.js-cancel",{href:"#"}),n.a(".cc-opt.icon-lg.icon-dropdown-menu.dark-hover.js-cc-menu",{href:"#"})})}},{}],611:[function(t,e,r){var n;n=t(416)("card_copy"),e.exports=function(){return n.mustacheBlock("loading",function(){return n.div(".spinner.loading.js-loading-card-actions")}),n.mustacheBlockInverted("loading",function(){return n.form(function(){return n.label(function(){return n.format("title")}),n.textarea(".js-autofocus",{name:"name",style:"margin-bottom: 12px;"},function(){return n.text(n.mustacheVar("name"))}),n.mustacheBlock("hasStuff",function(){return n.p({style:"margin-bottom: 4px;"},function(){return n.strong(function(){return n.format("keep-ellipsis")})}),n.mustacheBlock("hasChecklists",function(){return n.div(".check-div.u-clearfix",function(){return n.input({id:"idKeepChecklists",type:"checkbox",name:"checklists",checked:!0}),n.label({for:"idKeepChecklists"},function(){return n.format("checklists-numchecklists",{numChecklists:n.mustacheVar("numChecklists")})})})}),n.mustacheBlock("hasLabels",function(){return n.div(".check-div.u-clearfix",function(){return n.input({id:"idKeepLabels",type:"checkbox",name:"labels",checked:!0}),n.label({for:"idKeepLabels"},function(){return n.format("labels-numlabels",{numLabels:n.mustacheVar("numLabels")})})})}),n.mustacheBlock("hasMembers",function(){return n.div(".check-div.u-clearfix",function(){return n.input({id:"idKeepMembers",type:"checkbox",name:"members",checked:!0}),n.label({for:"idKeepMembers"},function(){return n.format("members-nummembers",{numMembers:n.mustacheVar("numMembers")})})})}),n.mustacheBlock("hasAttachments",function(){return n.div(".check-div.u-clearfix",function(){return n.input({id:"idKeepAttachments",type:"checkbox",name:"attachments",checked:!0}),n.label({for:"idKeepAttachments"},function(){return n.format("attachments-numattachments",{numAttachments:n.mustacheVar("numAttachments")})})})}),n.mustacheBlock("hasComments",function(){return n.div(".check-div.u-clearfix",function(){return n.input({id:"idKeepComments",type:"checkbox",name:"comments",checked:!0}),n.label({for:"idKeepComments"},function(){return n.format("comments-numcomments",{numComments:n.mustacheVar("numComments")})})})}),n.mustacheBlock("hasStickers",function(){return n.div(".check-div.u-clearfix",function(){return n.input({id:"idKeepStickers",type:"checkbox",name:"stickers",checked:!0}),n.label({for:"idKeepStickers"},function(){return n.format("stickers-numstickers",{numStickers:n.mustacheVar("numStickers")})})})})}),n.br(),n.label(function(){return n.format("copy-to-ellipsis")}),n.mustachePartial("move_card_controls"),n.input(".primary.wide.js-submit",{type:"submit",value:n.l("create-card")})})})}},{}],612:[function(t,e,r){var n,o,i;i=t(416)("card_detail"),n=t(627),o=t(678),e.exports=i.renderable(function(t){var e,r,s,a,u,c,l;return s=t.editable,c=t.name,e=t.canComment,u=t.me,a=t.loading,l=t.showActions,r=t.canSubscribe,i.div(".window-cover.hide.js-card-cover-box.js-open-card-cover-in-viewer",function(){return i.div(".window-cover-stickers.js-display-stickers")}),i.div(".window-archive-banner.hide.js-archive-banner",function(){return i.span(".icon-lg.icon-archive.window-archive-banner-icon"),i.p(".window-archive-banner-text",function(){return i.format("this-card-is-archived")})}),i.div(".window-header",function(){return i.span(".window-header-icon.icon-lg.icon-card"),i.div({class:i.classify({"window-title":!0,"card-detail-title":!0,"non-empty":!0,editable:s}),attr:"name"},function(){return i.h2(".window-title-text.current.hide-on-edit.js-card-title",function(){return i.text(c)}),s&&(i.p(".edits-warning.quiet",function(){return i.format("you-have-unsaved-edits-on-this-field"),i.text(" "),i.a(".js-view-edits",{href:"#"},function(){return i.format("view-edits")}),i.text(" - "),i.a(".js-discard-edits",{href:"#"},function(){return i.format("discard")})}),i.div(".edit.edit-heavy",function(){return i.textarea(".field.single-line",{type:"text"})})),i.div(".hide.quiet.hide-on-edit.window-header-inline-content.js-current-list"),i.div(".hide.hide-on-edit.window-header-inline-content.js-subscribed-indicator-header",function(){return i.icon("subscribe")})})}),i.div(".window-main-col",function(){return i.div(".card-detail-data.u-gutter",function(){return i.div(".card-detail-item.u-clearfix.hide.js-card-detail-members",function(){return i.h3(".card-detail-item-header",function(){return i.format("members")}),i.div(".js-card-detail-members-list")}),i.div(".card-detail-item.card-detail-item-labels.u-clearfix.hide.js-card-detail-labels",function(){return i.h3(".card-detail-item-header",function(){return i.format("labels")}),i.div(".u-clearfix.js-card-detail-labels-list")}),i.div(".card-detail-item.hide.js-card-detail-due-date",function(){return i.h3(".card-detail-item-header",function(){return i.format("due-date")}),i.a(".card-detail-badge.js-card-detail-due-date-badge",{href:"#"})}),i.div(".card-detail-item.hide.js-card-detail-votes",function(){return i.h3(".card-detail-item-header",function(){return i.format("votes")}),i.a(".card-detail-badge.is-clickable.js-card-detail-votes-badge.js-show-votes",{href:"#"})}),i.div(".card-detail-item.hide.js-card-detail-age",function(){return i.h3(".card-detail-item-header",function(){return i.format("last-updated")}),i.div(".card-detail-badge.date.js-card-detail-age-badge")}),i.div(".js-plugin-badges"),i.div({class:i.classify({"card-detail-item":!0,"card-detail-item-block":!0,"u-clearfix":!0,editable:s}),attr:"desc"},function(){return i.h3(".card-detail-item-header.hide.js-show-with-desc",function(){return i.format("description")}),s&&i.a(".card-detail-item-header-edit.hide-on-edit.js-show-with-desc.js-edit-desc",{href:"#"},function(){return i.format("edit")}),i.div(".current.markeddown.hide-on-edit.js-card-desc.js-show-with-desc.hide"),s?(i.p(".u-bottom",function(){return i.a(".quiet-button.mod-with-image.hide-on-edit.js-edit-desc.js-hide-with-desc",{href:"#"},function(){return i.icon("description","edit-the-description-ellipsis",{class:"quiet-button-icon"})})}),i.div(".card-detail-edit.edit",function(){return i.a(".helper.js-format-help",{href:"#"},function(){return i.format("formatting-help")}),i.textarea(".field")}),i.p(".edits-warning.quiet",function(){return i.format("you-have-unsaved-edits-on-this-field"),i.text(" "),i.a(".js-view-edits",{href:"#"},function(){return i.format("view-edits")}),i.text(" - "),i.a(".js-discard-edits",{href:"#"},function(){return i.format("discard")})}),i.p(".edits-error.error",function(){return i.format("edit-not-saved")})):void 0})}),i.div(".js-plugin-sections"),i.div(".window-module.js-attachments-section.u-clearfix.hide",function(){return i.div(".window-module-title.window-module-title-no-divider",function(){return i.span(".window-module-title-icon.icon-lg.icon-attachment"),i.h3(".u-inline-block",function(){return i.format("attachments")})}),i.div(".u-gutter",function(){return i.div(".u-clearfix.js-attachment-list"),i.p(".js-show-fewer-attachments.hide",function(){return i.a(".quiet-button.js-view-some-attachments",{href:"#"},function(){return i.format("show-fewer-attachments")})}),i.p(".js-show-more-attachments.hide",function(){return i.a(".quiet-button.js-view-all-attachments",{href:"#"})}),s?i.p(function(){return i.a(".quiet-button.js-attach",{href:"#"},function(){return i.format("add-an-attachment-ellipsis")})}):void 0})}),i.div(".checklist-list.window-module.js-checklist-list.js-no-higher-edits"),e&&i.div(".window-module.add-comment-section",function(){return i.div(".window-module-title.window-module-title-no-divider",function(){return i.span(".window-module-title-icon.icon-lg.icon-comment"),i.h3(function(){return i.format("add-comment")}),i.span(".editing-members.js-editing-members.hide")}),i.div(".new-comment.js-new-comment",function(){return u&&i.div(".member.member-no-menu",function(){return o(u)}),i.form(function(){return i.div(".comment-frame",function(){return i.div(".comment-box",function(){return i.textarea(".comment-box-input.js-new-comment-input",{placeholder:i.l("write-a-comment-ellipsis"),tabindex:"1"}),n(s)})}),i.div(".add-controls.u-clearfix",function(){return i.input(".primary.confirm.js-add-comment",{disabled:"disabled",type:"submit",value:i.l("save-comment"),tabindex:"3"})})}),i.div(".comment-too-long-warning",function(){return i.p(function(){return i.format("your-comment-is-too-long-you-can-add-it-as-a-text-attachment-or-truncate-it")}),i.input(".primary.js-attach-comment",{type:"submit",value:i.l("add-as-an-attachment")}),i.input(".js-truncate-comment",{type:"submit",value:i.l("truncate")})})})}),i.div(".window-module",function(){return i.div(".window-module-title.window-module-title-no-divider",function(){return i.span(".window-module-title-icon.icon-lg.icon-activity"),i.h3(function(){
return i.format("activity")})}),i.div(".js-list-actions"),a&&i.div(".spinner.loading.js-loading-card-actions"),i.p(".u-bottom",function(){return i.a(".show-more.hide.js-show-all-actions",{href:"#"},function(){return i.format("show-all-actions-ellipsis")})})})}),i.div(".window-sidebar",function(){return s&&i.div(".window-module.u-clearfix",function(){return i.h3(function(){return i.format("add")}),i.div(".u-clearfix",function(){return i.a(".button-link.js-change-card-members",{href:"#"},function(){return i.icon("member","members")}),i.a(".button-link.js-edit-labels",{href:"#"},function(){return i.icon("label","labels")}),i.a(".button-link.js-add-checklist-menu",{href:"#"},function(){return i.icon("checklist","checklist")}),i.a(".button-link.js-add-due-date",{href:"#"},function(){return i.icon("clock","due-date")}),i.a(".button-link.js-attach",{href:"#"},function(){return i.icon("attachment","attachment")})})}),i.div(".js-plugin-buttons"),s?i.div(".window-module.other-actions.u-clearfix",function(){return i.h3(function(){return i.format("actions")}),i.div(".u-clearfix",function(){return i.a(".button-link.js-move-card",{href:"#"},function(){return i.icon("move","move")}),i.a(".button-link.js-copy-card",{href:"#"},function(){return i.icon("card","copy")}),i.div(".js-subscribe-sidebar-button"),i.div(".js-vote-sidebar-button"),i.hr(),i.a(".button-link.js-archive-card",{href:"#"},function(){return i.icon("archive","archive")}),i.a(".button-link.js-unarchive-card",{href:"#"},function(){return i.icon("refresh","send-to-board")}),i.a(".button-link.negate.hide.js-delete-card",{href:"#"},function(){return i.icon("remove","delete")})})}):l&&r&&i.div(".window-module.u-clearfix",function(){return i.h3(function(){return i.format("actions")}),i.div(".u-clearfix",function(){return i.div(".js-subscribe-sidebar-button"),i.div(".js-vote-sidebar-button")})}),i.div(".window-module.u-clearfix",function(){return i.p(".quiet.u-bottom",function(){return i.a(".quiet-button.js-more-menu",{href:"#"},function(){return i.format("share-and-more-ellipsis")})})})}),i.p(".dropzone",function(){return i.format("drop-files-to-upload")})})},{}],613:[function(t,e,r){var n;n=t(416)("card_detail_add_button"),e.exports=n.renderable(function(t){var e,r;return r=t.klass,e={"card-detail-item-add-button":!0,"dark-hover":!0},e[r]=!0,n.a({class:n.classify(e)},function(){return n.icon("add")})})},{}],614:[function(t,e,r){var n;n=t(416)("card_detail_list"),e.exports=n.renderable(function(t){var e,r;return e=t.editable,r=t.listName,n.p(".u-inline-block.u-bottom",function(){return n.format("in-list"),n.text(" "),n.a({href:"#",class:n.classify({"js-open-move-from-header":e,disabled:!e})},function(){return n.strong(function(){return n.text(r)})})})})},{}],615:[function(t,e,r){var n;n=t(416)("card_detail_more_menu"),e.exports=function(){return n.ul(".pop-over-list",function(){return n.li(function(){return n.a(".js-print",{href:"#"},function(){return n.format("print-ellipsis")})}),n.li(function(){return n.a(".js-export-json",{href:n.mustacheVar("jsonURL")},function(){return n.format("export-json")})})}),n.mustachePartial("meta")}},{}],616:[function(t,e,r){var n;n=t(416)("card_detail_subscribe"),e.exports=n.renderable(function(t){var e,r;return r=t.subscribed,e={"button-link":!0,"is-on":r,"js-subscribe":!r,"js-unsubscribe":r},n.a({class:n.classify(e),title:n.l("subscribe-to-the-card-to-get-notifications-when-something-changes")},function(){return n.icon("subscribe","subscribe"),n.span(".on",function(){return n.icon("check",{class:"light"})})})})},{}],617:[function(t,e,r){var n;n=t(416)("card_detail_vote_btn_sidebar"),e.exports=n.renderable(function(t){var e,r,o;return e=t.canVote,o=t.voted,e?(r={"button-link":!0,"is-on":o,"js-unvote":o,"js-vote":!o},n.a({class:n.classify(r)},function(){return n.icon("vote","vote"),n.span(".on",function(){return n.icon("check",{class:"light"})})})):void 0})},{}],618:[function(t,e,r){var n,o;o=t(416)("card_in_list"),n=t(665),e.exports=function(){return o.div(".list-card-cover.js-card-cover"),o.mustacheBlock("showEditor",function(){return o.icon("edit",{class:"list-card-operation dark-hover js-open-quick-card-editor js-card-menu"})}),o.div({class:"list-card-stickers-area"+o.mustacheBlockInverted("hasStickers",function(){return" hide"})},function(){return o.div(".stickers.js-card-stickers")}),o.div(".list-card-details",function(){return o.div(".list-card-labels.js-card-labels",function(){return o.mustacheBlock("labels",function(){return n({name:o.mustacheVar("name"),color:o.mustacheVar("color")})})}),o.mustacheBlockInverted("quickEdit",function(){return o.a(".list-card-title.js-card-name",function(){return o.mustacheBlock("idShort",function(){return o.span(".card-short-id.hide",function(){return o.format("idshort",{idShort:o.mustacheVar("idShort")})})}),o.text(o.mustacheVar("name"))})}),o.mustacheBlock("quickEdit",function(){return o.textarea(".list-card-edit-title.js-edit-card-title",function(){return o.text(o.mustacheVar("name"))})}),o.div(".badges"),o.div(".list-card-members.js-list-card-members",function(){return o.mustacheBlock("members",function(){return o.mustachePartial("member_on_card")})})}),o.p(".list-card-dropzone",function(){return o.format("drop-files-to-upload")})}},{}],619:[function(t,e,r){var n;n=t(416)("card_menu_meta"),e.exports=function(){return n.hr(),n.p(".quiet.u-bottom",{style:"padding: 6px 6px 4px;"},function(){return n.mustacheBlock("idShort",function(){return n.span(".u-clearfix",{style:"display:block; margin-bottom: 6px;"},function(){return n.format("card-idshort",{idShort:n.mustacheVar("idShort")})})}),n.span(".u-clearfix",{style:"display:block;"},function(){return n.span(function(){return n.format("link-to-this-card")}),n.span({class:"icon-sm icon-"+n.mustacheVar("pLevelClass"),title:n.mustacheVar("pLevelAltText")}),n.input(".js-short-url.js-autofocus.inline-input",{type:"text",readonly:"readonly",value:n.mustacheVar("shortUrl")})}),n.mustacheBlock("email",function(){return n.mustacheBlock("__ed",function(){return n.span(".u-clearfix",{style:"display:block;"},function(){return n.span(function(){return n.format("email-for-this-card")}),n.icon("information",{title:n.l("emails-sent-to-this-address-will-appear-as-a-comment-by-you-on-the-card")}),n.input(".js-email.inline-input",{type:"text",readonly:"readonly",value:n.mustacheVar("email")})})})}),n.mustacheBlock("dateAdded",function(){return n.format("added",{dateAdded:n.mustacheVar("dateAdded")})}),n.mustacheBlock("__ed",function(){return n.text(" - "),n.a(".js-delete",{href:"#"},function(){return n.format("delete")})})})}},{}],620:[function(t,e,r){var n;n=t(416)("card_title_on_card_front"),e.exports=function(){return n.mustacheBlock("idShort",function(){return n.span(".card-short-id.hide",function(){return n.format("idshort",{idShort:n.mustacheVar("idShort")})})}),n.text(n.mustacheVar("name"))}},{}],621:[function(t,e,r){var n;n=t(416)("change_org_vis"),e.exports=function(){return n.li(function(){return n.a(".highlight-icon.js-select-members",{href:"#"},function(){return n.icon("private","private"),n.mustacheBlock("permissionLevel_private",function(){return n.icon("check")}),n.span(".sub-name",function(){return n.text(n.mustacheVar("privateText"))})})}),n.li(function(){return n.a(".highlight-icon.js-select-public",{href:"#"},function(){return n.icon("public","public"),n.mustacheBlock("permissionLevel_public",function(){return n.icon("check")}),n.span(".sub-name",function(){return n.text(n.mustacheVar("publicText"))})})})}},{}],622:[function(t,e,r){var n;n=t(416)("checklist"),e.exports=function(){return n.div({class:"window-module-title window-module-title-no-divider u-clearfix"+n.mustacheBlock("__ed",function(){return" ed grab"})},function(){return n.span(".window-module-title-icon.icon-lg.icon-checklist"),n.mustacheBlock("__ed",function(){return n.div(".editable.non-empty.checklist-title",{attr:"name"},function(){return n.h3(".current.hide-on-edit",function(){return n.text(n.mustacheVar("name"))}),n.div(".window-module-title-options",function(){return n.mustacheBlock("__ed",function(){return n.a(".hide.hide-on-edit.quiet.js-show-checked-items",{href:"#",style:"margin: 0 8px;"}),n.a(".hide.hide-on-edit.quiet.js-hide-checked-items",{href:"#",style:"margin: 0 8px;"},function(){return n.format("hide-completed-items")}),n.a(".hide-on-edit.quiet.js-confirm-delete",{href:"#"},function(){return n.format("delete-ellipsis")})})}),n.div(".edit.edit-heavy",function(){return n.textarea(".field.full.single-line")}),n.p(".edits-warning.quiet",function(){return n.format("you-have-unsaved-edits-on-this-field"),n.text(" "),n.a(".js-view-edits",{href:"#"},function(){return n.format("view-edits")}),n.text(" - "),n.a(".js-discard-edits",{href:"#"},function(){return n.format("discard")})})})}),n.mustacheBlockInverted("__ed",function(){return n.h3(function(){return n.text(n.mustacheVar("name"))})})}),n.div(".checklist-progress",function(){return n.span(".checklist-progress-percentage.js-checklist-progress-percent",function(){return n.text("0%")}),n.div(".checklist-progress-bar",function(){return n.div(".checklist-progress-bar-current.js-checklist-progress-bar")}),n.span(".checklist-completed-text.hide.quiet.js-completed-message",function(){return n.format("everything-in-this-checklist-is-complete")})}),n.div(".checklist-items-list.js-checklist-items-list.js-no-higher-edits"),n.mustacheBlock("__ed",function(){return n.div(".checklist-new-item.u-gutter.js-new-checklist-item",function(){return n.textarea(".checklist-new-item-text.js-new-checklist-item-input",{placeholder:n.l("add-an-item-ellipsis")}),n.div(".add-controls.u-clearfix",function(){return n.input(".primary.confirm.js-add-checklist-item",{type:"submit",value:n.l("add")}),n.a(".icon-lg.icon-close.dark-hover.cancel.js-cancel-checklist-item",{href:"#"}),n.a(".option.options-menu.dark-hover.js-open-editing-menu",{href:"#"},function(){return n.span(".icon-lg.icon-dropdown-menu")})})})})}},{}],623:[function(t,e,r){var n;n=t(416)("checklist_add_menu"),e.exports=function(){return n.form(function(){return n.label({for:"id-checklist"},function(){return n.format("title")}),n.input(".js-checklist-title.js-autofocus",{type:"text",id:"id-checklist",value:n.l("default-checklist-name")}),n.mustacheBlock("hasChecklistCards",function(){return n.span(function(){return n.label({for:"js-checklist-copy-source"},function(){return n.format("copy-items-from-ellipsis")}),n.select(".js-checklist-copy-source",function(){return n.option({value:"",selected:!0},function(){return n.format("none")}),n.mustacheBlock("checklistCards",function(){return n.optgroup({label:n.mustacheVar("name")},function(){return n.mustacheBlock("checklists",function(){return n.option({value:n.mustacheVar("id")},function(){return n.format("name-length",{name:n.mustacheVar("name"),length:n.mustacheVar("length")})})})})})})})}),n.input(".primary.wide.confirm.js-add-checklist",{type:"submit",value:n.l("add")})})}},{}],624:[function(t,e,r){var n;n=t(416)("checklist_item"),e.exports=function(){return n.div({class:"checklist-item-checkbox "+n.mustacheBlock("__ed",function(){return"enabled js-toggle-checklist-item"})},function(){return n.icon("check",{class:"checklist-item-checkbox-check"})}),n.div({class:"checklist-item-details non-empty "+n.mustacheBlock("__ed",function(){return"editable"}),attr:"name"},function(){return n.p(".checklist-item-details-text.current.hide-on-edit.markeddown.js-checkitem-name"),n.mustacheBlock("__ed",function(){return n.div(".edit.delete.convert.options-menu",function(){return n.textarea(".field.full.single-line.js-checkitem-input",{type:"text"})}),n.p(".edits-warning.quiet",function(){return n.format("you-have-unsaved-edits-on-this-field"),n.text(" "),n.a(".js-view-edits",{href:"#"},function(){return n.format("view-edits")}),n.text(" - "),n.a(".js-discard-edits",{href:"#"},function(){return n.format("discard")})})})})}},{}],625:[function(t,e,r){var n;n=t(416)("closed_boards"),e.exports=function(){return n.div(".window-header",function(){return n.span(".window-header-icon.icon-lg.icon-archive"),n.h2(".window-title",function(){return n.format("closed-boards")})}),n.div(".window-main-col",function(){return n.mustacheBlockInverted("empty",function(){return n.div(".window-module.u-clearfix",function(){return n.ul(".archive-list.u-gutter.js-archive-items")})}),n.mustacheBlock("empty",function(){return n.p(".empty-list",function(){return n.format("no-boards-have-been-closed")})})}),n.div(".window-sidebar",function(){return n.p(".helper",function(){return n.format("you-have-to-have-been-a-board-admin-to-re-open-a-closed-board")})})}},{}],626:[function(t,e,r){var n;n=t(416)("comment_edit_controls"),e.exports=function(){return n.div(".edit-controls.u-clearfix",function(){return n.input(".primary.confirm.js-save-edit",{type:"submit",value:n.l("save"),tabindex:"2"})})}},{}],627:[function(t,e,r){var n;n=t(416)("comment_options"),e.exports=n.renderable(function(t){return n.div(".comment-box-options",function(){return t&&n.a(".comment-box-options-item.js-comment-add-attachment",{href:"#",title:n.l("add-an-attachment-ellipsis")},function(){return n.icon("attachment")}),n.a(".comment-box-options-item.js-comment-mention-member",{href:"#",title:n.l("mention-a-member-ellipsis")},function(){return n.icon("mention")}),n.a(".comment-box-options-item.js-comment-add-emoji",{href:"#",title:n.l("add-emoji-ellipsis")},function(){return n.icon("emoji")}),n.a(".comment-box-options-item.js-comment-add-card",{href:"#",title:n.l("add-card-ellipsis")},function(){return n.icon("card")})})})},{}],628:[function(t,e,r){var n;n=t(416)("confirm"),e.exports=function(){return n.p(function(){return n.text(n.mustacheVar("text"))}),n.input({type:"submit",class:"js-confirm "+n.mustacheVar("confirmBtnClass")+n.mustacheBlockInverted("cancelText",function(){return" full"}),value:n.mustacheVar("confirmText")}),n.mustacheBlock("cancelText",function(){return n.input(".js-cancel",{type:"submit",value:n.mustacheVar("cancelText")})})}},{}],629:[function(t,e,r){var n;n=t(416)("confirm_merge"),e.exports=function(){return n.p(function(){return n.text(n.mustacheVar("text"))}),n.ul(".pop-over-member-list.js-member"),n.input(".js-confirm.full",{type:"submit",value:n.mustacheVar("confirmText")})}},{}],630:[function(t,e,r){var n;n=t(416)("connect_failed"),e.exports=function(){return n.text(n.mustacheVar("msg")),n.br(),n.a(".app-alert-item-button",{href:"#",onclick:"window.location.reload()"},function(){return n.format("reload-page")})}},{}],631:[function(t,e,r){var n;n=t(416)("crop_photo"),e.exports=function(){return n.img(".crop-image"),n.button(".primary.js-done",function(){return n.format("looks-good")}),n.button(".js-back",function(){return n.format("try-again-ellipsis")})}},{}],632:[function(t,e,r){var n;n=t(416)("date_picker"),e.exports=n.renderable(function(t){return n.div(".datepicker-select.u-clearfix",function(){return n.div(".datepicker-select-date",function(){return n.label(".datepicker-select-label",function(){return n.format("date"),n.input(".datepicker-select-input.js-dpicker-date-input.js-autofocus",{type:"text",placeholder:n.l("enter-date"),tabindex:101})})}),n.div(".datepicker-select-time",function(){return n.label(".datepicker-select-label",function(){return n.format("time"),n.input(".datepicker-select-input.js-dpicker-time-input",{type:"text",placeholder:n.l("enter-time"),tabindex:102})})})}),n.div(".pickers.js-dpicker-cal"),n.div(".datepicker-confirm-btns",function(){return n.input(".primary.wide.confirm",{type:"submit",value:n.l("save"),tabindex:103}),n.button(".negate.remove-date.js-remove-date",{type:"button",tabindex:104},function(){return n.format("remove")})}),n.div(".js-enable-cal.hide",function(){return n.hr(),n.p(function(){return n.a(".quiet-button.mod-with-image.js-enable-calendar-powerup",{href:"#"},function(){return n.icon("power-up","enable-the-calendar-power-up",{class:"quiet-button-icon"})})}),n.p(".u-bottom.quiet",function(){return n.format("you-ll-get-a-calendar-view-of-your-cards-and-an-ical-feed-woo")})}),n.div(".js-cal-enabled.hide",function(){return n.hr(),n.p(".helper",function(){return t?n.format("click-the-calendar-button-in-the-board-header-to-open-the-calendar-to-change-calendar-settings-click-power-ups-in-the-board-menu"):n.format("click-the-calendar-button-in-the-board-header-to-open-the-calendar")})})})},{}],633:[function(t,e,r){var n;n=t(416)("dialog_close_button"),e.exports=function(){return n.a(".icon-lg.icon-close.dialog-close-button.js-close-window",{href:"#"})}},{}],634:[function(t,e,r){var n;n=t(416)("edit_controls"),e.exports=function(){return n.div(".edit-controls.u-clearfix",function(){return n.input(".primary.confirm.js-save-edit",{type:"submit",value:n.l("save")}),n.a(".icon-lg.icon-close.dark-hover.cancel.js-cancel-edit",{href:"#"}),n.a(".option.delete.js-delete-item",{href:"#"},function(){return n.format("delete")}),n.a(".option.convert.js-convert-item-to-card",{href:"#"},function(){return n.format("convert-to-card")}),n.a(".option.options-menu.dark-hover.js-open-editing-menu",{href:"#"},function(){return n.span(".icon-lg.icon-dropdown-menu")})})}},{}],635:[function(t,e,r){var n;n=t(416)(),e.exports=n.renderable(function(t){var e,r,o,i,s,a,u,c,l,d;for(u=t.members,l=[],o=0,a=u.length;a>o;o++)c=u[o],e=c.avatarHash,r=c.fullName,d=c.username,s=c.initials,i=c.icon,l.push(n.span(".edit-in-progress",function(){return n.span(".inline-member",function(){var t;return t=r+" ("+d+")",e?n.img(".inline-member-av",{src:[window.avatarDomain,e,"30.png"].join("/"),alt:t,title:t}):n.span(".quiet.initials",{title:t},function(){return n.text(s)})}),i?n.icon(i,{class:"icon"}):void 0}));return l})},{}],636:[function(t,e,r){var n;n=t(416)("embedly"),e.exports=function(){return n.div({class:"embed embed-"+n.mustacheVar("type")+" embed-provider-"+n.mustacheVar("provider_name")},function(){return n.mustacheBlockInverted("type_photo",function(){return n.mustacheBlock("requireHttps",function(){return n.raw(n.mustacheVar("htmlHttps"))}),n.mustacheBlockInverted("requireHttps",function(){return n.raw(n.mustacheVar("html"))})}),n.mustacheBlock("type_photo",function(){return n.a({href:n.mustacheVar("originalUrl"),target:"_blank"},function(){return n.img({src:n.mustacheVar("url")})})})})}},{}],637:[function(t,e,r){var n;n=t(416)("empty_list"),e.exports=function(){return n.p({class:"empty-list "+n.mustacheVar("classes"),style:n.mustacheVar("style")},function(){return n.text(n.mustacheVar("message"))})}},{}],638:[function(t,e,r){var n,o;o=t(416)("entity"),n=t(627),e.exports=o.renderable(function(t,e,r){var i,s,a,u,c,l,d,p,h,m,f,g,v,y,b,w,_,k,C,x,j;switch(C=t.type,b=t.text,C){case"text":case"list":case"checklist":case"plugin":return o.text(b);case"card":return x=t.url,o.a(".action-card",{href:x},function(){return o.text(b)});case"board":return x=t.url,o.a({href:x},function(){return o.text(b)});case"organization":return x=t.url,o.a({href:x},b||o.l("an-organization"));case"checkItem":return f=t.nameHtml,f?o.raw(f):o.text(b);case"comment":return w=t.textHtml,s=e.canEdit,k=r.truncateComment,a={"action-comment":!0,markeddown:!0,"js-comment":!0,"mod-truncate":k},o.div({class:o.classify(a)},function(){return k&&o.div(".action-comment-fade-button.js-expand-comment"),o.div(".current-comment.js-friendly-links",function(){return o.raw(w)}),s?o.div(".comment-box",function(){return o.textarea(".comment-box-input.js-text",{tabindex:"1"},function(){return o.text(b)}),n()}):void 0});case"label":return u=t.color,a={"card-label":!0},a[u+"-label"]=!0,_=b||u+" label (default)",o.span({class:o.classify(a),title:_},function(){return b?o.text(b):o.raw("&nbsp;")});case"attachment":return m=t.link,x=t.url,h=t.isTrelloAttachment,p=t.isTrello,d=t.id,m?h?o.a(".js-open-attachment-viewer",{href:x,"data-idattachment":d},function(){return o.text(b)}):p?o.a(".js-friendly-links",{href:x},function(){return o.text(b)}):o.a(".js-friendly-links",{href:x,target:"_blank"},function(){return o.text(b)}):o.span(".attachment-deleted",function(){return o.text(b)});case"attachmentPreview":if(v=t.previewUrlForRes,g=t.originalUrl,d=t.id,y=r.showAttachmentPreview,y&&v)return o.a(".js-open-attachment-viewer.js-friendly-links",{href:g,target:"_blank","data-idattachment":d},function(){return o.img(".attachment-image-preview",{src:v})});break;case"member":return d=t.id,i=t.avatarHash,j=t.username,o.span(".inline-member.js-show-mem-menu",{idMember:d},function(){return i&&(_=b+" ("+j+")",o.img(".inline-member-av",{src:[window.avatarDomain,i,"30.png"].join("/"),alt:_,title:_})),o.span(".u-font-weight-bold",function(){return o.text(b)})});case"relDate":return l=t.date,c=t.current,o.span(".rel-date",{dt:l,text:b},function(){return o.text(c)});case"plugin":return o.text(o.mustacheVar("text"))}})},{}],639:[function(t,e,r){var n;n=t(416)("error"),e.exports=n.renderable(function(t){var e,r,o,i,s,a,u;switch(o=t.isLoggedIn,u=t.url,r=t.errorType,i=t.modelType,e=t.email,a=function(t){return n.div(".big-message.with-picture.quiet",function(){return n.img({src:"https://d78fikflryjgj.cloudfront.net/images/656dc3a1db8d11cde974d7402898fb75/TacoBouncer.png",width:"459",height:"238"}),n.h1(function(){return n.format("roooooo-are-you")}),n.p(function(){return n.format(t)}),n.div(".callout",function(){return n.ol(function(){return n.li(function(){return n.format("check-your-email-at-email",{email:e})}),n.li(function(){return n.format("look-for-an-email-with-the-subject-trello-account-confirmation")}),n.li(function(){return n.format("click-on-the-confirmation-link-done")})})}),n.p(function(){return n.format("dont-see-anything-from-us"),n.a(".quiet.js-resend-confirmation-email",{href:"#"},function(){return n.format("resend-confirmation-link")})})})},s=function(t,e,r){return n.div(".big-message.quiet",function(){n.h1(function(){return n.format(t)}),o?n.p(function(){return n.format(r)}):n.p(function(){return n.format(e,{url:u})})})},r){case"notFound":return s("page-not-found","this-page-may-be-private-you-may-be-able-to-view-it-by-logging-in","this-page-may-be-private-if-someone-gave-you-this-link-they-may-need-to-invite-you-to-one-of-their-boards-or-organizations");case"boardNotFound":return s("board-not-found","this-board-may-be-private-you-may-be-able-to-view-it-by-logging-in","this-board-may-be-private-if-someone-gave-you-this-link-they-may-need-to-invite-you-to-one-of-their-boards-or-organizations");case"cardNotFound":return s("card-not-found","this-card-may-be-on-a-private-board-you-may-be-able-to-view-it-by-logging-in","this-card-may-be-on-a-private-board-if-someone-gave-you-this-link-they-may-need-to-invite-you-to-one-of-their-boards-or-organizations");case"unconfirmedOrgNotFound":return a("please-confirm-your-email-address-to-view-this-org");case"unconfirmedBoardNotFound":return a("please-confirm-your-email-address-to-view-this-board")}})},{}],640:[function(t,e,r){var n;n=t(416)("filter_cards"),e.exports=function(){return n.input(".js-input.js-autofocus",{type:"text",attr:"title",value:n.mustacheVar("title"),style:"margin-bottom: 0;"}),n.div(".js-filter-search-results")}},{}],641:[function(t,e,r){var n;n=t(416)("filter_cards_search_results"),e.exports=function(){return n.mustacheBlock("showHelper",function(){return n.p(".quiet",{style:"padding: 10px 8px 2px; margin-bottom: 0;"},function(){return n.format("type-to-filter-by-term-or-search-for-labels-members-or-due-times")})}),n.mustacheBlock("showLabels",function(){return n.hr(),n.ul({class:"label-list"+n.mustacheBlock("filtering",function(){return" filtered"})+n.mustacheBlock("limitLabels",function(){return" limited"})},function(){return n.mustacheBlock("labels",function(){return n.li({class:"label-list-item"+n.mustacheBlock("isActive",function(){return" is-active"})+n.mustacheBlock("matchesFilter",function(){return" is-matches-filter"})},function(){return n.a(".label-list-item-link.js-toggle-label-filter",{href:"#","data-name":n.mustacheVar("color"),"data-idlabel":n.mustacheVar("id")},function(){return n.div(".label-list-item-link-label",function(){return n.span({class:"card-label mod-square card-label-"+n.mustacheVar("color")})}),n.mustacheBlock("name",function(){return n.span(".label-list-item-link-name",function(){return n.text(n.mustacheVar("name"))})}),n.mustacheBlockInverted("name",function(){return n.span(".label-list-item-link-name.mod-quiet",function(){return n.format("color-label-default",{color:n.mustacheVar("defaultColorName")})})}),n.icon("check",{class:"label-list-item-link-icon"})})})}),n.mustacheBlock("limitLabels",function(){return n.li(".label-list-item.js-show-all-labels-elem",function(){return n.a(".label-list-item-link.js-show-all-labels",{href:"#"},function(){return n.span(".label-list-item-link-name.mod-quiet",function(){return n.format("show-all-labels-remaininglabels-hidden",{remainingLabels:n.mustacheVar("remainingLabels")})})})})})})}),n.mustacheBlock("showMembers",function(){return n.hr(),n.ul({class:"pop-over-member-list checkable js-mem-list"+n.mustacheBlock("filtering",function(){return" filtered"})+n.mustacheBlock("limitMembers",function(){return" limited"})},function(){return n.mustacheBlock("members",function(){return n.mustachePartial("select_member")})}),n.mustacheBlock("limitMembers",function(){return n.ul(".pop-over-member-list",function(){return n.li(".item",function(){return n.a(".name.quiet.js-show-all-members",{href:"#",style:"padding-left: 42px; font-weight: normal; margin-top: 4px;"},function(){return n.format("show-all-members-remainingmembers-hidden",{remainingMembers:n.mustacheVar("remainingMembers")})})})})})}),n.mustacheBlock("showDueTimes",function(){return n.hr(),n.ul(".pop-over-list.checkable.navigable.inset.normal-weight",function(){return n.mustacheBlock("dueOptions",function(){return n.li({class:"item "+n.mustacheBlock("isActive",function(){return" active"})},function(){return n.a(".js-due-filter",{href:"#",time:n.mustacheVar("time"),style:"padding-left: 40px;"},function(){return n.text(n.mustacheVar("desc")),n.icon("check")})})})})}),n.hr(),n.ul(".pop-over-list.inset.normal-weight",function(){return n.li(function(){return n.a({href:"#",class:"js-clear-all"+n.mustacheBlockInverted("isFiltering",function(){return" disabled"}),style:"padding-left: 40px;"},function(){return n.format("clear-filter")})})})}},{}],642:[function(t,e,r){var n;n=t(416)("formatting_help"),e.exports=function(){return n.p(function(){return n.format("trello-uses-markdown-for-formatting-here-are-the-basics-see-the-complete-syntax")}),n.hr(),n.p(".quiet",function(){return n.format("first-level-header")}),n.code(function(){return n.format("making-scrambled-eggs-a-primer"),n.br(),n.text("\n    ===============================\n  ")}),n.hr(),n.p(".quiet",function(){return n.format("second-level-header")}),n.code(function(){return n.format("1-1-preparation"),n.br(),n.text("\n    ----------------\n  ")}),n.hr(),n.p(".quiet",function(){return n.format("paragraphs")}),n.code(function(){return n.format("add-two-new-lines-to-start-a-new-paragraph-crack-two-eggs-into-the-bowl-and-whisk")}),n.hr(),n.p(".quiet",function(){return n.format("bold")}),n.code(function(){return n.format("carefully-crack-the-eggs")}),n.hr(),n.p(".quiet",function(){return n.format("emphasis")}),n.code(function(){return n.format("whisk-the-eggs-vigorously")}),n.hr(),n.p(".quiet",function(){return n.format("lists")}),n.code(function(){return n.format("ingredients"),n.br(),n.br(),n.format("eggs"),n.br(),n.format("oil"),n.br(),n.format("optional-milk")}),n.hr(),n.p(".quiet",function(){return n.format("links")}),n.code(function(){return n.format("to-download-a-pdf-version-of-the-recipe-click-here-https-example-com-scrambled-eggs-pdf")}),n.hr(),n.p(".quiet",function(){return n.format("images")}),n.code(function(){return n.format("the-finished-dish-https-example-com-eggs-png")})}},{}],643:[function(t,e,r){var n;n=t(416)("header_add_menu"),e.exports=function(){return n.ul(".pop-over-list",function(){return n.li(function(){return n.a(".js-new-board",{href:"#"},function(){return n.format("create-board-ellipsis-a-board-is-a-collection-of-cards-ordered-in-a-list-of-lists-use-it-to-manage-a-project-track-a-collection-or-organize-anything")})}),n.li(function(){return n.a(".js-new-org",{href:"#"},function(){return n.format("create-personal-organization-ellipsis-an-organization-is-a-group-of-boards-and-people-use-it-to-group-boards-in-your-company-team-or-family")})}),n.li(function(){return n.a(".js-new-bc-org",{href:"#"},function(){return n.format("create-business-organization-ellipsis-with-business-class-your-team-has-more-security-administrative-controls-and-superpowers")})})})}},{}],644:[function(t,e,r){var n,o;o=t(416)("header_announcements"),n=t(556),e.exports=o.renderable(function(t){return t.forEach(n),o.div(".announcement-elsewhere",function(){return o.p(".quiet",{style:"margin: 0 4px 5px;"},function(){return o.format("for-more-updates-check-out-ellipsis")}),o.a(".announcement-elsewhere-blog.js-blog",{target:"_blank",href:"http://blog.trello.com"},function(){return o.span(".announcement-elsewhere-blog-icon.icon-lg.icon-board"),o.span(".u-text-underline",function(){return o.format("trello-blog")})}),o.a(".announcement-elsewhere-social.js-t",{target:"_blank",href:"https://www.twitter.com/trello"},function(){return o.span(".icon-lg.icon-twitter")}),o.a(".announcement-elsewhere-social.js-fb",{target:"_blank",href:"https://www.facebook.com/TrelloApp"},function(){return o.span(".icon-lg.icon-facebook")}),o.a(".announcement-elsewhere-social.js-g",{target:"_blank",href:"https://plus.google.com/103127084407107005900/posts"},function(){return o.span(".icon-lg.icon-google")})})})},{}],645:[function(t,e,r){var n;n=t(416)("header_boards_menu_button"),e.exports=function(){return n.a(".header-btn.header-boards.js-boards-menu",{href:"#"},function(){return n.span(".header-btn-icon.icon-lg.icon-board.light"),n.span(".header-btn-text",function(){return n.format("boards")})})}},{}],646:[function(t,e,r){var n;n=t(416)("header_channel_picker"),e.exports=function(){return n.mustacheBlock("cookie",function(){return n.p(function(){return n.format("you-have-a-version-cookie-set-this-is-a-feature-intended-for-client-developers-and-testers-and-will-prevent-you-from-changing-channels")}),n.input(".js-remove-cookie.wide.primary",{type:"button",value:n.l("remove-cookie")})}),n.mustacheBlockInverted("cookie",function(){return n.ul(".pop-over-list",function(){return n.mustacheBlock("channels",function(){return n.li(function(){return n.a(".js-select",{href:"#",name:n.mustacheVar("name")},function(){return n.text(n.mustacheVar("displayName")),n.mustacheBlock("active",function(){return n.icon("check")})})})}),n.hr(),n.mustacheBlock("dev",function(){return n.li(function(){return n.a(".js-select-dev",{href:"#",name:n.mustacheVar("name")},function(){return n.format("pick-a-version")})})})})})}},{}],647:[function(t,e,r){var n,o,i;i=t(416)("header_invite"),n=window.avatarDomain,o=function(t,e,r){var o;return o=e+" ("+r+")",{src:[n,t,"30.png"].join("/"),alt:o,title:o}},e.exports=i.renderable(function(t){var e,r,n,s,a,u,c,l,d,p;return a=t.isInviter,n=t.ghost,l=t.modelName,c=t.memberAdder,e=t.avatarHash,r=t.fullName,p=t.username,d=t.modelType,u=t.isLoggedIn,s=t.isBoard,i.div(".invited-message",function(){return i.a(".js-ignore-invite.icon-lg.icon-close.dialog-close-button",{href:"#"}),i.h1(function(){return a?i.format("you-invited-ghost-fullname-to-collaborate-on-modelname",{"ghost.fullName":n.fullName,modelName:l}):c?i.format("fullname-has-invited-you-to-collaborate-on-modelname",{fullName:c.fullName,modelName:l}):i.format("youve-been-invited-to-collaborate-on-modelname",{modelName:l})}),u?(a||i.p({style:"min-height: 20px;"},function(){return n.email?(i.format("your-account"),e&&i.img(".inline-member-av",o(e,r,p)),i.format("fullname-username-hasnt-logged-in-with-ghost-email",{fullName:r,username:p,"ghost.email":n.email})):void 0}),a?i.a(".button.js-create-new-account.primary",{href:"#"},function(){return i.format("create-new-account-for-ghost-fullname",{"ghost.fullName":n.fullName})}):(i.a(".button.js-join-model.primary",{
href:"#"},function(){return s?i.format("add-this-email-to-my-account-and-join-board"):i.format("add-this-email-to-my-account-and-join-org")}),i.a(".button.js-create-new-account",{href:"#"},function(){return i.format("create-new-account")}))):i.a(".button.primary.js-join-model",{href:"#"},function(){return s?i.format("join-board"):i.format("join-org")})})})},{}],648:[function(t,e,r){var n;n=t(416)("header_logo"),e.exports=function(){return n.a(".header-logo.js-home-via-logo",{href:"/","aria-label":n.l("trello-home")},function(){return n.span(".header-logo-loading"),n.span(".header-logo-default")})}},{}],649:[function(t,e,r){var n;n=t(416)("header_member_menu"),e.exports=n.renderable(function(t){var e,r,o,i,s,a,u,c,l;return u=t.hasAccount,l=t.profileUrl,s=t.cardsUrl,r=t.billingUrl,e=t.accountUrl,o=t.blogUrl,i=t.canLogOut,a=function(t,e,r,o){return null==o&&(o=!1),n.li(function(){var i;return i={class:r,href:t},o&&(i.target="_blank"),n.a(i,function(){return n.format(e)})})},c=function(t){return n.ul(".pop-over-list",t)},c(function(){return a(l,"profile","js-profile"),a(s,"cards","js-cards"),u&&a(r,"billing","js-billing"),a(e,"settings","js-account")}),n.hr(),c(function(){return a("http://help.trello.com","help","js-help",!0),a("/platforms","apps","js-platforms"),a("/shortcuts","shortcuts","js-shortcuts"),a("/recommend","share-trello-for-free-trello-gold","js-reco")}),n.hr(),c(function(){return a("/guide","getting-started-guide","js-guide",!0),a(o,"trello-blog","js-blog",!0)}),n.hr(),c(function(){return a("#","change-locale","js-change-locale")}),n.hr(),c(function(){return n.li(function(){return n.a(".js-logout",{href:"#"},function(){n.format("log-out"),i||(n.br(),n.format("you-ll-need-to-set-a-password-first"))})})})})},{}],650:[function(t,e,r){var n;n=t(416)("header_notification_list_menu"),e.exports=function(){return n.mustacheBlockInverted("hasNotifications",function(){return n.p(".empty",{style:"padding: 24px 6px;"},function(){return n.format("no-notifications")})}),n.mustacheBlock("hasNotifications",function(){return n.ul(".pop-over-list.mod-add-top-margin",function(){return n.li(function(){return n.a(".js-view-all-notifications",{href:n.mustacheVar("noteUrl")},function(){return n.mustacheBlock("remainingUnread",function(){return n.format("see-all-notifications-remainingunread-more-unread",{remainingUnread:n.mustacheVar("remainingUnread")})}),n.mustacheBlockInverted("remainingUnread",function(){return n.format("see-all-notifications")})})}),n.li(function(){return n.a(".js-change-email-frequency",{href:"#"},function(){return n.format("change-notification-email-frequency")})}),n.mustacheBlock("canAllowDesktopNotifications",function(){return n.li(function(){return n.a(".js-allow-desktop-notifications",{href:"#"},function(){return n.format("allow-desktop-notifications")})})})})})}},{}],651:[function(t,e,r){var n;n=t(416)("header_promo_nav"),e.exports=function(){return n.nav(".promo-nav",function(){return n.a(".promo-nav-button",{href:"/",target:"_blank"},function(){return n.format("home")}),n.a(".promo-nav-button",{href:"/tour",target:"_blank"},function(){return n.format("tour")}),n.a(".promo-nav-button",{href:"http://blog.trello.com",target:"_blank"},function(){return n.format("blog")})})}},{}],652:[function(t,e,r){var n;n=t(416)("header_public_board"),e.exports=function(){return n.p(".u-bottom",function(){return n.mustacheBlock("interactionText",function(){return n.span(".u-inline-block",function(){return n.text(n.mustacheVar("interactionText"))})}),n.span(".u-inline-block",function(){return n.format("sign-up-for-free-or-learn-more-about-trello",{signupUrl:n.mustacheVar("signupUrl"),tourUrl:n.mustacheVar("tourUrl")})})})}},{}],653:[function(t,e,r){var n;n=t(416)("header_search"),e.exports=function(){return n.a(".header-btn.open-search-btn.js-open-search-page",{href:"/search",title:n.l("search-for-boards-cards-members-and-organizations")},function(){return n.span(".header-btn-icon.icon-lg.icon-search.light")}),n.div(".header-search",function(){return n.input(".header-search-input.js-search-input.js-disable-on-dialog",{type:"text",autocomplete:"off",autocorrect:"off",spellcheck:"false",value:n.mustacheVar("query")}),n.span(".header-search-icon.icon-lg.icon-search.light.js-search-icon.js-search-focus"),n.span(".header-search-icon.header-search-icon-close.icon-lg.icon-close.light.hide.js-close-icon.js-search-close"),n.a(".header-search-icon.header-search-icon-open.icon-lg.icon-external-link.light.hide.js-open-button.js-open-search-page",{href:"#"})})}},{}],654:[function(t,e,r){var n;n=t(416)("header_signup_login"),e.exports=function(){return n.a(".header-btn.header-signup",{href:"/signup"+n.mustacheBlock("escapedReturnUrl",function(){return"?returnUrl="+n.mustacheVar("escapedReturnUrl")})},function(){return n.format("sign-up")}),n.a(".header-btn.header-login.no-right-margin",{href:"/login"+n.mustacheBlock("escapedReturnUrl",function(){return"?returnUrl="+n.mustacheVar("escapedReturnUrl")})},function(){return n.format("log-in")})}},{}],655:[function(t,e,r){var n;n=t(416)("header_user"),e.exports=function(){return n.mustacheBlock("__loggedIn",function(){return n.a(".header-btn.js-open-add-menu",{href:"#","aria-label":n.l("create-board-or-org")},function(){return n.span(".header-btn-icon.icon-lg.icon-add.light")}),n.a(".header-btn.header-member.js-open-header-member-menu",{href:"#","aria-label":n.l("member-menu")},function(){return n.span({class:"member"+n.mustacheBlock("hasCrown",function(){return" has-crown"})}),n.span(".header-btn-text.js-member-name")}),n.a(".header-btn.header-notifications.js-open-header-notifications-menu",{href:"#","aria-label":n.l("notifications-menu")},function(){return n.span(".header-btn-icon.icon-lg.icon-notification.light")}),n.mustacheBlock("showChannelPicker",function(){return n.a(".header-btn.header-btn-channel-picker.js-open-channel-picker",{href:"#","aria-label":n.l("switch-channels")},function(){return n.span(".header-btn-icon.icon-lg.icon-gear.light")})})}),n.mustacheBlockInverted("__loggedIn",function(){return n.mustachePartial("header_signup_login")})}},{}],656:[function(t,e,r){var n;n=t(416)("header_version_picker"),e.exports=function(){return n.div(".form-grid",function(){return n.div(".button-link.setting.form-grid-child.form-grid-child-full",function(){return n.span(".label",function(){return n.format("head")}),n.span(".value",function(){return n.text(n.mustacheVar("active.name"))}),n.label(function(){return n.format("head")}),n.select(".js-select-head",function(){return n.mustacheBlock("heads",function(){return n.optionSelected(n.mustacheVar("selected"),{value:n.mustacheVar("value")},function(){return n.text(n.mustacheVar("displayName")),n.mustacheBlock("selected",function(){return n.format("current")})})})})}),n.mustacheBlock("versions.2.value",function(){return n.div(".button-link.setting.form-grid-child.form-grid-child-full",function(){return n.span(".label",function(){return n.format("version")}),n.span(".value",function(){return n.text(n.mustacheVar("active.version"))}),n.label(function(){return n.format("version")}),n.select(".js-select-version",function(){return n.mustacheBlock("versions",function(){return n.optionSelected(n.mustacheVar("selected"),{value:n.mustacheVar("value")},function(){return n.text(n.mustacheVar("displayName")),n.mustacheBlockInverted("active",function(){return n.text(" "),n.format("disabled")}),n.mustacheBlock("selected",function(){return n.text(" "),n.format("current")})})})})})})})}},{}],657:[function(t,e,r){var n;n=t(416)("header_warning_banner"),e.exports=function(){return n.p(".u-bottom",function(){return n.mustacheBlock("knownEmailProvider",function(){return n.format("please-confirm-your-email-address-email-check-your-inbox",{email:n.mustacheVar("email"),emailInboxUrl:n.mustacheVar("emailInboxUrl")}),n.a(".header-banner-link-left.quiet.js-resend-confirmation-email",{href:"#"},function(){return n.format("resend-email")})}),n.mustacheBlockInverted("knownEmailProvider",function(){return n.format("please-confirm-your-email-address-email",{email:n.mustacheVar("email")}),n.a(".header-banner-link-left.quiet.js-resend-confirmation-email",{href:"#"},function(){return n.format("resend-email")})})})}},{}],658:[function(t,e,r){var n;n=t(416)("header_warning_password"),e.exports=function(){return n.p(".u-bottom",function(){return n.format("we-ve-automatically-created-an-account-for-email-with-the-username-username",{email:n.mustacheVar("email"),username:n.mustacheVar("username")}),n.a(".quiet.js-change-password",{href:"/my/account"},function(){return n.format("add-a-password")})})}},{}],659:[function(t,e,r){var n;n=t(416)("hybrid_signup_login"),e.exports=function(){return n.div(".form-parts-container.u-clearfix",function(){return n.div(".form-tabs.js-tabs",function(){return n.a(".signup-form-tab.js-tab.active",{"data-content":"signup-form"},function(){return n.format("sign-up")}),n.a(".login-form-tab.js-tab",{"data-content":"login-form"},function(){return n.format("log-in")})}),n.div({class:"signup-form js-signup-form-pos js-form-part"+n.mustacheBlockInverted("hasAccount",function(){return" js-default-active"}),"data-id":"signup-form"},function(){return n.h1(function(){return n.format("new-to-trello")}),n.p(function(){return n.format("create-an-account-to-edit-this-board-create-new-boards-and-more")}),n.div(".tooltip.mod-margin.js-insert-tooltip"),n.form({action:"/signup-invitation",method:"post"},function(){return n.div(".quiet.js-bad-full-name.hide",function(){return n.format("your-name-must-be-at-least-4-characters")}),n.label({for:"display-name-create"},function(){return n.format("full-name")}),n.input({type:"text",name:"fullName",id:"display-name-create",value:n.mustacheVar("fullName")}),n.div(function(){return n.div(".quiet.js-bad-email.hide",function(){return n.format("you-must-enter-a-valid-email-address")}),n.div(".quiet.js-used-email.hide",function(){return n.format("that-email-address-is-in-use")}),n.label({for:"email-create"},function(){return n.format("email")}),n.input({type:"email",name:"email",id:"email-create",value:n.mustacheVar("email"),autocomplete:"off",autocorrect:"off",spellcheck:"false",autocapitalize:"off"})}),n.div(".quiet.js-bad-password.hide",function(){return n.format("password-is-too-short")}),n.label({for:"password-create"},function(){return n.format("password")}),n.input({type:"password",name:"password",id:"password-create"}),n.input({type:"hidden",name:"returnUrl",value:n.mustacheVar("returnUrl")}),n.input({type:"hidden",name:"idModel",value:""}),n.input({type:"hidden",name:"type",value:""}),n.input({type:"hidden",name:"token",value:""}),n.input(".primary.js-create-account",{type:"submit",value:n.l("okay-lets-go")})})}),n.div({class:"login-form js-login-form-pos js-form-part"+n.mustacheBlock("hasAccount",function(){return" js-default-active"}),"data-id":"login-form"},function(){return n.h1(function(){return n.format("already-have-an-account")}),n.p(function(){return n.format("hello-old-friend-just-log-in-and-you-ll-be-added")}),n.a(".button.primary",{href:"/login"+n.mustacheBlock("escapedReturnUrl",function(){return"?returnUrl="+n.mustacheVar("escapedReturnUrl")})},function(){return n.format("log-in")})}),n.div(".active-box.js-active-box.start")})}},{}],660:[function(t,e,r){e.exports={actions_empty:t(553),ad_business_class:t(554),ad_business_class_google_apps:t(555),archive_item:t(557),archived_card_options:t(558),archived_cards:t(559),archived_lists:t(560),atMention:t(561),attachment_viewer:t(564),attachment_viewer_frame:t(565),attachment_viewer_frame_details:t(566),avatar_change:t(567),badge:t(568),board:t(570),board_archive:t(571),board_background_options:t(572),board_background_selection:t(573),board_change_background:t(574),board_closed:t(575),board_desc:t(576),board_header:t(577),board_header_permissions:t(578),board_list_item_add:t(581),board_member_profile:t(582),board_menu_activity:t(583),board_menu_commenting:t(584),board_menu_default:t(585),board_menu_email:t(586),board_menu_invitations:t(587),board_menu_more:t(588),board_menu_more_activity_button:t(589),board_menu_settings:t(590),board_menu_subscribed_state:t(591),board_menu_vis:t(592),board_new:t(593),board_new_vis:t(594),board_observer_count:t(595),board_sidebar:t(596),boards_page_add_org_button:t(597),calendar_day:t(603),calendar_day_list_header:t(604),calendar_month:t(605),calendar_toolbar:t(606),calendar_week:t(607),cant_add_board_to_org:t(608),card_composer_inline:t(610),card_copy:t(611),card_detail_more_menu:t(615),card_in_list:t(618),card_menu_meta:t(619),card_title_on_card_front:t(620),change_org_vis:t(621),checklist:t(622),checklist_add_menu:t(623),checklist_item:t(624),closed_boards:t(625),comment_edit_controls:t(626),confirm:t(628),confirm_merge:t(629),connect_failed:t(630),crop_photo:t(631),dialog_close_button:t(633),edit_controls:t(634),embedly:t(636),empty_list:t(637),error:t(639),filter_cards:t(640),filter_cards_search_results:t(641),formatting_help:t(642),header_add_menu:t(643),header_boards_menu_button:t(645),header_channel_picker:t(646),header_logo:t(648),header_notification_list_menu:t(650),header_promo_nav:t(651),header_public_board:t(652),header_search:t(653),header_signup_login:t(654),header_user:t(655),header_version_picker:t(656),header_warning_banner:t(657),header_warning_password:t(658),hybrid_signup_login:t(659),index:t(660),invitation:t(661),kiln_changeset_preview:t(663),kiln_changeset_thumbnail:t(664),label_edit_component:t(666),list:t(667),list_add:t(668),list_bulk_card_move:t(669),list_copy:t(670),list_menu:t(671),manage_members:t(672),manage_members_select_role:t(673),member:t(674),member_account:t(675),member_application:t(676),member_application_list:t(677),member_billing_org_link:t(679),member_billing_org_link_list:t(680),member_boards_list_ad:t(681),member_cards_base:t(682),member_cards_board:t(683),member_cards_card:t(684),member_cards_date:t(685),member_cards_filter:t(686),member_detail_profile_edit:t(688),member_detail_profile_info:t(689),member_gold_earned:t(690),member_gold_intro:t(691),member_inline:t(692),member_list_item_detail:t(694),member_login:t(695),member_notifications:t(696),member_on_board_menu:t(697),member_on_card:t(698),member_on_card_menu:t(699),member_profile:t(700),member_profile_info:t(701),member_session:t(702),member_session_list:t(703),members_voted:t(704),menu:t(705),menu_base:t(706),move_card_controls:t(708),observer_list:t(710),org_account:t(711),org_bc_intro:t(712),org_boards_for_member:t(713),org_create:t(714),org_detail_profile_edit:t(716),org_detail_profile_info:t(717),org_export:t(718),org_export_empty:t(719),org_export_item:t(720),org_link_ga_helper:t(721),org_member_activity:t(722),org_member_cards:t(723),org_members:t(724),org_pref_restriction:t(725),org_prefs_nonorg_invites:t(726),org_prefs_restrict_invites:t(727),org_prefs_vis:t(728),org_remove_or_deactivate_member:t(729),org_settings_page_board_create_restrictions:t(730),org_settings_page_board_invite_restrictions:t(731),org_settings_page_invite_restrictions:t(732),org_settings_page_visibility:t(733),organization_list_item:t(734),organization_search_list_item:t(735),pop_over_ad:t(736),popover_add_email:t(737),popover_add_list:t(738),popover_auto_mentioner:t(739),popover_board_header_org_menu:t(740),popover_card_completer:t(741),popover_card_from_calendar:t(742),popover_change_board_org:t(743),popover_change_labels:t(744),popover_change_roles:t(745),popover_change_set_password:t(746),popover_change_user_info:t(747),popover_confirm_member_delete:t(748),popover_emoji_completer:t(749),popover_emoji_uploader:t(750),popover_filter_pos_results:t(751),popover_helper_new_board_add_org:t(752),popover_insertion_menu:t(753),popover_member_searcher:t(754),popover_move_card:t(755),popover_move_list:t(756),popover_org_logo:t(757),popover_rename_board:t(758),popover_select_members:t(759),popover_selector_menu:t(760),popover_set_email_freq:t(761),popover_share:t(762),power_up_item:t(763),power_up_item_details:t(764),power_ups_about_calendar:t(765),power_ups_about_card_aging:t(766),power_ups_about_voting:t(767),power_ups_calendar_prefs:t(768),power_ups_card_aging_prefs:t(769),power_ups_detail_navbar:t(770),power_ups_voting_prefs:t(771),product_promo_button:t(772),quick_card_editor:t(773),saved_search:t(774),search_instant_results:t(775),search_results_card:t(776),search_suggetion:t(777),search_suggetion_board:t(778),search_suggetion_member:t(779),select_card:t(780),select_emoji:t(781),select_labels:t(782),select_member:t(783),select_org_to_upgrade:t(784),shortcuts:t(785),sticker_on_card:t(786),sticker_pack_selection_list:t(787),sticker_select:t(788),sticker_select_item:t(789),sticker_select_item_upload:t(790),sync_error:t(791),take_photo:t(792),tooltip_content:t(794),woof_header:t(795)}},{}],661:[function(t,e,r){var n;n=t(416)("invitation"),e.exports=function(){return n.div(".phenom.invitation",function(){return n.mustacheBlock("MemberInviter",function(){return n.div(".creator.member.no-menu",function(){return n.mustachePartial("member")})}),n.div(".phenom-desc",function(){return n.p(function(){return n.mustacheBlock("MemberInviter",function(){return n.format("fullname-created-an-invitation-to",{fullName:n.mustacheVar("fullName")})}),n.span(".invitee",function(){return n.mustacheBlock("MemberInvited",function(){return n.mustachePartial("member_inline")}),n.mustacheBlockInverted("MemberInvited",function(){return n.text(n.mustacheVar("email")),n.mustacheBlockInverted("email",function(){return n.format("someone-new")})})})})}),n.p(".phenom-meta.quiet",function(){return n.mustacheBlock("dateExpires",function(){return n.span(".expiration-date",function(){return n.format("expires",{dateExpires:n.mustacheVar("dateExpires")})})}),n.mustacheBlock("canRemove",function(){return n.text(" - "),n.a(".u-inline-block.js-remove-invitation",{href:"#"},function(){return n.format("delete-invitation")})})})})}},{}],662:[function(t,e,r){var n;n=t(416)("invite_add_name"),e.exports=n.renderable(function(t){var e,r,o,i;return r=t.email,o=t.fullName,e=t.canAddAsObserver,i=t.modelType,n.p(".quiet",function(){if("Board"===i)return n.format("we dont know that person…board",{email:r});if("Organization"===i)return n.format("we dont know that person…team",{email:r});throw new Error("Expected either Board or Organization as modelType; got "+i)}),n.p(".error.hide.js-name-error",function(){return n.format("full-name-must-be-more-than-4-characters")}),n.form(".js-email-data",function(){return n.label(function(){return n.format("full-name")}),n.input(".js-autofocus.js-full-name",{type:"text",value:o}),n.input(".js-email",{type:"hidden",value:r}),e&&n.span(".check-div.quiet.u-clearfix",{style:n.stylify({"margin-left":"24px","padding-top":"2px","font-size":"12px","line-height":"15px"})},function(){return n.input({type:"checkbox",id:"addAsObserver"}),n.label({for:"addAsObserver"},function(){return n.format("include-this-member-as-a-view-only-observer")})}),n.input(".wide.primary.js-send-email-invite",{type:"submit",value:n.l("send")})})})},{}],663:[function(t,e,r){var n;n=t(416)("kiln_changeset_preview"),e.exports=function(){var t,e;return e=null!=(t=n.mustacheVar("reviews"))?t:[],n.div(".attachment-extra-info-header",function(){var t;return t=0===e.length?"changeset-no-reviews":"changeset",n.format(t,{url:n.mustacheVar("url"),shortHash:n.mustacheVar("shortHash"),author:n.mustacheVar("author")}),n.mustacheBlock("reviews",function(){return n.span(".quiet",function(){return n.a({href:n.mustacheVar("url"),target:"_blank"},function(){return n.text(n.mustacheVar("status"))})})})}),n.div(".attachment-extra-info-details.markeddown",function(){return n.raw(n.mustacheVar("commitMessageHtml"))})}},{}],664:[function(t,e,r){var n;n=t(416)("kiln_changeset_thumbnail"),e.exports=function(){return n.span({title:n.mustacheVar("commitMessage")},function(){return n.text(n.mustacheVar("shortCommitMessage"))}),n.span(".block.quiet",function(){var t,e,r;return r=null!=(e=n.mustacheVar("reviews"))?e:[],t=n.mustacheVar("date"),0!==r.length||t?0===r.length&&t?n.format("no-reviews-date",{date:t}):r.length>0&&!t?n.format("reviews-no-date"):r.length>0&&t&&n.format("reviews-date",{date:t}):n.format("no-reviews-no-date"),n.mustacheBlock("reviews",function(){return n.span(function(){return n.a({href:n.mustacheVar("url"),target:"_blank"},function(){return n.text(n.mustacheVar("status"))})})})})}},{}],665:[function(t,e,r){var n;n=t(416)("label"),e.exports=n.renderable(function(t){var e,r,o;return r=t.color,o=t.name,e={"card-label":!0},r&&(e["card-label-"+r]=!0),n.span({class:n.classify(e),title:null!=o?o:r+" label (default)"},function(){return o?n.text(o):n.raw("&nbsp;")})})},{}],666:[function(t,e,r){var n;n=t(416)("label_edit_component"),e.exports=function(){return n.label({for:"labelName"},function(){return n.format("name")}),n.input(".js-autofocus.js-label-name",{id:"labelName",type:"text",name:"name",value:n.mustacheVar("label.name")}),n.label(function(){return n.format("select-a-color")}),n.mustacheBlock("colors",function(){return n.span({class:"card-label card-label--selectable card-label-"+n.mustacheVar("color")+" palette-color js-palette-color","data-color":n.mustacheVar("color")},function(){return n.span({class:"card-label-color-select-icon icon-sm icon-check light "+n.mustacheBlockInverted("selected",function(){return"hide"})+" js-palette-select"})})}),n.p(".u-bottom",function(){return n.format("no-color")}),n.p(".u-bottom.quiet",function(){return n.format("this-wont-show-up-on-the-front-of-cards")}),n.input(".primary.wide.u-float-left.js-submit",{type:"submit",value:n.mustacheVar("submitText")}),n.div(".u-float-right.js-accessory-view-holder")}},{}],667:[function(t,e,r){var n;n=t(416)("list"),e.exports=function(){return n.div(".list .js-list-content",function(){return n.div(".list-header.js-list-header.non-empty.u-clearfix",{attr:"name"},function(){return n.h2(".list-header-name.hide-on-edit.js-list-name.current",function(){return n.text(n.mustacheVar("name"))}),n.text(" "),n.p(".list-header-num-cards.hide.js-num-cards"),n.span({class:"list-header-subscribe-icon icon-sm icon-subscribe js-list-subscribed"+n.mustacheBlockInverted("subscribed",function(){return" hide"})}),n.div(".edit.edit-heavy.u-clearfix",function(){return n.textarea(".field.single-line",{type:"text"})}),n.mustacheBlock("__loggedIn",function(){return n.a(".list-header-menu-icon.icon-sm.icon-dropdown-menu.dark-hover.js-open-list-menu",{href:"#"})})}),n.a(".open-card-composer.js-open-card-composer",{href:"#"},function(){return n.format("add-a-card-ellipsis")})})}},{}],668:[function(t,e,r){var n;n=t(416)("list_add"),e.exports=function(){return n.form(function(){return n.span(".placeholder.js-open-add-list",function(){return n.format("add-a-list-ellipsis")}),n.input(".list-name-input",{type:"text",name:"name",placeholder:n.l("add-a-list-ellipsis"),autocomplete:"off"}),n.div(".edit-controls.keep.u-clearfix",function(){return n.input(".primary.confirm.js-save-edit",{type:"submit",value:n.l("save")}),n.a(".icon-lg.icon-close.dark-hover.cancel.js-cancel-edit",{href:"#"})})})}},{}],669:[function(t,e,r){var n;n=t(416)("list_bulk_card_move"),e.exports=function(){return n.form(function(){return n.ul(".pop-over-list",function(){return n.mustacheBlock("lists",function(){return n.li(function(){return n.a({href:"#",class:"js-select-list highlight-icon "+n.mustacheBlock("current",function(){return" disabled"}),name:n.mustacheVar("id")},function(){return n.text(n.mustacheVar("name")),n.mustacheBlock("current",function(){return n.text(" "),n.format("current")})})})})})})}},{}],670:[function(t,e,r){var n;n=t(416)("list_copy"),e.exports=function(){return n.label(function(){return n.format("name")}),n.textarea(".js-autofocus",{name:"name"},function(){return n.text(n.mustacheVar("name"))}),n.input(".primary.wide.js-submit",{type:"submit",value:n.l("create-list")})}},{}],671:[function(t,e,r){var n;n=t(416)("list_menu"),e.exports=function(){return n.ul(".pop-over-list",function(){return n.mustacheBlock("__ed",function(){return n.li(function(){return n.a(".js-add-card",{href:"#"},function(){return n.format("add-card-ellipsis")})}),n.li(function(){return n.a(".js-copy-list",{href:"#"},function(){return n.format("copy-list-ellipsis")})}),n.li(function(){return n.a(".js-move-list",{href:"#"},function(){return n.format("move-list-ellipsis")})})}),n.li(function(){return n.a(".highlight-icon.js-list-subscribe",{href:"#"},function(){return n.check(n.mustacheVar("subscribed"),"subscribe")})})}),n.mustacheBlock("__ed",function(){return n.hr(),n.ul(".pop-over-list",function(){return n.li(function(){return n.a(".js-move-cards",{href:"#"},function(){return n.format("move-all-cards-in-this-list-ellipsis")})}),n.li(function(){return n.a(".js-archive-cards",{href:"#"},function(){return n.format("archive-all-cards-in-this-list-ellipsis")})})})}),n.mustacheBlock("__ed",function(){return n.hr(),n.ul(".pop-over-list",function(){return n.li(function(){return n.a(".js-close-list",{href:"#"},function(){return n.format("archive-this-list")})})})})}},{}],672:[function(t,e,r){var n;n=t(416)("manage_members"),e.exports=function(){return n.mustacheBlock("canInviteMembers",function(){return n.div(".search-with-spinner",function(){return n.input(".js-search-input.js-autofocus",{type:"text",style:"margin-bottom: 0;",placeholder:n.mustacheVar("placeholder")}),n.div(".spinner.small.hide.js-loading")}),n.div(".manage-member-section.js-helper",function(){return n.p(".u-bottom.quiet",{style:"padding: 6px;"},function(){return n.format("search-for-a-person-in-trello-by-name-or-email-address-or-enter-an-email-address-to-invite-someone-new")})})}),n.mustacheBlock("disableAddingExternalMembers",function(){return n.div(".search-with-spinner",function(){return n.input(".js-search-input.js-autofocus",{type:"text",style:"margin-bottom: 0;",placeholder:n.mustacheVar("placeholder")}),n.div(".spinner.small.hide.js-loading")}),n.p(".warning",function(){return n.mustacheBlock("isBCOrgAdmin",function(){return n.format("only-organization-members-can-be-added-to-this-board-to-change-this-visit-the-organization-settings-page-and-click-inviting-non-org-members-to-boards",{orgSettingsURL:n.mustacheVar("orgSettingsURL")})}),n.mustacheBlockInverted("isBCOrgAdmin",function(){return n.format("only-organization-members-can-be-added-to-this-board-check-with-an-organization-admin-to-change-this-setting")})})}),n.div(".manage-member-section.hide.js-board-members",function(){return n.ul(".pop-over-member-list.options.js-list")}),n.div(".manage-member-section.hide",function(){return n.h4(function(){return n.format("error")}),n.p(".error",function(){return n.format("the-user-or-email-could-not-be-invited-due-to-an-organization-restriction")})}),n.div(".manage-member-section.hide.js-error",function(){return n.p(".error",{style:"margin: 16px 8px 6px;"})}),n.mustacheBlock("canAddMembers",function(){return n.div(".manage-member-section.hide.js-uninvited-search-results"),n.div(".manage-member-section.hide.js-search-results",function(){return n.h4(function(){return n.format("select-to-add")}),n.ul(".pop-over-member-list.options.js-list")}),n.div(".manage-member-section.hide.js-no-results",function(){return n.p(".quiet.u-text-align-center",{style:"padding: 16px 4px;"},function(){return n.format("no-results")})}),n.div(".manage-member-section.hide.js-org-members",function(){return n.h4(function(){return n.format("orgname-members",{orgName:n.mustacheVar("orgName")})}),n.ul({class:"pop-over-member-list options u-clearfix js-list"+n.mustacheBlock("orgMemsView",function(){return" collapsed"}),style:n.mustacheBlock("orgMemsView",function(){return"margin-bottom: 8px;"})}),n.a(".quiet-button.js-add-all-org-members",{href:"#",style:"margin-top: 8px;"}),n.a(".quiet-button.js-more-org-members.hide",{href:"#",style:"margin-top: 8px;"},function(){return n.format("view-all-members")})})}),n.mustacheBlock("canInviteMembers",function(){return n.div(".js-ad")}),n.mustacheBlock("isPerUser",function(){return n.hr(),n.p(".quiet.u-bottom",{style:"padding: 6px;"},function(){return n.mustacheBlock("isMonthly",function(){return n.format("business-class-pricing-is-per-user-adding-a-member-will-increase-the-price-by-jpsprice-per-month",{jpsPrice:n.mustacheVar("perUserPrice")})}),n.mustacheBlock("isYearly",function(){return n.format("business-class-pricing-is-per-user-adding-a-member-will-increase-the-price-by-jpsprice-per-year",{jpsPrice:n.mustacheVar("perUserPrice")})})})})}},{}],673:[function(t,e,r){var n;n=t(416)("manage_members_select_role"),e.exports=function(){return n.ul(".pop-over-list",function(){return n.mustacheBlock("showAdmin",function(){return n.li(function(){return n.a(".js-invite.js-select-admin",{href:"#"},function(){return n.format("admin-roletext-admin",{roleText_admin:n.mustacheVar("roleText_admin")})})})}),n.li(function(){return n.a(".js-invite.js-select-member",{href:"#"},function(){return n.format("normal-roletext-normal",{roleText_normal:n.mustacheVar("roleText_normal")})})}),n.mustacheBlock("showObserver",function(){return n.li(function(){return n.a(".js-invite.js-select-observer",{href:"#"},function(){return n.format("observer"),n.icon("business-class"),n.span(".sub-name",function(){return n.text(n.mustacheVar("roleText_observer"))})})})})})}},{}],674:[function(t,e,r){var n;n=t(416)("member"),e.exports=function(){return n.mustacheBlock("avatarHash",function(){return n.img(".member-avatar",{height:"30",width:"30",src:n.mustacheVar("__avatarDomain")+"/"+n.mustacheVar("avatarHash")+"/30.png",srcset:n.mustacheVar("__avatarDomain")+"/"+n.mustacheVar("avatarHash")+"/30.png 1x, "+n.mustacheVar("__avatarDomain")+"/"+n.mustacheVar("avatarHash")+"/50.png 2x",alt:n.mustacheVar("fullName")+" ("+n.mustacheVar("username")+")",title:n.mustacheVar("fullName")+" ("+n.mustacheVar("username")+")"})}),n.mustacheBlockInverted("avatarHash",function(){return n.span(".member-initials",{title:n.mustacheVar("fullName")+" ("+n.mustacheVar("username")+")"},function(){return n.text(n.mustacheVar("initials"))})}),n.mustacheBlockInverted("isDeactivated",function(){return n.mustacheBlock("isBoardAdmin",function(){return n.span(".member-type.admin",{title:n.l("this-member-is-an-admin-of-this-board")})}),n.mustacheBlock("isOrganizationAdmin",function(){return n.span(".member-type.admin",{title:n.l("this-member-is-an-admin-of-this-organization")})})}),n.span(".member-gold-badge",{title:n.l("this-member-has-trello-gold")})}},{}],675:[function(t,e,r){var n;n=t(416)("member_account"),e.exports=function(){return n.div(".window-module.u-clearfix",function(){return n.div(".window-module-title",function(){return n.h3(function(){return n.format("account-details")})}),n.a(".big-link.js-change-name-and-bio",{href:"#"},function(){return n.span(".text",function(){return n.format("change-name-initials-or-bio")})}),n.a(".big-link.js-change-avatar",{href:"#"},function(){return n.span(".text",function(){return n.format("change-avatar")})}),n.a(".big-link.js-change-password",{href:"#"},function(){return n.span(".text",function(){return n.mustacheBlock("hasPassword",function(){return n.format("change-password")}),n.mustacheBlockInverted("hasPassword",function(){return n.format("set-password")})})})}),n.div(".window-module.u-clearfix",function(){return n.div(".window-module-title",function(){return n.h3(function(){return n.format("two-factor-auth")})}),n.a(".big-link.js-configure-2fa",{href:"/2fa"},function(){return n.span(".text",function(){return n.format("configure-two-factor-authentication")})})}),n.div(".window-module.js-credentials-section",function(){return n.div(".window-module-title",function(){return n.h3(function(){return n.format("credentials")})}),n.div(".js-credentials-list.u-gutter",function(){return n.div(".spinner.loading")}),n.div(".u-gutter",function(){return n.input(".js-add-email",{type:"button",value:n.l("add-a-new-email-address")})})}),n.div(".window-module.u-clearfix",function(){return n.div(".window-module-title",function(){return n.h3(function(){
return n.format("notifications")})}),n.a(".big-link.js-change-email-freq",{href:"#"},function(){return n.span(".text",function(){return n.format("change-notification-email-frequency")})}),n.mustacheBlock("canAllowDesktopNotifications",function(){return n.a(".big-link.js-allow-desktop-notifications",{href:"#"},function(){return n.span(".text",function(){return n.format("allow-desktop-notifications")})})})}),n.div(".window-module.u-clearfix",function(){return n.div(".window-module-title",function(){return n.h3(function(){return n.format("accessibility")})}),n.a(".big-link.js-toggle-cb-mode",{href:"#"},function(){return n.span(".text",function(){return n.mustacheBlock("cbEnabled",function(){return n.format("disable-color-blind-friendly-mode")}),n.mustacheBlockInverted("cbEnabled",function(){return n.format("enable-color-blind-friendly-mode")})})})}),n.div(".window-module",function(){return n.div(".window-module-title",function(){return n.h3(function(){return n.format("applications")})}),n.div(".js-member-applications",function(){return n.div(".spinner.loading")})}),n.div(".window-module",function(){return n.div(".window-module-title",function(){return n.h3(function(){return n.format("sessions")})}),n.div(".js-member-sessions.u-gutter",function(){return n.div(".spinner.loading")})}),n.div(".window-module",function(){return n.a(".quiet-button.u-gutter.js-confirm-delete-member",{href:"#",style:"margin-top: 32px;"},function(){return n.format("permanently-delete-your-entire-account-forever")})})}},{}],676:[function(t,e,r){var n;n=t(416)("member_application"),e.exports=function(){return n.div(".details",function(){return n.h5(function(){return n.mustacheBlock("identifier",function(){return n.text(n.mustacheVar("identifier"))}),n.mustacheBlockInverted("identifier",function(){return n.format("unknown-application")})}),n.ul(".quiet",function(){return n.mustacheBlock("permissions",function(){return n.li(function(){return n.text(n.mustacheVar("."))})})}),n.p(".quiet",function(){return n.format("approved-dateapproved",{dateApproved:n.mustacheVar("dateApproved")}),n.br(),n.mustacheBlock("neverExpires",function(){return n.format("never-expires")}),n.mustacheBlockInverted("neverExpires",function(){return n.format("expires-dateexpires",{dateExpires:n.mustacheVar("dateExpires")})})})}),n.input(".js-revoke",{type:"button",value:n.l("revoke")})}},{}],677:[function(t,e,r){var n;n=t(416)("member_application_list"),e.exports=function(){return n.mustacheBlockInverted("hasTokens",function(){return n.p(".big-link.none",function(){return n.format("no-applications-are-using-your-trello-account")})}),n.mustacheBlock("hasTokens",function(){return n.div(".member-applications.u-gutter")})}},{}],678:[function(t,e,r){var n;n=t(416)("member"),e.exports=n.renderable(function(t){var e,r,o,i,s,a,u,c,l,d;return e=t.avatarHash,d=t.username,i=t.fullName,s=t.initials,u=t.isDeactivated,a=t.isBoardAdmin,c=t.isOrganizationAdmin,l=i+" ("+d+")",e?(r=[window.avatarDomain,e,"30.png"].join("/"),o=[window.avatarDomain,e,"50.png"].join("/"),n.img({class:"member-avatar",height:"30",width:"30",src:r,srcset:r+" 1x, "+o+" 2x",alt:l,title:l})):n.span(".member-initials",{title:l},function(){return n.text(s)}),u||(a&&n.span(".member-type.admin",{title:n.l("this-member-is-an-admin-of-this-board")}),c&&n.span(".member-type.admin",{title:n.l("this-member-is-an-admin-of-this-organization")})),n.span(".member-gold-badge",{title:n.l("this-member-has-trello-gold")})})},{}],679:[function(t,e,r){var n;n=t(416)("member_billing_org_link"),e.exports=function(){return n.li(function(){return n.a({href:n.mustacheVar("billingLink")},function(){return n.format("displayname-billing-page",{displayName:n.mustacheVar("displayName")})})})}},{}],680:[function(t,e,r){var n;n=t(416)("member_billing_org_link_list"),e.exports=function(){return n.div(".u-gutter.markeddown",function(){return n.div({style:"max-width: 450px;"},function(){return n.h3(function(){return n.format("looking-for-your-organization-s-billing-page")}),n.ul(".js-org-link-list"),n.p(".quiet",function(){return n.format("this-is-your-personal-billing-page-you-can-manage-the-billing-for-your-business-class-organizations-on-the-above-pages")})}),n.hr()})}},{}],681:[function(t,e,r){var n;n=t(416)("member_boards_list_ad"),e.exports=function(){return n.text(n.mustacheVar("copyHtml")),n.icon("close",{class:"dark-hover ad-close js-close-ad",href:"#"})}},{}],682:[function(t,e,r){var n;n=t(416)("member_cards_base"),e.exports=function(){return n.div(".window-module.u-gutter",function(){return n.a(".quiet-button.mod-with-image.js-toggle-sort",{href:"#"},function(){return n.icon("dropdown-menu",{class:"quiet-button-icon"}),n.span(".js-sort-text")})}),n.div(".js-cards-content")}},{}],683:[function(t,e,r){var n;n=t(416)("member_cards_board"),e.exports=function(){return n.div(".window-module-title",function(){return n.span(".window-module-title-icon.icon-lg.icon-board"),n.h3(function(){return n.a({href:n.mustacheVar("boardUrl")},function(){return n.text(n.mustacheVar("name"))})}),n.mustacheBlock("org",function(){return n.a(".u-inline-block.quiet",{style:"margin: 0 2px;",href:"/"+n.mustacheVar("name")},function(){return n.text(n.mustacheVar("displayName"))})}),n.span({class:"icon-sm icon-"+n.mustacheVar("permissionLevel")})}),n.div(".u-gutter.float-cards.u-clearfix.js-list")}},{}],684:[function(t,e,r){var n;n=t(416)("member_cards_card"),e.exports=function(){return n.div(".js-card"),n.p(".list-card-position.quiet",function(){return n.mustacheBlock("showBoard",function(){return n.format("in-listname-on-boardname",{listName:n.mustacheVar("listName"),boardName:n.mustacheVar("boardName")})}),n.mustacheBlockInverted("showBoard",function(){return n.format("in-listname",{listName:n.mustacheVar("listName")})})})}},{}],685:[function(t,e,r){var n;n=t(416)("member_cards_date"),e.exports=function(){return n.div(".window-module-title",function(){return n.span({class:"window-module-title-icon icon-lg icon-"+n.mustacheVar("iconType")}),n.h3(function(){return n.text(n.mustacheVar("header"))})}),n.div(".float-cards.u-gutter.u-clearfix.js-list")}},{}],686:[function(t,e,r){var n;n=t(416)("member_cards_filter"),e.exports=function(){return n.ul(".pop-over-list.checkable",function(){return n.li({class:n.mustacheBlock("board",function(){return"active"})},function(){return n.a(".highlight-icon.js-sort-by-board",{href:"#"},function(){return n.check(n.mustacheVar("board"),"sort-by-board")})}),n.li({class:n.mustacheBlock("date",function(){return"active"})},function(){return n.a(".highlight-icon.js-sort-by-due-date",{href:"#"},function(){return n.check(n.mustacheVar("date"),"sort-by-due-date")})})})}},{}],687:[function(t,e,r){var n;n=t(416)("member_detail"),e.exports=n.renderable(function(t){var e,r,o,i,s,a,u,c,l,d;return l=t.showOrgs,r=t.avatarHash,i=t.fullName,a=t.hasCrown,o=t.editable,u=t.initials,d=t.username,c=t.isMe,s=t.hasAccount,e=t.accountProblem,n.div(".tabbed-pane-header",function(){return n.div(".tabbed-pane-header-wrapper.u-clearfix",function(){return n.a({class:n.classify({"tabbed-pane-header-image":!0,"profile-image":!0,"is-editable":o,"js-change-avatar-profile":o,"is-gold":a}),href:"#"},function(){return r?n.img(".profile-image-image",{src:[avatarDomain,r,"170.png"].join("/"),alt:i}):n.span(".profile-image-initials",function(){return n.text(u)}),n.span(".profile-image-change-text",function(){return n.format("change-avatar")})}),n.div(".tabbed-pane-header-details",function(){return n.div(".js-current-details"),o?n.form(".js-profile-form.hide"):void 0})})}),n.div(".tabbed-pane-nav.u-clearfix",function(){return n.ul(function(){n.li(".tabbed-pane-nav-item",function(){return n.a(".tabbed-pane-nav-item-button.js-member-profile",{href:["",d].join("/")},function(){return n.format("profile")})}),n.li(".tabbed-pane-nav-item",function(){return n.a(".tabbed-pane-nav-item-button.js-member-cards",{href:["",d,"cards"].join("/")},function(){return n.format("cards")})}),c&&(n.li(".tabbed-pane-nav-item",function(){return n.a(".tabbed-pane-nav-item-button.js-member-account",{href:["",d,"account"].join("/")},function(){return n.format("settings")})}),e?n.li(".tabbed-pane-nav-item",function(){return n.a(".tabbed-pane-nav-item-button.js-billing",{href:["",d,"billing"].join("/")},function(){return n.format("billing-issue")})}):s?n.li(".tabbed-pane-nav-item",function(){return n.a(".tabbed-pane-nav-item-button.js-billing",{href:["",d,"billing"].join("/")},function(){return n.format("billing")})}):n.li(".tabbed-pane-nav-item",function(){return n.a(".tabbed-pane-nav-item-button.js-billing",{href:["",d,"billing"].join("/")},function(){return n.span(".icon-lg.icon-trello-gold.mod-inline.icon-trello-gold-color"),n.text(" "),n.format("trello-gold")})}))})}),n.div(".tabbed-pane-main-col.u-clearfix",function(){return n.div(".tabbed-pane-main-col-loading.hide.js-loading-page",function(){return n.span(".tabbed-pane-main-col-loading-spinner.spinner")}),n.div(".tabbed-pane-main-col-wrapper.js-content")})})},{}],688:[function(t,e,r){var n;n=t(416)("member_detail_profile_edit"),e.exports=function(){return n.p(".error.js-profile-form-error.hide"),n.label(function(){return n.format("full-name")}),n.input({type:"text",name:"fullName",value:n.mustacheVar("fullName")}),n.label(function(){return n.format("username")}),n.input({type:"text",name:"username",value:n.mustacheVar("username")}),n.label(function(){return n.format("initials")}),n.input({type:"text",name:"initials",value:n.mustacheVar("initials")}),n.label(function(){return n.format("bio-optional")}),n.textarea({name:"bio"},function(){return n.text(n.mustacheVar("bio"))}),n.input(".primary.wide.js-submit-profile",{type:"submit",value:n.l("save")}),n.input(".js-cancel-edit-profile",{type:"button",value:n.l("cancel")})}},{}],689:[function(t,e,r){var n;n=t(416)("member_detail_profile_info"),e.exports=function(){return n.div(".tabbed-pane-header-details-name",function(){return n.h1(".u-inline",function(){return n.text(n.mustacheVar("fullName"))}),n.p(".window-title-extra.quiet",function(){return n.format("at-username",{username:n.mustacheVar("username")})}),n.mustacheBlock("hasCrown",function(){return n.span(".member-profile-gold-badge",function(){return n.icon("trello-gold",{class:"member-profile-gold-badge-icon"}),n.mustacheBlock("__ed",function(){return n.format("you-ve-got-trello-gold")}),n.mustacheBlockInverted("__ed",function(){return n.format("has-trello-gold")})})})}),n.div(".tabbed-pane-header-details-content",function(){return n.mustacheBlock("bioHtml",function(){return n.raw(n.mustacheVar("bioHtml"))})}),n.mustacheBlock("__ed",function(){return n.a(".button-link.tabbed-pane-header-details-edit.js-edit-profile",{href:"#"},function(){return n.icon("edit","edit-profile")})})}},{}],690:[function(t,e,r){var n;n=t(416)("member_gold_earned"),e.exports=function(){return n.div(".window-module.gold-earned-modal",function(){return n.mustacheBlock("showClose",function(){return n.a(".icon-lg.icon-close.dark-hover.gold-earned-modal-close.js-close-modal",{href:"#"})}),n.img(".gold-earned-modal-image",{src:"https://d78fikflryjgj.cloudfront.net/images/3cbf48993d46484c5d82cc9c1844a54b/TrelloGoldIcon.png"}),n.h1(function(){return n.mustacheBlock("hasInvitations",function(){return n.format("youve-earned-trello-gold")}),n.mustacheBlockInverted("hasInvitations",function(){return n.format("youve-got-trello-gold")})}),n.p(function(){return n.text(n.mustacheVar("localizedCongratulations"))}),n.p(function(){return n.format("the-following-people-have-joined-trello-on-your-recommendation-or-invite"),n.ul(function(){return n.mustacheVar("joinedNames").forEach(function(t){return n.li(function(){return n.text(t)})})})}),n.p(".gold-earned-modal-learn-more.quiet",function(){return n.a({href:"/gold"},function(){return n.format("learn-more-about-trello-gold")})}),n.mustacheBlockInverted("hasGold",function(){return n.a(".gold-earned-modal-button.button.primary.js-start-using-gold",{href:"#"},function(){return n.format("start-using-trello-gold")})}),n.mustacheBlock("showClose",function(){return n.p(".quiet",{style:"margin-top: 16px;"},function(){return n.format("you-can-visit-your-account-settings-page-later-to-redeem-your-credits"),n.a(".js-close-modal",{href:"#"},function(){return n.format("okay-thanks-close-this-header-thing")})})})})}},{}],691:[function(t,e,r){var n;n=t(416)("member_gold_intro"),e.exports=function(){return n.div(".product-intro-modal.gold-intro",function(){return n.a(".icon-lg.icon-close.dark-hover.product-intro-close.js-close-intro-helper",{href:"#"}),n.div(".product-intro-header",function(){return n.img(".product-intro-logo",{src:"https://d78fikflryjgj.cloudfront.net/images/6d243fedef388195ac2dd4bf3f6fcfa5/TrelloGoldLogo.png",alt:"Trello Gold"})}),n.hr(),n.h2(function(){return n.format("yessssss-youve-got-trello-gold")}),n.p(function(){return n.format("here-s-what-you-need-to-know-to-get-started-ellipsis")}),n.div(".product-intro-section",function(){return n.span(".product-intro-number",function(){return n.text("1")}),n.h3(function(){return n.format("stickers")}),n.p(function(){return n.format("check-out-the-stickers-pane-on-the-menu-of-any-board-you-can-view-and-stick-additional-stickers-and-upload-your-own-from-there")})}),n.div(".product-intro-section",function(){return n.span(".product-intro-number",function(){return n.text("2")}),n.h3(function(){return n.format("board-backgrounds")}),n.p(function(){return n.format("check-out-the-settings-pane-in-the-menu-of-any-board-and-select-change-board-background-from-there-you-can-view-and-use-additional-backgrounds-and-upload-your-own")})}),n.div(".product-intro-section",function(){return n.span(".product-intro-number",function(){return n.text("3")}),n.h3(function(){return n.format("larger-attachments")}),n.p(function(){return n.format("you-can-now-upload-files-up-to-250mb-just-select-a-file-via-attach-file-ellipsis-on-the-back-of-the-card-or-drag-and-drop-from-your-desktop")})}),n.div(".product-intro-section",function(){return n.span(".product-intro-number",function(){return n.text("4")}),n.h3(function(){return n.format("uploading-custom-emoji")}),n.p(function(){return n.format("while-on-a-card-open-the-comment-field-click-the-menu-button-in-the-bottom-right-hand-corner-and-select-upload-emoji-you-can-upload-images-and-name-the-emoji-from-there")})}),n.div(".product-intro-section",function(){return n.span(".product-intro-number",function(){return n.text("5")}),n.h3(function(){return n.format("billing-page")}),n.p(function(){return n.format("check-out-the-billing-tab-for-future-reference-you-can-see-when-your-account-will-renew-update-your-credit-card-info-see-billing-history-and-so-on-if-you-signed-up-via-credits-you-can-check-when-your-credits-expire-and-you-can-enter-a-credit-card-and-sign-up-for-a-subscription")})}),n.p(function(){return n.format("this-will-be-in-the-trello-gold-user-guide-for-future-reference-enjoy-and-thanks-for-upgrading")}),n.p(".product-intro-close-bottom.u-text-align-center.quiet",function(){return n.a(".js-close-intro-helper.dark-hover",{href:"#"},function(){return n.icon("close","got-it-close-this-helper",{class:"dark-hover"})})})})}},{}],692:[function(t,e,r){var n;n=t(416)("member_inline"),e.exports=function(){return n.mustacheBlock("avatarHash",function(){return n.img(".inline-member-av",{src:n.mustacheVar("__avatarDomain")+"/"+n.mustacheVar("avatarHash")+"/30.png",alt:n.mustacheVar("fullName")+" ("+n.mustacheVar("username")+")",title:n.mustacheVar("fullName")+" ("+n.mustacheVar("username")+")"})}),n.span(".u-font-weight-bold",function(){return n.text(n.mustacheVar("fullName"))})}},{}],693:[function(t,e,r){var n;n=t(416)("member_large_avatar"),e.exports=n.renderable(function(t){var e,r,o,i;return e=t.avatarHash,r=t.fullName,i=t.username,o=r+" ("+i+")",n.img({src:[window.avatarDomain,e,"original.png"].join("/"),alt:o,title:o})})},{}],694:[function(t,e,r){var n;n=t(416)("member_list_item_detail"),e.exports=function(){return n.div({class:"member member-no-menu"+n.mustacheBlock("isVirtual",function(){return" member-virtual"})+n.mustacheBlock("isDeactivated",function(){return" member-deactivated"})},function(){return n.mustachePartial("member")}),n.div(".details",function(){return n.p(".name-line",function(){return n.span(".full-name",function(){return n.text(n.mustacheVar("fullName"))})}),n.p(".u-bottom.quiet",function(){return n.mustacheBlock("username",function(){return n.span(".quiet.u-inline-block",function(){return n.format("at-username",{username:n.mustacheVar("username")})})}),n.mustacheBlock("showGoogleApps",function(){return n.mustacheBlock("gMail",function(){return n.mustacheBlock("username",function(){return n.text("- ")}),n.icon("google"),n.text(n.mustacheVar("gMail"))})})})}),n.div(".options",function(){return n.mustacheBlock("isOrgMember",function(){return n.mustacheBlock("showActivity",function(){return n.a(".option.quiet-button.js-view-activity",{href:"#"},function(){return n.format("activity")})}),n.mustacheBlock("allowTypeChange",function(){return n.a(".option.button-link.role-button.js-change-role",{href:"#"},function(){return n.text(n.mustacheVar("orgMemberType")),n.icon("dropdown-menu")})}),n.mustacheBlockInverted("allowTypeChange",function(){return n.p(".option.status.quiet",function(){return n.text(n.mustacheVar("orgMemberType"))})}),n.mustacheBlock("allowReactivate",function(){return n.a(".option.quiet-button.js-reactivate",{href:"#"},function(){return n.format("reactivate")})}),n.mustacheBlock("isMe",function(){return n.a({class:"option button-link remove-button js-remove-or-deactivate "+n.mustacheBlockInverted("canRemove",function(){return"disabled"}),href:"#"},function(){return n.mustacheBlock("orgIsBC",function(){return n.icon("close","leave-ellipsis")}),n.mustacheBlockInverted("orgIsBC",function(){return n.icon("close","leave")})})}),n.mustacheBlockInverted("isMe",function(){return n.mustacheBlock("ownsOrg",function(){return n.a({class:"option button-link remove-button js-remove-or-deactivate "+n.mustacheBlockInverted("canRemove",function(){return"disabled"}),href:"#"},function(){return n.icon("close","remove-ellipsis")})})})}),n.mustacheBlockInverted("isOrgMember",function(){return n.mustacheBlock("showGoogleApps",function(){return n.mustacheBlockInverted("hidden",function(){return n.a(".option.quiet-button.js-hide-member",{href:"#"},function(){return n.format("dismiss")})}),n.mustacheBlock("hidden",function(){return n.a(".option.quiet-button.js-unhide-member",{href:"#"},function(){return n.format("always-show")})}),n.a(".option.button-link.primary.js-invite-to-org",{href:"#"},function(){return n.icon("add","add-member")})})})})}},{}],695:[function(t,e,r){var n;n=t(416)("member_login"),e.exports=function(){return n.p(".member-login-email.u-bottom",function(){return n.text(n.mustacheVar("email"))}),n.mustacheBlock("primary",function(){return n.p(".u-bottom.quiet",function(){return n.format("primary-email")})}),n.mustacheBlockInverted("primary",function(){return n.a(".js-primary.u-bottom.quiet",{href:"#"},function(){return n.format("set-as-primary-email")})}),n.p(".member-login-date-added.u-bottom.quiet",function(){return n.format("added",{dateAdded:n.mustacheVar("dateAdded")})}),n.mustacheBlockInverted("primary",function(){return n.icon("close",{class:"member-login-remove dark-hover js-remove"})})}},{}],696:[function(t,e,r){var n;n=t(416)("member_notifications"),e.exports=function(){return n.div(".window-module-title",function(){return n.span(".window-module-title-icon.icon-lg.icon-notification"),n.h3(function(){return n.format("notifications")})}),n.mustacheBlock("empty",function(){return n.div(".empty-list",function(){return n.format("no-notifications")})}),n.div(".js-list-notifications"),n.a(".show-more.js-more-notifications",{href:"#"},function(){return n.format("load-more-notifications")})}},{}],697:[function(t,e,r){var n;n=t(416)("member_on_board_menu"),e.exports=function(){return n.li(function(){return n.mustacheBlock("type",function(){return n.a({class:n.mustacheBlock("canChangeRole",function(){return"js-change-role"})+n.mustacheBlockInverted("canChangeRole",function(){return"disabled"}),href:"#"},function(){return n.format("change-permissions-ellipsis-type",{type:n.mustacheVar("type")})})}),n.mustacheBlockInverted("type",function(){return n.a({class:n.mustacheBlock("canChangeRole",function(){return"js-change-role"})+n.mustacheBlockInverted("canChangeRole",function(){return"disabled"}),href:"#"},function(){return n.format("change-permissions-ellipsis")})})}),n.li(function(){return n.a({href:n.mustacheVar("boardProfileUrl")},function(){return n.format("view-member-s-board-activity")})}),n.mustacheBlock("canRemove",function(){return n.li(function(){return n.a(".js-remove-member",function(){return n.mustacheBlock("isMe",function(){return n.format("leave-board-ellipsis")}),n.mustacheBlockInverted("isMe",function(){return n.format("remove-from-board-ellipsis")})})})}),n.mustacheBlockInverted("canRemove",function(){return n.mustacheBlock("isMe",function(){return n.mustacheBlock("isMoreThanOneMember",function(){return n.mustacheBlock("memberIsAdmin",function(){return n.li(function(){return n.hr(),n.p(".quiet.u-bottom",function(){return n.format("you-can-t-leave-because-you-are-the-only-admin-to-make-another-user-an-admin-click-their-avatar-select-change-permissions-ellipsis-and-select-admin")})})})})})}),n.mustacheBlock("isGhost",function(){return n.li(function(){return n.hr(),n.p(".quiet.u-bottom",function(){return n.format("this-user-will-be-able-to-access-this-board-once-they-sign-up-with-trello-and-confirm-their-email-address")})})})}},{}],698:[function(t,e,r){var n;n=t(416)("member_on_card"),e.exports=function(){return n.div({class:"member js-member-on-card-menu"+n.mustacheBlock("isDeactivated",function(){return" member-deactivated"})+n.mustacheBlock("isVirtual",function(){return" member-virtual"}),"data-idmem":n.mustacheVar("id")},function(){return n.mustachePartial("member")})}},{}],699:[function(t,e,r){var n;n=t(416)("member_on_card_menu"),e.exports=function(){return n.mustacheBlock("__ed",function(){return n.li(function(){return n.a(".js-remove-member",function(){return n.format("remove-from-card")})})})}},{}],700:[function(t,e,r){var n;n=t(416)("member_profile"),e.exports=function(){return n.div(".window-module",function(){return n.div(".window-module-title",function(){return n.span(".window-module-title-icon.icon-lg.icon-organization"),n.h3(function(){return n.format("organizations")})}),n.div(".u-gutter.js-list-orgs")}),n.div(".window-module",function(){return n.div(".window-module-title",function(){return n.span(".window-module-title-icon.icon-lg.icon-activity"),n.h3(function(){return n.format("activity")})}),n.div(".list-actions"),n.p(".u-bottom",function(){return n.a(".show-more.js-more-actions",{href:"#"},function(){return n.format("load-more-activity")})})})}},{}],701:[function(t,e,r){var n;n=t(416)("member_profile_info"),e.exports=function(){return n.div(".member-profile-info.u-clearfix",{name:n.mustacheVar("username")},function(){return n.div(".member",function(){return n.mustachePartial("member")}),n.div(".info",function(){return n.h3(".u-bottom",function(){return n.a(".js-profile",{href:"/"+n.mustacheVar("username")},function(){return n.text(n.mustacheVar("fullName"))})}),n.p(".quiet.u-bottom",function(){return n.format("at-username",{username:n.mustacheVar("username")})}),n.mustacheBlock("bio",function(){return n.p(".member-profile-info-bio.quiet",{title:n.mustacheVar("bio")},function(){return n.raw(n.mustacheVar("bioHtml"))})}),n.p(".quiet.u-bottom",function(){return n.mustacheBlock("showMemberOptions",function(){return n.mustacheBlock("orgCardsUrl",function(){return n.a({href:n.mustacheVar("orgCardsUrl")},function(){return n.format("view-org-cards")})}),n.mustacheBlock("__ed",function(){return n.span(function(){return n.a(".js-remove-mem",{href:"#"},function(){return n.format("remove-from-org")})})})})})})})}},{}],702:[function(t,e,r){var n;n=t(416)("member_session"),e.exports=function(){return n.mustacheBlock("type_support",function(){return n.p(".u-bottom",function(){return n.format("authorization-for-trello-support-ticket-data-ticket",{"data.ticket":n.mustacheVar("data.ticket")}),n.br(),n.span(".quiet",function(){return n.format("expires",{dateExpires:n.mustacheVar("dateExpires")}),n.a(".quiet.js-revoke",{href:"#"},function(){return n.format("revoke")})})})}),n.mustacheBlockInverted("type_support",function(){return n.p(".u-bottom",function(){return n.strong(function(){return n.text(n.mustacheVar("ipAddress"))}),n.span(".quiet"),n.br(),n.span(".quiet",function(){return n.mustacheBlock("isRecent",function(){return n.mustacheBlock("isCurrent",function(){return n.format("last-used-less-than-an-hour-ago-current-session")}),n.mustacheBlockInverted("isCurrent",function(){return n.format("last-used-less-than-an-hour-ago")})}),n.mustacheBlockInverted("isRecent",function(){return n.mustacheBlock("isCurrent",function(){return n.format("last-used-current-session",{dateLastUsed:n.mustacheVar("dateLastUsed")})}),n.mustacheBlockInverted("isCurrent",function(){return n.format("last-used",{dateLastUsed:n.mustacheVar("dateLastUsed")})})})})})})}},{}],703:[function(t,e,r){var n;n=t(416)("member_session_list"),e.exports=function(){return n.div(".js-sessions"),n.input(".js-log-out-other",{type:"button",value:n.l("log-out-other-sessions")})}},{}],704:[function(t,e,r){var n;n=t(416)("members_voted"),e.exports=function(){return n.mustacheBlock("loading",function(){return n.p(".quiet.u-text-align-center",{style:"margin: 24px 0;"},function(){return n.format("loading-ellipsis")})}),n.mustacheBlockInverted("loading",function(){return n.div({class:"list-voters u-clearfix "+n.mustacheBlock("fewMembers",function(){return"compact"})},function(){return n.mustacheBlock("members",function(){return n.div(".voter",function(){return n.div(".member.member-no-menu",function(){return n.mustachePartial("member")}),n.mustacheBlock("fewMembers",function(){return n.p(".title",function(){return n.text(n.mustacheVar("fullName")),n.text(" "),n.span(".quiet",function(){return n.format("username",{username:n.mustacheVar("username")})})})})})})}),n.mustacheBlock("moreMembers",function(){return n.a(".show-more.mod-compact.js-more-members-voted",{href:"#"},function(){return n.format("show-all-voters-lengthdiff-more",{lengthDiff:n.mustacheVar("lengthDiff")})})}),n.mustacheBlock("canVote",function(){return n.hr(),n.mustacheBlock("voted",function(){return n.a(".quiet-button.u-text-align-center.js-unvote",{href:"#"},function(){return n.format("remove-your-vote")})}),n.mustacheBlockInverted("voted",function(){return n.button(".button.primary.full.js-vote",{href:"#"},function(){return n.format("vote")})})})})}},{}],705:[function(t,e,r){var n;n=t(416)("menu"),e.exports=function(){return n.ul(".pop-over-list",function(){return n.li(function(){return n.ul(".dynamic-pop-over-list")}),n.mustacheBlock("menu_cards",function(){return n.li(function(){return n.a({class:n.mustacheVar("js_class"),href:n.mustacheBlock("url",function(){return n.mustacheVar("url")})+n.mustacheBlockInverted("url",function(){return"#"})},function(){return n.text(n.mustacheVar("name"))})})})})}},{}],706:[function(t,e,r){var n;n=t(416)("menu_base"),e.exports=function(){return n.ul(".pop-over-list",function(){return n.li(function(){return n.ul(".boards-pop-over-list")}),n.raw(n.mustacheVar("content"))})}},{}],707:[function(t,e,r){var n;n=t(416)("mini_profile"),e.exports=n.renderable(function(t){var e,r,o,i,s,a,u,c;return e=t.avatarHash,i=t.fullName,c=t.username,s=t.initials,r=t.bio,o=t.email,u=t.showEmail,a=t.isMe,n.div(".mini-profile",function(){return n.div(".mini-profile-member.member-large",function(){var t;return a?n.a(".av-btn.change.js-change-av",{href:"#"},function(){return n.format("change")}):e&&n.a(".av-btn.js-view-large",{href:"#"}),t=i+" ("+c+")",e?n.img(".member-avatar",{height:"50",width:"50",src:[window.avatarDomain,e,"50.png"].join("/"),alt:t,title:t}):n.span(".member-initials",{title:t},function(){return n.text(s)})}),n.div(".mini-profile-info",function(){return n.h3(".mini-profile-info-title",function(){return n.a(".mini-profile-info-title-link.js-profile",{href:"/"+c},function(){return n.text(i)})}),n.p(".quiet.u-bottom",function(){return n.format("at-username",{username:c})}),r&&n.p(".mini-profile-info-bio.quiet",function(){return n.text(r)}),u&&n.p(".u-bottom.quiet",function(){return n.text(o)}),a?n.p(".u-bottom",function(){return n.a(".quiet.js-edit-profile",{href:"#"},function(){return n.format("edit-profile-info")})}):void 0})})})},{}],708:[function(t,e,r){var n;n=t(416)("move_card_controls"),e.exports=function(){return n.mustacheBlockInverted("hideBoard",function(){return n.div(".form-grid",function(){return n.div(".button-link.setting.form-grid-child.form-grid-child-full",function(){return n.span(".label",function(){return n.format("board")}),n.span(".value.js-board-value"),n.label(function(){return n.format("board")}),n.select(".js-select-board",function(){return n.mustacheBlock("organizations",function(){return n.optgroup({label:n.mustacheVar("displayName")},function(){return n.mustacheBlock("boards",function(){return n.optionSelected(n.mustacheVar("selected"),{value:n.mustacheVar("id")},function(){return n.text(n.mustacheVar("name")),n.mustacheBlock("selected",function(){return n.text(" "),n.format("current")})})})})})})})})}),n.div(".form-grid",function(){return n.div(".button-link.setting.form-grid-child.form-grid-child-threequarters",function(){return n.span(".label",function(){return n.format("list")}),n.span(".value.js-list-value"),n.label(function(){return n.format("list")}),n.select(".js-select-list")}),n.div(".button-link.setting.form-grid-child.form-grid-child-quarter",function(){return n.span(".label",function(){return n.format("position")}),n.span(".value.js-pos-value"),n.label(function(){return n.format("position")}),n.select(".js-select-position")})})}},{}],709:[function(t,e,r){var n,o,i;i=t(416)("notification"),n=t(638),o=t(678),e.exports=i.renderable(function(t,e){var r,s,a,u,c,l;return c=t.isDueDateNotification,s=t.date,u=t.isDeclinedInvitationNotification,a=t.entities,l=e.member,r={class:i.classify({creator:!0,member:!c,"js-show-mem-menu":null!=l})},null!=l&&(r.idmember=l.id),i.div(r,function(){l&&o(l),null==l&&(c?i.span(".icon-lg.icon-clock"):i.span(".member-initials.quiet",function(){return i.text("?")})),u&&i.span(".icon-lg.icon-close")}),i.div(".phenom-desc",function(){var t,e,r,o;for(o=[],e=0,r=a.length;r>e;e++)t=a[e],o.push(n(t,{},{}));return o}),i.p(".phenom-meta.quiet",function(){return s?i.span(".date",{dt:s}):void 0})})},{}],710:[function(t,e,r){var n;n=t(416)("observer_list"),e.exports=function(){return n.ul({class:"pop-over-member-list js-list "+n.mustacheBlock("__ed",function(){return"js-list-draggable-board-members"})})}},{}],711:[function(t,e,r){var n;n=t(416)("org_account"),e.exports=function(){return n.div(".window-module.u-clearfix",function(){return n.div(".window-module-title",function(){return n.h3(".u-inline",function(){return n.format("visibility")})}),n.div(".setting-item",function(){return n.div(".setting-item-detail",function(){return n.div(".js-fill-visibility"),n.mustacheBlockInverted("canChangeFreePrefs",function(){return n.p(".helper.u-float-left",function(){return n.format("you-need-to-be-an-admin-to-change-this-setting")})})}),n.div(".setting-item-action",function(){return n.a({class:"button-link u-text-align-center js-change-org-vis "+n.mustacheBlockInverted("canChangeFreePrefs",function(){return" disabled js-disabled"}),href:"#"},function(){return n.format("change")})})})}),n.div(".window-module.u-clearfix",function(){return n.div(".window-module-title",function(){return n.h3(".u-inline",function(){return n.format("membership-restrictions")}),n.span(".icon-sm.icon-business-class.icon-business-class-color")}),n.div(".setting-item",function(){return n.div(".setting-item-detail",function(){return n.div(".markeddown.js-fill-membership-restrictions"),n.mustacheBlockInverted("canChangeBCPrefs",function(){return n.p(".helper.u-float-left",function(){return n.mustacheBlockInverted("isOrgAdmin",function(){
return n.format("you-need-to-be-an-admin-with-business-class-to-change-this-setting")}),n.mustacheBlock("isOrgAdmin",function(){return n.format("you-need-business-class-to-change-this-setting")}),n.text(" "),n.a(".js-business-class-ad-link",{href:"/business-class",target:"_blank"},function(){return n.format("check-out-business-class")})})})}),n.div(".setting-item-action",function(){return n.a({class:"button-link u-text-align-center js-restrict-inv-org "+n.mustacheBlockInverted("canChangeBCPrefs",function(){return" disabled js-disabled"}),href:"#"},function(){return n.format("change")})})})}),n.div(".window-module.u-clearfix",function(){return n.div(".window-module-title",function(){return n.h3(".u-inline",function(){return n.format("board-creation-restrictions")}),n.span(".icon-sm.icon-business-class.icon-business-class-color")}),n.div(".setting-item",function(){return n.div(".setting-item-detail",function(){return n.div(".markeddown.js-fill-baord-create-restrictions"),n.mustacheBlockInverted("canChangeBCPrefs",function(){return n.p(".helper.u-float-left",function(){return n.mustacheBlockInverted("isOrgAdmin",function(){return n.format("you-need-to-be-an-admin-with-business-class-to-change-this-setting")}),n.mustacheBlock("isOrgAdmin",function(){return n.format("you-need-business-class-to-change-this-setting")}),n.text(" "),n.a(".js-business-class-ad-link",{href:"/business-class",target:"_blank"},function(){return n.format("check-out-business-class")})})})}),n.div(".setting-item-action",function(){return n.a({class:"button-link u-text-align-center js-restrict-board-vis "+n.mustacheBlockInverted("canChangeBCPrefs",function(){return" disabled js-disabled"}),href:"#"},function(){return n.format("change")})})})}),n.div(".window-module.u-clearfix",function(){return n.div(".window-module-title",function(){return n.h3(".u-inline",function(){return n.format("inviting-non-org-members-to-boards")}),n.span(".icon-sm.icon-business-class.icon-business-class-color")}),n.div(".setting-item",function(){return n.div(".setting-item-detail",function(){return n.div(".js-fill-board-invite-restrictions"),n.mustacheBlockInverted("canChangeBCPrefs",function(){return n.p(".helper.u-float-left",function(){return n.mustacheBlockInverted("isOrgAdmin",function(){return n.format("you-need-to-be-an-admin-with-business-class-to-change-this-setting")}),n.mustacheBlock("isOrgAdmin",function(){return n.format("you-need-business-class-to-change-this-setting")}),n.text(" "),n.a(".js-business-class-ad-link",{href:"/business-class",target:"_blank"},function(){return n.format("check-out-business-class")})})})}),n.div(".setting-item-action",function(){return n.a({class:"button-link u-text-align-center js-toggle-non-org-member-board-invites "+n.mustacheBlockInverted("canChangeBCPrefs",function(){return" disabled js-disabled"}),href:"#"},function(){return n.format("change")})})})}),n.mustacheBlock("canDelete",function(){return n.div(".window-module.u-gutter",function(){return n.a(".quiet-button.js-confirm-delete-org",{href:"#",style:"padding: 6px 11px; margin-top: 32px;"},function(){return n.format("delete-this-organization")})})})}},{}],712:[function(t,e,r){var n;n=t(416)("org_bc_intro"),e.exports=function(){return n.div(".product-intro-modal.bc-intro",function(){return n.a(".icon-lg.icon-close.dark-hover.product-intro-close.js-close-intro-helper",{href:"#"}),n.div(".product-intro-header",function(){return n.img(".product-intro-logo",{src:"https://d78fikflryjgj.cloudfront.net/images/9b9b5d825b48e46a607311eeef8c2e67/trello-business-class-with-text.png",alt:"Trello Business Class"})}),n.hr(),n.div(".product-intro-section",function(){return n.h2(function(){return n.format("welcome-to-business-class")}),n.p(function(){return n.format("to-get-started")})}),n.div(".product-intro-section",function(){return n.span(".product-intro-number",function(){return n.text("1")}),n.h3(function(){return n.format("visit-the-members-tab-to-manage-members")}),n.p(function(){return n.format("you-can-link-your-google-apps-domain-change-roles-and-deactivate-members-and-view-member-activity-on-the-members-tab-above")})}),n.div(".product-intro-section",function(){return n.span(".product-intro-number",function(){return n.text("2")}),n.h3(function(){return n.format("check-out-the-organization-settings-page")}),n.p(function(){return n.format("to-check-out-organization-and-board-invite-restrictions-and-board-creation-restrictions-click-the-organization-settings-tab-above")})}),n.div(".product-intro-section",function(){return n.span(".product-intro-number",function(){return n.text("3")}),n.h3(function(){return n.format("organize-your-boards-with-collections")}),n.p(function(){return n.format("scroll-down-on-this-page-to-see-your-teams-boards-and-click-create-a-collecction")})}),n.div(".product-intro-section",function(){return n.span(".product-intro-number",function(){return n.text("4")}),n.h3(function(){return n.format("supercharge-your-boards-with-Power-Ups")}),n.p(function(){return n.format("open-the-power-ups-menu-in-the-menu-on-the-right-side-of-your-teams-boards-to-integrate-trello")})}),n.div(".product-intro-section",function(){return n.span(".product-intro-number",function(){return n.text("5")}),n.h3(function(){return n.format("create-bulk-exports-in-one-click")}),n.p(function(){return n.mustacheBlock("hasCSVExport",function(){return n.format("click-the-export-tab-to-open-the-export-dialog-exports-include-all-of-your-organization-s-data-optionally-including-attachments-exports-will-be-in-csv-and-json-format")}),n.mustacheBlockInverted("hasCSVExport",function(){return n.format("click-the-export-tab-to-open-the-export-dialog-exports-include-all-of-your-organization-s-data-optionally-including-attachments-exports-will-be-in-json-format")})})}),n.mustacheBlock("hasGoldMembers",function(){return n.div(".product-intro-section",function(){return n.span(".product-intro-number",function(){return n.text("6")}),n.h3(function(){return n.format("use-board-backgrounds-and-stickers")}),n.p(function(){return n.format("open-the-board-menu-and-select-stickers-or-change-background-you-ll-see-additional-stickers-and-backgrounds-plus-you-can-upload-your-own")})})}),n.div(".product-intro-section",function(){return n.span(".product-intro-number",function(){return n.mustacheBlock("hasGoldMembers",function(){return n.text("7")}),n.mustacheBlockInverted("hasGoldMembers",function(){return n.text("6")})}),n.h3(function(){return n.format("for-billing-info-ellipsis")}),n.p(function(){return n.format("to-see-billing-history-change-a-credit-card-or-change-the-billing-contact-click-the-billing-tab-above")})}),n.div(".product-intro-section",function(){return n.span(".product-intro-number",function(){return n.mustacheBlock("hasGoldMembers",function(){return n.text("8")}),n.mustacheBlockInverted("hasGoldMembers",function(){return n.text("7")})}),n.h3(function(){return n.format("check-the-user-guide")}),n.p({style:"margin-bottom: 0;"},function(){return n.format("everything-else-is-outlined-in-the-business-class-user-guide-business-class-features-are-usually-marked-with-this-icon")})}),n.p(".product-intro-close-bottom.u-text-align-center.quiet",function(){return n.a(".js-close-intro-helper.dark-hover",{href:"#"},function(){return n.icon("close","got-it-close-this-helper",{class:"dark-hover"})})})})}},{}],713:[function(t,e,r){var n;n=t(416)("org_boards_for_member"),e.exports=function(){return n.ul(".pop-over-list",function(){return n.mustacheBlock("boards",function(){return n.li(function(){return n.a({href:n.mustacheVar("url")},function(){return n.text(n.mustacheVar("name")),n.text(" "),n.span(".quiet",function(){return n.format("membertype",{memberType:n.mustacheVar("memberType")})})})})})})}},{}],714:[function(t,e,r){var n;n=t(416)("org_create"),e.exports=function(){return n.form(function(){return n.p(".error",{style:"display:none"}),n.label({for:"org-display-name"},function(){return n.format("name")}),n.input(".js-autofocus.js-display-name",{type:"text",name:"displayName",id:"org-display-name",value:n.mustacheVar("displayName")}),n.label({for:"org-desc"},function(){return n.format("description-optional")}),n.textarea({id:"org-desc",name:"desc",type:"text"},function(){return n.text(n.mustacheVar("desc"))}),n.input(".primary.wide.js-save",{type:"submit",value:n.l("create")})}),n.hr(),n.p(".quiet",function(){return n.format("an-organization-is-a-group-of-boards-and-people-it-helps-keep-your-company-team-or-family-organized")}),n.p(".quiet.u-bottom",function(){return n.format("business-class-gives-your-organization-more-security-administrative-controls-and-superpowers"),n.text(" "),n.a(".js-business-class",{href:"/business-class",target:"_blank"},function(){return n.format("learn-more")})})}},{}],715:[function(t,e,r){var n;n=t(416)("org_detail"),e.exports=n.renderable(function(t){var e,r,o,i,s,a,u,c,l;return l=t.name,r=t.editable,c=t.logoHash,i=t.isBusinessClassAdmin,a=t.isInOrg,u=t.isOrgAdmin,o=t.hasAccount,e=t.accountProblem,s=t.isFullWidth,n.div(".tabbed-pane-header",function(){return n.div(".tabbed-pane-header-wrapper.u-clearfix",function(){return n.a({class:n.classify({"tabbed-pane-header-image":!0,"profile-image":!0,"is-editable":r,"js-change-org-logo":r}),href:"#"},function(){return c?n.img(".profile-image-image",{src:[logoDomain,c,"170.png"].join("/")}):n.span(".profile-image-icon.icon-lg.icon-organization"),n.span(".profile-image-change-text",function(){return n.format("change-logo")})}),n.div(".tabbed-pane-header-details",function(){return n.div(".js-current-details"),r?n.form(".js-profile-form.hide"):void 0})})}),n.div(".tabbed-pane-nav.u-clearfix",function(){return n.ul(function(){var t;n.li(".tabbed-pane-nav-item",function(){return n.a(".tabbed-pane-nav-item-button.js-org-profile",{href:["",l].join("/")},function(){return n.format("boards")})}),n.li(".tabbed-pane-nav-item",function(){return n.a(".tabbed-pane-nav-item-button.js-org-members",{href:["",l,"members"].join("/")},function(){return n.format("members")})}),i&&n.li(".tabbed-pane-nav-item",function(){return n.a(".tabbed-pane-nav-item-button.js-org-export",{href:["",l,"export"].join("/")},function(){return n.icon("business-class"),n.format("export")})}),a&&n.li(".tabbed-pane-nav-item",function(){return n.a(".tabbed-pane-nav-item-button.js-org-account",{href:["",l,"account"].join("/")},function(){return n.format("settings")})}),u&&(t=["",l,"billing"].join("/"),n.li(".tabbed-pane-nav-item",function(){return o?e?n.a(".tabbed-pane-nav-item-button.js-billing",{href:t},function(){return n.format("billing-issue")}):n.a(".tabbed-pane-nav-item-button.js-billing",{href:t},function(){return n.format("billing")}):n.a(".tabbed-pane-nav-item-button.dark-hover.js-billing",{href:t},function(){return n.span(".icon-sm.icon-business-class.mod-inline.icon-business-class-color"),n.text(" "),n.format("business class")})}))})}),n.div(".tabbed-pane-main-col.u-clearfix",function(){return n.div(".tabbed-pane-main-col-loading.hide.js-loading-page",function(){return n.span(".tabbed-pane-main-col-loading-spinner.spinner")}),n.div({class:n.classify({"tabbed-pane-main-col-wrapper":!0,"js-content":!0,"is-full-width":s})})})})},{}],716:[function(t,e,r){var n;n=t(416)("org_detail_profile_edit"),e.exports=function(){return n.p(".error.js-profile-form-error.hide"),n.label(function(){return n.format("name")}),n.input({type:"text",name:"displayName",value:n.mustacheVar("displayName")}),n.label(function(){return n.format("short-name")}),n.input({type:"text",name:"name",value:n.mustacheVar("name")}),n.label(function(){return n.format("website")}),n.input({type:"text",name:"website",value:n.mustacheVar("website")}),n.label(function(){return n.format("description-optional")}),n.textarea({name:"desc"},function(){return n.text(n.mustacheVar("desc"))}),n.input(".primary.wide.js-submit-profile",{type:"submit",value:n.l("save")}),n.input(".js-cancel-edit-profile",{type:"button",value:n.l("cancel")})}},{}],717:[function(t,e,r){var n;n=t(416)("org_detail_profile_info"),e.exports=function(){return n.div(".tabbed-pane-header-details-name",function(){return n.h1(".u-inline",function(){return n.text(n.mustacheVar("displayName"))}),n.mustacheBlock("hasBusinessClass",function(){return n.span(".window-title-extra",function(){return n.icon("business-class"),n.format("business-class")})}),n.span(".window-title-extra",function(){return n.span({class:"icon-sm icon-"+n.mustacheVar("permissionLevel"),title:n.mustacheVar("pLevelAltText")}),n.text(n.mustacheVar("pLevelDisplayText"))})}),n.div(".tabbed-pane-header-details-content",function(){return n.mustacheBlock("desc",function(){return n.raw(n.mustacheVar("descriptionHtml"))}),n.mustacheBlock("websiteHref",function(){return n.p(function(){return n.a({href:n.mustacheVar("websiteHref")},function(){return n.text(n.mustacheVar("website"))})})}),n.mustacheBlock("accountProblem",function(){return n.div({style:"padding: 4px 8px; background-color: orange; margin-bottom: 8px;"},function(){return n.p(".u-bottom",function(){return n.format("oops-there-is-a-problem-with-your-billing-information-visit-billing-to-fix-it",{name:n.mustacheVar("name")})})})})}),n.mustacheBlock("__ed",function(){return n.a(".button-link.tabbed-pane-header-details-edit.js-edit-profile",{href:"#"},function(){return n.icon("edit","edit-profile")})})}},{}],718:[function(t,e,r){var n;n=t(416)("org_export"),e.exports=function(){return n.div(".window-module.org-export-header",function(){return n.button(".org-export-header-button.primary.js-create-new-export",function(){return n.format("create-new-export")}),n.div(".org-export-header-options.u-clearfix",function(){return n.input({id:"includeAttachments",type:"checkbox"}),n.label(".quiet.u-inline.u-font-weight-normal",{for:"includeAttachments"},function(){return n.format("include-raw-attachments-ellipsis")})}),n.p(".quiet.org-export-header-text",function(){return n.mustacheBlock("hasCSV",function(){return n.format("downloads-will-be-in-a-zip-format-that-includes-members-boards-and-all-other-data-in-csv-and-json-formats-if-you-choose-to-include-raw-attachments-they-will-be-in-their-native-format-otherwise-they-will-include-a-link-to-the-version-in-trello")}),n.mustacheBlockInverted("hasCSV",function(){return n.format("downloads-will-be-in-a-zip-format-that-includes-members-boards-and-all-other-data-in-json-format-if-you-choose-to-include-raw-attachments-they-will-be-in-their-native-format-otherwise-they-will-include-a-link-to-the-version-in-trello")})})}),n.div(".window-module.org-export-list",function(){return n.div(".window-module-title",function(){return n.span(".window-module-title-icon.icon-lg.icon-archive"),n.h3(function(){return n.format("exports")})}),n.div(".u-gutter.u-clearfix.js-list-exports")})}},{}],719:[function(t,e,r){var n;n=t(416)("org_export_empty"),e.exports=function(){return n.p(".quiet",{style:"padding: 7px 0;"},function(){return n.format("no-exports-click-create-new-export-to-generate-a-new-one")})}},{}],720:[function(t,e,r){var n;n=t(416)("org_export_item"),e.exports=function(){return n.div({class:"org-export-list-item u-clearfix"+n.mustacheBlock("generating",function(){return" org-export-list-item-generating"})},function(){return n.mustacheBlock("generating",function(){return n.p(".org-export-list-item-title",function(){return n.mustacheBlock("status",function(){return n.text(n.mustacheVar("stage")),n.mustacheBlock("total",function(){return n.format("progress-of-total",{progress:n.mustacheVar("progress"),total:n.mustacheVar("total")})})}),n.mustacheBlockInverted("status",function(){return n.format("creating-new-export-ellipsis")})})}),n.mustacheBlockInverted("generating",function(){return n.p(".org-export-list-item-title",function(){return n.mustacheBlock("attachments",function(){return n.format("time-size-includes-attachments",{time:n.mustacheVar("time"),size:n.mustacheVar("size")})}),n.mustacheBlockInverted("attachments",function(){return n.format("time-size",{time:n.mustacheVar("time"),size:n.mustacheVar("size")})})}),n.a(".button-link.org-export-list-item-button.js-download-export",{href:n.mustacheVar("exportUrl"),target:"_blank"},function(){return n.format("download")})})})}},{}],721:[function(t,e,r){var n;n=t(416)("org_link_ga_helper"),e.exports=function(){return n.div(".ga-link-helper-section",function(){return n.p(function(){return n.format("1-first-you-must-enable-administrative-api-access-for-your-google-apps-domain-you-can-find-instructions-for-doing-so-here")}),n.p(function(){return n.format("2-next-you-ll-need-to-add-the-trello-business-class-app-from-the-google-apps-marketplace-to-your-domain-the-button-below-will-get-you-there")}),n.p(function(){return n.format("3-when-there-be-sure-you-are-signed-in-to-the-google-account-with-the-correct-domain-you-want-to-use-click-the-integrate-with-google-button-then-follow-the-prompts")}),n.p(function(){return n.format("4-you-ll-see-other-users-from-your-google-apps-domain-on-this-page-when-configured-correctly")})}),n.a(".button.js-link",{style:"width: 100%; padding: 7px 0;",target:"_blank",href:"https://chrome.google.com/webstore/detail/trello-business-class/hmhbhkhihjbjgghmkhhniddhlojffhil"},function(){return n.format("go-to-google-apps-marketplace")})}},{}],722:[function(t,e,r){var n;n=t(416)("org_member_activity"),e.exports=function(){return n.ul(".pop-over-list",function(){return n.li(function(){return n.mustacheBlock("hasBoards",function(){return n.a(".js-view-org-boards-for-member",{href:"#"},function(){return n.format("on-boardcount",{boardCount:n.mustacheVar("boardCount")})})}),n.mustacheBlockInverted("hasBoards",function(){return n.a(".disabled",{href:"#"},function(){return n.format("on-boardcount",{boardCount:n.mustacheVar("boardCount")})})})}),n.mustacheBlock("orgCardsUrl",function(){return n.li(function(){return n.a(".js-view-member-org-cards",{href:n.mustacheVar("orgCardsUrl")},function(){return n.format("view-members-org-cards")})})})}),n.mustacheBlock("lastActive",function(){return n.hr(),n.p(".quiet.u-bottom",function(){return n.format("fullname-was-last-active-in-this-organization",{fullName:n.mustacheVar("fullName"),lastActive:n.mustacheVar("lastActive")})})})}},{}],723:[function(t,e,r){var n;n=t(416)("org_member_cards"),e.exports=function(){return n.div(".window-module",function(){return n.mustacheBlock("memberData",function(){return n.mustachePartial("member_profile")})}),n.div(".js-cards")}},{}],724:[function(t,e,r){var n;n=t(416)("org_members"),e.exports=function(){return n.div(".window-module.u-gutter.u-bottom.u-clearfix",function(){return n.input(".u-float-left.js-search",{type:"text",placeholder:n.l("find-members-by-name-ellipsis"),style:"margin-bottom: 8px;"}),n.div(".org-members-options",function(){return n.mustacheBlock("__ed",function(){return n.a(".button-link.u-gutter.js-manage-members",{href:"#"},function(){return n.icon("member","add-members")})}),n.div({class:"js-google-apps-linker"+n.mustacheBlockInverted("canLinkGoogleApps",function(){return" hide"})},function(){return n.a(".button-link.primary.js-link-google-apps",{href:"#"},function(){return n.icon("google","link-to-google-apps-domain")})}),n.mustacheBlock("canShowAll",function(){return n.mustacheBlockInverted("showingAll",function(){return n.a(".quiet-button.js-show-all",{href:"#"},function(){return n.format("show-dismissed-accounts")})}),n.mustacheBlock("showingAll",function(){return n.a(".quiet-button.js-hide-hidden",{href:"#"},function(){return n.format("hide-dismissed")})})})})}),n.hr(),n.div(".window-module.js-member-list")}},{}],725:[function(t,e,r){var n;n=t(416)("org_pref_restriction"),e.exports=function(){return n.li(function(){return n.text(n.mustacheVar("restriction")),n.a(".dark-hover.js-restricted-address",{href:"#","data-pattern":n.mustacheVar("restriction")},function(){return n.icon("close",{class:"option close"})})})}},{}],726:[function(t,e,r){var n;n=t(416)("org_prefs_nonorg_invites"),e.exports=function(){return n.ul(".pop-over-list",function(){return n.li(function(){return n.a({href:"#"},function(){return n.check(!n.mustacheVar("externalMembersDisabled"),"allow"),n.span(".sub-name",function(){return n.format("anyone-from-inside-or-outside-of-the-organization-can-be-added-to-a-board-inside-your-organization")})})}),n.li(function(){return n.a({href:"#"},function(){return n.check(n.mustacheVar("externalMembersDisabled"),"dont-allow"),n.span(".sub-name",function(){return n.format("only-members-inside-your-organization-will-be-able-to-join-your-organization-s-boards")})})})})}},{}],727:[function(t,e,r){var n;n=t(416)("org_prefs_restrict_invites"),e.exports=function(){return n.form(".form-grid.js-form",function(){return n.div(".form-grid-child-threequarters.u-relative",function(){return n.input(".js-input-restricted.js-autofocus",{type:"text",placeholder:n.l("add-a-domain-or-address-ellipsis"),style:"margin-bottom: 6px;"}),n.span(".spinner.small.hide.js-loading",{style:"position: absolute; top: 12px; right: 8px; z-index: 2;"})}),n.div(".form-grid-child-quarter",function(){return n.input(".mod-inline-with-text-input.primary.js-form-submit-input",{type:"submit",value:n.l("add")})})}),n.p(".u-bottom.quiet",{style:"padding: 6px;"},function(){return n.format("choose-which-email-domains-and-addresses-can-be-added-to-the-organization-for-example-if-you-only-wanted-users-with-trello-com-email-addresses-to-be-able-to-be-added-to-the-organization-enter-trello-com")}),n.p(".error.u-bottom.js-errors",{style:"display: none; margin-top: 8px;"}),n.div(".manage-member-section.js-restriction-list",{style:"margin-top: 16px;"+n.mustacheBlockInverted("hasRestrictions",function(){return" display: none;"})},function(){return n.h4(function(){return n.format("allowed-domains-and-addresses")}),n.ul(".closeable-list.js-list")})}},{}],728:[function(t,e,r){var n;n=t(416)("org_prefs_vis"),e.exports=function(){return n.div({style:"margin: 12px 0 0;"},function(){return n.p(function(){return n.format("who-can-create-public-boards")}),n.ul(".pop-over-list.checkable.left-check.normal-weight",{"data-vis":"public"},function(){return n.li({class:n.mustacheBlock("boardVisibilityRestrict_public_org",function(){return"active"})},function(){return n.a({href:"#","data-restriction":"org"},function(){return n.format("any-organization-member")})}),n.li({class:n.mustacheBlock("boardVisibilityRestrict_public_admin",function(){return"active"})},function(){return n.a({href:"#","data-restriction":"admin"},function(){return n.format("only-organization-admins")})}),n.li({class:n.mustacheBlock("boardVisibilityRestrict_public_none",function(){return"active"})},function(){return n.a({href:"#","data-restriction":"none"},function(){return n.format("nobody")})})})}),n.hr(),n.div({style:"margin: 12px 0 0;"},function(){return n.p(function(){return n.format("who-can-create-organization-visible-boards")}),n.ul(".pop-over-list.checkable.left-check.normal-weight",{"data-vis":"org"},function(){return n.li({class:n.mustacheBlock("boardVisibilityRestrict_org_org",function(){return"active"})},function(){return n.a({href:"#","data-restriction":"org"},function(){return n.format("any-organization-member")})}),n.li({class:n.mustacheBlock("boardVisibilityRestrict_org_admin",function(){return"active"})},function(){return n.a({href:"#","data-restriction":"admin"},function(){return n.format("only-organization-admins")})}),n.li({class:n.mustacheBlock("boardVisibilityRestrict_org_none",function(){return"active"})},function(){return n.a({href:"#","data-restriction":"none"},function(){return n.format("nobody")})})})}),n.hr(),n.div({style:"margin: 12px 0 0;"},function(){return n.p(function(){return n.format("who-can-create-private-boards")}),n.ul(".pop-over-list.checkable.left-check.normal-weight",{"data-vis":"private"},function(){return n.li({class:n.mustacheBlock("boardVisibilityRestrict_private_org",function(){return"active"})},function(){return n.a({href:"#","data-restriction":"org"},function(){return n.format("any-organization-member")})}),n.li({class:n.mustacheBlock("boardVisibilityRestrict_private_admin",function(){return"active"})},function(){return n.a({href:"#","data-restriction":"admin"},function(){return n.format("only-organization-admins")})}),n.li({class:n.mustacheBlock("boardVisibilityRestrict_private_none",function(){return"active"})},function(){return n.a({href:"#","data-restriction":"none"},function(){return n.format("nobody")})})})})}},{}],729:[function(t,e,r){var n;n=t(416)("org_remove_or_deactivate_member"),e.exports=function(){return n.ul(".pop-over-list",function(){return n.li(".u-clearfix",function(){return n.a(".js-soft-remove",{href:"#"},function(){return n.span(".u-clearfix",function(){return n.mustacheBlock("isMe",function(){return n.format("leave-organization")}),n.mustacheBlockInverted("isMe",function(){return n.format("remove-from-organization")})}),n.span(".sub-name",function(){return n.mustacheBlock("isDeactivated",function(){return n.format("remove-all-access-to-the-organization-and-all-boards")}),n.mustacheBlockInverted("isDeactivated",function(){return n.mustacheBlock("orgIsBC",function(){return n.format("remove-all-access-to-the-organization")}),n.mustacheBlockInverted("orgIsBC",function(){return n.format("remove-all-access-to-the-organization-the-member-will-remain-on-all-their-boards-in-this-organization-they-will-receive-a-notification")})})})}),n.mustacheBlock("orgIsBC",function(){return n.mustacheBlockInverted("isDeactivated",function(){return n.mustacheBlockInverted("isMe",function(){return n.span(".check-div.quiet.u-clearfix",{style:"margin-left: 24px; padding-top: 2px; font-size: 12px; line-height: 15px;"},function(){return n.input({type:"checkbox",id:"hardRemove",name:"hard",checked:!0}),n.label({for:"hardRemove"},function(){return n.format("check-this-box-to-remove-the-member-from-all-boards")})})})})})}),n.mustacheBlock("canDeactivate",function(){return n.mustacheBlockInverted("isMe",function(){return n.li(".u-clearfix",function(){return n.a(".js-deactivate",{href:"#"},function(){return n.format("deactivate-disable-members-access-to-organization-boards-but-allow-other-organization-members-to-see-what-the-cards-and-boards-the-member-was-on")})})})})})}},{}],730:[function(t,e,r){var n;n=t(416)("org_settings_page_board_create_restrictions"),e.exports=function(){return n.ul(function(){return n.li(function(){return n.p(function(){return n.mustacheBlock("boardVisibilityRestrict_public_org",function(){return n.format("any-organization-member-can-create-public-boards")}),n.mustacheBlock("boardVisibilityRestrict_public_admin",function(){return n.format("only-organization-admins-can-create-public-boards")}),n.mustacheBlock("boardVisibilityRestrict_public_none",function(){return n.format("nobody-can-create-public-boards")})})}),n.li(function(){return n.p(function(){return n.mustacheBlock("boardVisibilityRestrict_org_org",function(){return n.format("any-organization-member-can-create-organization-visible-boards")}),n.mustacheBlock("boardVisibilityRestrict_org_admin",function(){return n.format("only-organization-admins-can-create-organization-visible-boards")}),n.mustacheBlock("boardVisibilityRestrict_org_none",function(){return n.format("nobody-can-create-organization-visible-boards")})})}),n.li(function(){return n.p(function(){return n.mustacheBlock("boardVisibilityRestrict_private_org",function(){return n.format("any-organization-member-can-create-private-boards")}),n.mustacheBlock("boardVisibilityRestrict_private_admin",function(){return n.format("only-organization-admins-can-create-private-boards")}),n.mustacheBlock("boardVisibilityRestrict_private_none",function(){return n.format("nobody-can-create-private-boards")})})})})}},{}],731:[function(t,e,r){var n;n=t(416)("org_settings_page_board_invite_restrictions"),e.exports=function(){return n.mustacheBlockInverted("externalMembersDisabled",function(){return n.p(function(){return n.format("anyone-from-inside-or-outside-of-the-organization-can-be-added-to-a-board-inside-your-organization")})}),n.mustacheBlock("externalMembersDisabled",function(){return n.p(function(){return n.format("only-members-inside-your-organization-will-be-able-to-join-your-organization-s-boards")})})}},{}],732:[function(t,e,r){var n;n=t(416)("org_settings_page_invite_restrictions"),e.exports=function(){return n.mustacheBlock("hasRestrictions",function(){return n.p(function(){return n.format("only-people-with-these-email-domains-can-join-your-organization")}),n.ul(function(){return n.mustacheBlock("restrictions",function(){return n.li(function(){return n.strong(function(){return n.text(n.mustacheVar("."))})})})})}),n.mustacheBlockInverted("hasRestrictions",function(){return n.p(function(){return n.format("anyone-with-any-email-domain-can-be-added-to-your-organization")})})}},{}],733:[function(t,e,r){var n;n=t(416)("org_settings_page_visibility"),e.exports=function(){return n.mustacheBlock("permissionLevel_public",function(){return n.p(function(){return n.icon("public"),n.format("public-helpertext",{helperText:n.mustacheVar("helperText")})})}),n.mustacheBlock("permissionLevel_private",function(){return n.p(function(){return n.icon("private"),n.format("private-helpertext",{helperText:n.mustacheVar("helperText")})})})}},{}],734:[function(t,e,r){var n;n=t(416)("organization_list_item"),e.exports=function(){return n.a({href:n.mustacheVar("url")},function(){return n.span(".item-name",function(){return n.text(n.mustacheVar("displayName"))}),n.mustacheBlock("hasBusinessClass",function(){return n.icon("business-class")}),n.span({class:"icon-sm icon-"+n.mustacheVar("visIconClass")})})}},{}],735:[function(t,e,r){var n;n=t(416)("organization_search_list_item"),e.exports=function(){return n.li(function(){return n.a(".link-item",{href:"/"+n.mustacheVar("name")},function(){return n.span(".item-name",function(){return n.text(n.mustacheVar("displayName"))})})})}},{}],736:[function(t,e,r){var n;n=t(416)("pop_over_ad"),e.exports=function(){return n.a(".icon-sm.icon-close.dark-hover.ad-close.js-close-ad",{href:"#"}),n.mustacheBlock("iconClass",function(){return n.span({class:"pop-over-ad-icon "+n.mustacheVar("iconClass")})}),n.div(".ad-copy",function(){return n.raw(n.mustacheVar("copyHtml"))})}},{}],737:[function(t,e,r){var n;n=t(416)("popover_add_email"),e.exports=function(){return n.form(function(){return n.p(".error",{id:"account-error"}),n.div(".field",function(){return n.label({for:"email"},function(){return n.format("new-email-address")}),n.input({id:"email",type:"email",name:"email",value:""})}),n.input(".primary.js-save-changes",{type:"submit",value:n.l("send-confirmation-email")})}),n.hr(),n.p(".quiet.u-bottom",function(){return n.format("we-ll-send-an-email-to-the-address-you-enter-click-the-link-in-the-email-to-confirm-the-address")})}},{}],738:[function(t,e,r){var n;n=t(416)("popover_add_list"),e.exports=function(){return n.form(function(){return n.div(".form-grid",function(){return n.div(".form-grid-child.form-grid-child-threequarters",function(){return n.label({for:"list-name"},function(){return n.format("name")}),n.input(".js-list-name.js-autofocus",{type:"text",id:"list-name",value:n.l("default-list-name"),style:"margin-bottom: 0;"})}),n.div(".form-grid-child.form-grid-child-quarter",function(){return n.div(".button-link.setting",{style:"margin-top: 4px;"},function(){return n.span(".label",function(){return n.format("position")}),n.span(".value.js-pos-value"),n.label(function(){return n.format("position")}),n.select(".js-select-list-pos")})})}),n.input(".primary.wide.js-add-list",{type:"submit",value:n.l("add")})})}},{}],739:[function(t,e,r){var n;n=t(416)("popover_auto_mentioner"),e.exports=function(){return n.mustacheBlock("button",function(){return n.input(".js-filter-mentionables.js-autofocus",{type:"text",placeholder:n.l("search-members-ellipsis")})}),n.p(".quiet.js-empty-list.hide",{style:"padding: 8px 8px 0;"},function(){return n.format("no-matching-members")}),n.ul(".pop-over-member-list.js-available-members"),n.mustacheBlock("button",function(){return n.div(".js-select-multiple-options.hide",function(){return n.hr(),n.ul(".pop-over-list",function(){
return n.mustacheBlock("showAllCardMembers",function(){return n.li(function(){return n.a(".js-select-all-card-members",{href:"#"},function(){return n.format("mention-all-card-members")})})}),n.mustacheBlock("showAllBoardMembers",function(){return n.li(function(){return n.a(".js-select-all-board-members",{href:"#"},function(){return n.format("mention-all-board-members")})})}),n.mustacheBlock("showAllCommenters",function(){return n.li(function(){return n.a(".js-select-all-commenters",{href:"#"},function(){return n.format("mention-all-commenters")})})})})})})}},{}],740:[function(t,e,r){var n;n=t(416)("popover_board_header_org_menu"),e.exports=function(){return n.ul(".pop-over-list",function(){return n.mustacheBlock("canChangeOrg",function(){return n.li(function(){return n.a(".js-change-org",{href:"#"},function(){return n.mustacheBlock("setOrgNull",function(){return n.format("remove-from-organization")}),n.mustacheBlockInverted("setOrgNull",function(){return n.format("change-organization-ellipsis")})})})}),n.li(function(){return n.a(".js-view-org",{href:"/"+n.mustacheVar("name")},function(){return n.format("view-organization-page")})})})}},{}],741:[function(t,e,r){var n;n=t(416)("popover_card_completer"),e.exports=function(){return n.mustacheBlock("button",function(){return n.input(".js-search.js-autofocus",{type:"text",placeholder:n.l("search-for-a-card-ellipsis")})}),n.div({class:"js-loading"+n.mustacheBlock("hideLoading",function(){return" hide"})},function(){return n.span(".loading.spinner")}),n.div(".js-results",function(){return n.ul(".pop-over-list.navigable.js-card-list")}),n.div(".js-no-results.hide",function(){return n.p(".u-bottom",function(){return n.format("no-results")})})}},{}],742:[function(t,e,r){var n;n=t(416)("popover_card_from_calendar"),e.exports=function(){return n.div(function(){return n.textarea(".js-card-title",function(){return n.text(n.mustacheVar("title"))})}),n.div(".button-link.list-button-link.setting",function(){return n.span(".label",function(){return n.format("list")}),n.span(".value.js-list-value"),n.label(function(){return n.format("list")}),n.select(".js-select-list")}),n.div(".button-link.pos-button-link.setting",function(){return n.span(".label",function(){return n.format("position")}),n.span(".value.js-pos-value"),n.label(function(){return n.format("position")}),n.select(".js-select-position")}),n.input(".primary.wide.js-add-card",{type:"submit",value:n.l("add")})}},{}],743:[function(t,e,r){var n;n=t(416)("popover_change_board_org"),e.exports=function(){return n.form(function(){return n.label(function(){return n.format("organization")}),n.select(".js-org",function(){return n.optionSelected(!n.mustacheVar("orgs"),{value:""},function(){return n.format("none")}),n.mustacheBlock("orgs",function(){return n.optionSelected(n.mustacheVar("select"),{value:n.mustacheVar("id")},function(){return n.text(n.mustacheVar("displayName"))})})}),n.mustacheBlock("isPrivate",function(){return n.div(".check-div.js-check-div",function(){return n.label(function(){return n.input(".js-make-org-visible",{type:"checkbox",checked:"checked"}),n.format("make-board-visible-to-organization")})})}),n.mustacheBlockInverted("allowsSelfJoin",function(){return n.div(".check-div.js-check-div",function(){return n.label(function(){return n.input(".js-make-org-joinable",{type:"checkbox",checked:"checked"}),n.format("allow-any-org-member-to-join-this-board")})})}),n.input(".js-submit.wide.primary",{type:"submit",value:n.l("change")})})}},{}],744:[function(t,e,r){var n;n=t(416)("popover_change_labels"),e.exports=function(){return n.input(".js-autofocus.js-label-search",{type:"text",placeholder:n.l("search-labels-ellipsis"),value:n.mustacheVar("searchInit"),autocomplete:"off"}),n.ul(".edit-labels-pop-over.js-labels-list"),n.mustacheBlock("__ed",function(){return n.div(function(){return n.a(".quiet-button.full.js-add-label",{href:"#"},function(){return n.format("create-a-new-label")}),n.a(".quiet-button.full.hide.js-show-more",{href:"#"},function(){return n.format("show-more-labels")}),n.hr(),n.a(".quiet-button.full.js-toggle-color-blind-mode",{href:"#"},function(){return n.mustacheBlock("isColorBlindEnabled",function(){return n.format("disable-color-blind-friendly-mode")}),n.mustacheBlockInverted("isColorBlindEnabled",function(){return n.format("enable-color-blind-friendly-mode")})})})})}},{}],745:[function(t,e,r){var n;n=t(416)("popover_change_roles"),e.exports=function(){return n.ul(".pop-over-list",function(){return n.li(function(){return n.a({class:n.mustacheBlock("canMakeAdmin",function(){return"js-make-admin highlight-icon"})+n.mustacheBlockInverted("canMakeAdmin",function(){return" disabled"})},function(){return n.check(n.mustacheVar("memberIsAdmin"),"admin"),n.span(".sub-name",function(){return n.text(n.mustacheVar("roleText_admin"))})})}),n.li(function(){return n.a({class:n.mustacheBlock("canMakeMember",function(){return"highlight-icon js-make-member "})+n.mustacheBlockInverted("canMakeMember",function(){return" disabled"})},function(){return n.check(n.mustacheVar("memberIsNormal"),"normal"),n.span(".sub-name",function(){return n.text(n.mustacheVar("roleText_normal"))})})}),n.mustacheBlock("showObserver",function(){return n.li(function(){return n.a({class:n.mustacheBlock("canMakeObserver",function(){return"highlight-icon js-make-observer "})+n.mustacheBlockInverted("canMakeObserver",function(){return" disabled"})},function(){return n.format("observer"),n.icon("business-class"),n.mustacheBlock("memberIsObserver",function(){return n.icon("check")}),n.span(".sub-name",function(){return n.text(n.mustacheVar("roleText_observer"))})})})})}),n.mustacheBlockInverted("isMoreThanOneAdmin",function(){return n.mustacheBlock("memberIsAdmin",function(){return n.hr(),n.p(".quiet.u-bottom",function(){return n.format("you-can-t-change-roles-because-there-must-be-at-least-one-admin")})})})}},{}],746:[function(t,e,r){var n;n=t(416)("popover_change_set_password"),e.exports=function(){return n.form(function(){return n.mustacheBlock("hasPassword",function(){return n.label({for:"o_password"},function(){return n.format("old-password")}),n.input({id:"o_password",type:"password",name:"oldpassword",value:""})}),n.label({for:"password1"},function(){return n.mustacheBlock("hasPassword",function(){return n.format("new-password")}),n.mustacheBlockInverted("hasPassword",function(){return n.format("password")})}),n.input({id:"password1",type:"password",name:"password",value:""}),n.label({for:"password2"},function(){return n.mustacheBlock("hasPassword",function(){return n.format("new-password-again")}),n.mustacheBlockInverted("hasPassword",function(){return n.format("password-again")})}),n.input({id:"password2",type:"password",name:"password2",value:""}),n.p(".error",{id:"password-error"}),n.input(".primary.js-save-changes",{type:"submit",value:n.l("save")})}),n.mustacheBlockInverted("hasPassword",function(){return n.hr(),n.p(".quiet.u-bottom",function(){return n.format("you-havent-set-a-password-yet-you-can-set-a-password-so-you-can-log-onto-trello-with-just-your-username-or-email-address")})})}},{}],747:[function(t,e,r){var n;n=t(416)("popover_change_user_info"),e.exports=function(){return n.form(function(){return n.p(".error",{id:"account-error"}),n.div(".field",function(){return n.label({for:"fullName"},function(){return n.format("full-name")}),n.input({id:"fullName",type:"text",name:"fullName",value:n.mustacheVar("fullName")})}),n.div(".field",function(){return n.label({for:"initials"},function(){return n.format("initials")}),n.input({id:"initials",type:"text",name:"initials",value:n.mustacheVar("initials")})}),n.div(".field",function(){return n.label({for:"username"},function(){return n.format("username")}),n.input({id:"username",type:"text",name:"username",value:n.mustacheVar("username"),required:!0,autocomplete:"off",autocorrect:"off",spellcheck:"false",autocapitalize:"off"})}),n.div(".field",function(){return n.label({for:"bio"},function(){return n.format("bio")}),n.textarea({id:"bio",type:"text",name:"bio"},function(){return n.text(n.mustacheVar("bio"))})}),n.input(".primary.js-save-changes",{type:"submit",value:n.l("save")})}),n.hr(),n.p(".quiet.u-bottom",function(){return n.format("your-initials-are-used-in-place-of-your-avatar-if-your-avatar-is-not-set-usernames-require-a-minimum-of-3-characters-alphanumeric-only")})}},{}],748:[function(t,e,r){var n;n=t(416)("popover_confirm_member_delete"),e.exports=function(){return n.p(function(){return n.format("deleting-your-member-account-username-will-be-permanent",{username:n.mustacheVar("username")})}),n.p(function(){return n.b(function(){return n.format("you-will-lose-access-to-your-boards-and-organizations")})}),n.p(function(){return n.format("would-you-like-us-to-send-an-email-to-email-that-contains-a-link-that-you-can-use-to-delete-your-account",{email:n.mustacheVar("email")})}),n.input(".js-delete-member",{type:"submit",value:n.l("send-the-email")}),n.input(".js-cancel-delete",{type:"submit",value:n.l("never-mind")})}},{}],749:[function(t,e,r){var n;n=t(416)("popover_emoji_completer"),e.exports=function(){return n.mustacheBlock("button",function(){return n.input(".js-filter-emoji.js-autofocus",{type:"text",placeholder:n.l("search-for-emoji-ellipsis")})}),n.div(".js-results",function(){return n.ul(".pop-over-emoji-list.js-available-emoji"),n.hr(),n.ul(".pop-over-list",function(){return n.li(function(){return n.a(".js-upload-emoji",{href:"#","data-emojiname":""},function(){return n.format("upload-emoji")})})})}),n.div(".js-no-results.hide",function(){return n.p(".u-bottom.js-no-matching-emoji-helper"),n.a(".button.primary.full.js-upload-emoji",{href:"#","data-emojiname":""})})}},{}],750:[function(t,e,r){var n;n=t(416)("popover_emoji_uploader"),e.exports=function(){return n.mustacheBlockInverted("canUpload",function(){return n.div(".warning",function(){return n.mustacheBlockInverted("hasGold",function(){return n.p(function(){return n.format("you-can-upload-custom-emoji-with-trello-gold-learn-more-about-trello-gold")})}),n.mustacheBlockInverted("hasBCGold",function(){return n.p(".u-bottom",function(){return n.format("you-can-get-custom-emoji-for-your-entire-organization-with-business-class-learn-more-about-business-class")})})}),n.hr()}),n.form({action:"/1/member/"+n.mustacheVar("id")+"/customEmoji",method:"post",enctype:"multipart/form-data"},function(){return n.input({type:"hidden",name:"token",value:""}),n.input({type:"hidden",name:"format",value:"http"}),n.label({for:"emojiImage"},function(){return n.format("upload-image")}),n.input(".js-upload-emoji-file.upload-emoji",{id:"emojiImage",type:"file",name:"file",tabindex:"-1",accept:"image/*"}),n.label({for:"emojiName"},function(){return n.format("emoji-name")}),n.input(".js-emoji-name",{id:"emojiName",type:"text",name:"name",value:n.mustacheVar("emojiName")}),n.p(".quiet",function(){return n.format("the-name-will-default-to-the-name-of-the-uploaded-file-you-can-change-it-here-though")}),n.p(".warning.hide.js-invalid-name",function(){return n.format("the-emoji-name-can-only-contain-letters-numbers-and-underscores")}),n.div(".js-emoji-preview",{style:"margin-bottom: 12px;"},function(){return n.p({style:"margin-bottom: 4px;"},function(){return n.strong(function(){return n.format("preview")})}),n.span(".js-emoji-preview-name",function(){return n.text(n.mustacheVar("emojiName"))}),n.text(" → "),n.img(".js-emoji-preview.emoji")}),n.input(".primary.wide.js-upload-emoji",{type:"submit",value:n.l("create-custom-emoji")}),n.div(".error.hide",function(){return n.format("upload-failed")})}),n.mustacheBlock("canUpload",function(){return n.mustacheBlockInverted("hasBCGold",function(){return n.hr(),n.p(".u-bottom",function(){return n.format("you-can-also-get-custom-emoji-for-your-entire-organization-with-business-class-learn-more-about-business-class")})})})}},{}],751:[function(t,e,r){var n;n=t(416)("popover_filter_pos_results"),e.exports=function(){return n.ul(".pop-over-list.navigable.normal-weight.js-pos-results",function(){var t;return t=[["js-select-pos-keyword",n.mustacheVar("keywordList")],["js-select-pos-pos",n.mustacheVar("indexList")],["js-select-pos-list",n.mustacheVar("listList")]],t.forEach(function(t){var e,r;return e=t[0],r=t[1],r.forEach(function(t){return n.li(function(){return n.a({href:"#",name:t.value,class:e},function(){return n.format("position-in-list",{index:t.indexString,listName:t.listName})})})})})})}},{}],752:[function(t,e,r){var n;n=t(416)("popover_helper_new_board_add_org"),e.exports=function(){return n.p(function(){return n.format("an-organization-is-a-collection-of-members-and-boards-they-make-sharing-and-working-within-a-group-even-easier")}),n.a(".button.js-create-org",{href:"#"},function(){return n.format("create-an-organization")})}},{}],753:[function(t,e,r){var n;n=t(416)("popover_insertion_menu"),e.exports=function(){return n.ul(".pop-over-list",function(){return n.li(function(){return n.a(".js-open-emoji-selector",{href:"#"},function(){return n.format("select-emoji-ellipsis")})}),n.li(function(){return n.a(".js-open-mention-selector",{href:"#"},function(){return n.format("mention-member-ellipsis")})})})}},{}],754:[function(t,e,r){var n;n=t(416)("popover_member_searcher"),e.exports=function(){return n.mustacheBlock("showSearch",function(){return n.input(".js-filter-members.js-autofocus",{type:"text",placeholder:n.l("search-members-ellipsis")})}),n.ul(".pop-over-member-list.checkable.js-members-list")}},{}],755:[function(t,e,r){var n;n=t(416)("popover_move_card"),e.exports=function(){return n.mustachePartial("move_card_controls"),n.input(".primary.wide.js-submit",{type:"submit",value:n.l("move")})}},{}],756:[function(t,e,r){var n;n=t(416)("popover_move_list"),e.exports=function(){return n.div(".form-grid",function(){return n.div(".button-link.setting.form-grid-child.form-grid-child-full",function(){return n.span(".label",function(){return n.format("board")}),n.span(".value.js-board-value"),n.label(function(){return n.format("board")}),n.select(".js-select-board",function(){return n.mustacheBlock("organizations",function(){return n.optgroup({label:n.mustacheVar("displayName")},function(){return n.mustacheBlock("boards",function(){return n.optionSelected(n.mustacheVar("selected"),{value:n.mustacheVar("id")},function(){return n.text(n.mustacheVar("name")),n.mustacheBlock("selected",function(){return n.text(" "),n.format("current")})})})})})})})}),n.div(".form-grid",function(){return n.div(".button-link.setting.form-grid-child.form-grid-child-full",function(){return n.span(".label",function(){return n.format("position")}),n.span(".value.js-pos-value"),n.label(function(){return n.format("position")}),n.select(".js-select-list-pos")})}),n.input(".primary.wide.js-commit-position",{type:"submit",value:n.l("move")})}},{}],757:[function(t,e,r){var n;n=t(416)("popover_org_logo"),e.exports=function(){return n.p(".error.hide.js-error"),n.div(".uploader",function(){return n.form(".realfile",{action:"/1/organization/"+n.mustacheVar("id")+"/logo",method:"post",enctype:"multipart/form-data"},function(){return n.input({type:"hidden",name:"token",value:""}),n.input({type:"hidden",name:"format",value:"http"}),n.input(".js-upload-logo",{type:"file",name:"file",style:"margin-bottom: 0;",tabindex:"-1"})}),n.a(".button-link.fakefile",function(){return n.icon("organization","upload-a-new-logo")})}),n.mustacheBlock("logoHash",function(){return n.hr(),n.a(".quiet-button.js-remove-logo",{href:"#"},function(){return n.format("remove-logo")})})}},{}],758:[function(t,e,r){var n;n=t(416)("popover_rename_board"),e.exports=function(){return n.form(function(){return n.label(function(){return n.format("name")}),n.input(".js-board-name.js-autofocus",{type:"text",value:n.mustacheVar("boardName")}),n.input(".primary.wide.js-rename-board",{type:"submit",value:n.l("rename")})})}},{}],759:[function(t,e,r){var n;n=t(416)("popover_select_members"),e.exports=function(){return n.input(".js-search-mem.js-autofocus",{type:"text",placeholder:n.l("search-members")}),n.ul(".pop-over-member-list.checkable.js-mem-list")}},{}],760:[function(t,e,r){var n;n=t(416)("popover_selector_menu"),e.exports=function(){return n.ul(".pop-over-list",function(){return n.li(function(){return n.a(".js-mem-selector",{href:"#"},function(){return n.format("members-ellipsis")})}),n.li(function(){return n.a(".js-label-selector",{href:"#"},function(){return n.format("labels-ellipsis")})}),n.li(function(){return n.a(".js-pos-selector",{href:"#"},function(){return n.format("position-ellipsis")})})})}},{}],761:[function(t,e,r){var n;n=t(416)("popover_set_email_freq"),e.exports=function(){return n.ul(".pop-over-list",{name:"minutesBetweenSummaries"},function(){return n.li(function(){return n.a(".highlight-icon",{value:"-1"},function(){return n.check(n.mustacheVar("minutesBetweenSummaries_-1"),"never"),n.span(".sub-name",function(){return n.format("don-t-send-emails")})})}),n.li(function(){return n.a(".highlight-icon",{value:"60"},function(){return n.check(n.mustacheVar("minutesBetweenSummaries_60"),"periodically"),n.span(".sub-name",function(){return n.format("send-emails-about-once-an-hour")})})}),n.li(function(){return n.a(".highlight-icon",{value:"1"},function(){return n.check(n.mustacheVar("minutesBetweenSummaries_1"),"instantly"),n.span(".sub-name",function(){return n.format("send-emails-as-soon-as-possible")})})})})}},{}],762:[function(t,e,r){var n;n=t(416)("popover_share"),e.exports=function(){return n.ul(".pop-over-list",function(){return n.li(function(){return n.a(".js-print",{href:"#",title:n.l("print-using-the-browser-s-print-function-you-can-use-file")},function(){return n.format("print-ellipsis")})}),n.mustacheBlock("hasCsvExport",function(){return n.li(function(){return n.a(".js-export-csv",{href:n.mustacheVar("csvURL"),title:n.l("export-the-board-data-in-csv-format")},function(){return n.format("export-csv")})})}),n.li(function(){return n.a(".js-export-json",{href:n.mustacheVar("jsonURL"),title:n.l("export-the-board-data-in-json-format")},function(){return n.format("export-json")})})}),n.mustacheBlockInverted("hasCsvExport",function(){return n.hr(),n.p(".quiet",{style:"margin: 16px 8px 8px;"},function(){return n.mustacheBlock("needsUpgradeForCsv",function(){return n.a({href:n.mustacheVar("upgradeUrl")},function(){return n.format("there-s-an-update-to-business-class-available-with-csv-export")})}),n.mustacheBlockInverted("needsUpgradeForCsv",function(){return n.format("looking-for-csv-export-check-out-business-class")})})})}},{}],763:[function(t,e,r){var n;n=t(416)("power_up_item"),e.exports=function(){return n.div(".power-up-item-icon",function(){return n.img(".power-up-item-icon-image.mod-rounded",{src:n.mustacheVar("iconSrc"),alt:"Power-Up Icon"})}),n.div(".power-up-item-details",function(){return n.h4(".power-up-item-details-header",function(){return n.text(n.mustacheVar("displayName"))}),n.icon("check",{class:"power-up-item-details-enabled-icon"}),n.p(function(){return n.text(n.mustacheVar("description"))}),n.div(".power-up-item-details-actions",function(){return n.a(".power-up-item-details-actions-button.mod-details.quiet.js-show-details",{href:"#"},function(){return n.format("show-details")})}),n.div(".power-up-item-details-right-actions",function(){return n.a(".power-up-item-details-actions-button.mod-settings.button-link.js-show-settings",{href:"#"},function(){return n.icon("gear")}),n.mustacheBlock("canEnable",function(){return n.a(".power-up-item-details-actions-button.mod-enable.button-link.js-enable",{href:"#"},function(){return n.format("enable")}),n.a(".power-up-item-details-actions-button.mod-disable.button-link.js-disable",{href:"#"},function(){return n.format("disable")})})})})}},{}],764:[function(t,e,r){var n;n=t(416)("power_up_item_details"),e.exports=function(){return n.p(function(){return n.text(n.mustacheVar("about"))}),n.mustacheBlock("showScreenshots",function(){return n.h4(function(){return n.format("screenshots")}),n.mustacheBlock("screenshots",function(){return n.img({src:n.mustacheVar("."),alt:n.mustacheVar("name")+" Screenshot"})})})}},{}],765:[function(t,e,r){var n;n=t(416)("power_ups_about_calendar"),e.exports=function(){return n.format("enable-the-calendar-power-up-to-gain-access-to-the-trello-calendar-view-display-cards-with-due-dates-in-a-weekly-or-monthly-format-for-a-time-based-overview-of-cards-most-useful-for-time-sensitive-projects-and-projects-with-multiple-due-dates")}},{}],766:[function(t,e,r){var n;n=t(416)("power_ups_about_card_aging"),e.exports=function(){return n.format("cards-will-visibly-age-as-time-passes-without-any-activity-regular-mode-will-cause-old-cards-to-become-progressively-more-transparent-pirate-mode-will-cause-old-cards-to-crack-and-tear-like-an-old-treasure-map-once-cards-have-new-activity-on-them-their-age-counter-is-reset-and-they-appear-new-again-age-thresholds-are-1-2-and-4-weeks")}},{}],767:[function(t,e,r){var n;n=t(416)("power_ups_about_voting"),e.exports=function(){return n.format("enable-this-power-up-to-allow-users-to-vote-on-your-cards-votes-are-stored-and-synchronized-between-all-users-sharing-this-board-choose-between-multiple-permission-levels-for-which-users-can-vote-on-cards-view-the-number-of-votes-on-each-card-from-the-main-trello-list-pane-or-in-a-cards-detail-pane")}},{}],768:[function(t,e,r){var n;n=t(416)("power_ups_calendar_prefs"),e.exports=function(){return n.h4(function(){return n.format("enable-icalendar-feed")}),n.ul(".pop-over-list",function(){return n.li(function(){return n.a({href:"#",class:"js-select js-calendar-pref-feed "+n.mustacheBlockInverted("__own",function(){return"disabled"}),name:"enabled"},function(){return n.span(".name",function(){return n.format("enabled")}),n.mustacheBlock("calendar_feed_enabled",function(){return n.icon("check")})})}),n.li(function(){return n.a({href:"#",class:"js-select js-calendar-pref-feed "+n.mustacheBlockInverted("__own",function(){return"disabled"}),name:"disabled"},function(){return n.span(".name",function(){return n.format("disabled")}),n.mustacheBlockInverted("calendar_feed_enabled",function(){return n.icon("check")})})})}),n.mustacheBlock("calendar_feed_enabled",function(){return n.hr(),n.h4(function(){return n.format("your-personal-icalendar-feed")}),n.input(".full.js-calendar-feed-url",{type:"text",value:n.mustacheBlock("calendar_feed_generated",function(){return n.mustacheVar("calendar_feed_url")})+n.mustacheBlockInverted("calendar_feed_generated",function(){return"Generating..."})}),n.div(function(){return n.a(".button.js-regen-calendar-url",{href:"#"},function(){return n.mustacheBlock("calendar_feed_generated",function(){return n.format("regenerate-your-feed-url")}),n.mustacheBlockInverted("calendar_feed_generated",function(){return n.format("generating")})})})})}},{}],769:[function(t,e,r){var n;n=t(416)("power_ups_card_aging_prefs"),e.exports=function(){return n.h2(function(){return n.format("how-do-you-want-the-aged-cards-to-look")}),n.ul(".pop-over-list",function(){return n.li(function(){return n.a({href:"#",class:"js-select "+n.mustacheBlockInverted("__own",function(){return"disabled"}),name:"regular"},function(){return n.span(".name",function(){return n.format("regular-mode")}),n.mustacheBlock("aging_regular",function(){return n.icon("check")}),n.span(".sub-name",function(){return n.format("older-cards-become-more-transparent")})})}),n.li(function(){return n.a({href:"#",class:"js-select "+n.mustacheBlockInverted("__own",function(){return"disabled"}),name:"pirate"},function(){return n.span(".name",function(){return n.format("pirate-mode")}),n.mustacheBlock("aging_pirate",function(){return n.icon("check")}),n.span(".sub-name",function(){return n.format("older-cards-crackle-and-tear")})})})})}},{}],770:[function(t,e,r){var n;n=t(416)("power_ups_detail_navbar"),e.exports=function(){return n.a({class:"nav-item js-toolbar-select "+n.mustacheBlock("screenshots",function(){return"active"}),href:"#",name:"screenshots"},function(){return n.format("screenshots")}),n.a({class:"nav-item js-toolbar-select "+n.mustacheBlock("settings",function(){return"active"}),href:"#",name:"settings"},function(){return n.format("settings")})}},{}],771:[function(t,e,r){var n;n=t(416)("power_ups_voting_prefs"),e.exports=function(){return n.h4(function(){return n.format("who-is-allowed-to-vote-on-cards")}),n.ul(".pop-over-list",function(){return n.li(function(){return n.a({href:"#",class:n.mustacheBlock("__own",function(){return"js-voting-select"})+" "+n.mustacheBlockInverted("__own",function(){return"disabled"}),name:"members"},function(){return n.span(".name",function(){return n.format("members")}),n.mustacheBlock("voting_members",function(){return n.icon("check")}),n.span(".sub-name",function(){return n.format("all-board-members-can-vote")})})}),n.li(function(){return n.a({href:"#",class:n.mustacheBlock("__own",function(){return"js-voting-select"})+" "+n.mustacheBlockInverted("__own",function(){return"disabled"})+" "+n.mustacheBlockInverted("voting_showObservers",function(){return"disabled"}),name:"observers"},function(){return n.span(".name",function(){return n.format("members-and-observers")}),n.mustacheBlock("voting_observers",function(){return n.icon("check")}),n.span(".sub-name",function(){return n.format("available-only-on-boards-with-observers")})})}),n.li(function(){return n.a({href:"#",class:n.mustacheBlock("__own",function(){return"js-voting-select"})+" "+n.mustacheBlockInverted("__own",function(){return"disabled"})+" "+n.mustacheBlockInverted("orgCanSee",function(){return"disabled"}),name:"org"},function(){return n.span(".name",function(){return n.format("organization-members")}),n.mustacheBlock("voting_org",function(){return n.icon("check")}),n.span(".sub-name",function(){return n.format("available-only-on-boards-within-an-organization")})})}),n.li(function(){return n.a({href:"#",class:n.mustacheBlock("__own",function(){return"js-voting-select"})+" "+n.mustacheBlockInverted("__own",function(){return"disabled"})+" "+n.mustacheBlockInverted("permissionLevel_public",function(){return"disabled"}),name:"public"},function(){return n.span(".name",function(){return n.format("public-members")}),n.mustacheBlock("voting_public",function(){return n.icon("check")}),n.span(".sub-name",function(){return n.format("available-on-public-boards")})})})})}},{}],772:[function(t,e,r){var n;n=t(416)("product_promo_button"),e.exports=function(){return n.div(".product-promo-button-overlay",function(){return n.span(".product-promo-button",function(){return n.format("get-trello-gold"),n.br(),n.format("or-business-class")})})}},{}],773:[function(t,e,r){var n;n=t(416)("quick_card_editor"),e.exports=function(){return n.span(".icon-lg.icon-close.quick-card-editor-close-icon.js-close-editor"),n.div(".quick-card-editor-card",{style:"top: "+n.mustacheVar("top")+"px; left: "+n.mustacheVar("left")+"px; width: "+n.mustacheVar("width")+"px;"},function(){return n.div(".list-card.list-card-quick-edit.js-stop",{style:"width: "+n.mustacheVar("width")+"px;"},function(){return n.mustachePartial("card")}),n.input(".primary.wide.js-save-edits",{type:"submit",value:n.l("save")}),n.div({class:"quick-card-editor-buttons"+n.mustacheBlock("leftButtons",function(){return" quick-card-editor-buttons-left"})},function(){return n.a(".quick-card-editor-buttons-item.js-edit-labels",{href:"#"},function(){return n.icon("label",{class:"light"}),n.span(".quick-card-editor-buttons-item-text",function(){return n.format("edit-labels")})}),n.a(".quick-card-editor-buttons-item.js-edit-members",{href:"#"},function(){return n.icon("member",{class:"light"}),n.span(".quick-card-editor-buttons-item-text",function(){return n.format("change-members")})}),n.a(".quick-card-editor-buttons-item.js-move-card",{href:"#"},function(){return n.icon("move",{class:"light"}),n.span(".quick-card-editor-buttons-item-text",function(){return n.format("move")})}),n.a(".quick-card-editor-buttons-item.js-copy-card",{href:"#"},function(){return n.icon("card",{class:"light"}),n.span(".quick-card-editor-buttons-item-text",function(){return n.format("copy")})}),n.a(".quick-card-editor-buttons-item.js-edit-due-date",{href:"#"},function(){return n.icon("clock",{class:"light"}),n.span(".quick-card-editor-buttons-item-text",function(){return n.format("change-due-date")})}),n.mustacheBlockInverted("closed",function(){return n.a(".quick-card-editor-buttons-item.js-archive",{href:"#"},function(){return n.icon("archive",{class:"light"}),n.span(".quick-card-editor-buttons-item-text",function(){return n.format("archive")})})})})})}},{}],774:[function(t,e,r){var n;n=t(416)("saved_search"),e.exports=function(){return n.a(".saved-search-item.js-saved-search-name",{href:"#"},function(){return n.span(".saved-search-item-name",function(){return n.text(n.mustacheVar("name"))}),n.text(" "),n.span(".saved-search-query.quiet.js-saved-search-query",function(){return n.text(n.mustacheVar("query"))})}),n.mustacheBlock("allowDelete",function(){return n.a(".saved-search-delete.dark-hover.quiet.js-delete-saved-search",{href:"#"},function(){return n.icon("close")}),n.span(".saved-search-delete-menu.quiet.hide.js-delete-saved-search-menu",function(){return n.format("are-you-sure-you-want-to-delete"),n.a(".saved-search-delete-menu-item.js-delete-saved-search-confirm",{href:"#"},function(){return n.format("yes-delete")}),n.a(".saved-search-delete-menu-item.js-delete-saved-search-cancel",{href:"#"},function(){return n.format("no-keep-this")})})})}},{}],775:[function(t,e,r){var n;n=t(416)("search_instant_results"),e.exports=function(){return n.div(".search-results-section-header-options",function(){return n.div(".js-saved-search-links",function(){return n.a(".quiet.dark-hover.search-results-section-header-options-option.js-see-all-saved-searches",{href:"#"},function(){return n.icon("back","back-to-saved-searches")}),n.a(".quiet.dark-hover.search-results-section-header-options-option.js-save-this-search",{href:"#"},function(){return n.icon("star","save-this-search")}),n.span(".quiet.search-results-section-header-options-option.search-results-section-header-options-option--save.js-current-search.hide",{href:"#"},function(){return n.icon("star"),n.span(".js-current-search-name")})})}),n.mustacheBlock("picker",function(){return n.div(".js-search-results.u-clearfix.u-relative.hide",function(){return n.div(".search-results-section.js-card-results.u-clearfix.hide",function(){return n.div(".js-search-results-title.results-title"),n.div(".js-list")})})}),n.mustacheBlockInverted("picker",function(){return n.div(".search-results-section.js-save-this-search-menu.hide",function(){return n.mustacheBlock("savedSearchesEnabled",function(){return n.div(".search-results-section-header",function(){return n.h4(function(){return n.format("what-would-you-like-to-call-this-search")})}),n.form(".js-save-this-search-form",function(){return n.input(".js-saved-search-name-input",{type:"text",style:"margin-bottom: 4px;"}),n.input(".primary.js-save-this-search-submit",{type:"submit",value:n.l("save")}),n.a(".quiet.js-save-this-search-cancel",{href:"#",style:"margin-left: 6px;"},function(){return n.format("nevermind")})})}),n.mustacheBlockInverted("savedSearchesEnabled",function(){return n.h2(function(){return n.format("upgrade-to-add-new-saved-searches")}),n.p({style:"font-size: 16px; line-height: 1.2;"},function(){return n.format("you-can-add-new-saved-searches-with-trello-gold-or-get-saved-searches-for-your-entire-organization-with-business-class")}),n.p(function(){return n.a(".button",{target:"_blank",href:"/gold"},function(){return n.format("check-out-trello-gold")}),n.a(".button",{target:"_blank",href:"/business-class"},function(){return n.format("check-out-business-class")})}),n.hr()})}),n.div(".search-results-section.js-search-suggestions.u-clearfix.hide",function(){return n.div(".search-results-section-header",function(){return n.h4(function(){return n.format("did-you-mean-ellipsis")})}),n.div(".js-search-suggestions-list")}),n.div(".search-results-section.js-saved-searches.u-clearfix.hide",function(){
return n.div(".search-results-section-header",function(){return n.h4(function(){return n.format("saved-searches")})}),n.p(".quiet.hide.js-no-saved-searches",function(){return n.format("you-have-no-saved-searches-to-save-a-search-start-searching-and-click-save-this-search-in-the-upper-corner")}),n.div(".js-saved-searches-list"),n.hr()}),n.div(".js-search-results.u-clearfix.u-relative.hide",function(){return n.div(".search-results-section.js-card-results.u-clearfix.hide",function(){return n.div(".search-results-section-header.u-clearfix",function(){return n.h4(function(){return n.format("cards")})}),n.div(".js-list"),n.span(".search-loading.hide.js-loading-cards",{href:"#"},function(){return n.format("loading-ellipsis")}),n.a(".show-more.hide.js-show-more-cards",{href:"#"},function(){return n.format("show-more-cards-ellipsis")})}),n.div(".search-results-section.js-board-results.u-clearfix.hide",function(){return n.div(".search-results-section-header",function(){return n.h4(function(){return n.format("boards")})}),n.ul(".sidebar-boards-list.board-results-list.js-list"),n.a(".show-more.hide.js-show-more-boards",{href:"#"},function(){return n.format("show-more-boards-ellipsis")})}),n.div(".search-results-section.js-member-results.u-clearfix.hide",function(){return n.div(".search-results-section-header",function(){return n.h4(function(){return n.format("members")})}),n.ul(".js-list.pop-over-member-list"),n.a(".show-more.hide.js-show-more-members",{href:"#"},function(){return n.format("show-more-members-ellipsis")})}),n.div(".search-results-section.js-org-results.u-clearfix.hide",function(){return n.div(".search-results-section-header",function(){return n.h4(function(){return n.format("organizations")})}),n.ul(".org-list.js-list"),n.a(".show-more.hide.js-show-more-orgs",{href:"#"},function(){return n.format("show-more-organizations-ellipsis")})})})}),n.div(".search-tips.hide.js-no-input",function(){return n.p(".search-tips-helper.quiet.js-search-tips-helper",function(){return n.format("refine-your-search-with-operators-like-at-member-label-is-archived-and-has-attachments"),n.text(" "),n.a(".js-show-search-tips",{href:"#"},function(){return n.format("learn-more-ellipsis")})}),n.div(".search-tips-list.js-search-tips-list.hide",function(){return n.p(".quiet",function(){return n.format("search-operators-help-you-find-specific-cards-and-create-highly-tailored-lists-trello-will-suggest-operators-for-you-as-you-type-but-here-s-a-full-list-to-keep-in-mind-you-can-add-to-any-operator-to-do-a-negative-search-such-as-has-members-to-search-for-cards-without-any-members-assigned")}),n.dl(function(){return n.dt(function(){return n.format("at-name")}),n.dd(function(){return n.format("returns-cards-assigned-to-a-member-if-you-start-typing-at-trello-will-suggest-members-for-you-member-also-works-at-me-will-include-only-your-cards")}),n.dt(function(){return n.format("label")}),n.dd(function(){return n.format("returns-labeled-cards-trello-will-suggest-labels-for-you-if-you-start-typing-and-the-label-you-are-looking-for-label-also-works")}),n.dt(function(){return n.format("board-id")}),n.dd(function(){return n.format("returns-cards-within-a-specific-board-if-you-start-typing-board-trello-will-suggest-boards-for-you-you-can-search-by-board-name-too-such-as-board-trello-to-search-only-cards-on-boards-with-trello-in-the-board-name")}),n.dt(function(){return n.format("list-name")}),n.dd(function(){return n.format("returns-cards-within-the-list-named-name-or-whatever-you-type-besides-name")}),n.dt(function(){return n.format("has-attachments")}),n.dd(function(){return n.format("returns-cards-with-attachments-has-description-has-cover-has-members-and-has-stickers-also-work-as-you-would-expect")}),n.dt(function(){return n.format("due-day")}),n.dd(function(){return n.format("returns-cards-due-within-24-hours-due-week-due-month-and-due-overdue-also-work-as-expected-you-can-search-for-a-specific-day-range-for-example-adding-due-14-to-search-will-include-cards-due-in-the-next-14-days")}),n.dt(function(){return n.format("created-day")}),n.dd(function(){return n.format("returns-cards-created-in-the-last-24-hours-created-week-and-created-month-also-work-as-expected-you-can-search-for-a-specific-day-range-for-example-adding-created-14-to-the-search-will-include-cards-created-in-the-last-14-days")}),n.dt(function(){return n.format("edited-day")}),n.dd(function(){return n.format("returns-cards-edited-in-the-last-24-hours-edited-week-and-edited-month-also-work-as-expected-you-can-search-for-a-specific-day-range-for-example-adding-edited-21-to-the-search-will-include-cards-edited-in-the-last-21-days")}),n.dt(function(){return n.format("description-checklist-comment-and-name")}),n.dd(function(){return n.format("returns-cards-matching-the-text-of-card-descriptions-checklists-comments-or-names-for-example-comment-fix-it-will-return-cards-with-fix-it-in-a-comment")}),n.dt(function(){return n.format("is-open-and-is-archived")}),n.dd(function(){return n.format("returns-cards-that-are-either-open-or-archived-trello-returns-both-types-by-default")}),n.dt(function(){return n.format("is-starred")}),n.dd(function(){return n.format("only-include-cards-on-starred-boards")})})})}),n.p(".search-warning.hide.js-no-results",function(){return n.format("no-results")}),n.p(".search-warning.hide.js-searching",function(){return n.format("searching-ellipsis")}),n.p(".search-warning.hide.js-err",function(){return n.format("your-search-produced-an-error")})}},{}],776:[function(t,e,r){var n;n=t(416)("search_results_card"),e.exports=function(){return n.div(".search-result-card-container.js-list-card-container",function(){return n.div(".search-result-card-container-fade")}),n.div(".search-result-card-details",function(){return n.p(".u-bottom",function(){return n.a(".search-result-card-details-name",{href:n.mustacheVar("url")},function(){return n.text(n.mustacheVar("name"))})}),n.p(".u-bottom.quiet",function(){return n.format("in-listname-archived-on-boardname",{listName:n.mustacheVar("listName"),archived:n.mustacheVar("archived"),boardName:n.mustacheVar("boardName"),permLevel:n.mustacheVar("permLevel")})})}),n.a(".search-result-card-hover-target",{href:n.mustacheVar("url")})}},{}],777:[function(t,e,r){var n;n=t(416)("search_suggetion"),e.exports=function(){return n.a(".search-suggestion.js-select-suggestion",{href:"#","data-suggestionphrase":n.mustacheVar("phrase")},function(){return n.span(".search-suggestion-string",function(){return n.text(n.mustacheVar("phrase"))}),n.span(".search-suggestion-desc",function(){return n.text(n.mustacheVar("description"))})})}},{}],778:[function(t,e,r){var n;n=t(416)("search_suggetion_board"),e.exports=function(){return n.a(".search-suggestion.search-suggestion-board.js-select-suggestion",{href:"#","data-suggestionphrase":n.mustacheVar("phrase")},function(){return n.span(".search-suggestion-board-image"),n.span(".search-suggestion-dec",function(){return n.format("cards-on-the-board-name",{name:n.mustacheVar("name")})})})}},{}],779:[function(t,e,r){var n;n=t(416)("search_suggetion_member"),e.exports=function(){return n.a(".search-suggestion.search-suggestion-member.js-select-suggestion",{href:"#","data-suggestionphrase":n.mustacheVar("phrase")},function(){return n.span(".member.search-suggestion-member-av",function(){return n.mustachePartial("member")}),n.span(function(){return n.format("cards-assigned-to-fullname",{fullName:n.mustacheVar("fullName")})})})}},{}],780:[function(t,e,r){var n;n=t(416)("select_card"),e.exports=function(){return n.li(".item",function(){return n.a(".name.js-select-card",{href:"#",title:n.mustacheVar("name"),id:n.mustacheVar("id")},function(){return n.span(".item-name",function(){return n.text(n.mustacheVar("name")),n.mustacheBlock("closed",function(){return n.text(" "),n.span(".quiet",function(){return n.format("archived")})})}),n.mustacheBlock("boardName",function(){return n.span(".sub-name",function(){return n.format("in-boardname",{boardName:n.mustacheVar("boardName")})})})})})}},{}],781:[function(t,e,r){var n;n=t(416)("select_emoji"),e.exports=function(){return n.li(".item",function(){return n.a(".name.js-select-emoji",{href:"#",title:n.mustacheVar("name")},function(){return n.img(".emoji",{src:n.mustacheVar("image")}),n.span(".emoji-name",{name:n.mustacheVar("name")},function(){return n.text(n.mustacheVar("name"))})})})}},{}],782:[function(t,e,r){var n;n=t(416)("select_labels"),e.exports=function(){return n.mustacheBlock("labels",function(){return n.li(function(){return n.mustacheBlock("__ed",function(){return n.a(".card-label-edit-button.icon-sm.icon-edit.js-edit-label",{href:"#","data-idlabel":n.mustacheVar("id")})}),n.span({class:"card-label card-label-selectable card-label-"+n.mustacheVar("color")+" "+n.mustacheBlock("isActive",function(){return"active"})+" js-select-label","data-idlabel":n.mustacheVar("id"),"data-color":n.mustacheVar("color")},function(){return n.mustacheBlock("name",function(){return n.text(n.mustacheVar("name"))}),n.icon("check",{class:"card-label-selectable-icon light"})})})})}},{}],783:[function(t,e,r){var n;n=t(416)("select_member"),e.exports=function(){return n.li({class:"item"+n.mustacheBlock("isActive",function(){return" active"})+n.mustacheBlock("matchesFilter",function(){return" matches-filter"})+n.mustacheBlock("unconfirmed",function(){return" unconfirmed"})+n.mustacheBlock("inactive",function(){return" inactive"})+n.mustacheBlock("isKnownMember",function(){return" js-autoselect"})+" js-member-item"},function(){return n.a({href:n.mustacheBlock("url",function(){return n.mustacheVar("url")})+n.mustacheBlockInverted("url",function(){return"#"}),class:"name js-select-member "+n.mustacheBlock("extraText",function(){return"multi-line"}),idMember:n.mustacheVar("id"),title:n.mustacheVar("fullName")+n.mustacheBlock("username",function(){return" ("+n.mustacheVar("username")+")"})},function(){return n.span({class:"member js-member"+n.mustacheBlock("isVirtual",function(){return" virtual"})},function(){return n.mustachePartial("member")}),n.span(".full-name",{name:n.mustacheVar("fullName")+n.mustacheBlock("username",function(){return" ("+n.mustacheVar("username")+")"})},function(){return n.text(n.mustacheVar("fullName")),n.text(" "),n.mustacheBlock("username",function(){return n.format("username",{username:n.mustacheVar("username")})})}),n.mustacheBlock("extraText",function(){return n.div(".extra-text.quiet",function(){return n.format("extratext",{extraText:n.mustacheVar("extraText")})})}),n.icon("check",{class:"checked-icon"}),n.icon("forward",{class:"light option js-open-option"}),n.mustacheBlock("inactive",function(){return n.span(".quiet.sub-name",function(){return n.format("inactive-account")})}),n.mustacheBlock("unconfirmed",function(){return n.span(".quiet.sub-name",function(){return n.format("unconfirmed-user")})})})})}},{}],784:[function(t,e,r){var n,o;o=t(416)("select_org_to_upgrade"),n=t(75),e.exports=function(){return o.div(".select-org-to-upgrade",function(){return o.h2(".select-org-to-upgrade-header",function(){return o.format("select-an-organization-to-upgrade-to-business-class")}),o.ul(".select-org-to-upgrade-list",function(){return o.mustacheBlock("orgs",function(){return o.li(".select-org-to-upgrade-list-item",function(){return o.a({href:o.mustacheVar("orgUrl"),class:"select-org-to-upgrade-list-item-link"+o.mustacheBlock("isDisabled",function(){return" disabled js-disabled"})},function(){return o.mustacheBlock("logoHash",function(){return o.img(".select-org-to-upgrade-list-item-link-image",{src:o.mustacheVar("__logoDomain")+"/"+o.mustacheVar("logoHash")+"/30.png",alt:o.mustacheVar("displayName")+" logo"})}),o.mustacheBlockInverted("logoHash",function(){return o.span(".icon-lg.icon-organization.select-org-to-upgrade-list-item-link-image")}),o.span(".select-org-to-upgrade-list-item-link-name",function(){return o.text(o.mustacheVar("displayName"))}),o.span(".select-org-to-upgrade-list-item-link-details.quiet",function(){return o.text(n("members",o.mustacheVar("memberCount"))),o.text(". "),o.mustacheBlock("isPremium",function(){return o.mustacheBlockInverted("needsBCUpgrade",function(){return o.format("this-organization-already-has-business-class")}),o.mustacheBlock("needsBCUpgrade",function(){return o.mustacheBlock("isAdmin",function(){return o.format("an-update-is-available")}),o.mustacheBlockInverted("isAdmin",function(){return o.format("an-update-is-available-you-need-to-be-an-admin-to-upgrade")})})})})})})})}),o.mustacheBlockInverted("orgs",function(){return o.p({style:"margin: 24px 0;"},function(){return o.format("you-don-t-have-any-organizations"),o.a(".js-create-org",{href:"#"},function(){return o.format("click-here-to-create-one")})})})})}},{}],785:[function(t,e,r){var n;n=t(416)("shortcuts"),e.exports=function(){return n.div(".window-header.u-clearfix",function(){return n.span(".window-header-icon.icon-lg.icon-information"),n.h2(".window-title",function(){return n.format("keyboard-shortcuts")})}),n.div(".shortcut-list.markeddown",function(){return n.hr(),n.div(".shortcut-list-item",function(){return n.div(".shortcut-list-item-keys",function(){return n.span(".keyboard-key",function(){return n.text("←")}),n.span(".keyboard-key",function(){return n.text("↓ / J")}),n.span(".keyboard-key",function(){return n.text("↑ / K")}),n.span(".keyboard-key",function(){return n.text("→")})}),n.h3(".shortcut-list-item-header",function(){return n.format("navigate-cards")}),n.p(function(){return n.format("pressing-the-arrow-keys-will-select-adjacent-cards-on-a-board-pressing-j-will-select-the-card-below-the-current-card-pressing-k-will-select-the-card-above-the-current-card")})}),n.div(".shortcut-list-item",function(){return n.div(".shortcut-list-item-keys",function(){return n.span(".keyboard-key",function(){return n.text("B")})}),n.h3(".shortcut-list-item-header",function(){return n.format("open-header-boards-menu")}),n.p(function(){return n.format("pressing-b-opens-the-boards-menu-in-the-header-you-can-search-for-boards-and-navigate-boards-with-the-up-and-down-arrows-pressing-enter-with-a-board-selected-will-open-it")})}),n.div(".shortcut-list-item",function(){return n.div(".shortcut-list-item-keys",function(){return n.span(".keyboard-key",function(){return n.text("/")})}),n.h3(".shortcut-list-item-header",function(){return n.format("focus-search-box")}),n.p(function(){return n.format("pressing-puts-the-cursor-in-the-search-box-in-the-header")})}),n.div(".shortcut-list-item",function(){return n.div(".shortcut-list-item-keys",function(){return n.span(".keyboard-key",function(){return n.text("C")})}),n.h3(".shortcut-list-item-header",function(){return n.format("archive-card")}),n.p(function(){return n.format("pressing-c-will-archive-a-card")})}),n.div(".shortcut-list-item",function(){return n.div(".shortcut-list-item-keys",function(){return n.span(".keyboard-key",function(){return n.text("D")})}),n.h3(".shortcut-list-item-header",function(){return n.format("due-date")}),n.p(function(){return n.format("pressing-d-will-open-the-due-date-picker-for-a-card")})}),n.div(".shortcut-list-item",function(){return n.div(".shortcut-list-item-keys",function(){return n.span(".keyboard-key",function(){return n.text("E")})}),n.h3(".shortcut-list-item-header",function(){return n.format("quick-edit-mode")}),n.p(function(){return n.format("if-hovering-over-a-card-pressing-e-will-open-quick-edit-mode-which-lets-you-quickly-edit-the-title-and-other-card-attributes")})}),n.div(".shortcut-list-item",function(){return n.div(".shortcut-list-item-keys",function(){return n.span(".keyboard-key",function(){return n.format("esc")})}),n.h3(".shortcut-list-item-header",function(){return n.format("close-menu-cancel-editing")}),n.p(function(){return n.format("pressing-esc-will-close-an-open-dialog-window-or-pop-over-or-cancel-edits-and-comments-you-are-composing")})}),n.div(".shortcut-list-item",function(){return n.div(".shortcut-list-item-keys",function(){return n.span(".keyboard-key",function(){return n.format("enter")})}),n.h3(".shortcut-list-item-header",function(){return n.format("open-card")}),n.p(function(){return n.format("pressing-enter-will-open-the-currently-selected-card-pressing-shift-enter-while-submitting-a-card-will-open-it-immediately-after-creating-it")})}),n.div(".shortcut-list-item",function(){return n.div(".shortcut-list-item-keys",function(){return n.span(".keyboard-key",function(){return n.text("F")})}),n.h3(".shortcut-list-item-header",function(){return n.format("open-card-filter-menu")}),n.p(function(){return n.format("use-f-to-open-the-card-filter-menu-the-search-by-title-input-is-automatically-focused")})}),n.div(".shortcut-list-item",function(){return n.div(".shortcut-list-item-keys",function(){return n.span(".keyboard-key",function(){return n.text("L")})}),n.h3(".shortcut-list-item-header",function(){return n.format("label")}),n.p(function(){return n.format("pressing-l-opens-a-pop-over-of-the-available-labels-clicking-a-label-will-add-or-remove-it-from-the-card")}),n.p(function(){return n.format("pressing-one-of-the-following-number-keys-will-apply-or-remove-that-label")}),n.table(function(){return n.thead(function(){return n.tr(function(){return n.th(function(){return n.format("key")}),n.th(function(){return n.format("label-color")})})}),n.tbody(function(){return n.tr(function(){return n.td(function(){return n.text("1")}),n.td(function(){return n.format("green")})}),n.tr(function(){return n.td(function(){return n.text("2")}),n.td(function(){return n.format("yellow")})}),n.tr(function(){return n.td(function(){return n.text("3")}),n.td(function(){return n.format("orange")})}),n.tr(function(){return n.td(function(){return n.text("4")}),n.td(function(){return n.format("red")})}),n.tr(function(){return n.td(function(){return n.text("5")}),n.td(function(){return n.format("purple")})}),n.tr(function(){return n.td(function(){return n.text("6")}),n.td(function(){return n.format("blue")})}),n.tr(function(){return n.td(function(){return n.text("7")}),n.td(function(){return n.format("sky")})}),n.tr(function(){return n.td(function(){return n.text("8")}),n.td(function(){return n.format("lime")})}),n.tr(function(){return n.td(function(){return n.text("9")}),n.td(function(){return n.format("pink")})}),n.tr(function(){return n.td(function(){return n.text("0")}),n.td(function(){return n.format("black")})})})})}),n.div(".shortcut-list-item",function(){return n.div(".shortcut-list-item-keys",function(){return n.span(".keyboard-key",function(){return n.text("M")})}),n.h3(".shortcut-list-item-header",function(){return n.format("add-remove-members")}),n.p(function(){return n.format("pressing-m-opens-the-add-remove-members-menu-clicking-a-member-s-avatar-will-assign-or-unassign-that-person")})}),n.div(".shortcut-list-item",function(){return n.div(".shortcut-list-item-keys",function(){return n.span(".keyboard-key",function(){return n.text("N")})}),n.h3(".shortcut-list-item-header",function(){return n.format("insert-new-card")}),n.p(function(){return n.format("pressing-n-opens-a-pop-over-that-allows-you-to-add-a-card-after-the-currently-selected-card")})}),n.div(".shortcut-list-item",function(){return n.div(".shortcut-list-item-keys",function(){return n.span(".keyboard-key",function(){return n.text("<")}),n.span(".keyboard-key",function(){return n.text(">")})}),n.h3(".shortcut-list-item-header",function(){return n.format("move-card-to-adjacent-list")}),n.p(function(){return n.format("pressing-the-left-or-right-angle-brackets-lt-and-gt-will-move-a-card-to-the-adjacent-left-or-right-list")})}),n.div(".shortcut-list-item",function(){return n.div(".shortcut-list-item-keys",function(){return n.span(".keyboard-key",function(){return n.text("Q")})}),n.h3(".shortcut-list-item-header",function(){return n.format("my-cards-filter")}),n.p(function(){return n.format("pressing-the-q-key-toggles-the-cards-assigned-to-me-filter")})}),n.div(".shortcut-list-item",function(){return n.div(".shortcut-list-item-keys",function(){return n.span(".keyboard-key",function(){return n.text("S")})}),n.h3(".shortcut-list-item-header",function(){return n.format("subscribe")}),n.p(function(){return n.format("pressing-s-will-subscribe-you-to-or-unsubscribe-you-from-a-card-subscribing-to-a-card-will-give-you-notifications-for-most-actions-to-that-card")})}),n.div(".shortcut-list-item",function(){return n.div(".shortcut-list-item-keys",function(){return n.span(".keyboard-key",function(){return n.format("space")})}),n.h3(".shortcut-list-item-header",function(){return n.format("assign-self")}),n.p(function(){return n.format("pressing-space-will-assign-or-unassign-yourself-to-a-card")})}),n.div(".shortcut-list-item",function(){return n.div(".shortcut-list-item-keys",function(){return n.span(".keyboard-key",function(){return n.text("T")})}),n.h3(".shortcut-list-item-header",function(){return n.format("edit-title")}),n.p(function(){return n.format("if-viewing-a-card-pressing-t-will-edit-the-title-if-hovering-over-a-card-pressing-t-will-open-the-card-and-edit-the-title")})}),n.div(".shortcut-list-item",function(){return n.div(".shortcut-list-item-keys",function(){return n.span(".keyboard-key",function(){return n.text("V")})}),n.h3(".shortcut-list-item-header",function(){return n.format("vote")}),n.p(function(){return n.format("pressing-v-will-add-or-remove-your-vote-on-a-card-if-the-voting-power-up-is-enabled")})}),n.div(".shortcut-list-item",function(){return n.div(".shortcut-list-item-keys",function(){return n.span(".keyboard-key",function(){return n.text("W")})}),n.h3(".shortcut-list-item-header",function(){return n.format("toggle-board-menu")}),n.p(function(){return n.format("pressing-w-will-collapse-or-expand-the-board-menu-the-sidebar-on-the-right")})}),n.div(".shortcut-list-item",function(){return n.div(".shortcut-list-item-keys",function(){return n.span(".keyboard-key",function(){return n.text("X")})}),n.h3(".shortcut-list-item-header",function(){return n.format("clear-all-filters")}),n.p(function(){return n.format("use-x-to-clear-all-active-card-filters")})}),n.div(".shortcut-list-item",function(){return n.div(".shortcut-list-item-keys",function(){return n.span(".keyboard-key",function(){return n.text("?")})}),n.h3(".shortcut-list-item-header",function(){return n.format("open-shortcuts-page")}),n.p(function(){return n.format("pressing-will-open-the-shortcuts-page")})}),n.div(".shortcut-list-item",function(){return n.div(".shortcut-list-item-keys",function(){return n.span(".keyboard-key",function(){return n.text("@")})}),n.h3(".shortcut-list-item-header",function(){return n.format("autocomplete-members")}),n.p(function(){return n.format("when-writing-a-comment-you-can-type-at-plus-a-member-s-name-username-or-initials-and-get-a-list-of-matching-members-you-can-navigate-that-list-with-the-up-and-down-arrows-pressing-enter-or-tab-with-a-member-selected-will-mention-that-user-in-the-comment-the-mentioned-user-will-get-a-notification-once-submitted")}),n.p(function(){return n.format("when-adding-a-new-card-you-can-use-the-same-method-to-assign-members-to-cards-before-submitting-them")})}),n.div(".shortcut-list-item",function(){return n.div(".shortcut-list-item-keys",function(){return n.span(".keyboard-key",function(){return n.text("#")})}),n.h3(".shortcut-list-item-header",function(){return n.format("autocomplete-labels")}),n.p(function(){return n.format("when-adding-a-new-card-you-can-type-plus-the-label-s-color-or-title-and-get-a-list-of-matching-labels-you-can-use-the-up-and-down-arrows-to-navigate-the-resulting-list-pressing-enter-or-tab-will-add-the-label-to-the-composed-card-the-labels-will-be-added-to-the-card-when-you-submit")})}),n.div(".shortcut-list-item",function(){return n.div(".shortcut-list-item-keys",function(){return n.span(".keyboard-key",function(){return n.text("^")})}),n.h3(".shortcut-list-item-header",function(){return n.format("autocomplete-position")}),n.p(function(){return n.format("when-adding-a-new-card-you-can-type-plus-a-list-name-or-position-in-a-list-you-can-also-type-top-or-bottom-to-add-to-the-top-or-bottom-of-the-current-list-you-can-use-the-up-and-down-arrows-to-navigate-the-resulting-list-pressing-enter-or-tab-will-automatically-change-the-position-of-the-composed-card")})})})}},{}],786:[function(t,e,r){var n;n=t(416)("sticker_on_card"),e.exports=function(){return n.img(".sticker-image",{src:n.mustacheVar("url"),style:"-webkit-transform: rotate("+n.mustacheVar("rotate")+"deg);transform: rotate("+n.mustacheVar("rotate")+"deg);",alt:n.mustacheVar("image")}),n.mustacheBlock("showEditControls",function(){return n.div(".sticker-controls",function(){return n.span(".sticker-control-btn.rotate-btn.js-rotate-sticker",function(){return n.format("rotate")}),n.span(".sticker-control-btn.move-btn.js-move-sticker",function(){return n.format("move")}),n.span(".sticker-control-btn.remove-btn.js-remove-sticker",function(){return n.format("remove")})})})}},{}],787:[function(t,e,r){var n;n=t(416)("sticker_pack_selection_list"),e.exports=function(){return n.h2(function(){return n.text(n.mustacheVar("displayName"))}),n.div(".sticker-list.u-clearfix.js-sticker-list.u-relative")}},{}],788:[function(t,e,r){var n;n=t(416)("sticker_select"),e.exports=function(){return n.div(".sticker-list.u-clearfix.js-standard-sticker-list"),n.div(".js-premium-stickers"),n.h2(function(){return n.format("custom-stickers")}),n.div(".sticker-list.u-clearfix.js-custom-sticker-list")}},{}],789:[function(t,e,r){var n;n=t(416)("sticker_select_item"),e.exports=function(){return n.mustacheBlock("pending",function(){return n.img(".sticker-select-image.sticker-select-pending",{src:n.mustacheVar("url")})}),n.mustacheBlockInverted("pending",function(){return n.img(".sticker-select-image.sticker-select-shadow",{src:n.mustacheVar("url")}),n.img(".sticker-select-image.sticker-select-fixed",{src:n.mustacheVar("url")}),n.img(".sticker-select-image.sticker-select-peel",{src:n.mustacheVar("url")})}),n.mustacheBlock("id",function(){return n.span(".sticker-select-option.sticker-select-option-delete-button.js-delete-sticker",function(){return n.icon("close",{class:"sticker-select-option-icon"}),n.span(".sticker-select-option-text.u-text-underline",function(){return n.format("delete")})})}),n.mustacheBlock("error",function(){return n.span(".sticker-select-option",function(){return n.span(".sticker-select-option-text",function(){return n.text(n.mustacheVar("error"))})})}),n.mustacheBlock("pending",function(){return n.span(".sticker-select-option",function(){return n.span(".spinner.small.u-float-left",{style:"margin-right: 4px;"}),n.span(".sticker-select-option-text",function(){return n.format("uploading-ellipsis")})})})}},{}],790:[function(t,e,r){var n;n=t(416)("sticker_select_item_upload"),e.exports=function(){return n.form({action:"/1/member/"+n.mustacheVar("id")+"/customStickers",method:"post",enctype:"multipart/form-data"},function(){return n.input({type:"hidden",name:"token",value:""}),n.input({type:"hidden",name:"format",value:"http"}),n.div(".sticker-select.sticker-select-upload",function(){return n.span(".sticker-select-upload-icon.icon-lg.icon-add"),n.input({type:"file",name:"file",class:"sticker-select-upload-input js-upload-image "+n.mustacheBlockInverted("enabled_customStickers",function(){return" disabled"}),multiple:"multiple",accept:"image/*"})})})}},{}],791:[function(t,e,r){var n;n=t(416)("sync_error"),e.exports=function(){return n.format("you-have-been-disconnected-from-the-trello-server-for-too-long"),n.br(),n.a(".app-alert-item-button",{href:"#",onclick:"window.location.reload();"},function(){return n.format("reload-now")})}},{}],792:[function(t,e,r){var n;n=t(416)("take_photo"),e.exports=function(){return n.video({class:"video"+n.mustacheBlockInverted("connected",function(){return" hide"}),autoplay:!0,style:"width:100%"}),n.mustacheBlock("error",function(){return n.p(".error",function(){return n.text(n.mustacheVar("error"))})}),n.mustacheBlock("connected",function(){return n.button(".primary.wide.js-snap",function(){return n.format("snap-photo")})}),n.mustacheBlockInverted("connected",function(){return n.mustacheBlock("error",function(){return n.p(function(){return n.format("couldnt-find-a-camera-to-connect-to-ellipsis")})}),n.mustacheBlockInverted("error",function(){return n.p(function(){return n.format("trying-to-access-your-computers-camera-ellipsis-check-the-banner-at-the-top-of-the-page")})}),n.p(".u-bottom",function(){return n.a(".quiet-button.js-connect-camera",{href:"#"},function(){return n.format("try-again")})})})}},{}],793:[function(t,e,r){var n;n=t(416)("tooltip"),e.exports=n.renderable(function(t){return n.span(".tooltip-trigger.quiet.js-tooltip-trigger",function(){return n.icon("information",{class:"js-tooltip-anchor"}),n.text(t)})})},{}],794:[function(t,e,r){var n;n=t(416)("tooltip_content"),e.exports=function(){return n.div(".tooltip-content.js-tooltip-content",function(){return n.icon("close",{class:"tooltip-close-button js-tooltip-close-button"}),n.p(function(){return n.text(n.mustacheVar("tooltipText"))})})}},{}],795:[function(t,e,r){var n;n=t(416)("woof_header"),e.exports=function(){return n.a(".header-btn.header-woof",{href:"#"},function(){return n.span(".taco-talk-small-icon"),n.span(".header-btn-text",function(){return n.span(".left-arrow"),n.span(".js-phrase")})})}},{}],796:[function(t,e,r){(function(){var e,n=this,o=n.Backbone,i=[],s=i.push,a=i.slice,u=i.splice;e="undefined"!=typeof r?r:n.Backbone={},e.VERSION="0.9.10";var c=n._;c||"undefined"==typeof t||(c=t("underscore")),e.$=n.jQuery||n.Zepto||n.ender,e.noConflict=function(){return n.Backbone=o,this},e.emulateHTTP=!1,e.emulateJSON=!1;var l=/\s+/,d=function(t,e,r,n){if(!r)return!0;if("object"==typeof r)for(var o in r)t[e].apply(t,[o,r[o]].concat(n));else{if(!l.test(r))return!0;for(var i=r.split(l),s=0,a=i.length;a>s;s++)t[e].apply(t,[i[s]].concat(n))}},p=function(t,e){var r,n=-1,o=t.length;switch(e.length){case 0:for(;++n<o;)(r=t[n]).callback.call(r.ctx);return;case 1:for(;++n<o;)(r=t[n]).callback.call(r.ctx,e[0]);return;case 2:for(;++n<o;)(r=t[n]).callback.call(r.ctx,e[0],e[1]);return;case 3:for(;++n<o;)(r=t[n]).callback.call(r.ctx,e[0],e[1],e[2]);return;default:for(;++n<o;)(r=t[n]).callback.apply(r.ctx,e)}},h=e.Events={on:function(t,e,r){if(!d(this,"on",t,[e,r])||!e)return this;this._events||(this._events={});var n=this._events[t]||(this._events[t]=[]);return n.push({callback:e,context:r,ctx:r||this}),this},once:function(t,e,r){if(!d(this,"once",t,[e,r])||!e)return this;var n=this,o=c.once(function(){n.off(t,o),e.apply(this,arguments)});return o._callback=e,this.on(t,o,r),this},off:function(t,e,r){var n,o,i,s,a,u,l,p;if(!this._events||!d(this,"off",t,[e,r]))return this;if(!t&&!e&&!r)return this._events={},this;for(s=t?[t]:c.keys(this._events),a=0,u=s.length;u>a;a++)if(t=s[a],n=this._events[t]){if(i=[],e||r)for(l=0,p=n.length;p>l;l++)o=n[l],(e&&e!==o.callback&&e!==o.callback._callback||r&&r!==o.context)&&i.push(o);this._events[t]=i}return this},trigger:function(t){if(!this._events)return this;var e=a.call(arguments,1);if(!d(this,"trigger",t,e))return this;var r=this._events[t],n=this._events.all;return r&&p(r,e),n&&p(n,arguments),this},listenTo:function(t,e,r){var n=this._listeners||(this._listeners={}),o=t._listenerId||(t._listenerId=c.uniqueId("l"));return n[o]=t,t.on(e,"object"==typeof e?this:r,this),this},stopListening:function(t,e,r){var n=this._listeners;if(n){if(t)t.off(e,"object"==typeof e?this:r,this),e||r||delete n[t._listenerId];else{"object"==typeof e&&(r=this);for(var o in n)n[o].off(e,r,this);this._listeners={}}return this}}};h.bind=h.on,h.unbind=h.off,c.extend(e,h);var m=e.Model=function(t,e){var r,n=t||{};this.cid=c.uniqueId("c"),this.attributes={},e&&e.collection&&(this.collection=e.collection),e&&e.parse&&(n=this.parse(n,e)||{}),(r=c.result(this,"defaults"))&&(n=c.defaults({},n,r)),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};c.extend(m.prototype,h,{changed:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return c.clone(this.attributes);
},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return c.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,r){var n,o,i,s,a,u,l,d;if(null==t)return this;if("object"==typeof t?(o=t,r=e):(o={})[t]=e,r||(r={}),!this._validate(o,r))return!1;i=r.unset,a=r.silent,s=[],u=this._changing,this._changing=!0,u||(this._previousAttributes=c.clone(this.attributes),this.changed={}),d=this.attributes,l=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]);for(n in o)e=o[n],c.isEqual(d[n],e)||s.push(n),c.isEqual(l[n],e)?delete this.changed[n]:this.changed[n]=e,i?delete d[n]:d[n]=e;if(!a){s.length&&(this._pending=!0);for(var p=0,h=s.length;h>p;p++)this.trigger("change:"+s[p],this,d[s[p]],r)}if(u)return this;if(!a)for(;this._pending;)this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,c.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var r in this.attributes)e[r]=void 0;return this.set(e,c.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!c.isEmpty(this.changed):c.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?c.clone(this.changed):!1;var e,r=!1,n=this._changing?this._previousAttributes:this.attributes;for(var o in t)c.isEqual(n[o],e=t[o])||((r||(r={}))[o]=e);return r},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return c.clone(this._previousAttributes)},fetch:function(t){t=t?c.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success;return t.success=function(t,r,n){return t.set(t.parse(r,n),n)?void(e&&e(t,r,n)):!1},this.sync("read",this,t)},save:function(t,e,r){var n,o,i,s,a=this.attributes;return null==t||"object"==typeof t?(n=t,r=e):(n={})[t]=e,!n||r&&r.wait||this.set(n,r)?(r=c.extend({validate:!0},r),this._validate(n,r)?(n&&r.wait&&(this.attributes=c.extend({},a,n)),void 0===r.parse&&(r.parse=!0),o=r.success,r.success=function(t,e,r){t.attributes=a;var i=t.parse(e,r);return r.wait&&(i=c.extend(n||{},i)),c.isObject(i)&&!t.set(i,r)?!1:void(o&&o(t,e,r))},i=this.isNew()?"create":r.patch?"patch":"update","patch"===i&&(r.attrs=n),s=this.sync(i,this,r),n&&r.wait&&(this.attributes=a),s):!1):!1},destroy:function(t){t=t?c.clone(t):{};var e=this,r=t.success,n=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(t,e,o){(o.wait||t.isNew())&&n(),r&&r(t,e,o)},this.isNew())return t.success(this,null,t),!1;var o=this.sync("delete",this,t);return t.wait||n(),o},url:function(){var t=c.result(this,"urlRoot")||c.result(this.collection,"url")||A();return this.isNew()?t:t+("/"===t.charAt(t.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(t){return!this.validate||!this.validate(this.attributes,t)},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=c.extend({},this.attributes,t);var r=this.validationError=this.validate(t,e)||null;return r?(this.trigger("invalid",this,r,e||{}),!1):!0}});var f=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this.models=[],this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,c.extend({silent:!0},e))};c.extend(f.prototype,h,{model:m,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){t=c.isArray(t)?t.slice():[t],e||(e={});var r,n,o,i,a,l,d,p,h,m;for(d=[],p=e.at,h=this.comparator&&null==p&&0!=e.sort,m=c.isString(this.comparator)?this.comparator:null,r=0,n=t.length;n>r;r++)(o=this._prepareModel(i=t[r],e))?(a=this.get(o))?e.merge&&(a.set(i===o?o.attributes:i,e),h&&!l&&a.hasChanged(m)&&(l=!0)):(d.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,null!=o.id&&(this._byId[o.id]=o)):this.trigger("invalid",this,i,e);if(d.length&&(h&&(l=!0),this.length+=d.length,null!=p?u.apply(this.models,[p,0].concat(d)):s.apply(this.models,d)),l&&this.sort({silent:!0}),e.silent)return this;for(r=0,n=d.length;n>r;r++)(o=d[r]).trigger("add",o,this,e);return l&&this.trigger("sort",this,e),this},remove:function(t,e){t=c.isArray(t)?t.slice():[t],e||(e={});var r,n,o,i;for(r=0,n=t.length;n>r;r++)i=this.get(t[r]),i&&(delete this._byId[i.id],delete this._byId[i.cid],o=this.indexOf(i),this.models.splice(o,1),this.length--,e.silent||(e.index=o,i.trigger("remove",i,this,e)),this._removeReference(i));return this},push:function(t,e){return t=this._prepareModel(t,e),this.add(t,c.extend({at:this.length},e)),t},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return t=this._prepareModel(t,e),this.add(t,c.extend({at:0},e)),t},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(t,e){return this.models.slice(t,e)},get:function(t){return null==t?void 0:(this._idAttr||(this._idAttr=this.model.prototype.idAttribute),this._byId[t.id||t.cid||t[this._idAttr]||t])},at:function(t){return this.models[t]},where:function(t){return c.isEmpty(t)?[]:this.filter(function(e){for(var r in t)if(t[r]!==e.get(r))return!1;return!0})},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),c.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(c.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return c.invoke(this.models,"get",t)},update:function(t,e){e=c.extend({add:!0,merge:!0,remove:!0},e),e.parse&&(t=this.parse(t,e));var r,n,o,i,s=[],a=[],u={};if(c.isArray(t)||(t=t?[t]:[]),e.add&&!e.remove)return this.add(t,e);for(n=0,o=t.length;o>n;n++)r=t[n],i=this.get(r),e.remove&&i&&(u[i.cid]=!0),(e.add&&!i||e.merge&&i)&&s.push(r);if(e.remove)for(n=0,o=this.models.length;o>n;n++)r=this.models[n],u[r.cid]||a.push(r);return a.length&&this.remove(a,e),s.length&&this.add(s,e),this},reset:function(t,e){e||(e={}),e.parse&&(t=this.parse(t,e));for(var r=0,n=this.models.length;n>r;r++)this._removeReference(this.models[r]);return e.previousModels=this.models.slice(),this._reset(),t&&this.add(t,c.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),this},fetch:function(t){t=t?c.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success;return t.success=function(t,r,n){var o=n.update?"update":"reset";t[o](r,n),e&&e(t,r,n)},this.sync("read",this,t)},create:function(t,e){if(e=e?c.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var r=this,n=e.success;return e.success=function(t,e,o){o.wait&&r.add(t,o),n&&n(t,e,o)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models.length=0,this._byId={}},_prepareModel:function(t,e){if(t instanceof m)return t.collection||(t.collection=this),t;e||(e={}),e.collection=this;var r=new this.model(t,e);return r._validate(t,e)?r:!1},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,r,n){("add"!==t&&"remove"!==t||r===this)&&("destroy"===t&&this.remove(e,n),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))},sortedIndex:function(t,e,r){e||(e=this.comparator);var n=c.isFunction(e)?e:function(t){return t.get(e)};return c.sortedIndex(this.models,t,n,r)}});var g=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];c.each(g,function(t){f.prototype[t]=function(){var e=a.call(arguments);return e.unshift(this.models),c[t].apply(c,e)}});var v=["groupBy","countBy","sortBy"];c.each(v,function(t){f.prototype[t]=function(e,r){var n=c.isFunction(e)?e:function(t){return t.get(e)};return c[t](this.models,n,r)}});var y=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},b=/\((.*?)\)/g,w=/(\(\?)?:\w+/g,_=/\*\w+/g,k=/[\-{}\[\]+?.,\\\^$|#\s]/g;c.extend(y.prototype,h,{initialize:function(){},route:function(t,r,n){return c.isRegExp(t)||(t=this._routeToRegExp(t)),n||(n=this[r]),e.history.route(t,c.bind(function(o){var i=this._extractParameters(t,o);n&&n.apply(this,i),this.trigger.apply(this,["route:"+r].concat(i)),this.trigger("route",r,i),e.history.trigger("route",this,r,i)},this)),this},navigate:function(t,r){return e.history.navigate(t,r),this},_bindRoutes:function(){if(this.routes)for(var t,e=c.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])},_routeToRegExp:function(t){return t=t.replace(k,"\\$&").replace(b,"(?:$1)?").replace(w,function(t,e){return e?t:"([^/]+)"}).replace(_,"(.*?)"),new RegExp("^"+t+"$")},_extractParameters:function(t,e){return t.exec(e).slice(1)}});var C=e.History=function(){this.handlers=[],c.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},x=/^[#\/]|\s+$/g,j=/^\/+|\/+$/g,S=/msie [\w.]+/,B=/\/$/;C.started=!1,c.extend(C.prototype,h,{interval:50,getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=this.location.pathname;var r=this.root.replace(B,"");t.indexOf(r)||(t=t.substr(r.length))}else t=this.getHash();return t.replace(x,"")},start:function(t){if(C.started)throw new Error("Backbone.history has already been started");C.started=!0,this.options=c.extend({},{root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var r=this.getFragment(),n=document.documentMode,o=S.exec(navigator.userAgent.toLowerCase())&&(!n||7>=n);this.root=("/"+this.root+"/").replace(j,"/"),o&&this._wantsHashChange&&(this.iframe=e.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(r)),this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!o?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=r;var i=this.location,s=i.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&s&&i.hash&&(this.fragment=this.getHash().replace(x,""),this.history.replaceState({},document.title,this.root+this.fragment+i.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),C.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),void(this.loadUrl()||this.loadUrl(this.getHash())))},loadUrl:function(t){var e=this.fragment=this.getFragment(t),r=c.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0});return r},navigate:function(t,e){if(!C.started)return!1;if(e&&e!==!0||(e={trigger:e}),t=this.getFragment(t||""),this.fragment!==t){this.fragment=t;var r=this.root+t;if(this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,r);else{if(!this._wantsHashChange)return this.location.assign(r);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}e.trigger&&this.loadUrl(t)}},_updateHash:function(t,e,r){if(r){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),e.history=new C;var M=e.View=function(t){this.cid=c.uniqueId("view"),this._configure(t||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},T=/^(\S+)\s*(.*)$/,O=["model","collection","el","id","attributes","className","tagName","events"];c.extend(M.prototype,h,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,r){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],r!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(t||(t=c.result(this,"events"))){this.undelegateEvents();for(var e in t){var r=t[e];if(c.isFunction(r)||(r=this[t[e]]),!r)throw new Error('Method "'+t[e]+'" does not exist');var n=e.match(T),o=n[1],i=n[2];r=c.bind(r,this),o+=".delegateEvents"+this.cid,""===i?this.$el.on(o,r):this.$el.on(o,i,r)}}},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid)},_configure:function(t){this.options&&(t=c.extend({},c.result(this,"options"),t)),c.extend(this,c.pick(t,O)),this.options=t},_ensureElement:function(){if(this.el)this.setElement(c.result(this,"el"),!1);else{var t=c.extend({},c.result(this,"attributes"));this.id&&(t.id=c.result(this,"id")),this.className&&(t.class=c.result(this,"className"));var r=e.$("<"+c.result(this,"tagName")+">").attr(t);this.setElement(r,!1)}}});var L={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};e.prepareData=function(t,e,r){return"create"==t||"update"==t||"patch"==t?JSON.stringify(e.toJSON(r)):null},e.sync=function(t,r,n){var o=L[t];c.defaults(n||(n={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var i={type:o,dataType:"json"};if(n.url||(i.url=c.result(r,"url")||A()),null==n.data&&r&&(i.contentType="application/json",i.data=e.prepareData(t,r,n)),n.emulateJSON&&(i.contentType="application/x-www-form-urlencoded",i.data=i.data?{model:i.data}:{}),n.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){i.type="POST",n.emulateJSON&&(i.data._method=o);var s=n.beforeSend;n.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",o),s?s.apply(this,arguments):void 0}}"GET"===i.type||n.emulateJSON||(i.processData=!1);var a=n.success;n.success=function(t){a&&a(r,t,n),r.trigger("sync",r,t,n)};var u=n.error;n.error=function(t){u&&u(r,t,n),r.trigger("error",r,t,n)};var l=n.xhr=e.ajax(c.extend(i,n));return r.trigger("request",r,l,n),l},e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var P=function(t,e){var r,n=this;r=t&&c.has(t,"constructor")?t.constructor:function(){return n.apply(this,arguments)},c.extend(r,n,e);var o=function(){this.constructor=r};return o.prototype=n.prototype,r.prototype=new o,t&&c.extend(r.prototype,t),r.__super__=n.prototype,r};m.extend=f.extend=y.extend=M.extend=C.extend=P;var A=function(){throw new Error('A "url" property or function must be specified')}}).call(this)},{}]},{},[37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52]);for(;t.length>0;){var n=t;t=[],n.forEach(function(t){t()})}
